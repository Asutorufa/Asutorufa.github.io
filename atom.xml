<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Asutorufaã®ãƒ–ãƒ­ã‚°</title>
  <icon>https://github.com/asutorufa.png</icon>
  <subtitle>ã“ã‚“ã«ã¡ã¯</subtitle>
  <link href="https://asutorufa.github.io/atom.xml" rel="self"/>
  
  <link href="https://asutorufa.github.io/"/>
  <updated>2025-02-23T22:30:31.000Z</updated>
  <id>https://asutorufa.github.io/</id>
  
  <author>
    <name>Asutorufa</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Kubernetesã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ä½œã‚ã†</title>
    <link href="https://asutorufa.github.io/posts/70902a01/"/>
    <id>https://asutorufa.github.io/posts/70902a01/</id>
    <published>2025-02-23T22:30:31.000Z</published>
    <updated>2025-02-23T22:30:31.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Kubernetesã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ã¯">Kubernetesã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ã¯</h2><p>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯Kubernetesã®ãƒªã‚½ãƒ¼ã‚¹è¨­å®šã‚’ç›£è¦–ã—ã¦å¤‰æ›´ãŒã‚ã£ãŸã‚‰è‡ªå‹•çš„ã«ãƒªã‚½ãƒ¼ã‚¹ã‚’èª¿æ•´ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚ã¡ãªã¿ã«ã€Deploymentã€Statefulsetã€DaemonSetãªã©ã¯Kubernetesã®å†…è”µã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã§ã™ã€‚</p><h2 id="ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’å®Ÿç¾">ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’å®Ÿç¾</h2><p>ä»Šå›ã¯Golangã§ç°¡å˜ãªLoadBalancerã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’å®Ÿç¾ã™ã‚‹ã€‚å®Ÿéš›ã®æ©Ÿèƒ½ã¯ãªã„ã§ã™ãŒã€ä½œæˆã®æµã‚Œã¯ãŸã ã—ã„ã¨æ€ã„ã¾ã™ã€‚</p><p>æœ€åˆã¯Typeã¯LoadBalancerã®Serviceã‚’ä½œæˆ</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>service<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> MyApp  <span class="token key atrule">ports</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>  <span class="token key atrule">clusterIP</span><span class="token punctuation">:</span> 10.0.171.239  <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ã“ã®æ™‚ã¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å‰²ã‚Šå½“ã¦ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãŒãªã„ã®ã§ã€Serviceã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯Pendingã§ã™ã€‚</p><p>æ–°ãŸãªKubernetesã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆ</p><span id="more"></span><pre class="line-numbers language-go" data-language="go"><code class="language-go">config<span class="token punctuation">,</span> err <span class="token operator">:=</span> rest<span class="token punctuation">.</span><span class="token function">InClusterConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>cli<span class="token punctuation">,</span> err <span class="token operator">:=</span> kubernetes<span class="token punctuation">.</span><span class="token function">NewForConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Serviceã®çŠ¶æ…‹ã‚’ç›£è¦–ã—ã¦</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">wch<span class="token punctuation">,</span> err <span class="token operator">:=</span> cli<span class="token punctuation">.</span><span class="token function">CoreV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Services</span><span class="token punctuation">(</span>corev1<span class="token punctuation">.</span>NamespaceAll<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Watch</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metav1<span class="token punctuation">.</span>ListOptions<span class="token punctuation">&#123;</span>Watch<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">defer</span> wch<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ä½œæˆã—ã¦ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’Serviceã«å‰²ã‚Šå½“ã¦ã‚‹ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// ãƒãƒ¼ãƒˆã®ç¯„å›²</span><span class="token keyword">var</span> portRange <span class="token operator">=</span> atomic<span class="token punctuation">.</span>Uint32<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> portRange<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">select</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">case</span> <span class="token operator">&lt;-</span>signChannel<span class="token punctuation">:</span>   <span class="token keyword">return</span>  <span class="token keyword">case</span> obj<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>wch<span class="token punctuation">.</span><span class="token function">ResultChan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span>   <span class="token punctuation">&#125;</span>   svc<span class="token punctuation">,</span> ok <span class="token operator">:=</span> obj<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>corev1<span class="token punctuation">.</span>Service<span class="token punctuation">)</span>   <span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">&#123;</span>    <span class="token keyword">continue</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">switch</span> obj<span class="token punctuation">.</span>Type <span class="token punctuation">&#123;</span>   <span class="token keyword">case</span> watch<span class="token punctuation">.</span>Added<span class="token punctuation">:</span>   <span class="token comment">// Serviceã®Typeã¯LoadBalancerã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã—ã¦</span>   <span class="token comment">// ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã«ã¯Annotationsã‚‚åˆ¤æ–­ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™</span>    <span class="token keyword">if</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>Type <span class="token operator">!=</span> corev1<span class="token punctuation">.</span>ServiceTypeLoadBalancer <span class="token punctuation">&#123;</span>     <span class="token keyword">continue</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¦ã€è»¢é€ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šã—ã¦</span>    <span class="token comment">// ã“ã“ã¯æœ¬å½“ã®è»¢é€ã§ã¯ãªãå‡ºåŠ›ã™ã‚‹ã ã‘</span>    sport <span class="token operator">:=</span> portRange<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token function">forward</span><span class="token punctuation">(</span>svc<span class="token punctuation">,</span> sport<span class="token punctuation">)</span>    <span class="token comment">// Serviceã«IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨­å®š</span>    svc<span class="token punctuation">.</span>Status<span class="token punctuation">.</span>LoadBalancer<span class="token punctuation">.</span>Ingress <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>corev1<span class="token punctuation">.</span>LoadBalancerIngress<span class="token punctuation">&#123;</span>     <span class="token punctuation">&#123;</span>      IP<span class="token punctuation">:</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">,</span>      Ports<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>corev1<span class="token punctuation">.</span>PortStatus<span class="token punctuation">&#123;</span>       <span class="token punctuation">&#123;</span>        Port<span class="token punctuation">:</span> <span class="token function">int32</span><span class="token punctuation">(</span>sport<span class="token punctuation">)</span><span class="token punctuation">,</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// Serviceã‚’æ›´æ–°ã—ã¦</span>    <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> cli<span class="token punctuation">.</span>     <span class="token function">CoreV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>     <span class="token function">Services</span><span class="token punctuation">(</span>svc<span class="token punctuation">.</span>Namespace<span class="token punctuation">)</span><span class="token punctuation">.</span>     <span class="token function">UpdateStatus</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> svc<span class="token punctuation">,</span> metav1<span class="token punctuation">.</span>UpdateOptions<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>     slog<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>     slog<span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">"service added"</span><span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Namespace<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIPs<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>   <span class="token keyword">case</span> watch<span class="token punctuation">.</span>Modified<span class="token punctuation">:</span>    slog<span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">"service modified"</span><span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Namespace<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIPs<span class="token punctuation">)</span>   <span class="token keyword">case</span> watch<span class="token punctuation">.</span>Deleted<span class="token punctuation">:</span>    slog<span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">"service deleted"</span><span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Namespace<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIPs<span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// ...</span><span class="token comment">// ...</span><span class="token comment">// è»¢é€ãƒ«ãƒ¼ãƒ«ã®ä½œæˆã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</span><span class="token keyword">func</span> <span class="token function">forward</span><span class="token punctuation">(</span>svc <span class="token operator">*</span>corev1<span class="token punctuation">.</span>Service<span class="token punctuation">,</span> sport <span class="token builtin">uint32</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> ip<span class="token punctuation">,</span> err <span class="token operator">:=</span> netip<span class="token punctuation">.</span><span class="token function">ParseAddr</span><span class="token punctuation">(</span>svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span> <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>Ports <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> ipt <span class="token builtin">string</span>  <span class="token keyword">var</span> mask <span class="token builtin">string</span>  <span class="token keyword">if</span> ip<span class="token punctuation">.</span><span class="token function">Is4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   ipt <span class="token operator">=</span> <span class="token string">"iptables"</span>   mask <span class="token operator">=</span> <span class="token string">"32"</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>   ipt <span class="token operator">=</span> <span class="token string">"ip6tables"</span>   mask <span class="token operator">=</span> <span class="token string">"128"</span>  <span class="token punctuation">&#125;</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>   ipt<span class="token punctuation">,</span> <span class="token string">"-t"</span><span class="token punctuation">,</span> <span class="token string">"filter"</span><span class="token punctuation">,</span> <span class="token string">"-A"</span><span class="token punctuation">,</span> <span class="token string">"FORWARD"</span><span class="token punctuation">,</span>   <span class="token string">"-d"</span><span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>mask<span class="token punctuation">,</span>   <span class="token string">"-p"</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token string">"--dport"</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>Port<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token string">"-j"</span><span class="token punctuation">,</span> <span class="token string">"DROP"</span><span class="token punctuation">,</span>  <span class="token punctuation">)</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>   ipt<span class="token punctuation">,</span> <span class="token string">"-t"</span><span class="token punctuation">,</span> <span class="token string">"nat"</span><span class="token punctuation">,</span> <span class="token string">"-I"</span><span class="token punctuation">,</span> <span class="token string">"PRETROUTING"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>   <span class="token string">"-p"</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token string">"--dport"</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>sport<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token string">"-j"</span><span class="token punctuation">,</span> <span class="token string">"DNAT"</span><span class="token punctuation">,</span>   <span class="token string">"--to"</span><span class="token punctuation">,</span> net<span class="token punctuation">.</span><span class="token function">JoinHostPort</span><span class="token punctuation">(</span>svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>Port<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">)</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>   ipt<span class="token punctuation">,</span> <span class="token string">"-t"</span><span class="token punctuation">,</span> <span class="token string">"nat"</span><span class="token punctuation">,</span> <span class="token string">"-I"</span><span class="token punctuation">,</span> <span class="token string">"POSTROUTING"</span><span class="token punctuation">,</span>   <span class="token string">"-d"</span><span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>mask<span class="token punctuation">,</span>   <span class="token string">"-p"</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>Protocol<span class="token punctuation">,</span>   <span class="token string">"-j"</span><span class="token punctuation">,</span> <span class="token string">"MASQUERADE"</span><span class="token punctuation">,</span>  <span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®Ÿè¡Œã™ã‚‹ãŸã‚‰Serviceã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯Pendingã§ã¯ãªããªã£ãŸã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚‚å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>service<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> MyApp  <span class="token key atrule">ports</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>  <span class="token key atrule">clusterIP</span><span class="token punctuation">:</span> 10.0.171.239  <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer<span class="token key atrule">status</span><span class="token punctuation">:</span>  <span class="token key atrule">loadBalancer</span><span class="token punctuation">:</span>    <span class="token key atrule">ingress</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">ip</span><span class="token punctuation">:</span> 10.0.171.239<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>k3sã®<a href="https://github.com/k3s-io/klipper-lb">klipper-lb</a>ã¯ç°¡å˜ãªLoadBalancerã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®å®Ÿç¾ã€ã‚³ãƒ¼ãƒ‰ã»ã‚“ã®æ•°è¡Œã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function-name function">start_proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token for-or-select variable">src_range</span> <span class="token keyword">in</span> <span class="token variable">$&#123;SRC_RANGES<span class="token operator">/</span><span class="token operator">/</span><span class="token operator">,</span><span class="token operator">/</span> &#125;</span><span class="token punctuation">;</span> <span class="token keyword">do</span>        <span class="token keyword">if</span> <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;src_range&#125;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-Eq</span> <span class="token string">":"</span><span class="token punctuation">;</span> <span class="token keyword">then</span>            ip6tables <span class="token parameter variable">-t</span> filter <span class="token parameter variable">-I</span> FORWARD <span class="token parameter variable">-s</span> <span class="token variable">$&#123;src_range&#125;</span> <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;DEST_PORT&#125;</span> <span class="token parameter variable">-j</span> ACCEPT        <span class="token keyword">else</span>            iptables <span class="token parameter variable">-t</span> filter <span class="token parameter variable">-I</span> FORWARD <span class="token parameter variable">-s</span> <span class="token variable">$&#123;src_range&#125;</span> <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;DEST_PORT&#125;</span> <span class="token parameter variable">-j</span> ACCEPT        <span class="token keyword">fi</span>    <span class="token keyword">done</span>    <span class="token keyword">for</span> <span class="token for-or-select variable">dest_ip</span> <span class="token keyword">in</span> <span class="token variable">$&#123;DEST_IPS<span class="token operator">/</span><span class="token operator">/</span><span class="token operator">,</span><span class="token operator">/</span> &#125;</span><span class="token punctuation">;</span> <span class="token keyword">do</span>        <span class="token keyword">if</span> <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;dest_ip&#125;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-Eq</span> <span class="token string">":"</span><span class="token punctuation">;</span> <span class="token keyword">then</span>            <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /proc/sys/net/ipv6/conf/all/forwarding<span class="token variable">)</span></span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>            ip6tables <span class="token parameter variable">-t</span> filter <span class="token parameter variable">-A</span> FORWARD <span class="token parameter variable">-d</span> <span class="token variable">$&#123;dest_ip&#125;</span>/128 <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;DEST_PORT&#125;</span> <span class="token parameter variable">-j</span> DROP            ip6tables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-I</span> PREROUTING <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;SRC_PORT&#125;</span> <span class="token parameter variable">-j</span> DNAT <span class="token parameter variable">--to</span> <span class="token punctuation">[</span><span class="token variable">$&#123;dest_ip&#125;</span><span class="token punctuation">]</span>:<span class="token variable">$&#123;DEST_PORT&#125;</span>            ip6tables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-I</span> POSTROUTING <span class="token parameter variable">-d</span> <span class="token variable">$&#123;dest_ip&#125;</span>/128 <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">-j</span> MASQUERADE        <span class="token keyword">else</span>            <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /proc/sys/net/ipv4/ip_forward<span class="token variable">)</span></span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>            iptables <span class="token parameter variable">-t</span> filter <span class="token parameter variable">-A</span> FORWARD <span class="token parameter variable">-d</span> <span class="token variable">$&#123;dest_ip&#125;</span>/32 <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;DEST_PORT&#125;</span> <span class="token parameter variable">-j</span> DROP            iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-I</span> PREROUTING <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;SRC_PORT&#125;</span> <span class="token parameter variable">-j</span> DNAT <span class="token parameter variable">--to</span> <span class="token variable">$&#123;dest_ip&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;DEST_PORT&#125;</span>            iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-I</span> POSTROUTING <span class="token parameter variable">-d</span> <span class="token variable">$&#123;dest_ip&#125;</span>/32 <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">-j</span> MASQUERADE        <span class="token keyword">fi</span>    <span class="token keyword">done</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Kubernetesã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ã¯&quot;&gt;Kubernetesã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ã¯&lt;/h2&gt;
&lt;p&gt;ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯Kubernetesã®ãƒªã‚½ãƒ¼ã‚¹è¨­å®šã‚’ç›£è¦–ã—ã¦å¤‰æ›´ãŒã‚ã£ãŸã‚‰è‡ªå‹•çš„ã«ãƒªã‚½ãƒ¼ã‚¹ã‚’èª¿æ•´ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚ã¡ãªã¿ã«ã€Deploymentã€Statefulsetã€DaemonSetãªã©ã¯Kubernetesã®å†…è”µã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’å®Ÿç¾&quot;&gt;ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’å®Ÿç¾&lt;/h2&gt;
&lt;p&gt;ä»Šå›ã¯Golangã§ç°¡å˜ãªLoadBalancerã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’å®Ÿç¾ã™ã‚‹ã€‚å®Ÿéš›ã®æ©Ÿèƒ½ã¯ãªã„ã§ã™ãŒã€ä½œæˆã®æµã‚Œã¯ãŸã ã—ã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åˆã¯Typeã¯LoadBalancerã®Serviceã‚’ä½œæˆ&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-yaml&quot; data-language=&quot;yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; v1
&lt;span class=&quot;token key atrule&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Service
&lt;span class=&quot;token key atrule&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; my&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;service
&lt;span class=&quot;token key atrule&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;app.kubernetes.io/name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; MyApp
  &lt;span class=&quot;token key atrule&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; TCP
      &lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;targetPort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;clusterIP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10.0.171.239
  &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; LoadBalancer&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ã“ã®æ™‚ã¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å‰²ã‚Šå½“ã¦ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãŒãªã„ã®ã§ã€Serviceã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯Pendingã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;æ–°ãŸãªKubernetesã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆ&lt;/p&gt;</summary>
    
    
    
    <category term="Kubernetes" scheme="https://asutorufa.github.io/categories/Kubernetes/"/>
    
    
    <category term="Kubernetes" scheme="https://asutorufa.github.io/tags/Kubernetes/"/>
    
    <category term="CRI" scheme="https://asutorufa.github.io/tags/CRI/"/>
    
    <category term="container" scheme="https://asutorufa.github.io/tags/container/"/>
    
  </entry>
  
  <entry>
    <title>UDPãƒ—ãƒ­ã‚­ã‚·ã¯Fullcone NATã‚’å®Ÿç¾ã™ã‚‹</title>
    <link href="https://asutorufa.github.io/posts/4893f166/"/>
    <id>https://asutorufa.github.io/posts/4893f166/</id>
    <published>2024-11-18T19:49:40.000Z</published>
    <updated>2024-11-18T19:49:40.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="NATã®ç¨®é¡">NATã®ç¨®é¡</h2><h3 id="Mappingã®ç¨®é¡">Mappingã®ç¨®é¡</h3><p>ãƒãƒƒãƒ”ãƒ³ã‚°ã¯NATå†…éƒ¨ã‹ã‚‰å¤–éƒ¨ã«ãƒ‘ã‚±ãƒƒãƒˆã‚’é€ä¿¡æ™‚ã«ã‚¢ãƒ‰ãƒ¬ã‚¹å¤‰æ›ã™ã‚‹è¡Œç‚ºã§ã™ã€‚</p><ul><li>Endpoint-Independent Mapping</li></ul><p>NATå†…éƒ¨ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®åŒã˜IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆã§å¤–éƒ¨ã®ãã‚Œãã‚Œã®UDPã‚µãƒ¼ãƒï¼ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆãŒé•ã†ï¼‰ã«ãƒ‘ã‚±ãƒƒãƒˆã‚’é€ä¿¡ã™ã‚‹ã¨ã€å„å€‹UDPã‚µãƒ¼ãƒã‚‚åŒã˜IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆã®ãƒ‘ã‚±ãƒƒãƒˆã‚’å—ä¿¡ã™ã‚‹ã€‚<br>ä¾‹ãˆã°ï¼š</p><table><thead><tr><th style="text-align:center">é€ä¿¡å…ƒã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">å®›å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">NATãƒãƒƒãƒ”ãƒ³ã‚°ã‚¢ãƒ‰ãƒ¬ã‚¹</th></tr></thead><tbody><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center">1.1.1.1:3000</td><td style="text-align:center">43.124.222.234:4500</td></tr><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center">1.1.1.1:<strong>3001</strong></td><td style="text-align:center">43.124.222.234:4500</td></tr><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center"><strong>1.1.1.3</strong>:<strong>3002</strong></td><td style="text-align:center">43.124.222.234:4500</td></tr><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center"><strong>1.1.1.4</strong>:<strong>3004</strong></td><td style="text-align:center">43.124.222.234:4500</td></tr></tbody></table><!-- å®›å…ˆã€€ã‚ã¦ã•ãã€€targetå„å€‹ã€€ã‹ã£ã“å—ä¿¡ã€€ã˜ã‚…ã—ã‚“ä¸”ã¤ã€€ã‹ã¤https://medium.com/google-cloud-jp/cloud-nat-endpoint-independent-mapping-39d7eab3e83chttps://tech.zms.co.jp/nat%E3%81%82%E3%82%8C%E3%81%93%E3%82%8C/ --><ul><li>Address-Dependent Mapping</li></ul><p>UDPã‚µãƒ¼ãƒã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒåŒã˜ï¼ˆãƒãƒ¼ãƒˆãŒé•ã†ï¼‰ãªã‚‰å—ä¿¡ã—ãŸãƒ‘ã‚±ãƒƒãƒˆã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆã‚’å¤‰æ›ã—ãªã„ã€ãã†ã—ãªã„ã¨ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„ãƒãƒ¼ãƒˆã‚’å¤‰æ›ã™ã‚‹ã€‚<br>ä¾‹ãˆã°ï¼š</p><table><thead><tr><th style="text-align:center">é€ä¿¡å…ƒã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">å®›å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">NATãƒãƒƒãƒ”ãƒ³ã‚°ã‚¢ãƒ‰ãƒ¬ã‚¹</th></tr></thead><tbody><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center">1.1.1.1:3000</td><td style="text-align:center">43.124.222.234:4500</td></tr><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center">1.1.1.1:<strong>3001</strong></td><td style="text-align:center">43.124.222.234:4500</td></tr><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center"><strong>1.1.1.2</strong>:3000</td><td style="text-align:center">43.124.222.234:<strong>4501</strong></td></tr><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center"><strong>1.1.1.3</strong>:<strong>3003</strong></td><td style="text-align:center">43.124.222.234:<strong>4502</strong></td></tr></tbody></table><ul><li>Address and Port-Dependent Mapping</li></ul><p>UDPã‚µãƒ¼ãƒã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆãŒåŒã˜ãªã‚‰å—ä¿¡ã—ãŸãƒ‘ã‚±ãƒƒãƒˆã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆã‚’å¤‰æ›ã—ãªã„ã€ãã†ã—ãªã„ã¨ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„ãƒãƒ¼ãƒˆã‚’å¤‰æ›ã™ã‚‹ã€‚</p><span id="more"></span><p>ä¾‹ãˆã°ï¼š</p><table><thead><tr><th style="text-align:center">é€ä¿¡å…ƒã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">å®›å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">NATãƒãƒƒãƒ”ãƒ³ã‚°ã‚¢ãƒ‰ãƒ¬ã‚¹</th></tr></thead><tbody><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center">1.1.1.1:3000</td><td style="text-align:center">43.124.222.234:4500</td></tr><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center">1.1.1.1:3000</td><td style="text-align:center">43.124.222.234:4500</td></tr><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center">1.1.1.1:<strong>3001</strong></td><td style="text-align:center">43.124.222.234:<strong>4501</strong></td></tr><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center"><strong>1.1.1.2</strong>:3000</td><td style="text-align:center">43.124.222.234:<strong>4502</strong></td></tr><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center"><strong>1.1.1.3</strong>:<strong>3003</strong></td><td style="text-align:center">43.124.222.234:<strong>4503</strong></td></tr></tbody></table><h3 id="Filteringã®ç¨®é¡">Filteringã®ç¨®é¡</h3><p>ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¯NATå¤–éƒ¨ã‹ã‚‰å†…éƒ¨ã«é€ä¿¡ã™ã‚‹ãƒ‘ã‚±ãƒƒãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹è¡Œç‚ºã§ã™ã€‚</p><ul><li>Endpoint-Independent Filtering</li></ul><p>ä¸€æ—¦å†…éƒ¨ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å¤–éƒ¨ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã¨ã€å…¨ã¦ã®å¤–éƒ¨ã‚µãƒ¼ãƒã‹ã‚‰å†…éƒ¨ã«é€ä¿¡ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚<br>ä¾‹ãˆã°ï¼š</p><table><thead><tr><th style="text-align:center">å†…éƒ¨ã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">ãƒãƒƒãƒ”ãƒ³ã‚°</th></tr></thead><tbody><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center">43.124.222.234:4500</td></tr></tbody></table><table><thead><tr><th style="text-align:center">é€ä¿¡å…ƒã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">å®›å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">å—ä¿¡ã™ã‚‹?</th></tr></thead><tbody><tr><td style="text-align:center">1.1.1.1:3000</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ã¯ã„ ğŸŸ¢</td></tr><tr><td style="text-align:center">1.1.1.1:3001</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ã¯ã„ ğŸŸ¢</td></tr><tr><td style="text-align:center">1.1.1.2:3000</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ã¯ã„ ğŸŸ¢</td></tr><tr><td style="text-align:center">1.1.1.3:3002</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ã¯ã„ ğŸŸ¢</td></tr></tbody></table><ul><li>Address-Dependent Filtering</li></ul><p>å†…éƒ¨ã‹ã‚‰å¤–éƒ¨ã«é€ä¿¡ã—ãŸã‚µãƒ¼ãƒã€ä¸”ã¤ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚‚åŒã˜ãªã‚‰ã€ã‚µãƒ¼ãƒã‹ã‚‰å†…éƒ¨ã«é€ä¿¡ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚<br>ä¾‹ãˆã°ï¼š</p><table><thead><tr><th style="text-align:center">å†…éƒ¨ã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">ãƒãƒƒãƒ”ãƒ³ã‚°</th><th style="text-align:center">é€ä¿¡æ­´å² å®›å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹</th></tr></thead><tbody><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">1.1.1.1:3000</td></tr></tbody></table><table><thead><tr><th style="text-align:center">é€ä¿¡å…ƒã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">å®›å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">å—ä¿¡ã™ã‚‹?</th></tr></thead><tbody><tr><td style="text-align:center">1.1.1.1:3000</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ã¯ã„ ğŸŸ¢</td></tr><tr><td style="text-align:center">1.1.1.1:3001</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ã¯ã„ ğŸŸ¢</td></tr><tr><td style="text-align:center">1.1.1.2:3000</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ãƒ€ãƒ¡ âŒ</td></tr><tr><td style="text-align:center">1.1.1.3:3002</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ãƒ€ãƒ¡ âŒ</td></tr></tbody></table><ul><li>Address and Port-Dependent Filtering</li></ul><p>å†…éƒ¨ã‹ã‚‰å¤–éƒ¨ã«é€ä¿¡ã—ãŸã‚µãƒ¼ãƒã€ä¸”ã¤ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆã‚‚åŒã˜ãªã‚‰ã€ã‚µãƒ¼ãƒã‹ã‚‰å†…éƒ¨ã«é€ä¿¡ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p><p>ä¾‹ãˆã°ï¼š</p><table><thead><tr><th style="text-align:center">å†…éƒ¨ã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">ãƒãƒƒãƒ”ãƒ³ã‚°</th><th style="text-align:center">é€ä¿¡æ­´å² å®›å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹</th></tr></thead><tbody><tr><td style="text-align:center">192.168.1.1:3000</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">1.1.1.1:3000</td></tr></tbody></table><table><thead><tr><th style="text-align:center">é€ä¿¡å…ƒã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">å®›å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹</th><th style="text-align:center">å—ä¿¡ã™ã‚‹?</th></tr></thead><tbody><tr><td style="text-align:center">1.1.1.1:3000</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ã¯ã„ ğŸŸ¢</td></tr><tr><td style="text-align:center">1.1.1.1:3001</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ãƒ€ãƒ¡ âŒ</td></tr><tr><td style="text-align:center">1.1.1.2:3000</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ãƒ€ãƒ¡ âŒ</td></tr><tr><td style="text-align:center">1.1.1.3:3002</td><td style="text-align:center">43.124.222.234:4500</td><td style="text-align:center">ãƒ€ãƒ¡ âŒ</td></tr></tbody></table><h3 id="Fullcone-NAT">Fullcone NAT</h3><p>Fullcone NATã¯Endpoint-Independent Filteringã¨Endpoint-Independent Mappingã§ã™ã€‚</p><h2 id="goã§å®Ÿç¾ã™ã‚‹">goã§å®Ÿç¾ã™ã‚‹</h2><p>æœ€ã‚‚é‡è¦ãªã®ã¯NATãƒ†ãƒ¼ãƒ–ãƒ«ã®å®Ÿç¾ã§ã™ã€‚</p><!-- å€¤ã€€ã¡é‡è¦ã€€ã˜ã‚…ã†ã‚ˆã† --><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// NATãƒ†ãƒ¼ãƒ–ãƒ«</span><span class="token comment">// ã‚­ãƒ¼ã¯ãƒ—ãƒ­ã‚­ã‚·ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®é€ä¿¡å…ƒã‚¢ãƒ‰ãƒ¬ã‚¹</span><span class="token comment">// å€¤ã¯ãƒãƒƒãƒ”ãƒ³ã‚°ã—ãŸUDPã‚µãƒ¼ãƒ</span><span class="token keyword">var</span> natTable <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>net<span class="token punctuation">.</span>PacketConn<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> getTargetAddress <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>net<span class="token punctuation">.</span>UDPAddr<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// TODO implement proxy protocol</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> <span class="token boolean">nil</span> <span class="token punctuation">&#125;</span><span class="token keyword">var</span> packetResponse <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>net<span class="token punctuation">.</span>Addr<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// TODO implement proxy protocol</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">&#125;</span><span class="token comment">// mockã®UDPãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒ</span>pc<span class="token punctuation">,</span> err <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">ListenPacket</span><span class="token punctuation">(</span><span class="token string">"udp"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">defer</span> pc<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// IPãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«ã‚ˆã£ã¦ãƒ‘ã‚±ãƒƒãƒˆæœ€å¤§ã¯65535ã§ã™ã€‚</span>  buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">65535</span><span class="token punctuation">)</span>  n<span class="token punctuation">,</span> addr<span class="token punctuation">,</span> err <span class="token operator">:=</span> pc<span class="token punctuation">.</span><span class="token function">ReadFrom</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>   <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒãƒƒãƒ”ãƒ³ã‚°ã‚µãƒ¼ãƒã‚’ä¿å­˜ã—ã¦</span>  conn<span class="token punctuation">,</span> ok <span class="token operator">:=</span> natTable<span class="token punctuation">[</span>addr<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">&#123;</span>   <span class="token comment">// ãƒãƒƒãƒ”ãƒ³ã‚°ã‚µãƒ¼ãƒã‚’ä½œã‚Šã¾ã™</span>   conn<span class="token punctuation">,</span> err <span class="token operator">=</span> net<span class="token punctuation">.</span><span class="token function">ListenPacket</span><span class="token punctuation">(</span><span class="token string">"udp"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>   <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">defer</span> conn<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> <span class="token punctuation">&#123;</span>     buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">65535</span><span class="token punctuation">)</span>     <span class="token comment">// ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒ(target)ã®è¿”ä¿¡ã‚’å—ä¿¡ã™ã‚‹</span>     n<span class="token punctuation">,</span> src<span class="token punctuation">,</span> err <span class="token operator">:=</span> conn<span class="token punctuation">.</span><span class="token function">ReadFrom</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>     <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>      <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>     <span class="token punctuation">&#125;</span>     <span class="token comment">// ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«è¿”ä¿¡ã—ã¦</span>     <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> pc<span class="token punctuation">.</span><span class="token function">WriteTo</span><span class="token punctuation">(</span><span class="token function">packetResponse</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> addr<span class="token punctuation">)</span>     <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>      <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>     <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// åˆã‚ã¦ãƒãƒƒãƒ”ãƒ³ã‚°ã‚µãƒ¼ãƒã‚’NATãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ã—ã¦</span>   natTable<span class="token punctuation">[</span>addr<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> conn  <span class="token punctuation">&#125;</span>  target<span class="token punctuation">,</span> remain <span class="token operator">:=</span> <span class="token function">getTargetAddress</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">// ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ã¦</span>  <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">WriteTo</span><span class="token punctuation">(</span>remain<span class="token punctuation">,</span> target<span class="token punctuation">)</span>  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>   <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;NATã®ç¨®é¡&quot;&gt;NATã®ç¨®é¡&lt;/h2&gt;
&lt;h3 id=&quot;Mappingã®ç¨®é¡&quot;&gt;Mappingã®ç¨®é¡&lt;/h3&gt;
&lt;p&gt;ãƒãƒƒãƒ”ãƒ³ã‚°ã¯NATå†…éƒ¨ã‹ã‚‰å¤–éƒ¨ã«ãƒ‘ã‚±ãƒƒãƒˆã‚’é€ä¿¡æ™‚ã«ã‚¢ãƒ‰ãƒ¬ã‚¹å¤‰æ›ã™ã‚‹è¡Œç‚ºã§ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Endpoint-Independent Mapping&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;NATå†…éƒ¨ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®åŒã˜IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆã§å¤–éƒ¨ã®ãã‚Œãã‚Œã®UDPã‚µãƒ¼ãƒï¼ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆãŒé•ã†ï¼‰ã«ãƒ‘ã‚±ãƒƒãƒˆã‚’é€ä¿¡ã™ã‚‹ã¨ã€å„å€‹UDPã‚µãƒ¼ãƒã‚‚åŒã˜IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆã®ãƒ‘ã‚±ãƒƒãƒˆã‚’å—ä¿¡ã™ã‚‹ã€‚&lt;br&gt;
ä¾‹ãˆã°ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;é€ä¿¡å…ƒã‚¢ãƒ‰ãƒ¬ã‚¹&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å®›å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;NATãƒãƒƒãƒ”ãƒ³ã‚°ã‚¢ãƒ‰ãƒ¬ã‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;192.168.1.1:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1.1.1.1:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;43.124.222.234:4500&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;192.168.1.1:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1.1.1.1:&lt;strong&gt;3001&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;43.124.222.234:4500&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;192.168.1.1:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;strong&gt;1.1.1.3&lt;/strong&gt;:&lt;strong&gt;3002&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;43.124.222.234:4500&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;192.168.1.1:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;strong&gt;1.1.1.4&lt;/strong&gt;:&lt;strong&gt;3004&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;43.124.222.234:4500&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;!-- 
å®›å…ˆã€€ã‚ã¦ã•ãã€€target
å„å€‹ã€€ã‹ã£ã“
å—ä¿¡ã€€ã˜ã‚…ã—ã‚“
ä¸”ã¤ã€€ã‹ã¤

https://medium.com/google-cloud-jp/cloud-nat-endpoint-independent-mapping-39d7eab3e83c
https://tech.zms.co.jp/nat%E3%81%82%E3%82%8C%E3%81%93%E3%82%8C/
 --&gt;
&lt;ul&gt;
&lt;li&gt;Address-Dependent Mapping&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;UDPã‚µãƒ¼ãƒã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒåŒã˜ï¼ˆãƒãƒ¼ãƒˆãŒé•ã†ï¼‰ãªã‚‰å—ä¿¡ã—ãŸãƒ‘ã‚±ãƒƒãƒˆã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆã‚’å¤‰æ›ã—ãªã„ã€ãã†ã—ãªã„ã¨ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„ãƒãƒ¼ãƒˆã‚’å¤‰æ›ã™ã‚‹ã€‚&lt;br&gt;
ä¾‹ãˆã°ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;é€ä¿¡å…ƒã‚¢ãƒ‰ãƒ¬ã‚¹&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å®›å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;NATãƒãƒƒãƒ”ãƒ³ã‚°ã‚¢ãƒ‰ãƒ¬ã‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;192.168.1.1:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1.1.1.1:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;43.124.222.234:4500&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;192.168.1.1:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1.1.1.1:&lt;strong&gt;3001&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;43.124.222.234:4500&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;192.168.1.1:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;strong&gt;1.1.1.2&lt;/strong&gt;:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;43.124.222.234:&lt;strong&gt;4501&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;192.168.1.1:3000&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;strong&gt;1.1.1.3&lt;/strong&gt;:&lt;strong&gt;3003&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;43.124.222.234:&lt;strong&gt;4502&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;Address and Port-Dependent Mapping&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;UDPã‚µãƒ¼ãƒã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆãŒåŒã˜ãªã‚‰å—ä¿¡ã—ãŸãƒ‘ã‚±ãƒƒãƒˆã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆã‚’å¤‰æ›ã—ãªã„ã€ãã†ã—ãªã„ã¨ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„ãƒãƒ¼ãƒˆã‚’å¤‰æ›ã™ã‚‹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="UDP" scheme="https://asutorufa.github.io/tags/UDP/"/>
    
    <category term="Network" scheme="https://asutorufa.github.io/tags/Network/"/>
    
    <category term="NAT" scheme="https://asutorufa.github.io/tags/NAT/"/>
    
    <category term="Golang" scheme="https://asutorufa.github.io/tags/Golang/"/>
    
    <category term="Proxy" scheme="https://asutorufa.github.io/tags/Proxy/"/>
    
    <category term="Go" scheme="https://asutorufa.github.io/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>golangã¨ollamaã§function calling</title>
    <link href="https://asutorufa.github.io/posts/23567986/"/>
    <id>https://asutorufa.github.io/posts/23567986/</id>
    <published>2024-11-11T19:11:06.000Z</published>
    <updated>2024-11-11T19:11:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå›ã¯ollamaã®ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§funcation callingã‚’ä½¿ã„ãŸã„ã§ã™ã€‚ã€€ã€€<br>å‰å›ã¯langchaingoã§ä½¿ã£ãŸã ã‘ã¨ã€è©¦ã—ã¦ãŸã‚‰ollamaã®å¼•æ•°toolsã¯ç„¡åŠ¹ã§ã™ã€githubã®å®Ÿä¾‹<a href="https://github.com/tmc/langchaingo/blob/main/examples/ollama-functions-example/ollama_functions_example.go">ollama_functions_example</a>ã¯system messageã¨toolsã®jsonã‚’çµ„ã¿åˆã‚ã›ã¦å†…å®¹ã‚’ç”Ÿæˆã™ã‚‹ã€‚ä¾‹ãˆã°ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">systemMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">&#123;</span> bs<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>functions<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">`You have access to the following tools:%sTo use a tool, respond with a JSON object with the following structure: &#123; "tool": &lt;name of the called tool>, "tool_input": &lt;parameters for the tool matching the above JSON schema>&#125;`</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ã“ã‚Œã¯ã¡ã‚‡ã£ã¨å„ªé›…ã§ãªã„ã€<code>ollama/api</code>ã‚’ä½¿ã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="function-callingã¨ã¯">function callingã¨ã¯</h2><span id="more"></span><p>llmã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒå¤–éƒ¨é–¢æ•°ã®å‘¼ã³å‡ºã—ã‚’æ¤œçŸ¥ã—ã€é–¢æ•°ã®çµæœã‚’çµ„ã¿åˆã‚ã›ã¦å†…å®¹ã‚’ç”Ÿæˆã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚ã€€ã€€<br>ä¾‹ãˆã°ï¼šã€Œæ±äº¬ã®å¤©æ°—ã¯ï¼Ÿã€ã¯promptã‚’ã¨ã—ã¦ã€ã€Œæ™´ã‚Œã§ã™ã€ã¨ç”Ÿæˆã™ã‚‹ã€‚ã€€ã€€<br>å¤§å‹¢ã®llmã¯function callingã‚’toolã¨èª­ã‚“ã§ã„ã‚‹ã€å‘¼ã³å‡ºã—ã©ãå¼•æ•°ã¨ã—ã¦å¼•ãæ¸¡ã—ã¦å†…å®¹ã‚’ç”Ÿæˆã™ã‚‹ã€‚</p><!-- primjs can't support exclude languages,so we direct use hexo tag system --><pre><code class="mermaid">sequenceDiagramactor ãƒ¦ãƒ¼ã‚¶ãƒ¦ãƒ¼ã‚¶-&gt;&gt;ã‚µãƒ¼ãƒãƒ¼: æ±äº¬ã®å¤©æ°—ã¯ï¼Ÿã‚µãƒ¼ãƒãƒ¼-&gt;&gt;llm: promptã¨toolsllm--)ã‚µãƒ¼ãƒãƒ¼: é–¢æ•°ã‚’å‘¼ã³å‡ºã—&lt;br&#x2F;&gt;å¼•æ•°ï¼ˆæ±äº¬ï¼‰ã‚’è¿”ã™ã‚µãƒ¼ãƒãƒ¼-&gt;&gt;å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹: æ±äº¬ã®å¤©æ°—ã‚’å–å¾—å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹--)ã‚µãƒ¼ãƒãƒ¼: å¤©æ°—ã‚’è¿”ã™ã‚µãƒ¼ãƒãƒ¼-&gt;&gt;llm: å¤©æ°—ã‚’promptã«è¿½åŠ llm--&gt;&gt;ã‚µãƒ¼ãƒãƒ¼: ç”Ÿæˆã™ã‚‹å†…å®¹ã‚’è¿”ã™ã‚µãƒ¼ãƒãƒ¼-&gt;&gt;ãƒ¦ãƒ¼ã‚¶: å†…å®¹ã‚’è¿”ã™</code></pre><!-- å–å¾—ï¼šã—ã‚…ã¨ã --><h2 id="goã§å®Ÿç¾">goã§å®Ÿç¾</h2><p>é–¢æ•°ã¨å¼•æ•°ã®èª¬æ˜(Description)ã¯è‡ªç„¶ãªè¨€è‘‰ã§è‰¯ã„ã§ã™ã€ä¸€èˆ¬çš„ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨ã¯ã¡ã‚‡ã£ã¨é•ã†ã¨æ€ã„ã¾ã™ã€‚</p><p>toolsã®å®šç¾©</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">import</span> <span class="token string">"github.com/ollama/ollama/api"</span>tools <span class="token operator">:=</span> api<span class="token punctuation">.</span>Tool<span class="token punctuation">&#123;</span>      Type<span class="token punctuation">:</span> <span class="token string">"function"</span><span class="token punctuation">,</span>      Function<span class="token punctuation">:</span> api<span class="token punctuation">.</span>ToolFunction<span class="token punctuation">&#123;</span>       Name<span class="token punctuation">:</span>        <span class="token string">"getCurrentWeather"</span><span class="token punctuation">,</span>       Description<span class="token punctuation">:</span> <span class="token string">"Get the current weather for a city"</span><span class="token punctuation">,</span>       Parameters<span class="token punctuation">:</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>        Type       <span class="token builtin">string</span>   <span class="token string">"json:\"type\""</span>        Required   <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">"json:\"required\""</span>        Properties <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>         Type        <span class="token builtin">string</span>   <span class="token string">"json:\"type\""</span>         Description <span class="token builtin">string</span>   <span class="token string">"json:\"description\""</span>         Enum        <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">"json:\"enum,omitempty\""</span>        <span class="token punctuation">&#125;</span> <span class="token string">"json:\"properties\""</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>        Type<span class="token punctuation">:</span>     <span class="token string">"object"</span><span class="token punctuation">,</span>        Required<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span><span class="token string">"city"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        Properties<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>         Type        <span class="token builtin">string</span>   <span class="token string">"json:\"type\""</span>         Description <span class="token builtin">string</span>   <span class="token string">"json:\"description\""</span>         Enum        <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">"json:\"enum,omitempty\""</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>         <span class="token string">"city"</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>          Type<span class="token punctuation">:</span>        <span class="token string">"string"</span><span class="token punctuation">,</span>          Description<span class="token punctuation">:</span> <span class="token string">"The city to get the weather for"</span><span class="token punctuation">,</span>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>     <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®å‘¼ã³å‡ºã—ã‚’å®Ÿç¾</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">processToolCall <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>cr api<span class="token punctuation">.</span>Chat<span class="token punctuation">.</span>Response<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> cr<span class="token punctuation">.</span>Message<span class="token punctuation">.</span>ToolCalls <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> v<span class="token punctuation">.</span>Function<span class="token punctuation">.</span>Name <span class="token operator">==</span> <span class="token string">"getCurrentWeather"</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"the weather of %v is 64 and sunny"</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>Function<span class="token punctuation">.</span>Arguments<span class="token punctuation">[</span><span class="token string">"city"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>      <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span>ErrUnsupported<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>chains ã‚’å®Ÿç¾</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">uri<span class="token punctuation">,</span> err <span class="token operator">:=</span> url<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">"http://localhost:11434"</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>client <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">NewClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span> <span class="token operator">&amp;</span>http<span class="token punctuation">.</span>Client<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>messages <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Message<span class="token punctuation">&#123;</span>  <span class="token punctuation">&#123;</span>   Role<span class="token punctuation">:</span>    <span class="token string">"user"</span><span class="token punctuation">,</span>   Content<span class="token punctuation">:</span> prompt<span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>ctx <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>err <span class="token operator">:=</span> o<span class="token punctuation">.</span>llm<span class="token punctuation">.</span><span class="token function">Chat</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span>  <span class="token operator">&amp;</span>api<span class="token punctuation">.</span>ChatRequest<span class="token punctuation">&#123;</span>   Model<span class="token punctuation">:</span>    <span class="token string">"qwen2.5:32b-instruct"</span><span class="token punctuation">,</span>   Stream<span class="token punctuation">:</span>   lo<span class="token punctuation">.</span><span class="token function">ToPtr</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   Messages<span class="token punctuation">:</span> messages<span class="token punctuation">,</span>   Options<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>    <span class="token string">"temperature"</span><span class="token punctuation">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>   Tools<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Tool<span class="token punctuation">&#123;</span>tools<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token keyword">func</span><span class="token punctuation">(</span>cr api<span class="token punctuation">.</span>ChatResponse<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">&#123;</span>      msg<span class="token punctuation">,</span>err <span class="token operator">:=</span> <span class="token function">processToolCall</span><span class="token punctuation">(</span>cr<span class="token punctuation">)</span>      <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> err      <span class="token punctuation">&#125;</span>     messages <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>messages<span class="token punctuation">,</span> api<span class="token punctuation">.</span>Message<span class="token punctuation">&#123;</span>      Role<span class="token punctuation">:</span>    <span class="token string">"tool"</span><span class="token punctuation">,</span>      Content<span class="token punctuation">:</span> msg<span class="token punctuation">,</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>   <span class="token keyword">return</span> <span class="token boolean">nil</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>err <span class="token operator">=</span> o<span class="token punctuation">.</span>llm<span class="token punctuation">.</span><span class="token function">Chat</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span>  <span class="token operator">&amp;</span>api<span class="token punctuation">.</span>ChatRequest<span class="token punctuation">&#123;</span>   Model<span class="token punctuation">:</span>    <span class="token string">"qwen2.5:32b-instruct"</span><span class="token punctuation">,</span>   Stream<span class="token punctuation">:</span>   lo<span class="token punctuation">.</span><span class="token function">ToPtr</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   Messages<span class="token punctuation">:</span> messages<span class="token punctuation">,</span>   Options<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>    <span class="token string">"temperature"</span><span class="token punctuation">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token keyword">func</span><span class="token punctuation">(</span>cr api<span class="token punctuation">.</span>ChatResponse<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">&#123;</span>   fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>cr<span class="token punctuation">.</span>Message<span class="token punctuation">.</span>Content<span class="token punctuation">)</span>   <span class="token keyword">return</span> <span class="token boolean">nil</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®Ÿè¡Œ">å®Ÿè¡Œ</h2><p>promptï¼š<code>æ±äº¬ã®å¤©æ°—ã¯ï¼Ÿ</code><br>è¿”äº‹ï¼šã€€<code>æ±äº¬ã®å¤©æ°—ã¯æ™´ã‚Œã§ã€æ¸©åº¦ã¯ç´„64Â°Fï¼ˆç´„18Â°Cï¼‰ã§ã™</code></p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><a href="https://zenn.dev/kazuwombat/articles/1f39f003298028">https://zenn.dev/kazuwombat/articles/1f39f003298028</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä»Šå›ã¯ollamaã®ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§funcation callingã‚’ä½¿ã„ãŸã„ã§ã™ã€‚ã€€ã€€&lt;br&gt;
å‰å›ã¯langchaingoã§ä½¿ã£ãŸã ã‘ã¨ã€è©¦ã—ã¦ãŸã‚‰ollamaã®å¼•æ•°toolsã¯ç„¡åŠ¹ã§ã™ã€githubã®å®Ÿä¾‹&lt;a href=&quot;https://github.com/tmc/langchaingo/blob/main/examples/ollama-functions-example/ollama_functions_example.go&quot;&gt;ollama_functions_example&lt;/a&gt;ã¯system messageã¨toolsã®jsonã‚’çµ„ã¿åˆã‚ã›ã¦å†…å®¹ã‚’ç”Ÿæˆã™ã‚‹ã€‚ä¾‹ãˆã°ï¼š&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-go&quot; data-language=&quot;go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;systemMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
 bs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; json&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Marshal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;functions&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
 &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
  log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
 &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;

 &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Sprintf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`You have access to the following tools:

%s

To use a tool, respond with a JSON object with the following structure: 
&amp;#123;
 &quot;tool&quot;: &amp;lt;name of the called tool&gt;,
 &quot;tool_input&quot;: &amp;lt;parameters for the tool matching the above JSON schema&gt;
&amp;#125;
`&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ã“ã‚Œã¯ã¡ã‚‡ã£ã¨å„ªé›…ã§ãªã„ã€&lt;code&gt;ollama/api&lt;/code&gt;ã‚’ä½¿ã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&quot;function-callingã¨ã¯&quot;&gt;function callingã¨ã¯&lt;/h2&gt;</summary>
    
    
    
    <category term="llm" scheme="https://asutorufa.github.io/categories/llm/"/>
    
    
    <category term="llm" scheme="https://asutorufa.github.io/tags/llm/"/>
    
    <category term="function calling" scheme="https://asutorufa.github.io/tags/function-calling/"/>
    
    <category term="text embedding" scheme="https://asutorufa.github.io/tags/text-embedding/"/>
    
  </entry>
  
  <entry>
    <title>langchaingoã§RAGã‚’è©¦ã—ã¾ã—ãŸ</title>
    <link href="https://asutorufa.github.io/posts/95db8f9/"/>
    <id>https://asutorufa.github.io/posts/95db8f9/</id>
    <published>2024-11-06T10:37:12.000Z</published>
    <updated>2024-11-06T10:37:12.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ—¥æœ¬èªã¯ã¾ã å‹‰å¼·ä¸­ã§ã™ã‹ã‚‰ã€å¤‰ãªã©ã“ã‚ã‚ã£ãŸã‚‰ã€ãœã²ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ãã ã•ã„ã€‚</p></blockquote><h2 id="RAGã¨ã¯">RAGã¨ã¯</h2><p>RAGã¯Retrieval augmented generationã®ç•¥ã§ã™ã€‚<br>å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«å†…å®¹ã‚’ç”Ÿæˆã™ã‚‹å‰ã«ã€promptã«ã‚ˆã‚‹å¤–éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ã«çŸ¥è­˜ã‚’æ¤œç´¢ã€å…ƒã®promptã¨çµ„ã¿åˆã‚ã›ã¦ã€ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã®æŠ€è¡“ã§ã™ã€‚</p><pre><code class="mermaid">sequenceDiagramactor ãƒ¦ãƒ¼ã‚¶ãƒ¦ãƒ¼ã‚¶-&gt;&gt;ã‚µãƒ¼ãƒãƒ¼: prompt: ä»Šæ—¥ã®æ³¨ç›®&lt;br&#x2F;&gt;ã®æ–°èã¯ä½•ã§ã™ã‹ï¼Ÿã‚µãƒ¼ãƒãƒ¼-&gt;&gt;ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: promptã‚’ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ã—ã¦&lt;br&#x2F;&gt;çŸ¥è­˜ã‚’æ¤œç´¢ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹--)ã‚µãƒ¼ãƒãƒ¼: çŸ¥è­˜ã‚’è¿”ã™ã‚µãƒ¼ãƒãƒ¼-&gt;&gt;llm: promptã¨çŸ¥è­˜ã‚’çµ„ã¿åˆã‚ã›ã¦llm--&gt;&gt;ã‚µãƒ¼ãƒãƒ¼: ç”Ÿæˆã™ã‚‹å†…å®¹ã‚’è¿”ã™ã‚µãƒ¼ãƒãƒ¼-&gt;&gt;ãƒ¦ãƒ¼ã‚¶: å†…å®¹ã‚’è¿”ã™</code></pre><p>ä¾‹ãˆã°ï¼š</p><p>ãƒ¦ãƒ¼ã‚¶ï¼šä»Šæ—¥ã®æ³¨ç›®ã®æ–°èã¯ä½•ã§ã™ã‹ï¼Ÿ</p><p>geminiï¼š</p><pre class="language-txt" data-language="txt"><code class="language-txt">ä»Šæ—¥ã®æ³¨ç›®ã®æ–°èè¨˜äº‹ã«ã¤ã„ã¦ã¯ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å¤‰åŒ–ã™ã‚‹ãŸã‚ã€ç‰¹å®šã®æ–°èç¤¾åã‚’æŒ™ã’ã¦ã€Œä»Šæ—¥ã®æ³¨ç›®ã®è¨˜äº‹ã¯ã“ã‚Œã§ã™ã€ã¨æ–­è¨€ã™ã‚‹ã“ã¨ã¯é›£ã—ã„ã§ã™ã€‚</code></pre><p>chatgpt:</p><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">æœ¬æ—¥ï¼ˆ2024å¹´11æœˆ6æ—¥ï¼‰ã®æ—¥æœ¬ã®æ³¨ç›®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¯æ¬¡ã®ã‚ˆã†ãªå†…å®¹ãŒå«ã¾ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼šã‚¢ãƒ¡ãƒªã‚«å¤§çµ±é ˜é¸æŒ™ã®æœ€æ–°å‹•å‘ - ç‰¹ã«è‹¥ã„ä¸–ä»£ã®æŠ•ç¥¨è¡Œå‹•ã‚„æ”¿ç­–ã¸ã®é–¢å¿ƒãŒæ³¨ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚å›½å†…çµŒæ¸ˆã¨ã‚¤ãƒ³ãƒ•ãƒ¬ã®å‹•ã - æ—¥æœ¬ã®ç‰©ä¾¡é«˜é¨°ãŒç¶šãã€å®¶è¨ˆã¸ã®å½±éŸ¿ã‚„æ”¿åºœã®å¯¾å¿œãŒè­°è«–ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚¢ã‚¸ã‚¢ã®åœ°æ”¿å­¦çš„ç·Šå¼µ - æ—¥æœ¬å‘¨è¾ºåœ°åŸŸã®å®‰å…¨ä¿éšœã«é–¢é€£ã™ã‚‹å‹•å‘ãŒç¶šã„ã¦ã„ã¾ã™ã€‚ä»¥ä¸Šã®å†…å®¹ãŒæ³¨ç›®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¨ã—ã¦è€ƒãˆã‚‰ã‚Œã¾ã™ãŒã€è©³ç´°ã«ã¤ã„ã¦ã¯ç›´æ¥ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚½ãƒ¼ã‚¹ã§ç¢ºèªã•ã‚Œã‚‹ã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>geminiã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ã‚ˆã£ã¦ã®å†…å®¹ã¯å›ç­”ã§ãã¾ã›ã‚“ã€‚<br>chatgptã¯RAGã‹ã€Function Callingã‹ã€ã©ã¡ã‚‰ã‹ã‚’ä½¿ã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚<br>ä»Šå›ã¯golang+langchaingo+ollama+qdrantã§RAGã‚’å®Ÿé¨“ã—ã¦ã¿ã¾ã™ã€‚</p><h2 id="æº–å‚™">æº–å‚™</h2><span id="more"></span><h3 id="ollamaã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">ollamaã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://ollama.com/install.sh <span class="token operator">|</span> <span class="token function">sh</span></code></pre><h3 id="qdrantã®ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œ">qdrantã®ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œ</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/.config/qdrant<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">6333</span>:6333 <span class="token parameter variable">-p</span> <span class="token number">6334</span>:6334 <span class="token punctuation">\</span>    <span class="token parameter variable">-v</span> ~/.config/qdrant:/qdrant/storage:z <span class="token punctuation">\</span>    qdrant/qdrant<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="bge-large-en-v1-5ã‚’ollamaã§å®Ÿè¡Œ">bge-large-en-v1.5ã‚’ollamaã§å®Ÿè¡Œ</h3><p>çŸ¥è­˜ã‚’ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹ã«ã¯Text Embedingãƒ¢ãƒ‡ãƒ«ãŒå¿…è¦ã§ã™ã€‚ä»Šå›ã¯bge-large-en-v1.5ã‚’ä½¿ã†ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ollamaã®ãƒ¢ãƒ‡ãƒ«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¯bge-large-en-v1.5ãŒã‚ã‚Šã¾ã›ã‚“ã®ã§ã€bge-large-en-v1.5ã‚’GGUFã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒå¿…è¦ã§ã™ã€‚</p><p>git-lfsã¨cmakeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> git-lfs cmake<span class="token function">git</span> lfs <span class="token function">install</span><span class="token function">git</span> clone https://huggingface.co/BAAI/bge-large-en-v1.5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>llama.cppã‚’ã‚¯ãƒ­ãƒ¼ãƒ³</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/ggerganov/llama.cpp.git<span class="token builtin class-name">cd</span> llama.cpp/<span class="token comment"># pythonä»®æƒ³ç’°å¢ƒã¯ãŠã™ã™ã‚ã§ã™</span><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> python3.12-venvpython3 <span class="token parameter variable">-m</span> venv python-venv./python-venv/bin/pip3  <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>GGUFã«å¤‰æ›</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"> ./llama.cpp/python-venv/bin/python3 ./llama.cpp/convert_hf_to_gguf.py ./bge-large-en-v1.5/<span class="token builtin class-name">cd</span> bge-large-en-v1.5/<span class="token builtin class-name">echo</span> <span class="token string">"FROM ./bge-large-en-v1.5-F16.gguf"</span> <span class="token operator">></span> Modelfileollama create bge-large-en-v1.5-F16 <span class="token parameter variable">-f</span> Modelfile<span class="token comment"># embedingãƒ¢ãƒ‡ãƒ«ã¯ollamaã§ç›´æ¥å®Ÿè¡Œã¯ã§ãã¾ã›ã‚“ã§ã™</span><span class="token comment"># Error: "bge-large-en-v1.5-F16" does not support generate</span><span class="token comment"># ã“ã“ã¯è©¦ã—ã¦ã¿ã¦ã ã‘ã§ã™</span>ollama run bge-large-en-v1.5-F16<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Qwen2-5ã‚’ollamaã§å®Ÿè¡Œ">Qwen2.5ã‚’ollamaã§å®Ÿè¡Œ</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 32bã¯20GBã®GPUãƒ¡ãƒ¢ãƒª(VRAM)ãŒå¿…è¦ã§ã™</span><span class="token comment"># CPUã‚‚ã§ãã‚‹ã§ã™ãŒã€éå¸¸ã«é‡ã„ã§ã™ã‹ã‚‰</span><span class="token comment"># 3bã‚„7bã‚„14bãªã©ã‚‚ãœã²ä½¿ã£ã¦ã¿ã¦ãã ã•ã„</span>ollama run qwen2.5:32b-instruct<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®Ÿç¾">å®Ÿç¾</h2><h3 id="text-embedder">text embedder</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span> <span class="token string">"github.com/tmc/langchaingo/embeddings"</span> <span class="token string">"github.com/tmc/langchaingo/llms/ollama"</span> <span class="token string">"github.com/tmc/langchaingo/vectorstores/qdrant"</span><span class="token punctuation">)</span> llm<span class="token punctuation">,</span> err <span class="token operator">:=</span> ollama<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>  ollama<span class="token punctuation">.</span><span class="token function">WithModel</span><span class="token punctuation">(</span><span class="token string">"bge-large-en-v1.5-F16"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  ollama<span class="token punctuation">.</span><span class="token function">WithServerURL</span><span class="token punctuation">(</span><span class="token string">"http://localhost:11434"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span> embeder<span class="token punctuation">,</span> err <span class="token operator">:=</span> embeddings<span class="token punctuation">.</span><span class="token function">NewEmbedder</span><span class="token punctuation">(</span>llm<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>qu<span class="token punctuation">,</span>err <span class="token operator">:=</span> url<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">"http://localhost:6333"</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span> qd<span class="token punctuation">,</span> err <span class="token operator">:=</span> qdrant<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>  qdrant<span class="token punctuation">.</span><span class="token function">WithURL</span><span class="token punctuation">(</span><span class="token operator">*</span>qu<span class="token punctuation">)</span><span class="token punctuation">,</span>  qdrant<span class="token punctuation">.</span><span class="token function">WithCollectionName</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  qdrant<span class="token punctuation">.</span><span class="token function">WithEmbedder</span><span class="token punctuation">(</span>embeder<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ãƒ†ã‚­ã‚¹ãƒˆã‚’å°å…¥</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// TextToChunks ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†å‰²</span><span class="token keyword">func</span> <span class="token function">TextToChunks</span><span class="token punctuation">(</span>r io<span class="token punctuation">.</span>Reader<span class="token punctuation">,</span> chunkSize<span class="token punctuation">,</span> chunkOverlap <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>schema<span class="token punctuation">.</span>Document<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æ–°ãŸãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ã‚¿ãƒªãƒ¼ãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’ä½œæˆ</span> docLoaded <span class="token operator">:=</span> documentloaders<span class="token punctuation">.</span><span class="token function">NewText</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token comment">// ãƒ†ã‚­ã‚¹ãƒˆã‚’å†å¸°çš„ã«åˆ†å‰²ã—æ–¹æ³•</span> split <span class="token operator">:=</span> textsplitter<span class="token punctuation">.</span><span class="token function">NewRecursiveCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// åˆ†å‰²ã‚µã‚¤ã‚ºã‚’è¨­å®š</span> split<span class="token punctuation">.</span>ChunkSize <span class="token operator">=</span> chunkSize <span class="token comment">// é‡ãªã‚‹ã‚µã‚¤ã‚ºã‚’è¨­å®š</span> split<span class="token punctuation">.</span>ChunkOverlap <span class="token operator">=</span> chunkOverlap <span class="token comment">// ãƒ­ãƒ¼ãƒ‰ã—ã¦åˆ†å‰²ã™ã‚‹</span> docs<span class="token punctuation">,</span> err <span class="token operator">:=</span> docLoaded<span class="token punctuation">.</span><span class="token function">LoadAndSplit</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> split<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span> docs<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">&#125;</span>  docs<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">TextToChunks</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span><span class="token string">`ãƒ†ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆ`</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token comment">// ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ã«å°å…¥</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> qd<span class="token punctuation">.</span><span class="token function">AddDocuments</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> docs<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="RAG">RAG</h3><p>çŸ¥è­˜ã‚’æ¤œç´¢</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">optionsVector <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>vectorstores<span class="token punctuation">.</span>Option<span class="token punctuation">&#123;</span> vectorstores<span class="token punctuation">.</span><span class="token function">WithScoreThreshold</span><span class="token punctuation">(</span><span class="token number">0.80</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>retriever <span class="token operator">:=</span> vectorstores<span class="token punctuation">.</span><span class="token function">ToRetriever</span><span class="token punctuation">(</span>qd<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> optionsVector<span class="token operator">...</span><span class="token punctuation">)</span>docRetrieved<span class="token punctuation">,</span> err <span class="token operator">:=</span> retriever<span class="token punctuation">.</span><span class="token function">GetRelevantDocuments</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> prompt<span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>llmã§äºˆæ¸¬ã™ã‚‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">llm<span class="token punctuation">,</span> err <span class="token operator">:=</span> ollama<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span> ollama<span class="token punctuation">.</span><span class="token function">WithModel</span><span class="token punctuation">(</span><span class="token string">"qwen2.5:32b-instruct"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ollama<span class="token punctuation">.</span><span class="token function">WithServerURL</span><span class="token punctuation">(</span><span class="token string">"http://localhost:11434"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span><span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> msgs <span class="token punctuation">[</span><span class="token punctuation">]</span>llms<span class="token punctuation">.</span>MessageContent<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> doc <span class="token operator">:=</span> <span class="token keyword">range</span> docRetrieved <span class="token punctuation">&#123;</span> msgs <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>msgs<span class="token punctuation">,</span> llms<span class="token punctuation">.</span><span class="token function">TextParts</span><span class="token punctuation">(</span>llms<span class="token punctuation">.</span>ChatMessageTypeAI<span class="token punctuation">,</span>  doc<span class="token punctuation">.</span>PageContent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>msgs <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>msgs<span class="token punctuation">,</span> llms<span class="token punctuation">.</span><span class="token function">TextParts</span><span class="token punctuation">(</span>llms<span class="token punctuation">.</span>ChatMessageTypeHuman<span class="token punctuation">,</span> prompt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> llm<span class="token punctuation">.</span><span class="token function">GenerateContent</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> msgs<span class="token punctuation">,</span> llms<span class="token punctuation">.</span><span class="token function">WithTemperature</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> llms<span class="token punctuation">.</span><span class="token function">WithStreamingFunc</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> chunk <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">&#123;</span><span class="token comment">// çµæœã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§æ¨™æº–å‡ºåŠ›ã«å‡ºåŠ›ã—ã¦</span> fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span><span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><!-- æ¨™æº–å‡ºåŠ›ï¼šã²ã‚‡ã†ã˜ã‚…ã‚“ã—ã‚…ã¤ã‚Šã‚‡ã --><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ul><li><a href="https://tech.takuyakobayashi.jp/2024/06/14/526">https://tech.takuyakobayashi.jp/2024/06/14/526</a></li><li><a href="https://aws.amazon.com/jp/what-is/retrieval-augmented-generation/">https://aws.amazon.com/jp/what-is/retrieval-augmented-generation/</a></li><li><a href="https://wiki.eryajf.net/pages/6bd394/#%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87">https://wiki.eryajf.net/pages/6bd394/#å‰ç½®å‡†å¤‡</a></li><li><a href="https://forbesjapan.com/articles/detail/72042">https://forbesjapan.com/articles/detail/72042</a></li><li><a href="https://en.wikipedia.org/wiki/Retrieval-augmented_generation">https://en.wikipedia.org/wiki/Retrieval-augmented_generation</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æ—¥æœ¬èªã¯ã¾ã å‹‰å¼·ä¸­ã§ã™ã‹ã‚‰ã€å¤‰ãªã©ã“ã‚ã‚ã£ãŸã‚‰ã€ãœã²ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;RAGã¨ã¯&quot;&gt;RAGã¨ã¯&lt;/h2&gt;
&lt;p&gt;RAGã¯Retrieval augmented generationã®ç•¥ã§ã™ã€‚&lt;br&gt;
å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«å†…å®¹ã‚’ç”Ÿæˆã™ã‚‹å‰ã«ã€promptã«ã‚ˆã‚‹å¤–éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ã«çŸ¥è­˜ã‚’æ¤œç´¢ã€å…ƒã®promptã¨çµ„ã¿åˆã‚ã›ã¦ã€ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã®æŠ€è¡“ã§ã™ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;mermaid&quot;&gt;
sequenceDiagram
actor ãƒ¦ãƒ¼ã‚¶
ãƒ¦ãƒ¼ã‚¶-&amp;gt;&amp;gt;ã‚µãƒ¼ãƒãƒ¼: prompt: ä»Šæ—¥ã®æ³¨ç›®&amp;lt;br&amp;#x2F;&amp;gt;ã®æ–°èã¯ä½•ã§ã™ã‹ï¼Ÿ
ã‚µãƒ¼ãƒãƒ¼-&amp;gt;&amp;gt;ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: promptã‚’ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ã—ã¦&amp;lt;br&amp;#x2F;&amp;gt;çŸ¥è­˜ã‚’æ¤œç´¢
ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹--)ã‚µãƒ¼ãƒãƒ¼: çŸ¥è­˜ã‚’è¿”ã™
ã‚µãƒ¼ãƒãƒ¼-&amp;gt;&amp;gt;llm: promptã¨çŸ¥è­˜ã‚’çµ„ã¿åˆã‚ã›ã¦
llm--&amp;gt;&amp;gt;ã‚µãƒ¼ãƒãƒ¼: ç”Ÿæˆã™ã‚‹å†…å®¹ã‚’è¿”ã™
ã‚µãƒ¼ãƒãƒ¼-&amp;gt;&amp;gt;ãƒ¦ãƒ¼ã‚¶: å†…å®¹ã‚’è¿”ã™
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¾‹ãˆã°ï¼š&lt;/p&gt;
&lt;p&gt;ãƒ¦ãƒ¼ã‚¶ï¼šä»Šæ—¥ã®æ³¨ç›®ã®æ–°èã¯ä½•ã§ã™ã‹ï¼Ÿ&lt;/p&gt;
&lt;p&gt;geminiï¼š&lt;/p&gt;
&lt;pre class=&quot;language-txt&quot; data-language=&quot;txt&quot;&gt;&lt;code class=&quot;language-txt&quot;&gt;ä»Šæ—¥ã®æ³¨ç›®ã®æ–°èè¨˜äº‹ã«ã¤ã„ã¦ã¯ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å¤‰åŒ–ã™ã‚‹ãŸã‚ã€ç‰¹å®šã®æ–°èç¤¾åã‚’æŒ™ã’ã¦ã€Œä»Šæ—¥ã®æ³¨ç›®ã®è¨˜äº‹ã¯ã“ã‚Œã§ã™ã€ã¨æ–­è¨€ã™ã‚‹ã“ã¨ã¯é›£ã—ã„ã§ã™ã€‚&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;chatgpt:&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-txt&quot; data-language=&quot;txt&quot;&gt;&lt;code class=&quot;language-txt&quot;&gt;æœ¬æ—¥ï¼ˆ2024å¹´11æœˆ6æ—¥ï¼‰ã®æ—¥æœ¬ã®æ³¨ç›®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¯æ¬¡ã®ã‚ˆã†ãªå†…å®¹ãŒå«ã¾ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼š

ã‚¢ãƒ¡ãƒªã‚«å¤§çµ±é ˜é¸æŒ™ã®æœ€æ–°å‹•å‘ - ç‰¹ã«è‹¥ã„ä¸–ä»£ã®æŠ•ç¥¨è¡Œå‹•ã‚„æ”¿ç­–ã¸ã®é–¢å¿ƒãŒæ³¨ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚
å›½å†…çµŒæ¸ˆã¨ã‚¤ãƒ³ãƒ•ãƒ¬ã®å‹•ã - æ—¥æœ¬ã®ç‰©ä¾¡é«˜é¨°ãŒç¶šãã€å®¶è¨ˆã¸ã®å½±éŸ¿ã‚„æ”¿åºœã®å¯¾å¿œãŒè­°è«–ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã‚¢ã‚¸ã‚¢ã®åœ°æ”¿å­¦çš„ç·Šå¼µ - æ—¥æœ¬å‘¨è¾ºåœ°åŸŸã®å®‰å…¨ä¿éšœã«é–¢é€£ã™ã‚‹å‹•å‘ãŒç¶šã„ã¦ã„ã¾ã™ã€‚
ä»¥ä¸Šã®å†…å®¹ãŒæ³¨ç›®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¨ã—ã¦è€ƒãˆã‚‰ã‚Œã¾ã™ãŒã€è©³ç´°ã«ã¤ã„ã¦ã¯ç›´æ¥ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚½ãƒ¼ã‚¹ã§ç¢ºèªã•ã‚Œã‚‹ã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;geminiã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ã‚ˆã£ã¦ã®å†…å®¹ã¯å›ç­”ã§ãã¾ã›ã‚“ã€‚&lt;br&gt;
chatgptã¯RAGã‹ã€Function Callingã‹ã€ã©ã¡ã‚‰ã‹ã‚’ä½¿ã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;br&gt;
ä»Šå›ã¯golang+langchaingo+ollama+qdrantã§RAGã‚’å®Ÿé¨“ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æº–å‚™&quot;&gt;æº–å‚™&lt;/h2&gt;</summary>
    
    
    
    <category term="llm" scheme="https://asutorufa.github.io/categories/llm/"/>
    
    
    <category term="llm" scheme="https://asutorufa.github.io/tags/llm/"/>
    
    <category term="text embedding" scheme="https://asutorufa.github.io/tags/text-embedding/"/>
    
    <category term="rag" scheme="https://asutorufa.github.io/tags/rag/"/>
    
  </entry>
  
  <entry>
    <title>æ„Ÿè§‰æ—¥è¯­æ˜¯ä¸€ç§å¾ˆéšæ„çš„è¯­è¨€</title>
    <link href="https://asutorufa.github.io/posts/190e8188/"/>
    <id>https://asutorufa.github.io/posts/190e8188/</id>
    <published>2024-07-29T21:09:46.000Z</published>
    <updated>2024-07-29T21:09:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆæ¨èä¸€ä¸ªè§†é¢‘ <a href="https://www.youtube.com/watch?v=fSnh-gz3ncc&amp;list=PLAdD6WfVVRIW-sB2MmPSUtLG6lY2_TrVy">ã€æ–‡æ³•ã€Œæ–‡ã®æˆåˆ†ã€ã€‘ã€10åˆ†é–“ã®å›½æ–‡æ³•è¬›åº§ï¼šãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ»ãƒ©ãƒœWebè¬›åº§ã€‘</a>, å¤§æ¦‚è®²äº†æ—¥æœ¬ä¸­å­¦ï¼ˆåˆä¸­ï¼‰è€ƒè¯•çš„ä¸€äº›æ–‡æ³•ã€‚</p><h2 id="åŠ¨è¯æ´»ç”¨">åŠ¨è¯æ´»ç”¨</h2><p>ç›¸ä¿¡ä¸å°‘ä¸­å›½å¢ƒå†…çš„äººå­¦ä¹ åŠ¨è¯éƒ½æ˜¯ ä¸€ç±»åŠ¨è¯ï¼Œ äºŒç±»åŠ¨è¯ï¼Œä¸‰ç±»åŠ¨è¯ï¼Œ å¹¶ä¸”è€å¸ˆç”šè‡³è¿˜ä¼šå‘Šè¯‰ä½ ä¸è¦è®°ã€Šæ ‡å‡†æ—¥æœ¬è¯­ã€‹ä¸Šé¢å¸¦ã¾ã™çš„åŠ¨è¯ï¼Œè¦è®°å­—å…¸å‹ã€‚<br>ç„¶åå¤§æ¦‚ä¼šå‘Šè¯‰ä¸€ç±»åŠ¨è¯çš„æ´»ç”¨ï¼Œç±»ä¼¼ä¸‹é¢ï¼š</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">ã€Œã†ã€æ®µ â†’ã€Œã„ã€æ®µ + ã¾ã™ä»¥ã€Œã†ã€ã€ã€Œã¤ã€ã€ã€Œã‚‹ã€ç»“å°¾çš„è¯ â†’ å»æ‰è¯å°¾ + ã£ã¦  ...  ...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç›¸ä¿¡ä¸å°‘äººï¼ˆè‡³å°‘æˆ‘æ˜¯ï¼‰ä¼šä»¥ä¸ºè¿™æ˜¯ç±»ä¼¼è‹±æ–‡é‚£ç§åŠ¨è¯å˜å½¢ï¼Œè¿‡å»å¼ç­‰è¿™ç±»çš„ã€‚<br>ç„¶è€Œåæ¥æˆ‘å‘ç°ï¼Œè¿™å®Œå…¨æ˜¯è¯¯äººå­å¼Ÿå•Šï¼Œæ—¥æœ¬ä¸­å­¦ï¼ˆåˆä¸­ï¼‰æ ¹æœ¬å°±ä¸ç”¨è¿™ç§æ‰€è°“çš„å˜å½¢ï¼Œä¹Ÿä¸æ˜¯è¯´ä¸ç”¨ï¼Œåªæ˜¯ä»–ä»¬ä¸ä¼šç”¨è¿™ç§è§„åˆ™å»æ´»ç”¨åŠ¨è¯ã€‚</p><p>äº‹å®ä¸Šçš„åŠ¨è¯æ´»ç”¨åˆ†ç±»ï¼š</p><span id="more"></span><ul><li>äº”æ®µæ´»ç”¨</li><li>ä¸Šä¸€æ®µæ´»ç”¨</li><li>ä¸‹ä¸€æ®µæ´»ç”¨</li><li>ã‚µå¤‰</li><li>ã‹å¤‰</li></ul><p>é‚£ä¹ˆä»€ä¹ˆæ˜¯äº”æ®µæ´»ç”¨å‘¢ï¼š</p><blockquote><p>æœªç„¶å½¢ï¼ˆã‚¢æ®µï¼‰ãŒæ„æ€ãƒ»æ¨é‡ã®èªå°¾ï¼ˆã‚ã‚‹ã„ã¯åŠ©å‹•è©ï¼‰ã®ã€Œã†ã€ã«æ¥ç¶šã™ã‚‹éš›ã«ã‚ªæ®µã¨ãªã‚Šã€å®Ÿè³ªçš„ã«äº”ã¤ã®æ®µå…¨éƒ¨ã«ã‚ãŸã£ã¦æ´»ç”¨ã™ã‚‹ã“ã¨ã¨ãªã£ãŸã‚‚ã®ã§ã‚ã‚‹ã€‚<br>å°±æ˜¯è¯´ï¼ŒåŠ¨è¯æ´»ç”¨ä¼šä½¿ç”¨å…¨éƒ¨äº”ä¸ªæ®µçš„éŸ³</p></blockquote><p>æ¯”å¦‚ï¼š</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">ã‚«è¡Œäº”æ®µæ´»ç”¨ã€Œæ›¸ãã€ã®ä¾‹    æœªç„¶å½¢-ã‹ã€ã“    é€£ç”¨å½¢-ãã€ã„    çµ‚æ­¢å½¢-ã    é€£ä½“å½¢-ã    ä»®å®šå½¢-ã‘    å‘½ä»¤å½¢-ã‘åŠ¨è¯æ´»ç”¨æ—¶ï¼Œå­éŸ³çš„å˜åŒ–ä½¿ç”¨äº† ã‚ã€ã„ã€ã†ã€ãˆã€ãŠã€€äº”ä¸ªæ®µéŸ³ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ²¡é”™ï¼Œä¸­å­¦çš„æ•™å­¦è§†é¢‘éƒ½æ˜¯è¦æ ¹æ®æ´»ç”¨åçš„å½¢å¼å»åæ¨æ˜¯ä¸æ˜¯äº”æ®µæ´»ç”¨ï¼Œè€Œä¸æ˜¯æ ¹æ®å­—å…¸å‹çš„å­éŸ³å»åæ¨æ˜¯ä»€ä¹ˆç±»å‹çš„åŠ¨è¯ã€‚<br>è€Œä¹‹å‰è€å¸ˆä¸è®©ä½ è®°å¾—â€œã¾ã™å‹â€ï¼Œå…¶å®æ˜¯ <strong>è¿ç”¨å½¢ï¼ˆæŒ‡åé¢ä¼šæ¥ç”¨è¨€ï¼‰</strong> ï¼Œæ°å·§è¿™ä¸ªè¿ç”¨å½¢å°±å¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯äº”æ®µæ´»ç”¨ï¼ˆå½“ç„¶å…¶ä»–æ´»ç”¨åçš„å½¢ä¹Ÿå¯ä»¥è¿›è¡Œåæ¨ï¼‰ï¼Œç„¶ååœ¨æ ¹æ®æ˜¯ä¸æ˜¯äº”æ®µæ´»ç”¨å»å˜åŒ–å…¶ä»–å½¢å¼ã€‚<br>è€Œä¸”è¿ç”¨å‹åœ¨å¥å­ä¸­ä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œæ ‡å‡†æ—¥æœ¬è¯­é»˜è®¤æ˜¯è¿™ç§å½¢å¼çš„åŠ¨è¯ä¸æ˜¯æ²¡æœ‰é“ç†çš„ã€‚<br>è€Œ  ã£ã¦ è¿™ç§å˜å½¢æ˜¯éŸ³ä¾¿ï¼ŒéŸ³ä¾¿æœ‰è‡ªå·±çš„è§„åˆ™ï¼ˆæœ‰æ—¶ä¹Ÿéœ€è¦çœ‹æ˜¯ä¸æ˜¯äº”æ®µåŠ¨è¯ï¼‰ï¼Œå’ŒåŠ¨è¯æ´»ç”¨ä¸ä¸€æ ·ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸èƒ½åªè®°ä¸€ä¸ªå­—å…¸å‹ï¼Œè¿˜éœ€è¦è®°è‡³å°‘ä¸€ä¸ªæ´»ç”¨åçš„å½¢å¼ï¼Œæ¯”å¦‚æœªç„¶å½¢çš„å…¶ä¸­ä¸€ç§ï¼Œä¼šæ¯”è¾ƒå¥½è®°ä¸€ç‚¹ã€‚<br>è€Œæ˜¯ä¸æ˜¯äº”æ®µæ´»ç”¨ï¼Œå¯èƒ½æ˜¯æ—¥æœ¬äººè§‰å¾—è¿™ä¸ªæ˜¯äº”æ®µæ´»ç”¨ï¼Œé‚£ä»–å°±äº”æ®µæ´»ç”¨å§ï¼Œæ„Ÿè§‰å¾ˆéšæ„ã€‚ï¼ˆè€Œä¸€ç±»ï¼ŒäºŒç±»ï¼Œä¸‰ç±»ï¼Œè¿™ç§åˆ†ç±»æ–¹å¼ï¼Œæ›´åƒæ˜¯å¼ºè¡Œæ€»ç»“äº†ä¸€ç§æ–¹æ³•æ–¹ä¾¿å¤–å›½äººå»å­¦ä¹ æ—¥è¯­ã€‚ï¼‰</p><h2 id="è¿æµŠ">è¿æµŠ</h2><p>è¿æµŠè¿™ä¸ªæˆ‘æ˜¯çœŸçš„ä¸€å¤´é›¾æ°´ï¼Œä¹ŸæŸ¥äº†ä¸å°‘èµ„æ–™ï¼Œå¤§æ¦‚çš„è§„åˆ™å°±æ˜¯ï¼š</p><ul><li>å’Œè¯ï¼ˆæ—¥æœ¬äººè‡ªå·±åˆ›é€ çš„ï¼‰æˆ–è€…å¾ˆæ—©å°±ä¼ åˆ°æ—¥æœ¬çš„å¤–æ¥è¯­ï¼Œæ—¥æœ¬äººå·²ç»å½“ä½œæ˜¯è‡ªå·±çš„äº†ï¼Œé‚£ä¹ˆå¤åˆè¯å°±éœ€è¦è¿æµŠã€‚</li><li>æ±‰è¯­ï¼ˆä¸­å›½è¯­ï¼‰å’Œå¤–æ¥è¯­çš„å¤åˆè¯æ˜¯ä¸éœ€è¦è¿æµŠçš„ã€‚</li></ul><p>æ„Ÿè§‰è¿™ä¸ªä¹Ÿå¾ˆéšæ„å‘€ï¼Œæ„Ÿè§‰ä¹Ÿæ˜¯æˆ‘è§‰å¾—è¿™ä¸ªè¦è¿æµŠï¼Œé‚£å°±è¦è¿æµŠï¼Œæˆ‘è§‰å¾—ä¸éœ€è¦é‚£å°±ä¸éœ€è¦ã€‚</p><h2 id="ã€Œã¯ã€-ã¨-ã€ŒãŒã€">ã€Œã¯ã€ã€€ã¨ã€€ã€ŒãŒã€</h2><p>ã¯ï¼ŒãŒ è¿™ä¸¤ä¸ªæˆ‘ä¹Ÿæ˜¯åˆ†ä¸æ¸…ï¼Œåˆ°åº•ä»€ä¹ˆæ—¶å€™ç”¨ã¯ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ç”¨ãŒã€‚<br>èƒ½æŸ¥åˆ°çš„è§„åˆ™åŸºæœ¬éƒ½æ˜¯ï¼š</p><ul><li>ã¯ å¼ºè°ƒåé¢çš„</li><li>ãŒ å¼ºè°ƒå‰é¢çš„</li></ul><p>çœ‹äº†ä¸å°‘ç›¸å…³çš„è§†é¢‘ï¼Œå‘ç°æ—¥æœ¬çš„ä¸“é—¨æ•™æ—¥è¯­çš„è€å¸ˆä¹Ÿè¯´ä¸æ¸…è§„åˆ™ï¼Œä½†ä»–ä»¬çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ä»€ä¹ˆï¼Œå¦‚æœç”¨é”™äº†ï¼Œä»–ä»¬ä¼šè§‰å¾—å“ªé‡Œå¾ˆå¥‡æ€ªï¼Œä½†æ˜¯è¯´ä¸æ¸…è§„åˆ™ã€‚<br>æ„Ÿè§‰éå¸¸éšæ„ã€‚ã€‚ã€‚ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;é¦–å…ˆæ¨èä¸€ä¸ªè§†é¢‘ &lt;a href=&quot;https://www.youtube.com/watch?v=fSnh-gz3ncc&amp;amp;list=PLAdD6WfVVRIW-sB2MmPSUtLG6lY2_TrVy&quot;&gt;ã€æ–‡æ³•ã€Œæ–‡ã®æˆåˆ†ã€ã€‘ã€10åˆ†é–“ã®å›½æ–‡æ³•è¬›åº§ï¼šãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ»ãƒ©ãƒœWebè¬›åº§ã€‘&lt;/a&gt;, å¤§æ¦‚è®²äº†æ—¥æœ¬ä¸­å­¦ï¼ˆåˆä¸­ï¼‰è€ƒè¯•çš„ä¸€äº›æ–‡æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŠ¨è¯æ´»ç”¨&quot;&gt;åŠ¨è¯æ´»ç”¨&lt;/h2&gt;
&lt;p&gt;ç›¸ä¿¡ä¸å°‘ä¸­å›½å¢ƒå†…çš„äººå­¦ä¹ åŠ¨è¯éƒ½æ˜¯ ä¸€ç±»åŠ¨è¯ï¼Œ äºŒç±»åŠ¨è¯ï¼Œä¸‰ç±»åŠ¨è¯ï¼Œ å¹¶ä¸”è€å¸ˆç”šè‡³è¿˜ä¼šå‘Šè¯‰ä½ ä¸è¦è®°ã€Šæ ‡å‡†æ—¥æœ¬è¯­ã€‹ä¸Šé¢å¸¦ã¾ã™çš„åŠ¨è¯ï¼Œè¦è®°å­—å…¸å‹ã€‚&lt;br&gt;
ç„¶åå¤§æ¦‚ä¼šå‘Šè¯‰ä¸€ç±»åŠ¨è¯çš„æ´»ç”¨ï¼Œç±»ä¼¼ä¸‹é¢ï¼š&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;ã€Œã†ã€æ®µ â†’ã€Œã„ã€æ®µ + ã¾ã™
ä»¥ã€Œã†ã€ã€ã€Œã¤ã€ã€ã€Œã‚‹ã€ç»“å°¾çš„è¯ â†’ å»æ‰è¯å°¾ + ã£ã¦
  ...
  ...&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç›¸ä¿¡ä¸å°‘äººï¼ˆè‡³å°‘æˆ‘æ˜¯ï¼‰ä¼šä»¥ä¸ºè¿™æ˜¯ç±»ä¼¼è‹±æ–‡é‚£ç§åŠ¨è¯å˜å½¢ï¼Œè¿‡å»å¼ç­‰è¿™ç±»çš„ã€‚&lt;br&gt;
ç„¶è€Œåæ¥æˆ‘å‘ç°ï¼Œè¿™å®Œå…¨æ˜¯è¯¯äººå­å¼Ÿå•Šï¼Œæ—¥æœ¬ä¸­å­¦ï¼ˆåˆä¸­ï¼‰æ ¹æœ¬å°±ä¸ç”¨è¿™ç§æ‰€è°“çš„å˜å½¢ï¼Œä¹Ÿä¸æ˜¯è¯´ä¸ç”¨ï¼Œåªæ˜¯ä»–ä»¬ä¸ä¼šç”¨è¿™ç§è§„åˆ™å»æ´»ç”¨åŠ¨è¯ã€‚&lt;/p&gt;
&lt;p&gt;äº‹å®ä¸Šçš„åŠ¨è¯æ´»ç”¨åˆ†ç±»ï¼š&lt;/p&gt;</summary>
    
    
    
    <category term="æ—¥æœ¬èª" scheme="https://asutorufa.github.io/categories/%E6%97%A5%E6%9C%AC%E8%AA%9E/"/>
    
    
    <category term="æ—¥æœ¬èª" scheme="https://asutorufa.github.io/tags/%E6%97%A5%E6%9C%AC%E8%AA%9E/"/>
    
  </entry>
  
  <entry>
    <title>å®ç°ä¸€ä¸ªç®€å•çš„Kubernetes controller</title>
    <link href="https://asutorufa.github.io/posts/edf1c330/"/>
    <id>https://asutorufa.github.io/posts/edf1c330/</id>
    <published>2024-03-30T15:09:58.000Z</published>
    <updated>2024-03-30T15:09:58.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="controlleræ˜¯ä»€ä¹ˆ">controlleræ˜¯ä»€ä¹ˆ</h2><p>ç®€å•æ¥è¯´ï¼Œcontrollerå°±æ˜¯ç›‘å¬kubernetesçš„é…ç½®/çŠ¶æ€å˜åŒ–ï¼Œè‡ªåŠ¨å¯¹èµ„æºè¿›è¡Œè°ƒèŠ‚ã€‚æ¯”å¦‚kuberneteså†…ç½®çš„controlleræœ‰Deploymentã€StatefulSetã€DaemonSetã€‚</p><h2 id="å®ç°controller">å®ç°controller</h2><p>è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ä¸ªç®€å•çš„loadbalancer controllerï¼Œä½¿ç”¨kubernetesçš„client-goã€‚</p><p>å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„Serivce,å¹¶ä¸”æŒ‡å®šTypeä¸ºLoadBalancerã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>service<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> MyApp  <span class="token key atrule">ports</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>  <span class="token key atrule">clusterIP</span><span class="token punctuation">:</span> 10.0.171.239  <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ—¶Serviceçš„çŠ¶æ€è¿˜æ˜¯pending,å› ä¸ºè¿˜æ²¡æœ‰controllerä¸ºå…¶åˆ†é…IPåœ°å€ã€‚</p><p>åˆ›å»ºæ–°çš„client</p><span id="more"></span><pre class="line-numbers language-go" data-language="go"><code class="language-go">config<span class="token punctuation">,</span> err <span class="token operator">:=</span> rest<span class="token punctuation">.</span><span class="token function">InClusterConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>cli<span class="token punctuation">,</span> err <span class="token operator">:=</span> kubernetes<span class="token punctuation">.</span><span class="token function">NewForConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹ServiceçŠ¶æ€å˜åŒ–çš„ç›‘å¬</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">wch<span class="token punctuation">,</span> err <span class="token operator">:=</span> cli<span class="token punctuation">.</span><span class="token function">CoreV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Services</span><span class="token punctuation">(</span>corev1<span class="token punctuation">.</span>NamespaceAll<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Watch</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metav1<span class="token punctuation">.</span>ListOptions<span class="token punctuation">&#123;</span>Watch<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span> <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">defer</span> wch<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ˜¯æ–°å»ºçš„Serivce,å¹¶ä¸”Typeä¸ºLoadBalancerï¼Œåˆ™è‡ªåŠ¨ä¸ºå…¶åˆ†é…ä¸€ä¸ªIPåœ°å€ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// ç«¯å£åˆ†é…èŒƒå›´</span><span class="token keyword">var</span> portRange <span class="token operator">=</span> atomic<span class="token punctuation">.</span>Uint32<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> portRange<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">select</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">case</span> <span class="token operator">&lt;-</span>signChannel<span class="token punctuation">:</span>   <span class="token keyword">return</span>  <span class="token keyword">case</span> obj<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>wch<span class="token punctuation">.</span><span class="token function">ResultChan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span>   <span class="token punctuation">&#125;</span>   svc<span class="token punctuation">,</span> ok <span class="token operator">:=</span> obj<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>corev1<span class="token punctuation">.</span>Service<span class="token punctuation">)</span>   <span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">&#123;</span>    <span class="token keyword">continue</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">switch</span> obj<span class="token punctuation">.</span>Type <span class="token punctuation">&#123;</span>   <span class="token keyword">case</span> watch<span class="token punctuation">.</span>Added<span class="token punctuation">:</span>                <span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯LoadBalancer</span>                <span class="token comment">// ç”Ÿæˆç¯å¢ƒä¸­è¿˜åº”ç»“åˆAnnotationsè¿›è¡Œåˆ¤æ–­ï¼Œé˜²æ­¢è¯¯æ›´æ”¹é”™è¯¯çš„Service.</span>    <span class="token keyword">if</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>Type <span class="token operator">!=</span> corev1<span class="token punctuation">.</span>ServiceTypeLoadBalancer <span class="token punctuation">&#123;</span>     <span class="token keyword">continue</span>    <span class="token punctuation">&#125;</span>                <span class="token comment">// ç”Ÿæˆç«¯å£ï¼Œå¹¶åˆ›å»ºè½¬å‘ï¼ˆåªä¼šæ‰“å°ï¼Œä¸ä¼šçœŸæ­£åˆ›å»ºè§„åˆ™ï¼‰</span>    sport <span class="token operator">:=</span> portRange<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token function">forward</span><span class="token punctuation">(</span>svc<span class="token punctuation">,</span> sport<span class="token punctuation">)</span>                <span class="token comment">// ä¸ºserviceåˆ†é…IPåœ°å€</span>    svc<span class="token punctuation">.</span>Status<span class="token punctuation">.</span>LoadBalancer<span class="token punctuation">.</span>Ingress <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>corev1<span class="token punctuation">.</span>LoadBalancerIngress<span class="token punctuation">&#123;</span>     <span class="token punctuation">&#123;</span>      IP<span class="token punctuation">:</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">,</span>      Ports<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>corev1<span class="token punctuation">.</span>PortStatus<span class="token punctuation">&#123;</span>       <span class="token punctuation">&#123;</span>        Port<span class="token punctuation">:</span> <span class="token function">int32</span><span class="token punctuation">(</span>sport<span class="token punctuation">)</span><span class="token punctuation">,</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span>                <span class="token comment">// æ›´æ–°service</span>    <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> cli<span class="token punctuation">.</span>     <span class="token function">CoreV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>     <span class="token function">Services</span><span class="token punctuation">(</span>svc<span class="token punctuation">.</span>Namespace<span class="token punctuation">)</span><span class="token punctuation">.</span>     <span class="token function">UpdateStatus</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> svc<span class="token punctuation">,</span> metav1<span class="token punctuation">.</span>UpdateOptions<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>     slog<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>     slog<span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">"service added"</span><span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Namespace<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIPs<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>   <span class="token keyword">case</span> watch<span class="token punctuation">.</span>Modified<span class="token punctuation">:</span>    slog<span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">"service modified"</span><span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Namespace<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIPs<span class="token punctuation">)</span>   <span class="token keyword">case</span> watch<span class="token punctuation">.</span>Deleted<span class="token punctuation">:</span>    slog<span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">"service deleted"</span><span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Namespace<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIPs<span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// ...</span><span class="token comment">// ...</span><span class="token comment">// æ¨¡æ‹Ÿå®ç°iptablesè‡ªåŠ¨åˆ›å»ºè½¬å‘</span><span class="token keyword">func</span> <span class="token function">forward</span><span class="token punctuation">(</span>svc <span class="token operator">*</span>corev1<span class="token punctuation">.</span>Service<span class="token punctuation">,</span> sport <span class="token builtin">uint32</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> ip<span class="token punctuation">,</span> err <span class="token operator">:=</span> netip<span class="token punctuation">.</span><span class="token function">ParseAddr</span><span class="token punctuation">(</span>svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span> <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>Ports <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> ipt <span class="token builtin">string</span>  <span class="token keyword">var</span> mask <span class="token builtin">string</span>  <span class="token keyword">if</span> ip<span class="token punctuation">.</span><span class="token function">Is4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   ipt <span class="token operator">=</span> <span class="token string">"iptables"</span>   mask <span class="token operator">=</span> <span class="token string">"32"</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>   ipt <span class="token operator">=</span> <span class="token string">"ip6tables"</span>   mask <span class="token operator">=</span> <span class="token string">"128"</span>  <span class="token punctuation">&#125;</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>   ipt<span class="token punctuation">,</span> <span class="token string">"-t"</span><span class="token punctuation">,</span> <span class="token string">"filter"</span><span class="token punctuation">,</span> <span class="token string">"-A"</span><span class="token punctuation">,</span> <span class="token string">"FORWARD"</span><span class="token punctuation">,</span>   <span class="token string">"-d"</span><span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>mask<span class="token punctuation">,</span>   <span class="token string">"-p"</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token string">"--dport"</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>Port<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token string">"-j"</span><span class="token punctuation">,</span> <span class="token string">"DROP"</span><span class="token punctuation">,</span>  <span class="token punctuation">)</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>   ipt<span class="token punctuation">,</span> <span class="token string">"-t"</span><span class="token punctuation">,</span> <span class="token string">"nat"</span><span class="token punctuation">,</span> <span class="token string">"-I"</span><span class="token punctuation">,</span> <span class="token string">"PRETROUTING"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>   <span class="token string">"-p"</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token string">"--dport"</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>sport<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token string">"-j"</span><span class="token punctuation">,</span> <span class="token string">"DNAT"</span><span class="token punctuation">,</span>   <span class="token string">"--to"</span><span class="token punctuation">,</span> net<span class="token punctuation">.</span><span class="token function">JoinHostPort</span><span class="token punctuation">(</span>svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>Port<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">)</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>   ipt<span class="token punctuation">,</span> <span class="token string">"-t"</span><span class="token punctuation">,</span> <span class="token string">"nat"</span><span class="token punctuation">,</span> <span class="token string">"-I"</span><span class="token punctuation">,</span> <span class="token string">"POSTROUTING"</span><span class="token punctuation">,</span>   <span class="token string">"-d"</span><span class="token punctuation">,</span> svc<span class="token punctuation">.</span>Spec<span class="token punctuation">.</span>ClusterIP<span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>mask<span class="token punctuation">,</span>   <span class="token string">"-p"</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>Protocol<span class="token punctuation">,</span>   <span class="token string">"-j"</span><span class="token punctuation">,</span> <span class="token string">"MASQUERADE"</span><span class="token punctuation">,</span>  <span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œè¿™ä¸ªç®€å•ç¨‹åºï¼Œå†è§‚å¯ŸSerivce, å°±ä¼šå‘ç°Seriviceå·²ç»ä¸å†å¤„äºpendingçŠ¶æ€ï¼Œå¹¶ä¹Ÿä¸ºå…¶åˆ†é…äº†ä¸€ä¸ªIPåœ°å€ï¼Œè™½ç„¶ä¸èƒ½çœŸæ­£ä½¿ç”¨æ­¤åœ°å€è¿›è¡Œè®¿é—®ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰åˆ›å»ºçœŸæ­£çš„è½¬å‘è§„åˆ™ã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>service<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> MyApp  <span class="token key atrule">ports</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>  <span class="token key atrule">clusterIP</span><span class="token punctuation">:</span> 10.0.171.239  <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer<span class="token key atrule">status</span><span class="token punctuation">:</span>  <span class="token key atrule">loadBalancer</span><span class="token punctuation">:</span>    <span class="token key atrule">ingress</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">ip</span><span class="token punctuation">:</span> 10.0.171.239<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>k3sçš„<a href="https://github.com/k3s-io/klipper-lb">klipper-lb</a>æ˜¯ä¸€ä¸ªå¾ˆç®€å•loadbalancerå®ç°ï¼Œä»£ç åªæ˜¯å‡ è¡Œè„šæœ¬ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function-name function">start_proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token for-or-select variable">src_range</span> <span class="token keyword">in</span> <span class="token variable">$&#123;SRC_RANGES<span class="token operator">/</span><span class="token operator">/</span><span class="token operator">,</span><span class="token operator">/</span> &#125;</span><span class="token punctuation">;</span> <span class="token keyword">do</span>        <span class="token keyword">if</span> <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;src_range&#125;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-Eq</span> <span class="token string">":"</span><span class="token punctuation">;</span> <span class="token keyword">then</span>            ip6tables <span class="token parameter variable">-t</span> filter <span class="token parameter variable">-I</span> FORWARD <span class="token parameter variable">-s</span> <span class="token variable">$&#123;src_range&#125;</span> <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;DEST_PORT&#125;</span> <span class="token parameter variable">-j</span> ACCEPT        <span class="token keyword">else</span>            iptables <span class="token parameter variable">-t</span> filter <span class="token parameter variable">-I</span> FORWARD <span class="token parameter variable">-s</span> <span class="token variable">$&#123;src_range&#125;</span> <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;DEST_PORT&#125;</span> <span class="token parameter variable">-j</span> ACCEPT        <span class="token keyword">fi</span>    <span class="token keyword">done</span>    <span class="token keyword">for</span> <span class="token for-or-select variable">dest_ip</span> <span class="token keyword">in</span> <span class="token variable">$&#123;DEST_IPS<span class="token operator">/</span><span class="token operator">/</span><span class="token operator">,</span><span class="token operator">/</span> &#125;</span><span class="token punctuation">;</span> <span class="token keyword">do</span>        <span class="token keyword">if</span> <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;dest_ip&#125;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-Eq</span> <span class="token string">":"</span><span class="token punctuation">;</span> <span class="token keyword">then</span>            <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /proc/sys/net/ipv6/conf/all/forwarding<span class="token variable">)</span></span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>            ip6tables <span class="token parameter variable">-t</span> filter <span class="token parameter variable">-A</span> FORWARD <span class="token parameter variable">-d</span> <span class="token variable">$&#123;dest_ip&#125;</span>/128 <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;DEST_PORT&#125;</span> <span class="token parameter variable">-j</span> DROP            ip6tables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-I</span> PREROUTING <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;SRC_PORT&#125;</span> <span class="token parameter variable">-j</span> DNAT <span class="token parameter variable">--to</span> <span class="token punctuation">[</span><span class="token variable">$&#123;dest_ip&#125;</span><span class="token punctuation">]</span>:<span class="token variable">$&#123;DEST_PORT&#125;</span>            ip6tables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-I</span> POSTROUTING <span class="token parameter variable">-d</span> <span class="token variable">$&#123;dest_ip&#125;</span>/128 <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">-j</span> MASQUERADE        <span class="token keyword">else</span>            <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /proc/sys/net/ipv4/ip_forward<span class="token variable">)</span></span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>            iptables <span class="token parameter variable">-t</span> filter <span class="token parameter variable">-A</span> FORWARD <span class="token parameter variable">-d</span> <span class="token variable">$&#123;dest_ip&#125;</span>/32 <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;DEST_PORT&#125;</span> <span class="token parameter variable">-j</span> DROP            iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-I</span> PREROUTING <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">--dport</span> <span class="token variable">$&#123;SRC_PORT&#125;</span> <span class="token parameter variable">-j</span> DNAT <span class="token parameter variable">--to</span> <span class="token variable">$&#123;dest_ip&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;DEST_PORT&#125;</span>            iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-I</span> POSTROUTING <span class="token parameter variable">-d</span> <span class="token variable">$&#123;dest_ip&#125;</span>/32 <span class="token parameter variable">-p</span> <span class="token variable">$&#123;DEST_PROTO&#125;</span> <span class="token parameter variable">-j</span> MASQUERADE        <span class="token keyword">fi</span>    <span class="token keyword">done</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;controlleræ˜¯ä»€ä¹ˆ&quot;&gt;controlleræ˜¯ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œcontrollerå°±æ˜¯ç›‘å¬kubernetesçš„é…ç½®/çŠ¶æ€å˜åŒ–ï¼Œè‡ªåŠ¨å¯¹èµ„æºè¿›è¡Œè°ƒèŠ‚ã€‚æ¯”å¦‚kuberneteså†…ç½®çš„controlleræœ‰Deploymentã€StatefulSetã€DaemonSetã€‚&lt;/p&gt;
&lt;h2 id=&quot;å®ç°controller&quot;&gt;å®ç°controller&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ä¸ªç®€å•çš„loadbalancer controllerï¼Œä½¿ç”¨kubernetesçš„client-goã€‚&lt;/p&gt;
&lt;p&gt;å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„Serivce,å¹¶ä¸”æŒ‡å®šTypeä¸ºLoadBalancerã€‚&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-yaml&quot; data-language=&quot;yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; v1
&lt;span class=&quot;token key atrule&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Service
&lt;span class=&quot;token key atrule&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; my&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;service
&lt;span class=&quot;token key atrule&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;app.kubernetes.io/name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; MyApp
  &lt;span class=&quot;token key atrule&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; TCP
      &lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;targetPort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;clusterIP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10.0.171.239
  &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; LoadBalancer&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ—¶Serviceçš„çŠ¶æ€è¿˜æ˜¯pending,å› ä¸ºè¿˜æ²¡æœ‰controllerä¸ºå…¶åˆ†é…IPåœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºæ–°çš„client&lt;/p&gt;</summary>
    
    
    
    <category term="Kubernetes" scheme="https://asutorufa.github.io/categories/Kubernetes/"/>
    
    
    <category term="Kubernetes" scheme="https://asutorufa.github.io/tags/Kubernetes/"/>
    
    <category term="CRI" scheme="https://asutorufa.github.io/tags/CRI/"/>
    
    <category term="container" scheme="https://asutorufa.github.io/tags/container/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ¼«å½±è¯„</title>
    <link href="https://asutorufa.github.io/posts/665020d8/"/>
    <id>https://asutorufa.github.io/posts/665020d8/</id>
    <published>2023-09-23T23:21:15.000Z</published>
    <updated>2023-09-23T23:21:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç›®å‰æˆ‘åªä¼šè®°å½•æœ€è¿‘çœ‹äº†ä¸ªï¼Œæœ‰äº›çœ‹çš„æ¯”è¾ƒæ—©çš„å°±ä¸è®°å½•äº†ï¼Œè®°å¿†ä¹Ÿæ¯”è¾ƒæ¨¡ç³Šã€‚</p><h2 id="è‡ªå®šä¹‰ç¥å‰§ï¼ˆä¸ªäººä¸»è§‚å†³å®šï¼‰">è‡ªå®šä¹‰ç¥å‰§ï¼ˆä¸ªäººä¸»è§‚å†³å®šï¼‰</h2><ul><li>CLANNAD</li><li>Kanon</li><li>ãƒªãƒˆãƒ«ãƒã‚¹ã‚¿ãƒ¼ã‚º!</li><li>Air</li><li>Angel Beats! -1st beat-</li><li>ã‹ããªã©</li><li>true tears</li><li>èŠ±å’²ãã„ã‚ã¯</li><li>TARI TARI</li></ul><span id="more"></span><h2 id="Key">Key</h2><p>keyç¤¾çš„åŠ¨æ¼«ä½œå“æˆ‘å‡ ä¹å…¨çœ‹äº†ï¼Œå¤§éƒ¨åˆ†éƒ½å¾ˆå¥½çœ‹ï¼Œæ¨èï¼š</p><ul><li>CLANNAD</li><li>Kanon</li><li>ãƒªãƒˆãƒ«ãƒã‚¹ã‚¿ãƒ¼ã‚º!</li><li>Air</li><li>Angel Beats! -1st beat-</li></ul><h3 id="ãƒªãƒˆãƒ«ãƒã‚¹ã‚¿ãƒ¼ã‚º">ãƒªãƒˆãƒ«ãƒã‚¹ã‚¿ãƒ¼ã‚º!</h3><p>ä¸»è®²å‹æƒ…ï¼Œç¬¬ä¸€å­£ä¸»è¦æ ¹æ®ä¸åŒè§’è‰²ä¸ºå¼•è¿›è¡Œå‰§æƒ…å¼•å¯¼ï¼Œå‰§æƒ…å¼•å¯¼ä¹Ÿå¾ˆè‡ªç„¶ã€‚<br>ç¬¬äºŒå­£ç±»ä¼¼æ­ç§˜ç¯‡ï¼Œæ¥æ­ç§˜ç¬¬ä¸€å­£å‰§æƒ…çš„çœŸå®é¢ç›®åŠèƒŒæ™¯ï¼Œå½“ç„¶ä¹Ÿæ˜¯keyç¤¾çš„ç‰¹ç‚¹ï¼ŒçœŸå®ä¸­å¸¦æœ‰ä¸€ç‚¹å¥‡å¹»ã€‚<br>è¿˜æœ‰å‡ é›†ovaè®²éšè—è§’è‰²å’Œåç»­å‰§æƒ…ä¹‹ç±»çš„ã€‚</p><p>åŠ¨ç”»åˆ¶ä½œæ˜¯ J.C. Staff, å¯¹æˆ‘æ¥è¯´å¾ˆå¥½ï¼Œå´›æ±Ÿç”±è¡£é…çš„ç”·ä¸»è§’æˆ‘ä¹Ÿå¾ˆå–œæ¬¢ï¼Œå¾ˆç¬¦åˆè§’è‰²çš„å½¢è±¡ã€‚</p><p>å¯¹æˆ‘æ¥è¯´ï¼Œä¸Kanonï¼ŒCLANNADç•¥é€Šä¸€ç­¹ï¼Œä½†ä¹Ÿå¾ˆå¥½çœ‹ï¼Œéå¸¸æ¨èï¼Œæˆ‘æ˜¯ä¸€å¤©å°±çœ‹å®Œäº†ç¬¬ä¸€å­£20å¤šé›†ï¼Œç¬¬äºŒå¤©æŠŠå‰©ä¸‹éƒ½çœ‹å®Œäº†ã€‚</p><h4 id="ã‚¯ãƒ‰ã‚ãµãŸãƒ¼">ã‚¯ãƒ‰ã‚ãµãŸãƒ¼</h4><p>ç®—æ˜¯ä¸åŒä¸–ç•Œçº¿çš„ä¸€ä¸ªå‰§åœºç‰ˆï¼Œå¥³ä¸»è§’å˜æˆäº†ã‚¯ãƒ‰ï¼Œå‰§æƒ…ä¹Ÿæ¯”è¾ƒçŸ­ï¼Œæ²¡æœ‰TVåŠ¨ç”»å¥½çœ‹ï¼Œä½†ä¹Ÿèƒ½çœ‹ï¼Œä¸å½±å“ä¸»å‰§å‰§æƒ…ã€‚</p><h3 id="Angel-Beats-1st-beat">Angel Beats! -1st beat-</h3><p>ä¸P.A. Worksåˆä½œçš„ç¬¬ä¸€éƒ¨åŸåˆ›TVåŠ¨ç”»ï¼Œå‰§æƒ…èƒŒæ™¯æ˜¯æ­»åä¸–ç•Œï¼Œä¸»è®²ç”·ä¸»ä¸€è¡Œäººå¯¹å¥³ä¸»çš„è¯¯è§£ï¼ŒåŠæœ€åçŸ¥é“çœŸç›¸åå¯¹ä¸»è§’ä¸€è¡Œäººçš„æ•‘èµã€‚<br>å‰§æƒ…è¿˜æ˜¯æ¯”è¾ƒå¥½çœ‹çš„ï¼Œä¹Ÿæ²¡æœ‰ç¡¬ä¼¤ï¼Œç›¸ä¿¡æ¯ä¸ªäººçœ‹å®Œä¹‹åéƒ½å¯¹äººçš„ä¸€ç”Ÿçš„æ„ä¹‰æœ‰ä¸åŒçœ‹æ³•ï¼Œç›¸ä¿¡ä¹Ÿèƒ½è®©ä¸å°‘äººå†³å®šè‡ªå·±ä»Šååº”è¯¥å¦‚ä½•æ´»ä¸‹å»ã€‚</p><p>æ¯”ä¸ä¸ŠKeyç¤¾è‡ªå·±çš„ä½œå“ï¼Œä½†ä¹Ÿæ¯”å¦å¤–ä¸¤éƒ¨åŸåˆ›åŠ¨ç”»å¥½çœ‹ä¸”æœ‰æ„ä¹‰ï¼Œå€¼å¾—ä¸€çœ‹ã€‚</p><h3 id="Kanon">Kanon</h3><p>è¿™éƒ¨ç®—æ˜¯ä¸»è®²ç”·ä¸»å¯¹å‡ ä½å¥³ä¸»çš„æ•‘èµï¼ˆé™¤æ°´ç€¬åé›ªï¼‰ï¼Œãªã‚†ãçš„å‰§æƒ…å®åœ¨æ˜¯å¤ªçŸ­äº†ï¼Œä¹Ÿæ²¡æœ‰å…¶ä»–å‡ ä½å¥³ä¸»è§’çš„å¥½çœ‹ï¼Œè‡³å°‘TVåŠ¨ç”»æ˜¯è¿™æ ·çš„ã€‚<br>è®©æˆ‘å°è±¡æœ€æ·±åˆ»çš„æ˜¯æ²¢æ¸¡çœŸç´ï¼Œå°¤å…¶æ˜¯é£¯å¡šé›…å¼“çš„é…éŸ³å®åœ¨æ˜¯å¤ªå®Œç¾äº†ï¼Œå¯èƒ½å› ä¸ºæˆ‘å®¶é‡Œä¹Ÿæœ‰å…»çŒ«ï¼Œæ‰€ä»¥ä¼šæœ‰åŒæ„Ÿï¼Œå–œæ¬¢çŒ«ï¼Œä½†æ¯æ¬¡çŒ«æ’’å¨‡ï¼Œä¸çŸ¥é“æ˜¯å› ä¸ºä»–ç”Ÿç—…äº†ï¼Œè¿˜æ˜¯å•çº¯çš„æ’’å¨‡ï¼Œå¾ˆè®©äººæ‹…å¿ƒã€‚<br>å› ä¸ºè¿™éƒ¨ç®—æ˜¯æŒ‰ç…§GALçš„æ¨¡å¼æ”¹ç¼–çš„ï¼Œæœ‰äº›åœ°æ–¹å¯èƒ½æ¯”è¾ƒç”Ÿç¡¬ï¼Œä½†æˆ‘è¿˜æ˜¯éå¸¸å–œæ¬¢è¿™éƒ¨ä½œå“ï¼Œæ¯”ä¸Šé¢çš„ãƒªãƒˆãƒ«ãƒã‚¹ã‚¿ãƒ¼ã‚ºå’ŒAngel Beatséƒ½è¦å–œæ¬¢ã€‚</p><h3 id="Air">Air</h3><p>è¿™éƒ¨å‰æœŸå’ŒKanonæ¯”è¾ƒåƒï¼Œä¹Ÿæ˜¯è®²å¯¹å‡ ä½å¥³ä¸»çš„æ•‘èµï¼Œä½†æ•´ä¸ªå‰§æƒ…çš„è®¾å®šå®Œå…¨å˜äº†ã€‚<br>ä¸»é¢˜æ›²æ˜¯å¾ˆå¥½å¬ï¼Œä¹Ÿå¾ˆå‡ºåï¼Œä½†åé¢çš„å‰§æƒ…ï¼Œè¯´å®è¯ï¼Œæˆ‘æœ‰ç‚¹éš¾ä»¥æ¥å—ã€‚<br>ä¸”è¿™éƒ¨ç®—æ˜¯å”¯ä¸€ä¸€éƒ¨Keyç¤¾çš„TVåŠ¨ç”»ä¸­ä»¥æ‚²å‰§ç»“å°¾çš„åŠ¨ç”»ï¼Œå…¶ä»–å‡ éƒ¨è™½ç„¶ä¹Ÿå¾ˆæ„ŸåŠ¨ï¼Œä½†éƒ½æ˜¯å–œå‰§ç»“å°¾ã€‚<br>å½“ç„¶è¿™éƒ¨ä¹Ÿå€¼å¾—ä¸€çœ‹ï¼Œæ¯”å¤§éƒ¨åˆ†åŠ¨ç”»è¿˜æ˜¯å¥½çœ‹çš„ã€‚</p><h3 id="ç¥æ§˜ã«ãªã£ãŸæ—¥">ç¥æ§˜ã«ãªã£ãŸæ—¥</h3><p>ä¸P.A. Worksåˆä½œçš„ç¬¬ä¸‰éƒ¨åŸåˆ›TVåŠ¨ç”»ã€‚<br>è¿™éƒ¨å‰æœŸå¾ˆæ­£å¸¸ï¼Œå¯ä»¥å½“ä½œæ™®é€šçš„æ—¥å¸¸åŠ¨ç”»ï¼ŒåæœŸç›´æ¥å´©æ‰äº†ï¼Œå»ºè®®ç›´æ¥å¿½ç•¥åé¢å‡ é›†ï¼Œæ²¡æœ‰çœ‹çš„å¿…è¦ã€‚<br>å‰é¢å‡ é›†å¯ä»¥çœ‹ï¼Œåé¢å‡ é›†ä¸æ¨èçœ‹ã€‚</p><h3 id="ã‹ããªã©">ã‹ããªã©</h3><p>Keyç¤¾è‡ªå·±çš„æ³¡é¢ç•ªã€‚<br>ä¸»è®²å„ç§åœ°ç‹±ç¬‘è¯ï¼Œå£°ä¼˜æ¢—ï¼Œå‰§æƒ…æ¢—ä»€ä¹ˆçš„ï¼Œç›¸å½“æ¨èçœ‹ï¼Œå‰ææ˜¯æ˜¯æŠŠKeyè‡ªå·±ä½œå“çš„TVåŠ¨ç”»å…¨éƒ¨çœ‹å®ŒåŠ ä¸ŠAngel Beatsã€‚</p><h2 id="P-A-Works">P.A. Works</h2><p>P.A. Worksçš„å‡ ä¹æ‰€æœ‰åŸåˆ›åŠ¨ç”»éƒ½å¾ˆæ¨èï¼š</p><ul><li>true tears</li><li>èŠ±å’²ãã„ã‚ã¯</li><li>TARI TARI</li><li>ã‚°ãƒ©ã‚¹ãƒªãƒƒãƒ—</li><li>è‰²ã¥ãä¸–ç•Œã®æ˜æ—¥ã‹ã‚‰</li><li>ã‚µã‚¯ãƒ©ã‚¯ã‚¨ã‚¹ãƒˆ</li><li>ç™½ã„ç ‚ã®ã‚¢ã‚¯ã‚¢ãƒˆãƒ¼ãƒ—</li><li>å‡ªã®ã‚ã™ã‹ã‚‰</li></ul><h3 id="true-tears">true tears</h3><p>true tearsæ˜¯PAçš„ç¬¬ä¸€éƒ¨åŸåˆ›åŠ¨ç”»ï¼Œä¹Ÿæ˜¯æˆ‘ç›®å‰çœ‹è¿‡çš„æ‰€æœ‰çš„PAçš„ä½œå“ä¸­æœ€å–œæ¬¢çš„ä¸€éƒ¨ã€‚<br>å‰§æƒ…å¤§æ¦‚å°±æ˜¯ä¸‰å¥³ä¸»éƒ½å–œæ¬¢ç”·ä¸»ï¼Œæœ€åæŸä¸ªäººçš„èƒœåˆ©ï¼Œè€Œä¸”ç»“å±€å¯¹æˆ‘æ¥è¯´æ˜¯éå¸¸æ­£å¸¸çš„ä¸€ä¸ªèµ°å‘ï¼Œæ•´ä¸ªåŠ¨ç”»çš„åˆ¶ä½œéƒ½å¾ˆç²¾è‡´ï¼ŒåŒ…æ‹¬äººç‰©çš„åŠ¨ä½œç»†èŠ‚ï¼Œé…éŸ³ç­‰æˆ‘éƒ½å¾ˆå–œæ¬¢ã€‚<br>éå¸¸æ¨èçš„ä¸€éƒ¨ä½œå“ã€‚</p><h3 id="èŠ±å’²ãã„ã‚ã¯">èŠ±å’²ãã„ã‚ã¯</h3><p>PAæ‰“å·¥ç³»åˆ—çš„ç¬¬ä¸€éƒ¨ï¼Œä¸»è®²ä»²å±…è¿™ä¸ªèŒä¸šï¼Œé™¤äº†å‰é¢å‡ é›†ï¼Œåé¢æ˜¯çœŸçš„ä½“ç°è¿™ä¸ªèŒä¸šçš„é­…åŠ›ä¹‹å¤„ï¼Œä¹Ÿæœ‰youtubeçš„è¯„è®ºè¯´è‡ªå·±çœ‹å®Œè¿™éƒ¨TVåŠ¨ç”»åå†³å®šæˆä¸ºä»²å±…ã€å¹¶ä¸”æœ€åçœŸçš„å®ç°äº†ã€‚<br>å…¶ä¸­æœ‰å‡ é›†å…³äºå¥³ä¸»çš„çˆ±æƒ…æ¯”è¾ƒç¡¬ï¼Œç®—æ˜¯è¿™éƒ¨çš„ç¡¬ä¼¤ï¼Œä¸è¿‡æ•´éƒ¨çœ‹èµ·æ¥æ˜¯çœŸçš„å¥½çœ‹ï¼Œæˆ‘ç”¨äº†ä¸€æ•´å¤©å°±çœ‹å®Œäº†ï¼Œå®Œå…¨åœä¸ä¸‹æ¥ã€‚<br>éå¸¸æ¨èã€‚</p><h3 id="TARI-TARI">TARI TARI</h3><p>ä¸»è®²å‹æƒ…ï¼Œè®²äº†ä¸»è§’ä¸€è¡Œäººï¼Œé¢å¯¹è‡ªå·±æœªæ¥ä½•å»ä½•ä»çš„çº ç»“ï¼Œæœ‰äººæ¯”è¾ƒé¡ºåˆ©ï¼Œæœ‰äººå›°éš¾é‡é‡æœ€åä¹Ÿæ²¡æœ‰æ”¾å¼ƒï¼Œä½†æ˜¯æ¯”è¾ƒçŸ­ï¼Œåªæœ‰13é›†ï¼Œå‰§æƒ…æ— ç¡¬ä¼¤ã€‚</p><h3 id="ã‚°ãƒ©ã‚¹ãƒªãƒƒãƒ—">ã‚°ãƒ©ã‚¹ãƒªãƒƒãƒ—</h3><p>è¿™éƒ¨æ¯”è¾ƒæ„è¯†æµï¼Œä¸»è®²çˆ±æƒ…ï¼Œæ¯”è¾ƒçœ‹äººï¼Œæˆ‘æ˜¯æ¯”è¾ƒå–œæ¬¢çš„ã€‚</p><h3 id="è‰²ã¥ãä¸–ç•Œã®æ˜æ—¥ã‹ã‚‰">è‰²ã¥ãä¸–ç•Œã®æ˜æ—¥ã‹ã‚‰</h3><p>è¿™éƒ¨æœ‰å‹æƒ…ï¼Œæœ‰çˆ±æƒ…ï¼Œè®²äº†å¥³ä¸»è¢«å¥¶å¥¶ä¼ é€å›å¥¶å¥¶é«˜ä¸­æ—¶ä»£ä¹‹åï¼Œç»å†ç§ç§ä¹‹åæœ‰æ‰€æ”¶è·ï¼Œä¸”è¢«ç”·ä¸»æ‹¯æ•‘ï¼Œè™½ç„¶æœ€åä¸å¾—ä¸å›åˆ°è‡ªå·±æ‰€å¤„çš„æ—¶ä»£ã€‚<br>å¥³ä¸»çš„äººè®¾ä¹Ÿå¾ˆå¯çˆ±ï¼Œè¿™éƒ¨æˆ‘ä¹Ÿéå¸¸å–œæ¬¢ã€‚</p><h3 id="ç™½ã„ç ‚ã®ã‚¢ã‚¯ã‚¢ãƒˆãƒ¼ãƒ—">ç™½ã„ç ‚ã®ã‚¢ã‚¯ã‚¢ãƒˆãƒ¼ãƒ—</h3><p>æ‰“å·¥ç³»åˆ—çš„å…¶ä¸­ä¸€éƒ¨ï¼Œæ˜¯è¿‘å‡ å¹´çš„ä½œå“ï¼Œä¹Ÿæ˜¯é‚£æ—¶ä¸€é›†ä¸€é›†è¿½ç€çœ‹çš„ã€‚<br>ä¸»è§’ä¸€è¡Œäººé¢å¯¹ä¸å¾—ä¸ä½œå‡ºçš„å†³å®šï¼Œæœ€åèµ°ä¸Šè‡ªå·±é“è·¯ï¼Œç›¸ä¿¡å¤§å®¶åœ¨äººç”Ÿä¸­ä¼šé‡åˆ°å¾ˆå¤šè¿™ç§æ—¶å€™ï¼Œå°¤å…¶æ˜¯å·¥ä½œåï¼Œç›¸ä¿¡ä¸å°‘äººæ„Ÿå—æ›´æ·±ã€‚<br>ä¹Ÿæ˜¯ä¸€éƒ¨å¾ˆæœ‰æ„ä¹‰çš„TVåŠ¨ç”»ï¼Œæ¨èçœ‹ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç›®å‰æˆ‘åªä¼šè®°å½•æœ€è¿‘çœ‹äº†ä¸ªï¼Œæœ‰äº›çœ‹çš„æ¯”è¾ƒæ—©çš„å°±ä¸è®°å½•äº†ï¼Œè®°å¿†ä¹Ÿæ¯”è¾ƒæ¨¡ç³Šã€‚&lt;/p&gt;
&lt;h2 id=&quot;è‡ªå®šä¹‰ç¥å‰§ï¼ˆä¸ªäººä¸»è§‚å†³å®šï¼‰&quot;&gt;è‡ªå®šä¹‰ç¥å‰§ï¼ˆä¸ªäººä¸»è§‚å†³å®šï¼‰&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;CLANNAD&lt;/li&gt;
&lt;li&gt;Kanon&lt;/li&gt;
&lt;li&gt;ãƒªãƒˆãƒ«ãƒã‚¹ã‚¿ãƒ¼ã‚º!&lt;/li&gt;
&lt;li&gt;Air&lt;/li&gt;
&lt;li&gt;Angel Beats! -1st beat-&lt;/li&gt;
&lt;li&gt;ã‹ããªã©&lt;/li&gt;
&lt;li&gt;true tears&lt;/li&gt;
&lt;li&gt;èŠ±å’²ãã„ã‚ã¯&lt;/li&gt;
&lt;li&gt;TARI TARI&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="å½±è¯„" scheme="https://asutorufa.github.io/categories/%E5%BD%B1%E8%AF%84/"/>
    
    
    <category term="ã‚¢ãƒ‹ãƒ¡" scheme="https://asutorufa.github.io/tags/%E3%82%A2%E3%83%8B%E3%83%A1/"/>
    
    <category term="åŠ¨æ¼«" scheme="https://asutorufa.github.io/tags/%E5%8A%A8%E6%BC%AB/"/>
    
    <category term="å½±è¯„" scheme="https://asutorufa.github.io/tags/%E5%BD%B1%E8%AF%84/"/>
    
  </entry>
  
  <entry>
    <title>CRI å®¹å™¨è¿è¡Œæ—¶æ¥å£</title>
    <link href="https://asutorufa.github.io/posts/8144a111/"/>
    <id>https://asutorufa.github.io/posts/8144a111/</id>
    <published>2023-03-01T14:55:45.000Z</published>
    <updated>2023-03-01T14:55:45.000Z</updated>
    
    <content type="html"><![CDATA[<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">+----------------+       +-----------------+|  kubelet       |       |   CRI shim      || +-----------+  |       |  +-----------+  |      +-----------+| |grpc client|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>-|-------|-</span><span class="token punctuation">></span></span>|grpc server|  |<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>----</span><span class="token punctuation">></span></span>| container || +-----------+  |       |  +-----------+  |      |  runtime  |+----------------+       +-----------------+      +-----------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="CRI-shim">CRI shim</h2><ul><li>cri-o</li><li>cri-containerd</li><li>rkt</li><li>frakti</li><li>docker (cri-dockerd)</li></ul><h2 id="container-runtime">container runtime</h2><ul><li>gvisor</li><li>kata containers</li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;+----------------+      </summary>
        
      
    
    
    
    <category term="Kubernetes" scheme="https://asutorufa.github.io/categories/Kubernetes/"/>
    
    
    <category term="Kubernetes" scheme="https://asutorufa.github.io/tags/Kubernetes/"/>
    
    <category term="CRI" scheme="https://asutorufa.github.io/tags/CRI/"/>
    
    <category term="container" scheme="https://asutorufa.github.io/tags/container/"/>
    
  </entry>
  
  <entry>
    <title>NATç±»å‹</title>
    <link href="https://asutorufa.github.io/posts/14e0ef9e/"/>
    <id>https://asutorufa.github.io/posts/14e0ef9e/</id>
    <published>2023-02-14T10:48:24.000Z</published>
    <updated>2023-02-14T10:48:24.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="NAT-Mapping">NAT Mapping</h2><p>æè¿°NATåœ¨æ˜ å°„ç½‘ç»œå†…ä¸»æœºåœ°å€çš„è¡Œä¸º</p><pre class="language-markdown" data-language="markdown"><code class="language-markdown">computer(192.168.100.2:30086) -> NAT -> 1.1.1.1:2345</code></pre><p>Endpoint-Independent Mapping</p><p>ç½‘ç»œå†…ä¸»æœºåœ¨é€šè¿‡åŒä¸€ç›‘å¬udpåœ°å€å‘ä¸åŒåœ°å€å’Œä¸åŒç«¯å£å‘åŒ…æ—¶, NATä½¿ç”¨åŒä¸€æ˜ å°„åœ°å€å‘å¤–å‘åŒ…</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">å¦‚ ç½‘ç»œå†…ä¸€ä¸»æœºç›‘å¬äº†ä¸€udpåœ°å€ 192.168.100.2:30086æ­¤æ—¶ä¸»æœºå‘ 1.0.0.1:53 å‘é€udpåŒ…,             NATä½¿ç”¨ 1.1.1.1:2345 å‘ 1.0.0.1:53 å‘åŒ…ä¸»æœºåˆå‘   1.0.0.1:63 å‘é€udpåŒ…,             NATä¹Ÿä½¿ç”¨ 1.1.1.1:2345 å‘ 1.0.0.1:63 å‘åŒ…ä¸»æœºåˆå‘   8.8.8.8:53 å‘é€udpåŒ…,             NATä¹Ÿä½¿ç”¨ 1.1.1.1:2345 å‘ 8.8.8.8:53 å‘åŒ…è¿™ç§æ— è®ºç›®æ ‡åœ°å€å’Œç«¯å£æ˜¯ä»€ä¹ˆéƒ½ä½¿ç”¨åŒä¸€åœ°å€è¿›è¡Œå‘åŒ…çš„NATè¡Œä¸ºå°±æ˜¯ Endpoint-Independent Mapping,è·Ÿæ²¡æœ‰NATä¸€æ ·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Address-Dependent Mapping</p><p>ç½‘ç»œå†…ä¸»æœºåœ¨é€šè¿‡åŒä¸€ç›‘å¬udpåœ°å€å‘åŒä¸€åœ°å€å’Œä¸åŒç«¯å£å‘åŒ…æ—¶, NATä½¿ç”¨åŒä¸€æ˜ å°„åœ°å€å‘å¤–å‘åŒ…</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">å¦‚ ç½‘ç»œå†…ä¸€ä¸»æœºç›‘å¬äº†ä¸€udpåœ°å€ 192.168.100.2:30086æ­¤æ—¶ä¸»æœºå‘ 1.0.0.1:53 å‘é€udpåŒ…,             NATä½¿ç”¨ 1.1.1.1:2345 å‘ 1.0.0.1:53 å‘åŒ…ä¸»æœºåˆå‘   1.0.0.1:63 å‘é€udpåŒ…,             NATä¹Ÿå°†ä½¿ç”¨ 1.1.1.1:2345 å‘ 1.0.0.1:63 å‘åŒ…ä¸»æœºåˆå‘   8.8.8.8:53 å‘é€udpåŒ…,             æ­¤æ—¶NATå°†ä½¿ç”¨ä¸€æ–°æ˜ å°„åœ°å€ 1.1.1.1:5678 å‘ 8.8.8.8:53 å‘åŒ…è¿™ç§ä¾èµ–ç›®æ ‡åœ°å€ä½†ä¸ä¾èµ–ç«¯å£çš„NATæ˜ å°„è¡Œä¸ºå°±æ˜¯ Address-Dependent Mapping<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><p>Address and Port-Dependent Mapping</p><p>ç½‘ç»œå†…ä¸»æœºåœ¨é€šè¿‡åŒä¸€ç›‘å¬udpåœ°å€å‘åŒä¸€åœ°å€å’ŒåŒä¸€ç«¯å£å‘åŒ…æ—¶, NATä½¿ç”¨åŒä¸€æ˜ å°„åœ°å€å‘å¤–å‘åŒ…</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">å¦‚ ç½‘ç»œå†…ä¸€ä¸»æœºç›‘å¬äº†ä¸€udpåœ°å€ 192.168.100.2:30086æ­¤æ—¶ä¸»æœºå‘ 1.0.0.1:53 å‘é€udpåŒ…,             NATä½¿ç”¨ 1.1.1.1:2345 å‘ 1.0.0.1:53 å‘åŒ…ä¸»æœºåˆå‘   1.0.0.1:63 å‘é€udpåŒ…,            NATå°†ä½¿ç”¨ä¸€æ–°æ˜ å°„åœ°å€ 1.1.1.1:3789 å‘ 1.0.0.1:63 å‘åŒ…ä¸»æœºåˆå‘   8.8.8.8:53 å‘é€udpåŒ…,           æ­¤æ—¶NATå°†ä½¿ç”¨ä¸€æ–°æ˜ å°„åœ°å€ 1.1.1.1:5678 å‘ 8.8.8.8:53 å‘åŒ…ä¸»æœºåˆå‘ 1.0.0.1:53 å‘é€udpåŒ…,            NATä½¿ç”¨ç›¸åŒåœ°å€ 1.1.1.1:2345 å‘ 1.0.0.1:53 å‘åŒ…è¿™ç§åŒæ—¶ä¾èµ–ç›®æ ‡åœ°å€å’Œç«¯å£çš„NATæ˜ å°„è¡Œä¸ºå°±æ˜¯ Address and Port-Dependent Mapping,è¿™ç§NATç±»å‹æ˜¯æ²¡æœ‰åŠæ³•è¿›è¡ŒNATç©¿é€çš„<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="NAT-Filtering">NAT Filtering</h2><p>æè¿°å½“NATä¸ºç½‘ç»œå†…ä¸»æœºæ˜ å°„ä¸€åœ°å€åï¼Œäº’è”ç½‘å†…ä¸»æœºå‘æ˜ å°„åœ°å€å‘é€æ•°æ®æ—¶ï¼Œå°†å…è®¸å“ªäº›åœ°å€é€šè¿‡çš„è¡Œä¸º</p><p>Endpoint-Independent Filtering</p><p>A NAT device employing the combination of â€œEndpoint-Independent<br>Mappingâ€ and â€œEndpoint-Independent Filteringâ€ will accept incoming<br>traffic to a mapped public port from ANY external endpoint on the<br>public network.</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">å¦‚ ç½‘ç»œå†…ä¸€ä¸»æœºç›‘å¬äº†ä¸€udpåœ°å€ 192.168.100.2:30086, NATå°†å…¶æ˜ å°„åˆ° 1.1.1.1:2345æ— è®ºå¤–éƒ¨ä»»ä½•åœ°å€å’Œç«¯å£çš„ä¸»æœºå‘1.1.1.1:2345å‘åŒ…, NATéƒ½å°†ä¼šå°†å…¶è½¬å‘åˆ° 192.168.100.2:30086<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>Address-Dependent Filtering<br>for receiving packets from a specific external endpoint, it is necessary for the internal endpoint to<br>send packets first to that specific external endpointâ€™s IP address.</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">å¦‚ ç½‘ç»œå†…ä¸€ä¸»æœºç›‘å¬äº†ä¸€udpåœ°å€ 192.168.100.2:30086, NATå°†å…¶æ˜ å°„åˆ° 1.1.1.1:2345å¦‚æœéœ€è¦NATå°†å¤–éƒ¨æ•°æ®åŒ…è½¬å‘åˆ°ä¸»æœºä¸Š,å¿…é¡»å…ˆç”±ä¸»æœºå‘æŸä¸€åœ°å€å‘åŒ…, NATéƒ½ä¼šå°†æ”¶åˆ°çš„åŒä¸€åœ°å€(æ‰€æœ‰ç«¯å£)çš„æ•°æ®åŒ…è½¬å‘åˆ°ä¸»æœºä¸Š<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Address and Port-Dependent Filtering</p><p>for receiving  packets from a specific external endpoint, it is necessary for<br>the internal endpoint to send packets first to that external endpointâ€™s IP address and port.</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">å¦‚ ç½‘ç»œå†…ä¸€ä¸»æœºç›‘å¬äº†ä¸€udpåœ°å€ 192.168.100.2:30086, NATå°†å…¶æ˜ å°„åˆ° 1.1.1.1:2345å¦‚æœéœ€è¦NATå°†å¤–éƒ¨æ•°æ®åŒ…è½¬å‘åˆ°ä¸»æœºä¸Šå¿…é¡»å…ˆç”±ä¸»æœºå‘æŸä¸€åœ°å€å’ŒæŸä¸€ç«¯å£å‘åŒ…NATéƒ½ä¼šå°†æ”¶åˆ°çš„åŒä¸€åœ°å€å’ŒåŒä¸€ç«¯å£çš„æ•°æ®åŒ…è½¬å‘åˆ°ä¸»æœºä¸Šè¿™ç§NATç±»å‹æ˜¯æ²¡å‘è¿›è¡ŒNATç©¿é€çš„<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="NATç©¿é€">NATç©¿é€</h2><p>æ˜¯å¦å¯ä»¥è¿›è¡ŒNATç©¿é€, åŒæ—¶ä¾èµ–NAT Mappingå’ŒNAT Filtering</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">Mappingå’ŒFilteringéƒ½ä¸ºEndpoint-Independent Mapping,         è¿™ç§æ˜¯ç™¾åˆ†ä¹‹ç™¾å¯ä»¥è¿›è¡Œç©¿é€Mappingä¸ºEndpoint-Independent Mapping, Filteringä¸ºAddress and Port-Dependent Filtering,         è¿™ç§ä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œç©¿é€çš„ä½†å¦‚æœMappingå’ŒFilteringéƒ½ä¸ºAddress and Port-Dependent Filtering,         è¿™ç§æ˜¯å¿…ä¸å¯èƒ½ç©¿é€<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;NAT-Mapping&quot;&gt;NAT Mapping&lt;/h2&gt;
&lt;p&gt;æè¿°NATåœ¨æ˜ å°„ç½‘ç»œå†…ä¸»æœºåœ°å€çš„è¡Œä¸º&lt;/p&gt;
&lt;pre class=&quot;language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;computer(192.168.100.2:30086) -&gt; NAT -&gt; 1.1.1.1:2345&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Endpoint-Independent Mapping&lt;/p&gt;
&lt;p&gt;ç½‘ç»œå†…ä¸»æœºåœ¨é€šè¿‡åŒä¸€ç›‘å¬udpåœ°å€å‘ä¸åŒåœ°å€å’Œä¸åŒç«¯å£å‘åŒ…æ—¶, NATä½¿ç”¨åŒä¸€æ˜ å°„åœ°å€å‘å¤–å‘åŒ…&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;å¦‚ ç½‘ç»œå†…ä¸€ä¸»æœºç›‘å¬äº†ä¸€udpåœ°å€ 192.168.100.2:30086

æ­¤æ—¶ä¸»æœºå‘ 1.0.0.1:53 å‘é€udpåŒ…,
             NATä½¿ç”¨ 1.1.1.1:2345 å‘ 1.0.0.1:53 å‘åŒ…
ä¸»æœºåˆå‘   1.0.0.1:63 å‘é€udpåŒ…,
             NATä¹Ÿä½¿ç”¨ 1.1.1.1:2345 å‘ 1.0.0.1:63 å‘åŒ…
ä¸»æœºåˆå‘   8.8.8.8:53 å‘é€udpåŒ…,
             NATä¹Ÿä½¿ç”¨ 1.1.1.1:2345 å‘ 8.8.8.8:53 å‘åŒ…

è¿™ç§æ— è®ºç›®æ ‡åœ°å€å’Œç«¯å£æ˜¯ä»€ä¹ˆéƒ½ä½¿ç”¨åŒä¸€åœ°å€è¿›è¡Œå‘åŒ…çš„NATè¡Œä¸ºå°±æ˜¯ Endpoint-Independent Mapping,
è·Ÿæ²¡æœ‰NATä¸€æ ·&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Address-Dependent Mapping&lt;/p&gt;
&lt;p&gt;ç½‘ç»œå†…ä¸»æœºåœ¨é€šè¿‡åŒä¸€ç›‘å¬udpåœ°å€å‘åŒä¸€åœ°å€å’Œä¸åŒç«¯å£å‘åŒ…æ—¶, NATä½¿ç”¨åŒä¸€æ˜ å°„åœ°å€å‘å¤–å‘åŒ…&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;å¦‚ ç½‘ç»œå†…ä¸€ä¸»æœºç›‘å¬äº†ä¸€udpåœ°å€ 192.168.100.2:30086

æ­¤æ—¶ä¸»æœºå‘ 1.0.0.1:53 å‘é€udpåŒ…,
             NATä½¿ç”¨ 1.1.1.1:2345 å‘ 1.0.0.1:53 å‘åŒ…
ä¸»æœºåˆå‘   1.0.0.1:63 å‘é€udpåŒ…,
             NATä¹Ÿå°†ä½¿ç”¨ 1.1.1.1:2345 å‘ 1.0.0.1:63 å‘åŒ…
ä¸»æœºåˆå‘   8.8.8.8:53 å‘é€udpåŒ…,
             æ­¤æ—¶NATå°†ä½¿ç”¨ä¸€æ–°æ˜ å°„åœ°å€ 1.1.1.1:5678 å‘ 8.8.8.8:53 å‘åŒ…

è¿™ç§ä¾èµ–ç›®æ ‡åœ°å€ä½†ä¸ä¾èµ–ç«¯å£çš„NATæ˜ å°„è¡Œä¸ºå°±æ˜¯ Address-Dependent Mapping&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="UDP" scheme="https://asutorufa.github.io/tags/UDP/"/>
    
    <category term="NAT" scheme="https://asutorufa.github.io/tags/NAT/"/>
    
  </entry>
  
  <entry>
    <title>TUF GAMING B550M-PLUS WIFI II lm_sensors</title>
    <link href="https://asutorufa.github.io/posts/fe953398/"/>
    <id>https://asutorufa.github.io/posts/fe953398/</id>
    <published>2022-11-11T10:17:44.000Z</published>
    <updated>2022-11-11T10:17:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>the sensors not show fan and voltage<br>itâ€™s a kernel bug now <a href="https://bugzilla.kernel.org/show_bug.cgi?id=204807">Hardware monitoring sensor nct6798d doesnâ€™t work unless acpi_enforce_resources=lax is enabled</a><br>need wait add the motherboard name to linux kernel code list <a href="https://github.com/torvalds/linux/blob/4bbf3422df78029f03161640dcb1e9d1ed64d1ea/drivers/hwmon/nct6775-platform.c#L1044">linux/drivers/hwmon/nct6775-platform.c</a></p><h2 id="temporary-measure">temporary measure</h2><p>add</p><pre class="language-markdown" data-language="markdown"><code class="language-markdown">acpi_enforce_resources=lax</code></pre><p>to linux boot parameter</p><p>load nct6775 kernel module</p><pre class="language-bash" data-language="bash"><code class="language-bash">modprobe <span class="token parameter variable">-v</span> nct6775</code></pre><p>run <code>sensors-detect --auto</code>.</p><p>finally, you will see nct6798-isa-* in sensors.</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;the sensors not show fan and voltage&lt;br&gt;
itâ€™s a kernel bug now &lt;a href=&quot;https://bugzilla.kernel.org/show_bug.cgi?id=204807&quot;&gt;Hardware</summary>
        
      
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
  </entry>
  
  <entry>
    <title>ç§˜å¯†å…±äº«</title>
    <link href="https://asutorufa.github.io/posts/ce6c7d90/"/>
    <id>https://asutorufa.github.io/posts/ce6c7d90/</id>
    <published>2022-10-10T11:05:22.000Z</published>
    <updated>2022-10-10T11:05:22.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•">æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•</h2><p>å¯¹æŸä¸ªå¤šé¡¹å¼å‡½æ•°ï¼Œå·²çŸ¥æœ‰ç»™å®šçš„k + 1ä¸ªå–å€¼ç‚¹ï¼š<code>(x0,y0)...(xk,yk)</code><br>å‡è®¾ä»»æ„ä¸¤ä¸ªä¸åŒçš„xjéƒ½äº’ä¸ç›¸åŒï¼Œé‚£ä¹ˆåº”ç”¨æ‹‰æ ¼æœ—æ—¥æ’å€¼å…¬å¼æ‰€å¾—åˆ°çš„æ‹‰æ ¼æœ—æ—¥æ’å€¼å¤šé¡¹å¼ä¸ºï¼š</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">l0 = (((x-x1)(x-x2)...(x-xk))/((x0-x1)(x0-x2)...(x0-xk)))*y0    ...lk = ...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><code>f(x) = l0+l1...+lk</code>å³å¯æ±‚å‡ºå¤šé¡¹å¼</p><h3 id="example">example</h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">å·²çŸ¥3ä¸ªç‚¹(4,10)(5,5.25)(6,1)l0 = (((x-5)(x-6))/((4-5)(4-6))) <span class="token italic"><span class="token punctuation">*</span><span class="token content"> 10l1 = (((x-4)(x-6))/((5-4)(5-6))) </span><span class="token punctuation">*</span></span> 5.25l2 = (((x-4)(x-5))/((6-4)(6-5))) * 1f(x) = l0+l1+l2 = 1/4(x^2-28x+136)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Shamir-ç§˜å¯†å…±äº«">Shamir ç§˜å¯†å…±äº«</h2><p>ç”Ÿæˆ</p><span id="more"></span><ul><li>è®¾éœ€è¦ç”Ÿæˆwä¸ªå¯†é’¥ï¼Œè‡³å°‘éœ€è¦tä¸ªå¯†é’¥æ‰èƒ½ç®—å‡ºçœŸå®å¯†é’¥</li><li>é€‰æ‹©ä¸€ä¸ªæ•°Pï¼Œä¹‹åæ‰€æœ‰æ•°éƒ½éœ€è¦è¿›è¡Œæ¨¡è¿ç®—</li><li>è®¾ç½®çœŸå®å¯†é’¥K</li><li>éšæœºé€‰æ‹©t-1ä¸ªä¸å¤§äºPçš„æ•° <code>a0,a1...at-1</code></li><li>å¾—åˆ°å¤šé¡¹å¼ <code>f(x)=K+a0x+a1x^2...+at-1x^t</code></li><li>å°†<code>x=1.x=2...x=w</code>å¸¦å…¥å¤šé¡¹å¼å³å¯è·å¾—å¤šä¸ªå¯†é’¥<code>(1,k1)(2,k2)...(w,kw)</code></li></ul><p>è§£å¯†</p><ul><li>åˆ©ç”¨æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•å³å¯ç®—å‡ºå¤šé¡¹å¼</li><li>éœ€è¦å¸¦ä¸Šæ¨¡è®¡ç®—å¤šé¡¹å¼ï¼Œå¦‚æœè®¡ç®—å¤šé¡¹å¼æ—¶æœ‰é™¤æ³•éœ€è¦è¿›è¡Œè®¡ç®—æ¨¡ä¹˜é€†å…ƒ</li><li>å› ä¸ºåªéœ€è¦Kæ‰€ä»¥è®¡ç®—çš„æ—¶å€™å¯ä»¥ç›´æ¥x=0</li></ul><h3 id="eg1">eg1</h3><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">w=4,t=3,K=2,p=23ï¼Œé€‰æ‹©éšæœºæ•° a0=3, a1=2åŠ å¯†å¾—åˆ°å¤šé¡¹å¼ f(x) = (2 + 3x + 2x^2) mod 23f(1) = 2, f(2) = 16, f(3) = 6, f(4) = 0è·å¾—4ä¸ªå¯†é’¥(1,2)(2,16)(3,6)(4,0)è§£å¯†é€‰æ‹©å…¶ä¸­ä¸‰ä¸ªè¿›è¡Œè§£å¯†ï¼Œ(1,7)(3,6)(4,0)l0 = (((x-3)(x-4))/((1-3)(1-4)))*7l1 = (((x-1)(x-4))/((3-1)(3-4)))*6l2 = (((x-1)(x-3))/((4-1)(4-3)))*0å°†x=0å¸¦å…¥å¯å¾—l0 = 14l1 = -12l2 = 0å¯å¾—k = (l0+l1+l2) mod 23     = 2 mod 23     = 2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="eg2">eg2</h3><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">w=5,t=3,k=13,p=17,é€‰æ‹©éšæœºæ•°a0=10,a1=2åŠ å¯†å¾—åˆ°å¤šé¡¹å¼ f(x) = (13 + 10x + 2x^2) mod 17f(1) = 8, f(2) = 7, f(3) = 10, f(4) = 0, f(5) = 11è·å¾—5ä¸ªå¯†é’¥(1,8)(2,7)(3,10)(4,0)(5,11)è§£å¯†é€‰æ‹©å…¶ä¸­ä¸‰ä¸ªè¿›è¡Œè§£å¯†ï¼Œ(1,8)(2,7)(5,11)l0 = 11 * ( ((x-1)(x-2)) / ((5-1)(5-2)) )l1 = 7  * ( ((x-1)(x-5)) / ((2-1)(2-5)) )l2 = 8  * ( ((x-2)(x-5)) / ((1-2)(1-5)) )å°† x=0 å¸¦å…¥l0 = 22/12l1 = -140/12l2 = 240/12K = (l0+l1+l2) mod 17  = (61/6) mod 17  = (61 * 6^-1) mod 17 // 6^-1ä¸º6å…³äº17çš„æ¨¡ä¹˜é€†å…ƒä¸º3  = (61 * 3) mod 17   = 13<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸­å›½å‰©ä½™å®šç†">ä¸­å›½å‰©ä½™å®šç†</h2><p>example</p><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">w=5,t=3,K=117é€‰æ‹©wä¸ªd,è¦æ±‚å•è°ƒé€’å¢å¹¶ä¸¤ä¸¤äº’ç´ ,tä¸ªæœ€å°çš„dç›¸ä¹˜å¤§äºK,Kå¤§äºt-1ä¸ªæœ€å¤§dç›¸ä¹˜d1=4,d2=5,d3=7,d4=9,d5=11è®¡ç®— ki=Key mod di // = -> \equalk1 = 117 mod 4 = 1k2 = 117 mod 5 = 2k3 = 117 mod 7 = 5k4 = 117 mod 9 = 0k5 = 117 mod 11 = 7å³äº”ä¸ªå¯†é’¥(1,4),(2,5),(3,7),(0,9),(7,11)è§£å¯†é€‰å…¶ä¸­ä¸‰ä¸ªå¯†é’¥(1,4)(2,5)(3,7)å¯å¾—k mod 4 = 1k mod 5 = 2k mod 11 = 7åˆ†è§£ä¸ºk1 mod 4 = 1, k1 mod 5 = 0, k1 mod 11 = 0  -> 5 * 11 * x1 mod 4 = 1  -> x1 = 3  -> k1 = 55 * 3 = 165k2 mod 4 = 0, k2 mod 5 = 2, k2 mod 11 = 0  -> 4 * 11 * x2 mod 5 = 2  -> 44 * x2 * 2^-1 mod 5 = 1 // 2^-1 ä¸º2å…³äº5çš„æ¨¡ä¹˜é€†å…ƒ  -> 44 * x2 * 3 mod 5 = 1  -> 132 * x2 mod 5 = 1 // ç›¸å½“äºç®—132å…³äº5çš„æ¨¡ä¹˜é€†å…ƒ  -> x2 = 3  -> k2 = 44 * 3 = 132k3 mod 4 = 0, k3 mod 5 = 0, k3 mod 11 = 7  -> 4 * 5 * x3 mod 11 = 7  -> 20 * x3 * 7^-1 mod 11 = 1 // 7^-1 ä¸º7å…³äº11çš„æ¨¡ä¹˜é€†å…ƒ  -> 20 * x3 * 8 mod 11 = 1  -> 160 * x3 mod 11 = 1 // ç›¸å½“äºç®—160å…³äº11çš„æ¨¡ä¹˜é€†å…ƒ  -> x3 = 2  -> k3 = 40K = (k1 + k2 + k3) mod 4*5*11  = (165+132+40) mod 220  = 337 mod 220  = 117å¦ä¸€ç§ï¼šk1 mod 4 = 1, k1 mod 5 = 0, k1 mod 11 = 0  -> 1 * (k1 mod 4 = 1, k1 mod 5 = 0, k1 mod 11 = 0)   -> 5 * 11 * x1 mod 4 = 1  -> x1 = 3  -> k1 = 1 * 55 * 3 = 165k2 mod 4 = 0, k2 mod 5 = 2, k2 mod 11 = 0  -> 2 * (k2 mod 4 = 0, k2 mod 5 = 1, k2 mod 11 = 0)  -> 4 * 11 * x2 mod 5 = 1  -> x2 = 4  -> k2 2 * 44 * 4 = 352k3 mod 4 = 0, k3 mod 5 = 0, k3 mod 11 = 7  -> 7 * (k3 mod 4 = 0, k3 mod 5 = 0, k3 mod 11 = 1)  -> 4 * 5 * x3 mod 11 = 1  -> x3 = 5  -> k3 = 7 * 20 * 5 = 700K = (k1 + k2 + k3) mod (4*5*11)  = (165 + 352 + 700) mod 220  = 1217 mod 220  = 117<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><ul><li><a href="https://en.wikipedia.org/wiki/Shamir%27s_Secret_Sharing">Shamirâ€™s Secret Sharing - Wikipedia</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%8F%92%E5%80%BC%E6%B3%95">æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³• - Wikipedia</a></li><li><a href="https://zhuanlan.zhihu.com/p/95362628">è¶£è¯´å¯†ç å­¦ï¼ˆäº”ï¼‰ç§˜å¯†å…±äº«æ–¹æ¡ˆâ€”â€”shamir,ä¸­å›½å‰©ä½™å®šç†,Brickellå’ŒBlakley</a></li><li><a href="https://www.cnblogs.com/pyrie/p/sss_py.html">Shamirç§˜å¯†å…±äº«æ–¹æ¡ˆ (Python)</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•&quot;&gt;æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•&lt;/h2&gt;
&lt;p&gt;å¯¹æŸä¸ªå¤šé¡¹å¼å‡½æ•°ï¼Œå·²çŸ¥æœ‰ç»™å®šçš„k + 1ä¸ªå–å€¼ç‚¹ï¼š&lt;code&gt;(x0,y0)...(xk,yk)&lt;/code&gt;&lt;br&gt;
å‡è®¾ä»»æ„ä¸¤ä¸ªä¸åŒçš„xjéƒ½äº’ä¸ç›¸åŒï¼Œé‚£ä¹ˆåº”ç”¨æ‹‰æ ¼æœ—æ—¥æ’å€¼å…¬å¼æ‰€å¾—åˆ°çš„æ‹‰æ ¼æœ—æ—¥æ’å€¼å¤šé¡¹å¼ä¸ºï¼š&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;l0 = (((x-x1)(x-x2)...(x-xk))/((x0-x1)(x0-x2)...(x0-xk)))*y0
    ...
lk = ...&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;f(x) = l0+l1...+lk&lt;/code&gt;å³å¯æ±‚å‡ºå¤šé¡¹å¼&lt;/p&gt;
&lt;h3 id=&quot;example&quot;&gt;example&lt;/h3&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;å·²çŸ¥3ä¸ªç‚¹(4,10)(5,5.25)(6,1)

l0 = (((x-5)(x-6))/((4-5)(4-6))) &lt;span class=&quot;token italic&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token content&quot;&gt; 10
l1 = (((x-4)(x-6))/((5-4)(5-6))) &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;*&lt;/span&gt;&lt;/span&gt; 5.25
l2 = (((x-4)(x-5))/((6-4)(6-5))) * 1

f(x) = l0+l1+l2 = 1/4(x^2-28x+136)&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;Shamir-ç§˜å¯†å…±äº«&quot;&gt;Shamir ç§˜å¯†å…±äº«&lt;/h2&gt;
&lt;p&gt;ç”Ÿæˆ&lt;/p&gt;</summary>
    
    
    
    <category term="Crypto" scheme="https://asutorufa.github.io/categories/Crypto/"/>
    
    
    <category term="Crypto" scheme="https://asutorufa.github.io/tags/Crypto/"/>
    
    <category term="Shamir" scheme="https://asutorufa.github.io/tags/Shamir/"/>
    
  </entry>
  
  <entry>
    <title>ç¦»æ•£å¯¹æ•°é—®é¢˜</title>
    <link href="https://asutorufa.github.io/posts/1f299eb2/"/>
    <id>https://asutorufa.github.io/posts/1f299eb2/</id>
    <published>2022-08-15T10:03:28.000Z</published>
    <updated>2022-08-15T10:03:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ç½®çŸ¥è¯† æ¬§æ‹‰, æ¬§æ‹‰å®šç†, æ¨¡åå…ƒç´ (æ¨¡é€†å…ƒ) å¯å‚è§: <a href="/posts/f1a158c9/">RSAåŠ å¯†</a></p><h2 id="é˜¶">é˜¶</h2><p>ç”±æ¬§æ‹‰å®šç†å¯çŸ¥ï¼Œè‹¥n,aä¸ºæ­£æ•´æ•°ï¼Œä¸”n,aäº’ç´ ï¼ˆå³gcd(a,n)=1ï¼‰ï¼Œåˆ™ a^phi(n) = 1 (mod n)ã€‚<br>å› æ­¤æ»¡è¶³åŒä½™å¼ a^m = 1 (mod n)çš„<strong>æœ€å°æ­£æ•´æ•°m</strong>å­˜åœ¨ï¼Œè¿™ä¸ªmç§°ä½œaæ¨¡nçš„é˜¶ï¼Œè®°ä½œdelta(n,a)ã€‚</p><h2 id="åŸæ ¹">åŸæ ¹</h2><p>è‹¥n,aä¸ºæ­£æ•´æ•°ï¼Œä¸”n,aäº’è´¨ï¼Œå¦‚æœ gcd(a,n)=1 ä¸” delta(n,a) = phi(n), åˆ™ç§°aä¸ºæ¨¡nçš„åŸæ ¹.<br>ç®€å•æ¥è¯´ï¼Œä½¿è¯¥å¼æˆç«‹çš„då¯èƒ½æœ‰å¾ˆå¤šä¸ªå€¼ï¼Œåˆç”±æ¬§æ‹‰å®šç†å¯çŸ¥delta(n,a) = phi(n)ä¸€å®šæ˜¯æ»¡è¶³çš„ï¼Œå¦‚æœæ­¤æ—¶æ‰€æœ‰delta(n,a)çš„å¯èƒ½å–å€¼ä¸­phi(n)æ˜¯æœ€å°çš„ï¼Œé‚£ä¹ˆå°±ç§°aä¸ºæ¨¡nçš„åŸæ ¹ã€‚</p><p>eg:</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">a=3, n=7å¯çŸ¥ 3,7äº’è´¨, æ‰€ä»¥phi(n) = 7 - 1 = 6å¯å¾— 3^6 = 1 (mod 7)è®¡ç®—3^1, 3^2, 3^3, 3^4, 3^5 (mod 7) éƒ½ä¸ç­‰äº1, æ‰€ä»¥ 6ä¸ºæ»¡è¶³ a^x = 1 (mod n)çš„æœ€å°æ­£æ•´æ•°delta(7,3) = 6 = phi(7), å¯å¾— 3ä¸ºæ¨¡7çš„åŸæ ¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ€§è´¨">æ€§è´¨</h3><span id="more"></span><ul><li>delta(n,a)ä¸€å®šèƒ½æ•´é™¤phi(n)</li><li>è‹¥ä¸€ä¸ªæ•°mæœ‰åŸæ ¹, åˆ™å®ƒçš„åŸæ ¹ä¸ªæ•°ä¸ºphi(phi(m))</li></ul><h2 id="ç¦»æ•£å¯¹æ•°">ç¦»æ•£å¯¹æ•°</h2><p>å¦‚æœå¯¹äºä¸€ä¸ªæ•´æ•°bå’Œè´¨æ•°pçš„ä¸€ä¸ªåŸæ ¹aï¼Œå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå”¯ä¸€çš„æŒ‡æ•°iï¼Œä½¿å¾—ï¼š<br><strong>b= a^i (mod p), å…¶ä¸­ 0 &lt;= i &lt;= p-1</strong><br>æˆç«‹ï¼Œé‚£ä¹ˆæŒ‡æ•°iç§°ä¸ºbçš„ä»¥aä¸ºåŸºæ•°çš„æ¨¡pçš„ç¦»æ•£å¯¹æ•°ã€‚</p><p>ç¦»æ•£å¯¹æ•°éš¾é¢˜æ˜¯æŒ‡ï¼š<br>å½“å·²çŸ¥ä¸€ä¸ªå¤§è´¨æ•°på’Œå®ƒçš„ä¸€ä¸ªåŸæ ¹aï¼Œå¦‚æœç»™å®šä¸€ä¸ªbï¼Œè¦è®¡ç®—içš„å€¼æ˜¯ç›¸å½“å›°éš¾çš„ã€‚<br>å¸¸å°†iä½œä¸ºç§é’¥, bä½œä¸ºå…¬é’¥ï¼Œå³ä½¿çŸ¥é“bå’Œaä¹Ÿæ— æ³•æ±‚å‡ºiã€‚</p><h2 id="åº”ç”¨">åº”ç”¨</h2><ul><li>DHå¯†é’¥äº¤æ¢</li></ul><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">å–ä¸€è´¨æ•° 7, è®¡ç®—å‡ºå…¶åŸæ ¹ 3, åŒæ—¶è´¨æ•°7å’Œå…¶åŸæ ¹3æ˜¯å…¬å¼€çš„Alice:  <span class="token list punctuation">-</span> å–ä¸€ä¸ªéšæœºæ•° 3 ä½œä¸ºè‡ªå·±çš„ç§é’¥  <span class="token list punctuation">-</span> è®¡ç®— 3^3 (mod 7) = 6  <span class="token list punctuation">-</span> å°†6ä½œä¸ºå…¬é’¥å‘é€ç»™BobBob:    <span class="token list punctuation">-</span> å–ä¸€ä¸ªéšæœºæ•° 1 ä½œä¸ºè‡ªå·±çš„ç§é’¥    <span class="token list punctuation">-</span> è®¡ç®— 3^1 (mod 7) = 3    <span class="token list punctuation">-</span> å°†3ä½œä¸ºå…¬é’¥å‘é€ç»™AliceAlice ä½¿ç”¨ 3 è®¡ç®—å‡ºå…±äº«å¯†é’¥ 3^3 (mod 7) = 6Bob ä½¿ç”¨ 6 è®¡ç®—å‡ºå…±äº«å¯†é’¥ 6^1 (mod 7) = 6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ElgamalåŠ å¯†</li></ul><p>æ¥ä¸Šé¢DHå¯†é’¥äº¤æ¢</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">è·å–åˆ°å…¬å…±å¯†é’¥6ä¹‹åï¼ŒAliceå’ŒBobéƒ½å¯ä»¥ä½¿ç”¨å…¬å…±å¯†é’¥6æ¥åŠ å¯†ä¿¡æ¯palintext: 6åŠ å¯†: 6<span class="token italic"><span class="token punctuation">*</span><span class="token content">6 (mod 7) = 1, å¯†æ–‡ä¸º 1è§£å¯†: 1</span><span class="token punctuation">*</span></span>6^-1 (mod 7) = 6 &lt;- 6^-1 æ˜¯æŒ‡6å…³äºæ¨¡7çš„é€†å…ƒ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„å†™çš„æ„Ÿè§‰ä¸å¤ªå¯¹,å®Œæ•´è¿‡ç¨‹</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">Alice å–ä¸€è´¨æ•° 7, è®¡ç®—å‡ºå…¶åŸæ ¹ 3, é€‰ä¸€æ•° 3 ä½œä¸ºè‡ªå·±çš„ç§é’¥, 3^3 (mod 7) = 6å°† &#123;7,3,6&#125; ä½œä¸ºå…¬é’¥å…¬å¼€Bobæƒ³ä¼ é€’ä¿¡æ¯ 6 ç»™ AliceBobé€‰ä¸€æ•° 5 ä½œä¸ºè‡ªå·±çš„ç§é’¥ <span class="token list punctuation">-</span> åŠ å¯†å¯†é’¥: 3^5 (mod 7) = 5 <span class="token list punctuation">-</span> å…¬é’¥: 3^5 (mod 7) = 5 <span class="token list punctuation">-</span> å¯†æ–‡: 6*(6^5) (mod 7) = 1 <span class="token list punctuation">-</span> å°† (5,1) ä½œä¸ºå¯†æ–‡å‘é€ç»™AliceAliceè§£å¯† <span class="token list punctuation">-</span> è®¡ç®—è§£å¯†å¯†é’¥: 5^3 (mod 7) = 6 <span class="token list punctuation">-</span> è§£å¯†: 1 * 6^-1 (mod 7) = 6 &lt;- æ­¤å¤„6^-1æ˜¯æŒ‡6å…³äºæ¨¡7çš„é€†å…ƒ(æ¨¡åå…ƒç´ ) <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;å‰ç½®çŸ¥è¯† æ¬§æ‹‰, æ¬§æ‹‰å®šç†, æ¨¡åå…ƒç´ (æ¨¡é€†å…ƒ) å¯å‚è§: &lt;a href=&quot;/posts/f1a158c9/&quot;&gt;RSAåŠ å¯†&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;é˜¶&quot;&gt;é˜¶&lt;/h2&gt;
&lt;p&gt;ç”±æ¬§æ‹‰å®šç†å¯çŸ¥ï¼Œè‹¥n,aä¸ºæ­£æ•´æ•°ï¼Œä¸”n,aäº’ç´ ï¼ˆå³gcd(a,n)=1ï¼‰ï¼Œåˆ™ a^phi(n) = 1 (mod n)ã€‚&lt;br&gt;
å› æ­¤æ»¡è¶³åŒä½™å¼ a^m = 1 (mod n)çš„&lt;strong&gt;æœ€å°æ­£æ•´æ•°m&lt;/strong&gt;å­˜åœ¨ï¼Œè¿™ä¸ªmç§°ä½œaæ¨¡nçš„é˜¶ï¼Œè®°ä½œdelta(n,a)ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŸæ ¹&quot;&gt;åŸæ ¹&lt;/h2&gt;
&lt;p&gt;è‹¥n,aä¸ºæ­£æ•´æ•°ï¼Œä¸”n,aäº’è´¨ï¼Œå¦‚æœ gcd(a,n)=1 ä¸” delta(n,a) = phi(n), åˆ™ç§°aä¸ºæ¨¡nçš„åŸæ ¹.&lt;br&gt;
ç®€å•æ¥è¯´ï¼Œä½¿è¯¥å¼æˆç«‹çš„då¯èƒ½æœ‰å¾ˆå¤šä¸ªå€¼ï¼Œåˆç”±æ¬§æ‹‰å®šç†å¯çŸ¥delta(n,a) = phi(n)ä¸€å®šæ˜¯æ»¡è¶³çš„ï¼Œå¦‚æœæ­¤æ—¶æ‰€æœ‰delta(n,a)çš„å¯èƒ½å–å€¼ä¸­phi(n)æ˜¯æœ€å°çš„ï¼Œé‚£ä¹ˆå°±ç§°aä¸ºæ¨¡nçš„åŸæ ¹ã€‚&lt;/p&gt;
&lt;p&gt;eg:&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;a=3, n=7
å¯çŸ¥ 3,7äº’è´¨, æ‰€ä»¥phi(n) = 7 - 1 = 6
å¯å¾— 3^6 = 1 (mod 7)

è®¡ç®—3^1, 3^2, 3^3, 3^4, 3^5 (mod 7) éƒ½ä¸ç­‰äº1, æ‰€ä»¥ 6ä¸ºæ»¡è¶³ a^x = 1 (mod n)çš„æœ€å°æ­£æ•´æ•°

delta(7,3) = 6 = phi(7), å¯å¾— 3ä¸ºæ¨¡7çš„åŸæ ¹&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;æ€§è´¨&quot;&gt;æ€§è´¨&lt;/h3&gt;</summary>
    
    
    
    <category term="Crypto" scheme="https://asutorufa.github.io/categories/Crypto/"/>
    
    
    <category term="Crypto" scheme="https://asutorufa.github.io/tags/Crypto/"/>
    
    <category term="ç¦»æ•£å¯¹æ•°" scheme="https://asutorufa.github.io/tags/%E7%A6%BB%E6%95%A3%E5%AF%B9%E6%95%B0/"/>
    
    <category term="DHå¯†é’¥äº¤æ¢" scheme="https://asutorufa.github.io/tags/DH%E5%AF%86%E9%92%A5%E4%BA%A4%E6%8D%A2/"/>
    
    <category term="Elgamal" scheme="https://asutorufa.github.io/tags/Elgamal/"/>
    
  </entry>
  
  <entry>
    <title>åŠ å¯†æ¨¡å¼</title>
    <link href="https://asutorufa.github.io/posts/903c04f7/"/>
    <id>https://asutorufa.github.io/posts/903c04f7/</id>
    <published>2022-08-14T22:09:15.000Z</published>
    <updated>2022-08-14T22:09:15.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æµå¯†ç ">æµå¯†ç </h2><p>å¯†ç å­¦ä¸­ï¼Œæµå¯†ç ï¼ˆè‹±èªï¼šStream cipherï¼‰ï¼Œåˆè­¯ç‚ºä¸²æµåŠ å¯†ã€è³‡æ–™æµåŠ å¯†ï¼Œæ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ŒåŠ å¯†å’Œè§£å¯†åŒæ–¹ä½¿ç”¨ç›¸åŒä¼ªéšæœºåŠ å¯†æ•°æ®æµï¼ˆpseudo-random streamï¼‰ä½œä¸ºå¯†é’¥ï¼Œæ˜æ–‡æ•°æ®æ¯æ¬¡ä¸å¯†é’¥æ•°æ®æµé¡ºæ¬¡å¯¹åº”åŠ å¯†ï¼Œå¾—åˆ°å¯†æ–‡æ•°æ®æµã€‚å®è·µä¸­æ•°æ®é€šå¸¸æ˜¯ä¸€ä¸ªä½ï¼ˆbitï¼‰å¹¶ç”¨å¼‚æˆ–ï¼ˆxorï¼‰æ“ä½œåŠ å¯†ã€‚</p><p><a href="https://zh.wikipedia.org/wiki/%E6%B5%81%E5%AF%86%E7%A0%81">https://zh.wikipedia.org/wiki/æµå¯†ç </a></p><ul><li>chacha20/salsa20</li><li>rc4</li></ul><h2 id="å—å¯†ç -åˆ†ç»„å¯†ç ">å—å¯†ç /åˆ†ç»„å¯†ç </h2><p>å—å¯†ç åªèƒ½å¯¹ç¡®å®šé•¿åº¦çš„æ•°æ®å—è¿›è¡Œå¤„ç†, å¦‚aesæ¯ä¸ªå—çš„å¤§å°å¿…é¡»ä¸º16, å¦‚æœä¸æ»¡16å°±éœ€è¦è¿›è¡Œpadding</p><h3 id="åŠ å¯†æ¨¡å¼">åŠ å¯†æ¨¡å¼</h3><h4 id="ECB">ECB</h4><p>æœ€ç®€å•çš„åŠ å¯†æ¨¡å¼å³ä¸ºç”µå­å¯†ç æœ¬ï¼ˆElectronic codebookï¼ŒECBï¼‰æ¨¡å¼ã€‚éœ€è¦åŠ å¯†çš„æ¶ˆæ¯æŒ‰ç…§å—å¯†ç çš„å—å¤§å°è¢«åˆ†ä¸ºæ•°ä¸ªå—ï¼Œå¹¶å¯¹æ¯ä¸ªå—è¿›è¡Œç‹¬ç«‹åŠ å¯†ã€‚</p><h4 id="CBC">CBC</h4><p>åœ¨CBCæ¨¡å¼ä¸­ï¼Œæ¯ä¸ªæ˜æ–‡å—å…ˆä¸å‰ä¸€ä¸ªå¯†æ–‡å—è¿›è¡Œå¼‚æˆ–åï¼Œå†è¿›è¡ŒåŠ å¯†ã€‚åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæ¯ä¸ªå¯†æ–‡å—éƒ½ä¾èµ–äºå®ƒå‰é¢çš„æ‰€æœ‰æ˜æ–‡å—ã€‚åŒæ—¶ï¼Œä¸ºäº†ä¿è¯æ¯æ¡æ¶ˆæ¯çš„å”¯ä¸€æ€§ï¼Œåœ¨ç¬¬ä¸€ä¸ªå—ä¸­éœ€è¦ä½¿ç”¨åˆå§‹åŒ–å‘é‡ã€‚</p><h4 id="PCBC">PCBC</h4><p>å¡«å……å¯†ç å—é“¾æ¥ï¼ˆPCBCï¼ŒPropagating cipher-block chainingï¼‰æˆ–ç§°ä¸ºæ˜æ–‡å¯†ç å—é“¾æ¥ï¼ˆPlaintext cipher-block chainingï¼‰ï¼Œæ˜¯ä¸€ç§å¯ä»¥ä½¿å¯†æ–‡ä¸­çš„å¾®å°æ›´æ”¹åœ¨è§£å¯†æ—¶å¯¼è‡´æ˜æ–‡å¤§éƒ¨åˆ†é”™è¯¯çš„æ¨¡å¼ï¼Œå¹¶åœ¨åŠ å¯†çš„æ—¶å€™ä¹Ÿå…·æœ‰åŒæ ·çš„ç‰¹æ€§ã€‚</p><span id="more"></span><h4 id="å—å¯†ç -æµå¯†ç ">å—å¯†ç  -&gt; æµå¯†ç </h4><ul><li>CFB<br>å¯†æ–‡åé¦ˆï¼ˆCFBï¼ŒCipher feedbackï¼‰æ¨¡å¼ç±»ä¼¼äºCBCï¼Œå¯ä»¥å°†å—å¯†ç å˜ä¸ºè‡ªåŒæ­¥çš„æµå¯†ç ï¼›å·¥ä½œè¿‡ç¨‹äº¦éå¸¸ç›¸ä¼¼ï¼ŒCFBçš„è§£å¯†è¿‡ç¨‹å‡ ä¹å°±æ˜¯é¢ å€’çš„CBCçš„åŠ å¯†è¿‡ç¨‹.<br>ç”±äºCFBåŠ å¯†æ²¡æœ‰ä½¿ç”¨å¼‚æˆ–, æ‰€ä»¥å³ä½¿CFBæ˜¯æµå¯†ç , ä½†åŠ å¯†è§£å¯†æ“ä½œä¸åŒ.</li><li>OFB<br>è¾“å‡ºåé¦ˆæ¨¡å¼ï¼ˆOutput feedback, OFBï¼‰å¯ä»¥å°†å—å¯†ç å˜æˆåŒæ­¥çš„æµå¯†ç ã€‚å®ƒäº§ç”Ÿå¯†é’¥æµçš„å—ï¼Œç„¶åå°†å…¶ä¸æ˜æ–‡å—è¿›è¡Œå¼‚æˆ–ï¼Œå¾—åˆ°å¯†æ–‡ã€‚ä¸å…¶å®ƒæµå¯†ç ä¸€æ ·ï¼Œå¯†æ–‡ä¸­ä¸€ä¸ªä½çš„ç¿»è½¬ä¼šä½¿æ˜æ–‡ä¸­åŒæ ·ä½ç½®çš„ä½ä¹Ÿäº§ç”Ÿç¿»è½¬ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—è®¸å¤šé”™è¯¯æ ¡æ­£ç ï¼Œä¾‹å¦‚å¥‡å¶æ ¡éªŒä½ï¼Œå³ä½¿åœ¨åŠ å¯†å‰è®¡ç®—ï¼Œè€Œåœ¨åŠ å¯†åè¿›è¡Œæ ¡éªŒä¹Ÿå¯ä»¥å¾—å‡ºæ­£ç¡®ç»“æœã€‚</li><li>CTR<br>ä¸OFBç›¸ä¼¼ï¼ŒCTRå°†å—å¯†ç å˜ä¸ºæµå¯†ç ã€‚å®ƒé€šè¿‡é€’å¢ä¸€ä¸ªåŠ å¯†è®¡æ•°å™¨ä»¥äº§ç”Ÿè¿ç»­çš„å¯†é’¥æµï¼Œå…¶ä¸­ï¼Œè®¡æ•°å™¨å¯ä»¥æ˜¯ä»»æ„ä¿è¯é•¿æ—¶é—´ä¸äº§ç”Ÿé‡å¤è¾“å‡ºçš„å‡½æ•°ï¼Œä½†ä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„è®¡æ•°å™¨æ˜¯æœ€ç®€å•å’Œæœ€å¸¸è§çš„åšæ³•ã€‚ä½¿ç”¨ç®€å•çš„ã€å®šä¹‰å¥½çš„è¾“å…¥å‡½æ•°æ˜¯æœ‰äº‰è®®çš„ï¼šæ‰¹è¯„è€…è®¤ä¸ºå®ƒâ€œæœ‰æ„çš„å°†å¯†ç ç³»ç»Ÿæš´éœ²åœ¨å·²çŸ¥çš„ã€ç³»ç»Ÿçš„è¾“å…¥ä¼šé€ æˆä¸å¿…è¦çš„é£é™©â€ã€‚ç›®å‰ï¼ŒCTRå·²ç»è¢«å¹¿æ³›çš„ä½¿ç”¨äº†ï¼Œç”±è¾“å…¥å‡½æ•°é€ æˆçš„é—®é¢˜è¢«è®¤ä¸ºæ˜¯ä½¿ç”¨çš„å—å¯†ç çš„ç¼ºé™·ï¼Œè€ŒéCTRæ¨¡å¼æœ¬èº«çš„å¼±ç‚¹ã€‚æ— è®ºå¦‚ä½•ï¼Œæœ‰ä¸€äº›ç‰¹åˆ«çš„æ”»å‡»æ–¹æ³•ï¼Œä¾‹å¦‚åŸºäºä½¿ç”¨ç®€å•è®¡æ•°å™¨ä½œä¸ºè¾“å…¥çš„ç¡¬ä»¶å·®é”™æ”»å‡»ã€‚</li></ul><h2 id="è®¤è¯åŠ å¯†-AE">è®¤è¯åŠ å¯†(AE)</h2><p>A typical programming interface for an AE implementation provides the following functions:</p><ul><li>Encryption<br>Input: plaintext, key, and optionally a header in plaintext that will not be encrypted, but will be covered by authenticity protection.<br>Output: ciphertext and authentication tag (message authentication code or MAC).</li><li>Decryption<br>Input: ciphertext, key, authentication tag, and optionally a header (if used during the encryption).<br>Output: plaintext, or an error if the authentication tag does not match the supplied ciphertext or header.</li></ul><p>The header part is intended to provide authenticity and integrity protection for networking or storage metadata for which confidentiality is unnecessary, but authenticity is desired.</p><p><a href="https://en.wikipedia.org/wiki/Authenticated_encryption#Authenticated_encryption_with_associated_data_(AEAD)">https://en.wikipedia.org/wiki/Authenticated_encryption#Authenticated_encryption_with_associated_data_(AEAD)</a></p><h3 id="ä¼ ç»Ÿè®¤è¯åŠ å¯†">ä¼ ç»Ÿè®¤è¯åŠ å¯†</h3><ul><li><p>Encrypt-then-MAC (EtM)<br>é¦–å…ˆå¯¹æ˜æ–‡è¿›è¡ŒåŠ å¯†ï¼Œç„¶åæ ¹æ®å¾—åˆ°çš„å¯†æ–‡ç”Ÿæˆè¨Šæ¯é‘‘åˆ¥ç¢¼ï¼ˆMACï¼‰ã€‚å¯†æ–‡å’Œå®ƒçš„MACä¸€èµ·å‘é€ã€‚</p>  <pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">+---------+|plaintext|+---------+    |    v+----------+|Encryption|&lt;------key1+----------+     |     |--------------+     |              |     |              v     |        +-------------+     |        |hash function|&lt;-------key2     |        +-------------+     |              |     v              v+----------------+------+|    Ciphertext  | MAC  |+----------------+------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Encrypt-and-MAC (E&amp;M)<br>åŸºäºæ˜æ–‡ç”ŸæˆMACï¼Œå¹¶ä¸”æ˜æ–‡åœ¨æ²¡æœ‰MACçš„æƒ…å†µä¸‹è¢«åŠ å¯†ã€‚æ˜æ–‡çš„MACå’Œå¯†æ–‡ä¸€èµ·å‘é€ã€‚</p>  <pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">+---------+|plaintext|+---------+    |    |--------------------------------+    |                                |    v                                v+----------+                 +-------------+|Encryption|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>------key1----</span><span class="token punctuation">></span></span> |hash function|+----------+                 +-------------+     |                               |     v                               v+------------------------------+--------+|        Ciphertext            |   MAC  |+------------------------------+--------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>MAC-then-Encrypt (MtE)<br>åŸºäºæ˜æ–‡ç”ŸæˆMACï¼Œç„¶åå°†æ˜æ–‡å’ŒMACä¸€èµ·åŠ å¯†ä»¥åŸºäºä¸¤è€…ç”Ÿæˆå¯†æ–‡ã€‚å¯†æ–‡ï¼ˆåŒ…å«åŠ å¯†çš„MACï¼‰è¢«å‘é€ã€‚MtEæ–¹æ³•æœ¬èº«å¹¶æœªè¢«è¯æ˜æ˜¯â€œå¼ºä¸å¯ä¼ªé€ â€çš„ã€‚</p>  <pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">+---------+|plaintext|                           key+---------+                            |    |                                  |    |------------------+               |    |                  |               |    |                  v               |    |           +-------------+        |    |           |hash function|&lt;-------|    |           +-------------+        |    |                  |               |    v                  v               |+------------------+------+            ||     plaintext    | MAC  |            |+------------------+------+            |             |                         |             v                         |      +----------------+               |      | Encryption     |&lt;--------------+      +----------------+             |             v       +-------------+       | Ciphertext  |       +-------------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="AEAD-å¸¦æœ‰å…³è”æ•°æ®çš„è®¤è¯åŠ å¯†">AEAD(å¸¦æœ‰å…³è”æ•°æ®çš„è®¤è¯åŠ å¯†)</h3><h4 id="chacha20-poly1305">chacha20-poly1305</h4><p>chacha20-poly1305æ˜¯å°†æµå¯†ç chahca20å’Œæ¶ˆæ¯éªŒè¯ç (MAC)poly1305ç»„åˆè€Œæˆçš„AEAD.</p><p>chacha20-poly1305åŠ å¯†è¿‡ç¨‹<br><img src="/images/903c04f7/chacha20poly1305-enc.png" alt="chacha20-enc" loading="lazy"></p><p>chacha20-poly1305è§£å¯†<br><img src="/images/903c04f7/chacha20poly1305-dec.png" alt="chacha20-dec" loading="lazy"></p><hr><ul><li><a href="https://tex2e.github.io/blog/crypto/chacha20poly1305">ChaCha20-Poly1305ã®è§£èª¬ã¨å®Ÿè£…</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æµå¯†ç &quot;&gt;æµå¯†ç &lt;/h2&gt;
&lt;p&gt;å¯†ç å­¦ä¸­ï¼Œæµå¯†ç ï¼ˆè‹±èªï¼šStream cipherï¼‰ï¼Œåˆè­¯ç‚ºä¸²æµåŠ å¯†ã€è³‡æ–™æµåŠ å¯†ï¼Œæ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ŒåŠ å¯†å’Œè§£å¯†åŒæ–¹ä½¿ç”¨ç›¸åŒä¼ªéšæœºåŠ å¯†æ•°æ®æµï¼ˆpseudo-random streamï¼‰ä½œä¸ºå¯†é’¥ï¼Œæ˜æ–‡æ•°æ®æ¯æ¬¡ä¸å¯†é’¥æ•°æ®æµé¡ºæ¬¡å¯¹åº”åŠ å¯†ï¼Œå¾—åˆ°å¯†æ–‡æ•°æ®æµã€‚å®è·µä¸­æ•°æ®é€šå¸¸æ˜¯ä¸€ä¸ªä½ï¼ˆbitï¼‰å¹¶ç”¨å¼‚æˆ–ï¼ˆxorï¼‰æ“ä½œåŠ å¯†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E6%B5%81%E5%AF%86%E7%A0%81&quot;&gt;https://zh.wikipedia.org/wiki/æµå¯†ç &lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;chacha20/salsa20&lt;/li&gt;
&lt;li&gt;rc4&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;å—å¯†ç -åˆ†ç»„å¯†ç &quot;&gt;å—å¯†ç /åˆ†ç»„å¯†ç &lt;/h2&gt;
&lt;p&gt;å—å¯†ç åªèƒ½å¯¹ç¡®å®šé•¿åº¦çš„æ•°æ®å—è¿›è¡Œå¤„ç†, å¦‚aesæ¯ä¸ªå—çš„å¤§å°å¿…é¡»ä¸º16, å¦‚æœä¸æ»¡16å°±éœ€è¦è¿›è¡Œpadding&lt;/p&gt;
&lt;h3 id=&quot;åŠ å¯†æ¨¡å¼&quot;&gt;åŠ å¯†æ¨¡å¼&lt;/h3&gt;
&lt;h4 id=&quot;ECB&quot;&gt;ECB&lt;/h4&gt;
&lt;p&gt;æœ€ç®€å•çš„åŠ å¯†æ¨¡å¼å³ä¸ºç”µå­å¯†ç æœ¬ï¼ˆElectronic codebookï¼ŒECBï¼‰æ¨¡å¼ã€‚éœ€è¦åŠ å¯†çš„æ¶ˆæ¯æŒ‰ç…§å—å¯†ç çš„å—å¤§å°è¢«åˆ†ä¸ºæ•°ä¸ªå—ï¼Œå¹¶å¯¹æ¯ä¸ªå—è¿›è¡Œç‹¬ç«‹åŠ å¯†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;CBC&quot;&gt;CBC&lt;/h4&gt;
&lt;p&gt;åœ¨CBCæ¨¡å¼ä¸­ï¼Œæ¯ä¸ªæ˜æ–‡å—å…ˆä¸å‰ä¸€ä¸ªå¯†æ–‡å—è¿›è¡Œå¼‚æˆ–åï¼Œå†è¿›è¡ŒåŠ å¯†ã€‚åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæ¯ä¸ªå¯†æ–‡å—éƒ½ä¾èµ–äºå®ƒå‰é¢çš„æ‰€æœ‰æ˜æ–‡å—ã€‚åŒæ—¶ï¼Œä¸ºäº†ä¿è¯æ¯æ¡æ¶ˆæ¯çš„å”¯ä¸€æ€§ï¼Œåœ¨ç¬¬ä¸€ä¸ªå—ä¸­éœ€è¦ä½¿ç”¨åˆå§‹åŒ–å‘é‡ã€‚&lt;/p&gt;
&lt;h4 id=&quot;PCBC&quot;&gt;PCBC&lt;/h4&gt;
&lt;p&gt;å¡«å……å¯†ç å—é“¾æ¥ï¼ˆPCBCï¼ŒPropagating cipher-block chainingï¼‰æˆ–ç§°ä¸ºæ˜æ–‡å¯†ç å—é“¾æ¥ï¼ˆPlaintext cipher-block chainingï¼‰ï¼Œæ˜¯ä¸€ç§å¯ä»¥ä½¿å¯†æ–‡ä¸­çš„å¾®å°æ›´æ”¹åœ¨è§£å¯†æ—¶å¯¼è‡´æ˜æ–‡å¤§éƒ¨åˆ†é”™è¯¯çš„æ¨¡å¼ï¼Œå¹¶åœ¨åŠ å¯†çš„æ—¶å€™ä¹Ÿå…·æœ‰åŒæ ·çš„ç‰¹æ€§ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Crypto" scheme="https://asutorufa.github.io/categories/Crypto/"/>
    
    
    <category term="Crypto" scheme="https://asutorufa.github.io/tags/Crypto/"/>
    
    <category term="AEAD" scheme="https://asutorufa.github.io/tags/AEAD/"/>
    
    <category term="æµå¯†ç " scheme="https://asutorufa.github.io/tags/%E6%B5%81%E5%AF%86%E7%A0%81/"/>
    
    <category term="å—å¯†ç " scheme="https://asutorufa.github.io/tags/%E5%9D%97%E5%AF%86%E7%A0%81/"/>
    
    <category term="chacha20-poly1305" scheme="https://asutorufa.github.io/tags/chacha20-poly1305/"/>
    
  </entry>
  
  <entry>
    <title>TUNç½‘å¡</title>
    <link href="https://asutorufa.github.io/posts/a67af13f/"/>
    <id>https://asutorufa.github.io/posts/a67af13f/</id>
    <published>2022-08-14T21:46:33.000Z</published>
    <updated>2022-08-14T21:46:33.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Golang-Tun-gVisor">Golang Tun (gVisor)</h2><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">import</span> <span class="token string">"gvisor.dev/gvisor/pkg/tcpip/stack"</span> <span class="token comment">// gvisor</span>s <span class="token operator">:=</span> stack<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>Options<span class="token punctuation">&#123;</span>  NetworkProtocols<span class="token punctuation">:</span>   <span class="token punctuation">[</span><span class="token punctuation">]</span>stack<span class="token punctuation">.</span>NetworkProtocolFactory<span class="token punctuation">&#123;</span>ipv4<span class="token punctuation">.</span>NewProtocol<span class="token punctuation">,</span> ipv6<span class="token punctuation">.</span>NewProtocol<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  TransportProtocols<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>stack<span class="token punctuation">.</span>TransportProtocolFactory<span class="token punctuation">&#123;</span>tcp<span class="token punctuation">.</span>NewProtocol<span class="token punctuation">,</span> udp<span class="token punctuation">.</span>NewProtocol<span class="token punctuation">,</span> icmp<span class="token punctuation">.</span>NewProtocol4<span class="token punctuation">,</span> icmp<span class="token punctuation">.</span>NewProtocol6<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>ep <span class="token operator">:=</span> fdbased<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>fdbased<span class="token punctuation">.</span>Options<span class="token punctuation">&#123;</span>   FDs<span class="token punctuation">:</span>            <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span>fd<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// fd: linuxæ–‡ä»¶æ ‡è¯†ç¬¦, å¦‚androidä¸­æœ€åä¼šè·å–åˆ°ä¸€ä¸ªæ–‡ä»¶æ ‡è¯†ç¬¦</span>   MTU<span class="token punctuation">:</span>            <span class="token function">uint32</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  nicID <span class="token operator">:=</span> tcpip<span class="token punctuation">.</span><span class="token function">NICID</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">UniqueID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> er <span class="token operator">:=</span> s<span class="token punctuation">.</span><span class="token function">CreateNIC</span><span class="token punctuation">(</span>nicID<span class="token punctuation">,</span> ep<span class="token punctuation">)</span><span class="token punctuation">;</span> er <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  ep<span class="token punctuation">.</span><span class="token function">Attach</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">isdns</span><span class="token punctuation">(</span>opt <span class="token operator">*</span>TunOpt<span class="token punctuation">,</span> id stack<span class="token punctuation">.</span>TransportEndpointID<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">&#123;</span> <span class="token keyword">if</span> id<span class="token punctuation">.</span>LocalPort <span class="token operator">==</span> <span class="token number">53</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>opt<span class="token punctuation">.</span>DNSHijacking <span class="token operator">||</span> id<span class="token punctuation">.</span>LocalAddress<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> opt<span class="token punctuation">.</span>Gateway<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">&#125;</span><span class="token comment">// TCP</span> s<span class="token punctuation">.</span><span class="token function">SetTransportProtocolHandler</span><span class="token punctuation">(</span>tcp<span class="token punctuation">.</span>ProtocolNumber<span class="token punctuation">,</span> tcp<span class="token punctuation">.</span><span class="token function">NewForwarder</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> defaultWndSize<span class="token punctuation">,</span> maxConnAttempts<span class="token punctuation">,</span>  <span class="token keyword">func</span><span class="token punctuation">(</span>r <span class="token operator">*</span>tcp<span class="token punctuation">.</span>ForwarderRequest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  wq <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>waiter<span class="token punctuation">.</span>Queue<span class="token punctuation">)</span>  id <span class="token operator">:=</span> r<span class="token punctuation">.</span><span class="token function">ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  ep<span class="token punctuation">,</span> err <span class="token operator">:=</span> r<span class="token punctuation">.</span><span class="token function">CreateEndpoint</span><span class="token punctuation">(</span>wq<span class="token punctuation">)</span>  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>   r<span class="token punctuation">.</span><span class="token function">Complete</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>   <span class="token keyword">return</span>  <span class="token punctuation">&#125;</span>  r<span class="token punctuation">.</span><span class="token function">Complete</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>  <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>local net<span class="token punctuation">.</span>Conn<span class="token punctuation">,</span> id stack<span class="token punctuation">.</span>TransportEndpointID<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">defer</span> local<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token keyword">if</span> <span class="token function">isdns</span><span class="token punctuation">(</span>opt<span class="token punctuation">,</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// åŠ«æŒä¸€ä¸‹dns</span>    <span class="token comment">/*    * Handle DNS    */</span>    <span class="token keyword">return</span>   <span class="token punctuation">&#125;</span>   target <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">JoinHostPort</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span>LocalAddress<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">.</span>LocalPort<span class="token punctuation">)</span> <span class="token comment">// è¿œç¨‹ç›®æ ‡åœ°å€</span>   nconn<span class="token punctuation">,</span> er <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">Dial</span><span class="token punctuation">(</span><span class="token string">"tcp"</span><span class="token punctuation">,</span> target<span class="token punctuation">)</span>   <span class="token keyword">if</span> er <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">defer</span> conn<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   utils<span class="token punctuation">.</span><span class="token function">Relay</span><span class="token punctuation">(</span>local<span class="token punctuation">,</span> conn<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">(</span>gonet<span class="token punctuation">.</span><span class="token function">NewTCPConn</span><span class="token punctuation">(</span>wq<span class="token punctuation">,</span> ep<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>HandlePacket<span class="token punctuation">)</span><span class="token comment">// UDP</span> s<span class="token punctuation">.</span><span class="token function">SetTransportProtocolHandler</span><span class="token punctuation">(</span>udp<span class="token punctuation">.</span>ProtocolNumber<span class="token punctuation">,</span> udp<span class="token punctuation">.</span><span class="token function">NewForwarder</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>fr <span class="token operator">*</span>udp<span class="token punctuation">.</span>ForwarderRequest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// handle udp, å’Œtcpå·®ä¸å¤š</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>HandlePacket<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®Œæ•´ä»£ç : <a href="https://github.com/Asutorufa/yuhaiin/tree/main/pkg/net/proxy/tun">tun</a></p><h2 id="Android-VPN-Service">Android VPN Service</h2><p>Android çš„VPN Serviceåªèƒ½å¤„ç†Tunæ¥å£</p><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MyVpnService <span class="token operator">:</span> <span class="token function">VpnService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onStartCommand</span><span class="token punctuation">(</span>intent<span class="token operator">:</span> Intent<span class="token operator">?</span><span class="token punctuation">,</span> flags<span class="token operator">:</span> Int<span class="token punctuation">,</span> startId<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">&#123;</span>        <span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">&#123;</span>            <span class="token function">setMtu</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span>            <span class="token function">setSession</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"my vpn"</span></span><span class="token punctuation">)</span>            <span class="token function">addAddress</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"172.19.0.1"</span></span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"172.19.0.2"</span></span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span>            <span class="token function">addAddress</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"fdfe:dcba:9876::1"</span></span><span class="token punctuation">,</span> <span class="token number">126</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"2000::"</span></span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// https://issuetracker.google.com/issues/149636790</span>                <span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"fdfe:dcba:9876::2"</span></span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>            <span class="token function">addDnsServer</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"172.19.0.2"</span></span><span class="token punctuation">)</span> <span class="token comment">// è®°å¾—åœ¨Tunä¸­åŠ«æŒ172.19.0.2:53å¤„ç†æ‰€æœ‰çš„DNSè¯·æ±‚</span>            <span class="token function">addDisallowedApplication</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"com.example"</span></span><span class="token punctuation">)</span> <span class="token comment">// Disallowedå’ŒAllowedä¸èƒ½åŒæ—¶è°ƒç”¨</span>            <span class="token comment">// addAllowedApplication("com.example")</span>            <span class="token keyword">const</span> fd <span class="token operator">=</span> <span class="token function">establish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/*    fd ä¸º linuxæ–‡ä»¶æ ‡è¯†ç¬¦    å¦‚æœæ˜¯é€šè¿‡tun2socksè¿™ç§å‘½ä»¤è¡Œå·¥å…·å¤„ç†    éœ€è¦ä½¿ç”¨Linux socketå°†fdå‘é€ç»™å­è¿›ç¨‹               å¦‚æœæ˜¯è°ƒç”¨soåŠ¨æ€åº“åˆ™ä¸éœ€è¦        é€šè¿‡unixæ–‡ä»¶socketå‘é€sd      private fun sendFd(path: String) &#123;            LocalSocket().use &#123; localSocket ->                localSocket.connect(                    LocalSocketAddress(                        path,                        LocalSocketAddress.Namespace.FILESYSTEM                    )                )                localSocket.setFileDescriptorsForSend(arrayOf(fd)) // &lt;------                localSocket.outputStream.write(42)            &#125;    &#125;*/</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> START_STICKY       <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®Œæ•´ä»£ç : <a href="https://github.com/Asutorufa/yuhaiin-android/tree/main/app/src/main/kotlin/io/github/asutorufa/yuhaiin/service">VpnService</a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;Golang-Tun-gVisor&quot;&gt;Golang Tun (gVisor)&lt;/h2&gt;
&lt;pre class=&quot;line-numbers language-go&quot; data-language=&quot;go&quot;&gt;&lt;code</summary>
        
      
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="Golang" scheme="https://asutorufa.github.io/tags/Golang/"/>
    
    <category term="Tun" scheme="https://asutorufa.github.io/tags/Tun/"/>
    
    <category term="Kotlin" scheme="https://asutorufa.github.io/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>RSAåŠ å¯†</title>
    <link href="https://asutorufa.github.io/posts/f1a158c9/"/>
    <id>https://asutorufa.github.io/posts/f1a158c9/</id>
    <published>2022-08-14T21:46:24.000Z</published>
    <updated>2022-08-14T21:46:24.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è´¨æ•°">è´¨æ•°</h2><p>è´¨æ•°ï¼ˆPrime numberï¼‰ï¼Œåˆç§°ç´ æ•°ï¼ŒæŒ‡åœ¨å¤§äº1çš„è‡ªç„¶æ•°ä¸­ï¼Œé™¤äº†1å’Œè¯¥æ•°è‡ªèº«å¤–ï¼Œæ— æ³•è¢«å…¶ä»–è‡ªç„¶æ•°æ•´é™¤çš„æ•°ï¼ˆä¹Ÿå¯å®šä¹‰ä¸ºåªæœ‰1ä¸è¯¥æ•°æœ¬èº«ä¸¤ä¸ªæ­£å› æ•°çš„æ•°ï¼‰ã€‚</p><p>æ¥è‡ª <a href="https://zh.wikipedia.org/wiki/%E8%B4%A8%E6%95%B0">https://zh.wikipedia.org/wiki/è´¨æ•°</a></p><h3 id="äº’è´¨">äº’è´¨</h3><p>äº’è´¨æ˜¯å…¬çº¦æ•°åªæœ‰1çš„ä¸¤ä¸ªæ•´æ•°ï¼Œä¹Ÿå¯è®°gcd(a,b)=1, å«åšäº’è´¨æ•´æ•°ã€‚</p><h2 id="æ¬§æ‹‰">æ¬§æ‹‰</h2><p>åœ¨æ•°è®ºä¸­ï¼Œå¯¹æ­£æ•´æ•°nï¼Œæ¬§æ‹‰å‡½æ•°phi(n)æ˜¯å°äºç­‰äºnçš„æ­£æ•´æ•°ä¸­ä¸näº’è´¨çš„æ•°çš„æ•°ç›®ã€‚æ­¤å‡½æ•°ä»¥å…¶é¦–åç ”ç©¶è€…æ¬§æ‹‰å‘½åï¼Œå®ƒåˆç§°ä¸ºÏ†å‡½æ•°ï¼ˆç”±é«˜æ–¯æ‰€å‘½åï¼‰æˆ–æ˜¯æ¬§æ‹‰æ€»è®¡å‡½æ•°ï¼ˆtotient functionï¼Œç”±è¥¿å°”ç»´æ–¯ç‰¹æ‰€å‘½åï¼‰ã€‚</p><p>æ¥è‡ª <a href="https://zh.wikipedia.org/wiki/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0">https://zh.wikipedia.org/wiki/æ¬§æ‹‰å‡½æ•°</a></p><span id="more"></span><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">ä¾‹å¦‚ 11 çš„æ¬§æ‹‰:æ¯”11å°ä¸”ä¸11äº’è´¨çš„æ­£æ•´æ•°æœ‰: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10æ‰€ä»¥phi(11) = 10 = 11-1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±ä¸Šä¾‹å­åŒæ—¶å¯çŸ¥, è´¨æ•°çš„æ¬§æ‹‰æ˜¯ä»–æœ¬èº«å‡1: phi(N) = N - 1<br>åŒæ—¶ æ­æ‹‰å‡½æ•¸æ˜¯ç©æ€§å‡½æ•¸ï¼Œå³æ˜¯è¯´è‹¥m,näº’è³ªï¼Œå‰‡ phi(mn) = phi(m)phi(n)</p><h2 id="æ¬§å‡ é‡Œå¾—ç®—æ³•">æ¬§å‡ é‡Œå¾—ç®—æ³•</h2><p>ä¹Ÿå«è¾—è½¬ç›¸é™¤æ³•ï¼Œç”¨æ¥æ‰¾å‡ºä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°<code>gcd(a,b)</code><br>å•†è®°ä½œ<code>qi</code>, ä½™æ•°è®°ä½œ<code>ri</code>, æ¬§å‡ é‡Œå¾—ç®—æ³•å¯å†™ä¸º <code>ri-1 = qi * ri + ri+1</code></p><p>eg1: å¯»æ‰¾160, 11 çš„æœ€å¤§å…¬çº¦æ•°</p><table><thead><tr><th style="text-align:center"><code>ri-1 = qi * ri + ri+1</code></th><th style="text-align:center">å•†<code>qi</code></th><th style="text-align:center">ä½™æ•°<code>ri</code></th></tr></thead><tbody><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">160</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">11</td></tr><tr><td style="text-align:center">160 = 14 * 11 + 6</td><td style="text-align:center">14</td><td style="text-align:center">6</td></tr><tr><td style="text-align:center">11 = 1 * 6 + 5</td><td style="text-align:center">1</td><td style="text-align:center">5</td></tr><tr><td style="text-align:center">6 = 1 * 5 + 1</td><td style="text-align:center">1</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">5 = 5 * 1 + 0</td><td style="text-align:center">5</td><td style="text-align:center">0</td></tr></tbody></table><p>å¯å¾—æœ€å¤§å…¬çº¦æ•°ä¸º1, åŒæ—¶å› ä¸º<code>gcd(160,11) = 1</code>, æ‰€ä»¥ 160, 11 äº’è´¨</p><p>eg2: å¯»æ‰¾ 160, 122 çš„æœ€å¤§å…¬çº¦æ•°</p><table><thead><tr><th style="text-align:center"><code>ri-1 = qi * ri + ri+1</code></th><th style="text-align:center">å•†<code>qi</code></th><th style="text-align:center">ä½™æ•°<code>ri</code></th></tr></thead><tbody><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">160</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">122</td></tr><tr><td style="text-align:center">160 = 1 * 122 + 38</td><td style="text-align:center">1</td><td style="text-align:center">38</td></tr><tr><td style="text-align:center">122 = 3 * 38 +8</td><td style="text-align:center">3</td><td style="text-align:center">8</td></tr><tr><td style="text-align:center">38 = 4 * 8 + 6</td><td style="text-align:center">4</td><td style="text-align:center">6</td></tr><tr><td style="text-align:center">8 = 1 * 6 + 2</td><td style="text-align:center">1</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">6 = 3 * 2 + 0</td><td style="text-align:center">3</td><td style="text-align:center">0</td></tr></tbody></table><p>æ‰€ä»¥æœ€å¤§å…¬çº¦æ•°ä¸º2</p><h2 id="æ¨¡åå…ƒç´ ">æ¨¡åå…ƒç´ </h2><p>æ¨¡é€†å…ƒä¹Ÿç§°ä¸ºæ¨¡å€’æ•°ï¼Œæˆ–è€…æ¨¡é€†å…ƒã€‚&lt;- æ¨¡åå…ƒç´ <br>å¦‚æœä¸¤ä¸ªæ­£æ•´æ•°aå’Œnäº’è´¨ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥æ‰¾åˆ°æ•´æ•°bï¼Œä½¿å¾— ab-1 è¢«næ•´é™¤ï¼Œæˆ–è€…è¯´abè¢«né™¤çš„ä½™æ•°æ˜¯1ã€‚è¿™æ—¶ï¼Œbå°±å«åšaçš„â€œæ¨¡åå…ƒç´ â€ã€‚</p><pre class="language-markdown" data-language="markdown"><code class="language-markdown">å¦‚3å…³äº20çš„æ¨¡åå…ƒç´ æ˜¯7ï¼Œ(3*7)%20=1  </code></pre><p><a href="https://zh.wikipedia.org/wiki/%E6%A8%A1%E5%8F%8D%E5%85%83%E7%B4%A0">https://zh.wikipedia.org/wiki/æ¨¡åå…ƒç´ </a></p><h3 id="æ‹“å±•æ¬§å‡ é‡Œå¾—ç®—æ³•">æ‹“å±•æ¬§å‡ é‡Œå¾—ç®—æ³•</h3><p>è®¡ç®—æ¬§å‡ é‡Œå¾—åŒæ—¶å¤šè®¡ç®—<code>si-1 = qi *si + si+1</code>å’Œ<code>si-1 = qi *si + si+1</code>, åˆå§‹åˆ†åˆ«ä¸º<code>s0 = 1</code>,<code>s1 = 0</code>å’Œ<code>t0 = 0</code>, <code>t1 = 1</code>ï¼Œ<br>å¯»æ‰¾å‡ºæ»¡è¶³ <code>ax + by = gcd(x,y)</code>çš„<code>a</code>,<code>b</code>, åŒæ—¶è¿˜å¯ç”¨æ¥æ±‚æ¨¡ä¹˜é€†å…ƒ</p><p>eg1: å¯»æ‰¾160, 11 çš„æœ€å¤§å…¬çº¦æ•°</p><table><thead><tr><th style="text-align:center"><code>ri-1 = qi * ri + ri+1</code></th><th style="text-align:center">å•†<code>qi</code></th><th style="text-align:center">ä½™æ•°<code>ri</code></th><th style="text-align:center"><code>si-1 = qi * si + si+1</code></th><th style="text-align:center"><code>si</code></th><th style="text-align:center"><code>ti-1 = qi * si + ti+1</code></th><th style="text-align:center"><code>ti</code></th></tr></thead><tbody><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">160</td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center"></td><td style="text-align:center">0</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">11</td><td style="text-align:center"></td><td style="text-align:center">0</td><td style="text-align:center"></td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">160 = 14 * 11 + 6</td><td style="text-align:center">14</td><td style="text-align:center">6</td><td style="text-align:center">1 = 14 * 0 + 1</td><td style="text-align:center">1</td><td style="text-align:center">0 = 14 * 1 - 14</td><td style="text-align:center">-14</td></tr><tr><td style="text-align:center">11 = 1 * 6 + 5</td><td style="text-align:center">1</td><td style="text-align:center">5</td><td style="text-align:center">0 = 1 * 1 - 1</td><td style="text-align:center">-1</td><td style="text-align:center">1 = 1 * (-14) + 15</td><td style="text-align:center">15</td></tr><tr><td style="text-align:center">6 = 1 * 5 + 1</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1 = 1 * (-1) + 2</td><td style="text-align:center">2</td><td style="text-align:center">-14= 1 * 15 - 29</td><td style="text-align:center">-29</td></tr><tr><td style="text-align:center">5 = 5 * 1 + 0</td><td style="text-align:center">5</td><td style="text-align:center">0</td><td style="text-align:center">-1 = 5 * 2 - 11</td><td style="text-align:center">11</td><td style="text-align:center">15 = 5 * (-29) + 130</td><td style="text-align:center">130</td></tr></tbody></table><p>å¯å¾— <code>gcd(160,11) = 1 = 2 * 160 + (-29) * 11 = 320 - 319</code>,<br>æ‰€ä»¥<br>2æ˜¯160å…³äº11çš„æ¨¡ä¹˜é€†å…ƒ<br>131 = -29 + 160æ˜¯11å…³äº160çš„æ¨¡ä¹˜é€†å…ƒ, å› ä¸º-29ä¸ºè´Ÿæ•°éœ€è¦åŠ ä¸Šæ¨¡å˜æˆæ­£æ•°</p><h3 id="æ¬§æ‹‰å®šç†">æ¬§æ‹‰å®šç†</h3><p>åœ¨æ•°è®ºä¸­ï¼Œæ¬§æ‹‰å®šç†ï¼ˆä¹Ÿç§°è´¹é©¬-æ¬§æ‹‰å®šç†æˆ–æ¬§æ‹‰phiå‡½æ•°å®šç†ï¼‰æ˜¯ä¸€ä¸ªå…³äºåŒä½™çš„æ€§è´¨ã€‚æ¬§æ‹‰å®šç†è¡¨æ˜ï¼Œè‹¥n,aä¸ºæ­£æ•´æ•°ï¼Œä¸”n,aäº’ç´ ï¼ˆå³gcd(a,n)=1ï¼‰ï¼Œåˆ™<br><em><strong>a^phi(n) = 1 (mod n)</strong></em><br>å³ a^phi(n)ä¸1åœ¨æ¨¡nä¸‹åŒä½™ã€‚æ¬§æ‹‰å®šç†å¾—åäºç‘å£«æ•°å­¦å®¶è±æ˜‚å“ˆå¾·Â·æ¬§æ‹‰ã€‚</p><blockquote><p>gcd: greatest common divisor(æœ€å¤§å…¬çº¦æ•°)</p></blockquote><h2 id="RSA">RSA</h2><ol><li>éš¨æ„é¸æ“‡å…©å€‹å¤§çš„è³ªæ•¸ på’Œq,pä¸ç­‰äºq,è®¡ç®—N=pq.</li><li>æ±‚Nçš„æ¬§æ‹‰ï¼Œr = phi(N) = phi(q) x phi(p) = (p-1)(q-1)</li><li>é€‰æ‹©ä¸€ä¸ªå°äºrçš„æ•´æ•°eï¼Œä½¿eä¸räº’è´¨ã€‚ä¸¦æ±‚å¾—eå…³äºrçš„æ¨¡åå…ƒç´ ï¼Œå‘½åä¸ºdã€‚</li><li>(N,e)æ˜¯å…¬é’¥ï¼Œ(N,d)æ˜¯ç§é’¥ã€‚</li><li>åŠ å¯†åŸæ–‡m, å¾—åˆ°å¯†æ–‡ x = (m^e)%N</li><li>è§£å¯†å…¬å¼ä¸º m = (x^d)%N<br><strong>åªèƒ½åŠ å¯†æ¯”Nå°çš„æ•°å­—ï¼Œæ¯”Nå¤§çš„æ•°å­—æ— æ³•åŠ å¯†ã€‚</strong></li></ol><p>egï¼š</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">é€‰æ‹©ä¸¤ä¸ªè´¨æ•°3,11ã€‚è®¡ç®—å¾—åˆ°N=3<span class="token italic"><span class="token punctuation">*</span><span class="token content">11=33è®¡ç®—Nçš„æ¬§æ‹‰ï¼Œr=phi(N)=phi(3)</span><span class="token punctuation">*</span></span>phi(11)=(3-1)(11-1)=20é€‰æ‹©ä¸€ä¸ªå°äºçš„rä¸”ä¸räº’è´¨çš„æ•´æ•°3ï¼Œæ±‚å¾—3å…³äº20çš„æ¨¡åå…ƒç´ 7å¾—åˆ°å…¬é’¥(33,3),ç§é’¥(33,7)åŠ å¯†ï¼šåŠ å¯†æ•°å­—24ï¼Œ(24^3)%33 = 30, è·å¾—åŠ å¯†åçš„å¯†æ–‡ 30è§£å¯†ï¼šå¯¹å¯†æ–‡30è§£å¯†ï¼Œ(30^7)%33 = 24, è·å¾—è§£å¯†åçš„æ˜æ–‡24<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;è´¨æ•°&quot;&gt;è´¨æ•°&lt;/h2&gt;
&lt;p&gt;è´¨æ•°ï¼ˆPrime numberï¼‰ï¼Œåˆç§°ç´ æ•°ï¼ŒæŒ‡åœ¨å¤§äº1çš„è‡ªç„¶æ•°ä¸­ï¼Œé™¤äº†1å’Œè¯¥æ•°è‡ªèº«å¤–ï¼Œæ— æ³•è¢«å…¶ä»–è‡ªç„¶æ•°æ•´é™¤çš„æ•°ï¼ˆä¹Ÿå¯å®šä¹‰ä¸ºåªæœ‰1ä¸è¯¥æ•°æœ¬èº«ä¸¤ä¸ªæ­£å› æ•°çš„æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ¥è‡ª &lt;a href=&quot;https://zh.wikipedia.org/wiki/%E8%B4%A8%E6%95%B0&quot;&gt;https://zh.wikipedia.org/wiki/è´¨æ•°&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;äº’è´¨&quot;&gt;äº’è´¨&lt;/h3&gt;
&lt;p&gt;äº’è´¨æ˜¯å…¬çº¦æ•°åªæœ‰1çš„ä¸¤ä¸ªæ•´æ•°ï¼Œä¹Ÿå¯è®°gcd(a,b)=1, å«åšäº’è´¨æ•´æ•°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ¬§æ‹‰&quot;&gt;æ¬§æ‹‰&lt;/h2&gt;
&lt;p&gt;åœ¨æ•°è®ºä¸­ï¼Œå¯¹æ­£æ•´æ•°nï¼Œæ¬§æ‹‰å‡½æ•°phi(n)æ˜¯å°äºç­‰äºnçš„æ­£æ•´æ•°ä¸­ä¸näº’è´¨çš„æ•°çš„æ•°ç›®ã€‚æ­¤å‡½æ•°ä»¥å…¶é¦–åç ”ç©¶è€…æ¬§æ‹‰å‘½åï¼Œå®ƒåˆç§°ä¸ºÏ†å‡½æ•°ï¼ˆç”±é«˜æ–¯æ‰€å‘½åï¼‰æˆ–æ˜¯æ¬§æ‹‰æ€»è®¡å‡½æ•°ï¼ˆtotient functionï¼Œç”±è¥¿å°”ç»´æ–¯ç‰¹æ‰€å‘½åï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ¥è‡ª &lt;a href=&quot;https://zh.wikipedia.org/wiki/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0&quot;&gt;https://zh.wikipedia.org/wiki/æ¬§æ‹‰å‡½æ•°&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Crypto" scheme="https://asutorufa.github.io/categories/Crypto/"/>
    
    
    <category term="Crypto" scheme="https://asutorufa.github.io/tags/Crypto/"/>
    
    <category term="RSA" scheme="https://asutorufa.github.io/tags/RSA/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºå¹¿å‘Šè€Œç”Ÿ,ä»ä½¿ç”¨åˆ°å¹²æ‰å¤§é™†ç‰ˆMIUI</title>
    <link href="https://asutorufa.github.io/posts/6c3a98b5/"/>
    <id>https://asutorufa.github.io/posts/6c3a98b5/</id>
    <published>2021-09-25T11:40:35.000Z</published>
    <updated>2021-09-25T11:40:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨å››å¹´å¤šçš„é”¤å­æ‰‹æœºè¶Šæ¥è¶Šä¸å ªé‡è´Ÿï¼Œæˆ‘å†³å®šæ¢ä¸€æ¬¾æ–°çš„æ‰‹æœºï¼Œåœ¨ç²¾å¿ƒæŒ‘é€‰åï¼Œé€‰å®šäº†ä»Šå¹´å¹´åˆå‘å¸ƒçš„ä¸€æ¬¾Red MIæ‰‹æœºï¼Œå…¶æé«˜çš„æ€§ä»·æ¯”æ‰“åŠ¨äº†æˆ‘ã€‚</p><h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><p>åœ¨æ”¶è´§å½“å¤©å°±è¿«ä¸åŠå¾…ä¸‹ç­å›å®¶å¼€å§‹æŠŠç©ï¼Œæœ‰ä¸€ä¸ªè¯å¯ä»¥å½¢å®¹æˆ‘å½“æ—¶çš„ä½“éªŒï¼šè»½ã„ã€‚<br>æ¢æ‰‹æœºçš„å¥‘æœºä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå›½äº§appè¶Šæ¥è¶Šæ¯’ç˜¤ï¼Œæ—§æ‰‹æœºè¶Šæ¥è¶Šå¡ï¼Œå¼€å¯å¥åº·ç å’Œæ”¯ä»˜å®éƒ½è¦è‡³å°‘ç­‰å¾…2ç§’ã€‚ç”±äºå››å¹´çš„è½å·®ï¼Œå³ä½¿æ˜¯ä¸€æ¬¾æ€§ä»·æ¯”æ‰‹æœºä¹Ÿè®©æˆ‘è§‰å¾—å¥½æµç•…ï¼Œè¿˜æœ‰120hzå±å¹•ï¼Œä»¤æˆ‘çˆ±ä¸é‡Šæ‰‹ã€‚</p><h2 id="å¿å—">å¿å—</h2><p>æˆ‘çŸ¥é“MIUIæ˜¯æœ‰å¹¿å‘Šçš„ï¼Œä½†æ ¹æ®å„ç§ç½‘ä¸Šçš„è¯´æ³•ï¼Œæ˜¯æœ‰å¼€å…³æ˜¯å¯ä»¥å…³é—­çš„ã€‚<br>æ‰€ä»¥æˆ‘ä¸€å…¥æ‰‹å°±æ ¹æ®ç½‘ä¸Šæµä¼ çš„å„ç§æ–¹æ³•å°†éšè—åœ¨ç³»ç»Ÿä¸åŒè§’è½çš„å¹¿å‘Šå…³é—­äº†ã€‚<br>ç¡®å®æœ‰æ•ˆï¼ŒAPPå’Œç³»ç»Ÿè®¾ç½®ä¸­çš„ä¸€äº›å¹¿å‘Šç¡®å®æ²¡æœ‰äº†ï¼Œå¤©çœŸçš„æˆ‘ä»¥ä¸ºçœŸçš„å¹²æ‰äº†å¹¿å‘Šã€‚<br>ä½†æ˜¯ä¸å®šæ—¶å¹¿å‘Šæ¨é€ï¼Œå°ç±³å•†åŸæ¨é€å„ç§ä¿ƒé”€ï¼Œç³»ç»Ÿè‡ªå¸¦æµè§ˆå™¨ä¹Ÿå¼€å§‹å……å½“æ–°é—»å®¢æˆ·ç«¯ï¼Œå„ç§æ¨é€å‚»é€¼æ–°é—»ï¼Œè€Œè¿™ä¸€åˆ‡çš„å‰æéƒ½æ˜¯åœ¨æˆ‘è¿›å…¥è½¯ä»¶å…³é—­å„ç§æ¨é€çš„æ¡ä»¶ä¸‹ï¼Œåœ¨äº†è§£åå¾—çŸ¥å¯ä»¥ä½¿ç”¨ADBå†»ç»“å‡ ä¸ªç³»ç»Ÿè½¯ä»¶è§£å†³ï¼Œæˆ‘å†»ç»“äº†ä»¥ä¸‹ç³»ç»Ÿè½¯ä»¶ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb shell pm disable-user com.xiaomi.abadb shell pm disable-user com.miui.systemAdSolutionadb shell pm disable-user com.miui.analyticsadb shell pm disable-user com.sohu.inputmethod.sogou.xiaomi<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç¡®å®æœ‰æ•ˆï¼Œè€Œä¸”è¿æŸäº›appçš„å¼€å±å¹¿å‘Šéƒ½æ²¡äº†ã€‚</p><h2 id="æ„¤æ€’">æ„¤æ€’</h2><span id="more"></span><p>è™½ç„¶æˆ‘ä¸é‡åº¦ä¾èµ–è°·æ­Œï¼Œä½†æˆ‘é‡åº¦ä½¿ç”¨Twitter,Youtube,Redditï¼Œåœ¨ä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œæˆ‘å‘ç°æ¨ç‰¹çš„æ¨é€ä¸çµäº†ï¼Œæ¯æ¬¡å¼€å±æ‰ä¼šä¸€å †ä¸€å †çš„æ¨é€ï¼Œè€Œåœ¨æ¯å±çš„æƒ…å†µä¸‹æ ¹æœ¬æ”¶ä¸åˆ°æ¨é€ã€‚<br>æœ€åˆæˆ‘ä¸€åº¦è®¤ä¸ºæ˜¯è‡ªå·±çš„è®¾ç½®æœ‰é—®é¢˜ï¼Œæ¯•ç«Ÿè¿æˆ‘çš„æ—§æ‰‹æœºé”¤å­éƒ½å¯ä»¥åŠæ—¶æ”¶åˆ°å„ç§æ¨é€ã€‚<br>åœ¨å¯¹Google Play Serviceå„ç§è®¾ç½®åï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼Œå–æ¶ˆåº”ç”¨é»‘åå•ï¼Œåå°é”ä½appï¼Œä½†æ²¡æœ‰ä»»ä½•æ”¹å˜ã€‚<br>åœ¨äº†è§£åå¾—çŸ¥ï¼Œå¤§é™†ç‰ˆMIUIä¼šåœ¨æ¯å±åæ–­å¼€FCMçš„è¿æ¥ï¼Œä¸”å¼ºåˆ¶è®¾ç½®åœ¨FCMæ–­å¼€åä¸å†å…è®¸å…¶é‡è¿ï¼Œè¿™ä¸€åˆ‡æˆ‘éƒ½å¯ä»¥ç†è§£ï¼Œç”±äºå›½å†…çš„ç¯å¢ƒï¼Œä¸æ–­é‡è¯•ç¡®å®ä¼šå¯¼è‡´è€—ç”µå¢åŠ ï¼Œåœ¨ç½‘å‹æé†’ä¸‹æˆ‘é€šè¿‡ADBå†»ç»“äº†ä»¥ä¸‹ä¸¤ä¸ªåº”ç”¨ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb shell pm disable-user com.miui.powerkeeperadb shell pm disable-user com.xiaomi.powerchecker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åˆ«è¯´ï¼Œè¿˜çœŸæœ‰ç”¨ï¼ŒåŸºæœ¬ä¸Šèƒ½æ­£å¸¸æ”¶åˆ°æ¨é€äº†ï¼Œæˆ‘ä»¥ä¸ºæˆ‘è§£å†³é—®é¢˜äº†ã€‚<br><strong>ä½†æ˜¯</strong><br>æˆ‘å‘ç°æ¯å±æƒ…å†µä¸‹æ’­æ”¾éŸ³ä¹ï¼ŒéŸ³ä¹ä¼šè‡ªåŠ¨æš‚åœï¼Œåœ¨ä¸Šç½‘æœç´¢åï¼Œæˆ‘å‘ç°ä¸åªæˆ‘æœ‰è¿™ä¸ªé—®é¢˜ï¼Œåœ¨å„æ–¹æ‰“å¬åå¾—çŸ¥æ˜¯å†»ç»“<code>com.miui.powerkeeper</code>å¯¼è‡´çš„ã€‚<br>åŠ ä¸ŠKDE connectä¼šæ—¶ä¸æ—¶çš„æ–­å¼€ï¼Œæˆ‘çœŸçš„å¾ˆæ„¤æ€’ï¼Œæˆ‘èƒ½ç†è§£MIUIçš„åšæ³•ï¼Œä½†æˆ‘æ— æ³•å¿å—ä¸ç»™ç”¨æˆ·ä»»ä½•å¼€å…³ä¸€åˆ€åˆ‡çš„åšæ³•ï¼Œæ‰€ä»¥æˆ‘å†³å®šå¹²æ‰è‡ªå¸¦çš„é™†ç‰ˆMIUIã€‚</p><h2 id="æˆä¸ºâ€œæ¬§æ´²äººâ€">æˆä¸ºâ€œæ¬§æ´²äººâ€</h2><p>åœ¨ç»è¿‡7å¤©çš„å¿å—ä¹‹åï¼Œå¤‡ä»½å¥½æ‰‹æœºå†…çš„å„ç§èµ„æ–™åï¼ŒæˆåŠŸè§£é”äº†æ‰‹æœºã€‚<br>æˆ‘å†³å®šåˆ·å…¥<code>XIAOMI.EU</code>ï¼Œä¸€ä¸ªè¢«å°ç±³å®˜æ–¹å’Œæ¬§æ´²ABCç»é”€å•†è®¤å¯çš„å®˜æ”¹ç³»ç»Ÿã€‚<br>åœ¨<a href="https://xiaomi.eu">xiaomi.eu</a>ä¸Šæå‰ä¸‹è½½é€‚ç”¨äºæ‰‹æœºçš„twrpå’ŒROMã€‚</p><ul><li><p>ä¸´æ—¶åˆ·å…¥TWRPå¹¶è¿›å…¥TWRP</p>  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">fastboot flash recovery twrp.imgfastboot boot twrp.img<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>åœ¨TWRPå†…æ ¼å¼åŒ–DATAåˆ†åŒºï¼Œ<strong>æ³¨æ„ä¸è¦æ¸…é™¤Systemå’ŒPersiståˆ†åŒº</strong>ã€‚</p></li><li><p>åœ¨TWRPå†…å¼€å¯sideloadã€‚</p></li><li><p>é€šè¿‡sideloadåˆ·å…¥rom</p>  <pre class="language-bash" data-language="bash"><code class="language-bash">adb sideload xxxxx.ZIP</code></pre></li></ul><p>åœ¨ç™¾åˆ†ä¹‹47çš„æ—¶å€™ä¼šç»“æŸï¼Œè²Œä¼¼æ˜¯ä¸ªbugï¼Œä¸è¿‡è¿™ä¸ªæ—¶å€™å…¶å®å·²ç»æˆåŠŸåˆ·å…¥äº†ï¼Œç›´æ¥é‡å¯è¿›å…¥ç³»ç»Ÿå³å¯ã€‚</p><h2 id="äº«å—">äº«å—</h2><p>æ²¡æœ‰äº†å°ç±³çš„å„ç§å¹¿å‘Šæ¨é€ï¼Œè‡ªå¸¦è°·æ­Œplayå•†åº—ï¼Œè€Œä¸æ˜¯å°ç±³åº”ç”¨å•†åº—ï¼Œæ‰‹åŠ¨å®‰è£…åº”ç”¨æ—¶ä¸å†è¦æ±‚ä½ å¤šæ¬¡ç¡®è®¤ï¼Œæ­£å¸¸çš„FCMæ¨é€ï¼Œä¸å†æ–­å¼€çš„KDE Connectï¼Œè™½ç„¶ç¼ºå¤±äº†ä¸€éƒ¨åˆ†ç‰¹æœ‰çš„åŠŸèƒ½ï¼Œä½†æ­¤æ—¶æ­¤åˆ»æˆ‘æ„Ÿå—åˆ°äº†æˆä¸ºâ€œæ¬§æ´²äººâ€çš„ä¼˜è¶Šæ„Ÿã€‚</p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>å¦‚æœä½ å–œæ¬¢æŠ˜è…¾ä¸”ä¼šåˆ·æœºï¼Œé‚£ä¹ˆå°ç±³æ‰‹æœºä¾æ—§å¯ä»¥åœ¨ä½ çš„è´­æœºå€™é€‰åå•ä¸­ï¼Œå¦è´¼å°±å°†å…¶æ°¸ä¹…æ‹‰é»‘ã€‚<br>æˆ‘ä¸è®¤åŒå¹¿å‘Šæ¼«å¤©é£çš„ç³»ç»Ÿä¼šç¬¦åˆç”¨æˆ·ä¹ æƒ¯ï¼ŒåŒ…æ‹¬æ‰€è°“â€œç¬¦åˆä¸­å›½ç”¨æˆ·ä¹ æƒ¯â€ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä½¿ç”¨å››å¹´å¤šçš„é”¤å­æ‰‹æœºè¶Šæ¥è¶Šä¸å ªé‡è´Ÿï¼Œæˆ‘å†³å®šæ¢ä¸€æ¬¾æ–°çš„æ‰‹æœºï¼Œåœ¨ç²¾å¿ƒæŒ‘é€‰åï¼Œé€‰å®šäº†ä»Šå¹´å¹´åˆå‘å¸ƒçš„ä¸€æ¬¾Red MIæ‰‹æœºï¼Œå…¶æé«˜çš„æ€§ä»·æ¯”æ‰“åŠ¨äº†æˆ‘ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä½¿ç”¨&quot;&gt;ä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;åœ¨æ”¶è´§å½“å¤©å°±è¿«ä¸åŠå¾…ä¸‹ç­å›å®¶å¼€å§‹æŠŠç©ï¼Œæœ‰ä¸€ä¸ªè¯å¯ä»¥å½¢å®¹æˆ‘å½“æ—¶çš„ä½“éªŒï¼šè»½ã„ã€‚&lt;br&gt;
æ¢æ‰‹æœºçš„å¥‘æœºä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå›½äº§appè¶Šæ¥è¶Šæ¯’ç˜¤ï¼Œæ—§æ‰‹æœºè¶Šæ¥è¶Šå¡ï¼Œå¼€å¯å¥åº·ç å’Œæ”¯ä»˜å®éƒ½è¦è‡³å°‘ç­‰å¾…2ç§’ã€‚ç”±äºå››å¹´çš„è½å·®ï¼Œå³ä½¿æ˜¯ä¸€æ¬¾æ€§ä»·æ¯”æ‰‹æœºä¹Ÿè®©æˆ‘è§‰å¾—å¥½æµç•…ï¼Œè¿˜æœ‰120hzå±å¹•ï¼Œä»¤æˆ‘çˆ±ä¸é‡Šæ‰‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¿å—&quot;&gt;å¿å—&lt;/h2&gt;
&lt;p&gt;æˆ‘çŸ¥é“MIUIæ˜¯æœ‰å¹¿å‘Šçš„ï¼Œä½†æ ¹æ®å„ç§ç½‘ä¸Šçš„è¯´æ³•ï¼Œæ˜¯æœ‰å¼€å…³æ˜¯å¯ä»¥å…³é—­çš„ã€‚&lt;br&gt;
æ‰€ä»¥æˆ‘ä¸€å…¥æ‰‹å°±æ ¹æ®ç½‘ä¸Šæµä¼ çš„å„ç§æ–¹æ³•å°†éšè—åœ¨ç³»ç»Ÿä¸åŒè§’è½çš„å¹¿å‘Šå…³é—­äº†ã€‚&lt;br&gt;
ç¡®å®æœ‰æ•ˆï¼ŒAPPå’Œç³»ç»Ÿè®¾ç½®ä¸­çš„ä¸€äº›å¹¿å‘Šç¡®å®æ²¡æœ‰äº†ï¼Œå¤©çœŸçš„æˆ‘ä»¥ä¸ºçœŸçš„å¹²æ‰äº†å¹¿å‘Šã€‚&lt;br&gt;
ä½†æ˜¯ä¸å®šæ—¶å¹¿å‘Šæ¨é€ï¼Œå°ç±³å•†åŸæ¨é€å„ç§ä¿ƒé”€ï¼Œç³»ç»Ÿè‡ªå¸¦æµè§ˆå™¨ä¹Ÿå¼€å§‹å……å½“æ–°é—»å®¢æˆ·ç«¯ï¼Œå„ç§æ¨é€å‚»é€¼æ–°é—»ï¼Œè€Œè¿™ä¸€åˆ‡çš„å‰æéƒ½æ˜¯åœ¨æˆ‘è¿›å…¥è½¯ä»¶å…³é—­å„ç§æ¨é€çš„æ¡ä»¶ä¸‹ï¼Œåœ¨äº†è§£åå¾—çŸ¥å¯ä»¥ä½¿ç”¨ADBå†»ç»“å‡ ä¸ªç³»ç»Ÿè½¯ä»¶è§£å†³ï¼Œæˆ‘å†»ç»“äº†ä»¥ä¸‹ç³»ç»Ÿè½¯ä»¶ï¼š&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;adb shell pm disable-user com.xiaomi.ab
adb shell pm disable-user com.miui.systemAdSolution
adb shell pm disable-user com.miui.analytics
adb shell pm disable-user com.sohu.inputmethod.sogou.xiaomi&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¡®å®æœ‰æ•ˆï¼Œè€Œä¸”è¿æŸäº›appçš„å¼€å±å¹¿å‘Šéƒ½æ²¡äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ„¤æ€’&quot;&gt;æ„¤æ€’&lt;/h2&gt;</summary>
    
    
    
    <category term="Personally" scheme="https://asutorufa.github.io/categories/Personally/"/>
    
    
  </entry>
  
  <entry>
    <title>iptables</title>
    <link href="https://asutorufa.github.io/posts/736b1750/"/>
    <id>https://asutorufa.github.io/posts/736b1750/</id>
    <published>2021-07-14T21:31:27.000Z</published>
    <updated>2021-07-14T21:31:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>iptables chain</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">    +---------------------------------------------------------+    |                   Network Card                          |    +---------------------------------------------------------+      |                                                    ^      |                                                    |      v                                                    | +----------+          is?      no    +-------+        +-----------+ |prerouting| ----> localhost ------> |forward| ---->  |postrouting| +----------+          |              +-------+        +-----------+                        | yes                                 ^                       |                                     |                       v                                     |                    +---------+                        +-----------+                    |  input  |                        |   output  |                    +---------+                        +-----------+                         |                                   ^                         |                                   |                         |                                   |                         v                                   |    +----------------------------------------------------------+    |                        user                              |    +----------------------------------------------------------+out -> localhost: prerouting -> inputforward:          prerouting -> forward    -> postroutinglocalhost -> out: output     -> postrouting<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>iptables table:</p><ul><li>filter:</li><li>nat:</li><li>magle:</li><li>raw:</li></ul><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">table <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>-</span><span class="token punctuation">></span></span> chain  raw: PREROUTING, OUTPUT  mangle: PREROUTING, INPUT, FORWARD, OUTPUT, POSTROUTING  nat: PREROUTING, OUTPUT, POSTROUTING, INPUT  filter: INPUT, FORWARD, OUTPUTraw â€“> mangle â€“> nat â€“> filter  chain <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>-</span><span class="token punctuation">></span></span> tablePREROUTING: raw, mangle, natINPUT: mangle, filter, natFORWARD: mangle, filterOUTPUT: raw, mangle, nat, filterPOSTROUTING: mangle, nat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>query</p><pre class="language-bash" data-language="bash"><code class="language-bash">iptables <span class="token parameter variable">-t</span> <span class="token operator">&lt;</span>table<span class="token operator">></span> <span class="token parameter variable">-nvL</span> <span class="token operator">&lt;</span>chain<span class="token operator">></span></code></pre><hr><p><a href="https://www.zsythink.net/archives/tag/iptables/page/2">iptables</a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;iptables chain&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;   </summary>
        
      
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="linux" scheme="https://asutorufa.github.io/tags/linux/"/>
    
    <category term="iptables" scheme="https://asutorufa.github.io/tags/iptables/"/>
    
  </entry>
  
  <entry>
    <title>HTTPSç›¸å…³</title>
    <link href="https://asutorufa.github.io/posts/11b2b8df/"/>
    <id>https://asutorufa.github.io/posts/11b2b8df/</id>
    <published>2021-04-18T18:16:58.000Z</published>
    <updated>2021-04-18T18:16:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘é‡åˆ°äº†ä¸€ä»¶äº‹, è®©æˆ‘åˆå¤šç†Ÿæ‚‰äº†ä¸‹HTTPSçš„ç›¸å…³å†…å®¹, å…ˆçœ‹çœ‹HTTPSçš„ç»“æ„</p><p>é€šå¸¸çš„HTTPç½‘ç»œç»“æ„å¦‚ä¸‹</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">+------+| HTTP |+------+| TCP  |+------+|  IP  |+------+  ...  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>HTTPçš„çš„ç›¸å…³å†…å®¹æ˜¯é€šè¿‡TCPæ˜æ–‡ä¼ è¾“çš„, å¦‚æœæœ‰ä¸­é—´ç›‘å¬è€…, å¯ä»¥ç›´æ¥çœ‹ç»“ç›¸å…³å†…å®¹.</p><p>HTTPSçš„ç»“æ„</p><span id="more"></span><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">+------+| HTTP |+------+| TLS  |+------+| TCP  |+------+|  IP  |+------+  ...  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>TCPå’ŒHTTPä¹‹å‰å¤šäº†ä¸€æ¬¡å¤„ç†, ä¼šå°†HTTPçš„å†…å®¹åŠ å¯†åå†é€šè¿‡TCPä¼ è¾“.<br>TLSæ¡æ‰‹è¿‡ç¨‹ä¸­, ä¼šåå•†ä½¿ç”¨çš„TLSç‰ˆæœ¬, åŠ å¯†æ–¹å¼åŠå¯†é’¥, ä¼šé€šè¿‡è¯ä¹¦ç¡®è®¤èº«ä»½, ç”Ÿæˆçš„å¯†é’¥ä¹Ÿä¼šåŠ å¯†, ä¸æƒ³è¢«çœ‹è§æ¡æ‰‹è¿‡ç¨‹çš„è¯, ç›®å‰è¿˜å¯ä»¥é‡‡ç”¨ESNI.<br>è¿™é‡Œå¹¶ä¸èƒ½å®Œå…¨åŒ¿å, å› ä¸ºè¿˜æ˜¯èƒ½é€šè¿‡ç½‘ç»œå±‚çŸ¥é“ä½ çš„ç›®çš„åœ°å€, ä½†æ˜¯å…·ä½“è¯·æ±‚çš„å†…å®¹å°±ä¸ä¼šè¢«çœ‹è§äº†.</p><hr><p><strong>ä»¥ä¸‹æ¡ˆä¾‹çº¯è™šå‡ç¼–é€ çš„, å¦‚æœ‰é›·åŒ, çº¯å±å·§åˆ.</strong><br>å®¢æˆ·éœ€æ±‚å¤§æ¦‚æ˜¯è¿™æ ·, å¸Œæœ›åœ¨å‰åç«¯ä¼ è¾“è¿‡ç¨‹ä¸­å¯†ç ç­‰æ•æ„Ÿå†…å®¹ä¸è¦æ˜æ–‡æš´éœ², ä¸è¢«ä¸­é—´åŠ«æŒè·å–.<br>xå…¬å¸xé«˜çº§æ¶æ„å¸ˆé‡‡ç”¨çš„æ˜¯è¿™æ ·çš„æ–¹æ¡ˆ:</p><ul><li>å‰åç«¯ä½¿ç”¨HTTPé€šä¿¡</li><li>å‰ç«¯å¯¹ç›¸å…³æ•æ„Ÿå†…å®¹å¯¹ç§°åŠ å¯†åä¼ ç»™åç«¯, åç«¯è§£å¯†è·å–å†…å®¹</li></ul><p>ä¸é‡‡ç”¨TLSçš„ç†ç”±å¦‚ä¸‹:</p><ul><li>å¯ä»¥é€šè¿‡æµè§ˆå™¨æ¼æ´è·å–</li><li>HTTPSå¯ä»¥è¢«æš´åŠ›ç ´è§£</li></ul><p>å…ˆè¯´ä¸‹é‡‡ç”¨çš„æ–¹æ¡ˆå’Œä¸åˆç†, ç›®å‰äº§å“æ˜¯ä¼ ç»Ÿçš„BSæ¨¡å¼, ä¹Ÿå°±æ˜¯è¯´ç½‘é¡µä¼šä»åç«¯è·å–.<br>å› ä¸ºç½‘é¡µæ˜¯ä»åç«¯è·å–çš„, è€Œä¸”æ˜¯HTTP, ä¹Ÿå°±æ˜¯è¯´ä¸­é—´åŠ«æŒè€…ä¹Ÿå¯ä»¥è·å–ç½‘é¡µå†…å®¹, é€šè¿‡åˆ†æjså°±èƒ½è·å–å…·ä½“çš„åŠ å¯†æ–¹å¼, å³ä½¿å¯¹jsè¿›è¡Œæ··æ·†ä¹Ÿæœ€å¤šæ˜¯èŠ±çš„æ—¶é—´ç¨å¾®é•¿é‚£ä¹ˆä¸€ç‚¹, æ‰€ä»¥è¯´è¿™ä¸ªæ–¹æ¡ˆå®Œå…¨æ— ç”¨, å½“ç„¶æ¬ºéª—ä¸€ä¸‹ä¸æ‡‚æŠ€æœ¯çš„å®¢æˆ·è¿˜æ˜¯å¯ä»¥çš„, ä½†æ˜¯ä»æŠ€æœ¯è§’åº¦æ˜¯å®Œå…¨ä¸å¯è¡Œçš„.<br>è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ”¹ä¸€ä¸‹äº§å“çš„æ¨¡å¼è¿˜æ˜¯å¯è¡Œçš„, ä½¿ç”¨electronç­‰ç±»ä¼¼çš„æŠ€æœ¯å°†ç½‘é¡µåŒ…è£…æˆä¸€ä¸ªå®¢æˆ·ç«¯, ä¸é€šè¿‡åç«¯è·å–ç½‘é¡µè¿˜æ˜¯å¯è¡Œçš„, å¯èƒ½åœ¨ä½¿ç”¨ä¸Šéº»çƒ¦äº†ä¸€ç‚¹, ä½†æ˜¯è¿™æ‰èƒ½çœŸæ­£è®©å‰ç«¯çš„åŠ å¯†å…·æœ‰æ„ä¹‰.</p><p>å†åˆ†æä¸‹ä¸é‡‡ç”¨TLSçš„ç†ç”±:</p><ul><li><p>å¯ä»¥é€šè¿‡æµè§ˆå™¨æ¼æ´è·å–<br>è¿™å¥è¯æ˜¯åºŸè¯, æµè§ˆå™¨çœŸæœ‰æ¼æ´ä¸ç®¡æ˜¯HTTPè¿˜æ˜¯HTTPSéƒ½æ— ç”¨çš„.</p></li><li><p>HTTPSå¯ä»¥è¢«æš´åŠ›ç ´è§£</p></li></ul><p>è¿™é‡Œæˆ‘ä»¬å…ˆåˆ†æä¸‹, ç›®å‰HTTPSå¯èƒ½è¢«ç ´è§£çš„å‡ ç§æ–¹å¼.</p><ol><li>ç¬¬ä¸€ç§, åœ¨æ¡æ‰‹é˜¶æ®µä½¿ç”¨è™šå‡çš„è¯ä¹¦è¿›è¡Œæ¡æ‰‹, è¿™é‡Œéœ€è¦åœ¨æµè§ˆå™¨æˆ–è€…æ˜¯å®¢æˆ·ç«¯çš„ç³»ç»Ÿä¸Šå¯¼å…¥è™šå‡çš„è¯ä¹¦, ä¸è¿‡æˆ‘è®¤ä¸ºä¸€ä¸ªå®‰å…¨æ„è¯†å¾ˆé«˜çš„å…¬å¸æ˜¯ä¸ä¼šéšæ„å¯¼å…¥ä¸è®¤è¯†çš„è¯ä¹¦çš„.</li><li>ç¬¬äºŒç§, æš´åŠ›ç ´è§£TLSçš„åŠ å¯†, ä¸è®¡æ—¶é—´æƒ…å†µä¸‹å½“ç„¶èƒ½è¢«ç ´è§£, ä½†æ˜¯ç°ä»£å¯†ç å­¦, å³ä½¿ä½¿ç”¨è¶…çº§è®¡ç®—æœºæš´åŠ›ç ´è§£éƒ½è¦èŠ±è´¹å¾ˆé•¿å¾ˆé•¿æ—¶é—´.</li></ol><p>æ€»ä¸Šæ‰€è¿°, è¿™å¥è¯ä¹Ÿæ˜¯åºŸè¯.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘é‡åˆ°äº†ä¸€ä»¶äº‹, è®©æˆ‘åˆå¤šç†Ÿæ‚‰äº†ä¸‹HTTPSçš„ç›¸å…³å†…å®¹, å…ˆçœ‹çœ‹HTTPSçš„ç»“æ„&lt;/p&gt;
&lt;p&gt;é€šå¸¸çš„HTTPç½‘ç»œç»“æ„å¦‚ä¸‹&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;+------+
| HTTP |
+------+
| TCP  |
+------+
|  IP  |
+------+
  ...  &lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;HTTPçš„çš„ç›¸å…³å†…å®¹æ˜¯é€šè¿‡TCPæ˜æ–‡ä¼ è¾“çš„, å¦‚æœæœ‰ä¸­é—´ç›‘å¬è€…, å¯ä»¥ç›´æ¥çœ‹ç»“ç›¸å…³å†…å®¹.&lt;/p&gt;
&lt;p&gt;HTTPSçš„ç»“æ„&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="HTTPS" scheme="https://asutorufa.github.io/tags/HTTPS/"/>
    
    <category term="HTTP" scheme="https://asutorufa.github.io/tags/HTTP/"/>
    
  </entry>
  
  <entry>
    <title>2021-03-20 01:25AM</title>
    <link href="https://asutorufa.github.io/posts/d67c4794/"/>
    <id>https://asutorufa.github.io/posts/d67c4794/</id>
    <published>2021-03-20T01:32:57.000Z</published>
    <updated>2021-03-20T01:32:57.000Z</updated>
    
    <content type="html"><![CDATA[<p>2021-03-20 01:25AM<span id="more"></span><br>ç¬¬ä¸€æ¬¡å‡ºæ¥å®ä¹ , ä½çš„æˆ¿å­æ˜¯åŒäº‹è½¬ç§Ÿç»™æˆ‘çš„, æœ¬æ¥è¯´æ˜¯å»å‡ºå·®, ä½†æ˜¯æ²¡è¿‡å‡ å¤©å°±è¾èŒäº†, èµ°çš„æ—¶å€™å¸®æˆ‘å‡ºäº†500å—æˆ¿ç§Ÿ, è¿˜ç•™äº†ä¸å°‘ä¸œè¥¿, æˆ‘è¿˜ç™½ä½äº†åŠä¸ªå¤šæœˆæ²¡å‡ºé’±, æˆ‘å¯ä»¥è¯´æ˜¯ç›¸å½“å¹¸è¿, ç¬¬ä¸€æ¬¡å‡ºæ¥æ‰¾å·¥ä½œå°±æœ‰ä¸å°‘äººç…§é¡¾æˆ‘.<br>åˆšè¿‡æ¥çš„æ—¶å€™åˆšå¥½æœ‰ä¸ªå­¦é•¿åœ¨è¿™è¾¹, æŒºç…§é¡¾æˆ‘çš„, å¸®äº†æˆ‘ä¸å°‘, è¿˜ç»™äº†æˆ‘ä¸€äº›ä¸œè¥¿.<br>å› ä¸ºä¸€ç›´åœ¨å­¦æ ¡é£Ÿå ‚åƒé¥­, æ²¡æ€ä¹ˆå…³æ³¨è¿‡å­¦æ ¡é£Ÿå ‚ä»¥å¤–çš„é¥­é¦†çš„ä»·æ ¼, çœ‹åˆ°å¤–é¢é¥­åº—é‡Œèœçš„ä»·æ ¼, çœŸçš„æ˜¯éš¾ä»¥æ¥å—, éƒ½æ˜¯15å—èµ·æ­¥, åƒé¥±è‡³å°‘å¾—20å¤š, è·Ÿå­¦æ ¡é‡Œä¸åˆ°10å—å°±èƒ½åƒé¥±ç›¸æ¯”çœŸçš„æ˜¯å·®çš„å¾ˆå¤š, è€Œä¸”è‡ªå·±è¿˜è¦äº¤æˆ¿ç§Ÿ, ä¸€å¼€å§‹æˆ‘çœŸçš„å¾ˆæ‹…å¿ƒå®ä¹ çš„å·¥èµ„å¯èƒ½ä¼šå¯¼è‡´æˆ‘è¿é¥­éƒ½åƒä¸èµ·.<br>æ‰€ä»¥åˆšå¼€å§‹æˆ‘éƒ½æ˜¯èƒ½çœä¸€ç‚¹å°±çœä¸€ç‚¹, é™¤äº†ä¸­åˆé¥­, éƒ½æ˜¯è‡ªå·±åœ¨åš, 10å—é’±ä¹°çš„èœå¯ä»¥åƒå¾ˆä¹…, ä¸è¿‡è¿‡äº†ä¸€æ®µæ—¶é—´ä¹‹åå°±æ²¡é‚£ä¹ˆæ‹…å¿ƒäº†, å¯èƒ½æ˜¯å› ä¸ºæ¸æ¸å¯¹å‘¨å›´ç†Ÿæ‚‰èµ·æ¥äº†, ä¹Ÿä¸å¤ªæ‹…å¿ƒé’±ä¸å¤ŸèŠ±çš„é—®é¢˜äº†, å› ä¸ºåœ¨å¤§å­¦å°±æƒ³ç€çœé’±, å¹³æ—¶ä¹Ÿä¸ä¹°æ°´æœå•¥çš„, åˆ°äº†å¤§ä¸‰,å¤§å››å¾—äº†ä¸€äº›ç”Ÿæ´»ä¹ æƒ¯ç—…, é£èšŠç—‡,é¼»ç‚,è€³é¸£â€¦ éƒ½æ˜¯äº›æ²¡æ³•æ²»çš„ç—…, åˆšå¼€å§‹è¿˜å»åŒ»é™¢èŠ±äº†ä¸å°‘é’±, åˆ°æœ€åè¿˜æ²¡æ²»å¥½, æ‰€ä»¥ç°åœ¨éƒ½æ˜¯å°½é‡åƒçš„å¥åº·, æ°´æœå†è´µæˆ‘ä¹Ÿè¦ä¹°ä¸€äº›åƒ.<br>å› ä¸ºå¤§å­¦çš„æ—¶å€™æœ‰äº†è€³é¸£, è™½ç„¶è€³é¸£çš„å£°éŸ³ä¸æ˜¯å¾ˆå¤§, ä½†æ˜¯æˆ‘å¯¹å£°éŸ³çœŸçš„å¾ˆæ•æ„Ÿ, ä¸€æœ‰ç‚¹å£°éŸ³å°±ä¼šé†’çš„é‚£ç§, ä¹‹å‰è¿˜æ•¢ç¡è§‰çš„æ—¶å€™æˆ´æˆ´è€³æœº, è‡ªä»å¾—äº†è€³é¸£ä¹‹åè€³æœºä¹Ÿä¸æ•¢å¤šæˆ´äº†, ä¸€ç›´æƒ³ä¹°ä¸€ä¸ªsonyçš„XM3, ä½†æ˜¯å¥½ä¸å®¹æ˜“æ”’çš„é’±, æ€»æ˜¯ä¼šå› ä¸ºå„ç§åŸå› èŠ±æ‰, æ¯”å¦‚å› ä¸ºè€ƒè¯•è¦å›å­¦æ ¡ä¹°æœºç¥¨äº†(å› ä¸ºç°åœ¨æœºç¥¨æ¯”é«˜é“ä¾¿å®œå¾ˆå¤š,æ‰€ä»¥è¿˜æ˜¯ä¹°æœºç¥¨äº†), è€Œä¸”å­¦æ ¡æœ¬æ¥ç»™æ‰¾å·¥ä½œåŒå­¦å‘çš„åŠ©å­¦é‡‘ä¹Ÿå‘ç»™è€ƒç ”çš„äººäº†, å¯èƒ½è¿™å°±æ˜¯å›½æƒ…å§, è´«è‹¦ç”Ÿæ°¸è¿œæ‹¿ä¸åˆ°åŠ©å­¦é‡‘, æ‹¿åˆ°åŠ©å­¦é‡‘çš„äººå…¨å»ä¹°ä¸€åŒä¸¤ä¸‰åƒçš„é‹äº†, è¿™æ­£å¸¸å—?<br>åˆšæ¥çš„æ—¶å€™, æˆ‘å¯¹é¢æœ€å¤§é‚£ä¸ªæˆ¿é—´ä½ç€ä¸€å®¶ä¸‰å£, å°å­©è¿˜å¾ˆå°, æœ‰æ—¶å€™ä¼šå“­, ä¸è¿‡ä¸€èˆ¬ä¸åˆ°5åˆ†é’Ÿå°±ä¸å“­äº†, æ„Ÿè§‰è¿˜å¥½æ²¡é‚£ä¹ˆåµ. ç°åœ¨å¯¹é¢æ¢æˆä¸€å¯¹æƒ…ä¾£äº†, çœŸçš„å¾ˆåµ, ä¸€ç›´è¯´è¯, åŠå¤œ12ç‚¹1ç‚¹ä¸ç¡è¦ºè¿˜åœ¨å¤§ç¬‘, è¿˜å¥½ç­¾çš„åˆåŒå°±å‰©ä¸¤ä¸ªæœˆäº†, è‡ªå·±ä¹Ÿä¹°äº†æ–°çš„éš”éŸ³è€³å¡, åªèƒ½å…ˆåšæŒåšæŒäº†, åˆåŒåˆ°æœŸæˆ‘ä¸€å®šè¦æ¢ä¸€ä¸ªå¥½ä¸€ç‚¹çš„æˆ¿å­, è´µç‚¹ä¹Ÿè¡Œ, åªè¦éš”éŸ³æ¯”è¾ƒå¥½.<br>æ¥¼ä¸Šè¿˜æœ‰ä¸€ä¸ªæ•²æ¶å­é¼“çš„, è¿™æ˜¯æˆ‘æ²¡æƒ³åˆ°çš„, å±…æ°‘æ¥¼é‡Œæ•²æ¶å­é¼“, å°åŒºå‘¨å›´çš„ç¯å¢ƒä¹Ÿå¾ˆå·®, æ¯å¤©éƒ½æœ‰è£…ä¿®çš„, è¦ä¸æ˜¯åˆæ¥ä¹åˆ°, æˆ‘ä¸€å®šä¸ä¼šé€‰æ‹©è¿™é‡Œçš„.<br>æ¥åˆ°è¿™è¾¹åŸºæœ¬å“ªé‡Œéƒ½æ²¡å»è¿‡, ä¸€éƒ¨åˆ†åŸå› æ˜¯æ²¡é’±, è¿˜æœ‰ä¸€éƒ¨åˆ†åŸå› æ˜¯è‡ªå·±æƒ³å¹²çš„äº‹å¤ªå¤š, åˆæƒ³å­¦æ—¥è¯­, åˆæƒ³ç»´æŠ¤è‡ªå·±å†™çš„å¼€æºé¡¹ç›®, è¿˜æƒ³çœ‹çœ‹å…³æ³¨çš„youtuberæ–°å‡ºçš„è§†é¢‘, å‘¨æœ«å¯¹æˆ‘æ¥è¯´å®Œå…¨ä¸å¤Ÿç”¨, æœ€è¿‘ä¸Šç­æ‘¸é±¼éƒ½æœ‰åœ¨æè‡ªå·±çš„å¼€æºé¡¹ç›®, è™½ç„¶å¯èƒ½ä¸€ä¸ªç”¨çš„äººéƒ½æ²¡æœ‰, ä½†æ˜¯æˆ‘è¿˜æ˜¯æƒ³å¼„å¥½ä¸€ç‚¹, è‡³å°‘è‡ªå·±ç”¨çš„èˆ’æœç‚¹.<br>å…¬å¸çš„è¯è¿˜å¥½, è™½ç„¶æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆå¥½, ä½†æ˜¯è¿˜èƒ½æ¥å—. ä¸»è¦æ˜¯ç®¡ç†æ¯”è¾ƒä¹±, æ²¡æœ‰ä»£ç è§„èŒƒ, æœ‰äº›ä»£ç ä¹Ÿå†™çš„å¾ˆæœ‰é—®é¢˜, å¦‚æœä¸å†æ”¹æ”¹çš„, æˆ‘ç›¸ä¿¡åªä¼šè¶Šæ¥è¶Šå½±å“æ•ˆç‡, ä¸å°‘åœ°æ–¹ä»£ç å†™çš„å¾ˆæœ‰é—®é¢˜, æ•´ä¸ªé¡¹ç›®çš„æ¶æ„ä¹Ÿä¸å¤ªå¯¹, è‡³å°‘ä»æˆ‘è¿™ä¸ªå¤§å­¦è¿˜æ²¡æ¯•ä¸šçš„æ¥çœ‹é—®é¢˜è¿˜æ˜¯ä¸å°‘çš„. æˆ‘ä¸å¤ªä¼šè¯´è¯, æœ‰æ—¶å€™ä¼šæƒ¹äººä¸é«˜å…´æˆ–æ˜¯äº‹åè§‰å¾—è‡ªå·±è¯´çš„ä¸å¯¹, å¯¹äºæŠ€æœ¯ç›¸å…³çš„é—®é¢˜æœ‰æ—¶æˆ‘çœŸçš„å¾ˆæƒ³åé©³, ä½†ç°åœ¨éƒ½å°½é‡å¿ä½äº†, ä¸æƒ³è®©åˆ«äººè§‰å¾—æˆ‘è¿™ä¸ªåè¾ˆå¾ˆæ— ç¤¼. æœ‰æ—¶ç¡®å®æ²¡æœ‰å…±åŒè¯é¢˜, æ¯”å¦‚æˆ‘ç°åœ¨çœŸçš„å¾ˆè®¨åŒbilibili, å¯¹äºæˆ‘æ¥è¯´å˜å‘³å¤ªä¸¥é‡, ä½†æ˜¯åè€Œæ˜¯å› ä¸ºå‡ºåœˆå¤ªä¸¥é‡äº†, ç”¨çš„äººè¶Šæ¥è¶Šå¤š, å‘¨å›´åŒäº‹æ€»æ˜¯ä¼šè¯´æ˜¨å¤©æˆ‘åœ¨bilibiliä¸Šçœ‹äº†ä»€ä¹ˆ, æˆ‘ä¹Ÿä¸å¥½è¯´ä»€ä¹ˆ, å› ä¸ºæˆ‘ç°åœ¨å·²ç»åŸºæœ¬ä¸ç”¨å®ƒäº†.<br>è‡ªå·±çš„è¯, é™¤äº†å¤šäº†å·¥ä½œå’Œåšé¥­, ä¹ æƒ¯åŸºæœ¬æ²¡ä»€ä¹ˆå˜åŒ–, å¹³æ—¶çææç”µè„‘, çœ‹çœ‹youtube,twitter, åœ¨ç¬”è®°æœ¬ä¸Šè®°å½•ä¸€ä¸‹æœ€è¿‘æ–°çŸ¥é“çš„æ—¥è¯­å•è¯, å†™å†™ä»£ç .</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;2021-03-20 01:25AM</summary>
    
    
    
    <category term="æ—¥å¸¸" scheme="https://asutorufa.github.io/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
  </entry>
  
  <entry>
    <title>Hyperledger Fabricç»„ç»‡æ›´æ¢è¯ä¹¦</title>
    <link href="https://asutorufa.github.io/posts/afc6d6dd/"/>
    <id>https://asutorufa.github.io/posts/afc6d6dd/</id>
    <published>2021-01-24T17:34:58.000Z</published>
    <updated>2021-01-24T17:34:58.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2><p>æœ€è¿‘ä¸€ç›´åœ¨ç ”ç©¶å…³äºå¦‚ä½•ç»™ä¸€ä¸ªfabricçš„ç»„ç»‡æ›´æ¢ä¸€ä¸ªæ–°çš„è¯ä¹¦, åŒ…æ‹¬æ‰€æœ‰åŠ å…¥çš„é€šé“, æ‰€æœ‰peerå’Œorderer.<br>ç”¨äº†å¾ˆå¤šçœ‹ä¼¼å®Œç¾çš„æ–¹æ³•å´å¤šæ¬¡æµ‹è¯•å¤±è´¥, æœ€åæ€»ç®—æ‰¾åˆ°ä¸€ç§æ–¹æ³•.</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"channel_group"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"groups"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token property">"Application"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token property">"groups"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"Org1MSP"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                        <span class="token property">"groups"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                         <span class="token property">"mod_policy"</span><span class="token operator">:</span> <span class="token string">"Admins"</span><span class="token punctuation">,</span>                         <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                            <span class="token property">"MSP"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                            <span class="token punctuation">&#125;</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                         <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0"</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                     <span class="token property">"Org2MSP"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                        <span class="token property">"groups"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                         <span class="token property">"mod_policy"</span><span class="token operator">:</span> <span class="token string">"Admins"</span><span class="token punctuation">,</span>                         <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                            <span class="token property">"MSP"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                            <span class="token punctuation">&#125;</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                         <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0"</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                 <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1"</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>             <span class="token property">"Orderer"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token property">"groups"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"OrdererOrg"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                        <span class="token property">"groups"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                         <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                            <span class="token property">"MSP"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                            <span class="token punctuation">&#125;</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                         <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0"</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                 <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"ConsensusType"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                        <span class="token property">"mod_policy"</span><span class="token operator">:</span> <span class="token string">"Admins"</span><span class="token punctuation">,</span>                         <span class="token property">"value"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                            <span class="token property">"metadata"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                                <span class="token property">"consenters"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                                    <span class="token punctuation">&#123;</span>                                        <span class="token property">"client_tls_cert"</span><span class="token operator">:</span> <span class="token string">"=="</span><span class="token punctuation">,</span>                                         <span class="token property">"host"</span><span class="token operator">:</span> <span class="token string">"orderer.example.com"</span><span class="token punctuation">,</span>                                         <span class="token property">"port"</span><span class="token operator">:</span> <span class="token number">7050</span><span class="token punctuation">,</span>                                         <span class="token property">"server_tls_cert"</span><span class="token operator">:</span> <span class="token string">"=="</span>                                    <span class="token punctuation">&#125;</span>                                <span class="token punctuation">]</span><span class="token punctuation">,</span>                                 <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                                    <span class="token property">"election_tick"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>                                     <span class="token property">"heartbeat_tick"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                                     <span class="token property">"max_inflight_blocks"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>                                     <span class="token property">"snapshot_interval_size"</span><span class="token operator">:</span> <span class="token number">16777216</span><span class="token punctuation">,</span>                                     <span class="token property">"tick_interval"</span><span class="token operator">:</span> <span class="token string">"500ms"</span>                                <span class="token punctuation">&#125;</span>                            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                             <span class="token property">"state"</span><span class="token operator">:</span> <span class="token string">"STATE_NORMAL"</span><span class="token punctuation">,</span>                             <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"etcdraft"</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                         <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0"</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                 <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0"</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>         <span class="token property">"sequence"</span><span class="token operator">:</span> <span class="token string">"2"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€ä¸ªé€šé“é…ç½®å—ç±»ä¼¼ä¸Šé¢è¿™ç§,ä¸ºäº†çœ‹çš„æ¸…æ¥šæœ‰äº›å†…å®¹æˆ‘åˆ äº†, æ›´æ¢è¯ä¹¦æˆ‘ä»¬éœ€è¦ä¿è¯applicationåŠordererçš„MSPæ˜¯ç›¸åŒçš„, å¦åˆ™æ›´æ–°é…ç½®å—æ˜¯ä¸ä¼šæˆåŠŸçš„, ä¸”æˆ‘ä»¬å¾—ä¿è¯å½“å‰ç»„ç»‡çš„raftèŠ‚ç‚¹çš„è¯ä¹¦ä¹Ÿè¦å…¨éƒ¨æ›´æ¢æ‰.</p><h2 id="å¤±è´¥è¿‡ç¨‹">å¤±è´¥è¿‡ç¨‹</h2><span id="more"></span><h3 id="1">1</h3><p>ç¬¬ä¸€æ¬¡å°±æ˜¯éå¸¸ç®€å•çš„æƒ³æ³•, å…ˆæ›´æ¢æ‰€æœ‰é€šé“çš„é€šé“é…ç½®å—çš„caè¯ä¹¦, ç„¶åé‡å¯æ‰€æœ‰peerå’ŒordererèŠ‚ç‚¹.<br>ä½†æ˜¯è¿™é‡Œå› ä¸ºraftçš„é—®é¢˜, é€šé“é…ç½®å—å†…çš„<strong>raftçš„tlsè¯ä¹¦ä¸€æ¬¡åªèƒ½æ›´æ¢ä¸€ä¸ª</strong>, å¦‚æœæˆ‘è¦æ›´æ¢è¯ä¹¦çš„ç»„ç»‡æ‹¥æœ‰å¤šä¸ªordererä¸”éƒ½ä½œä¸ºraftèŠ‚ç‚¹, è¿™æ˜¯å¦‚æœç›´æ¥æ›´æ–°å¯èƒ½ä¼šç›´æ¥å¯¼è‡´raftå…±è¯†ç›´æ¥å¤±æ•ˆ, å¾ˆå¤šæƒ…å†µæƒ³æƒ³éƒ½ä¸è¡Œ.</p><h3 id="2">2</h3><p>å…ˆç§»é™¤å¤šä½™çš„raftèŠ‚ç‚¹, æ›´æ¢åå†åŠ è¿›æ¥, æµ‹è¯•åå‘ç°è‡ªå·±æƒ³çš„å¤ªç®€å•äº†,  å› ä¸ºå³ä½¿åé¢é‡æ–°åŠ è¿›æ¥å, ä¹‹å‰è¢«ç§»é™¤çš„èŠ‚ç‚¹ä¹Ÿæ— æ³•æ‹‰å–åˆ°æ–°çš„é…ç½®å—, å› ä¸ºä»–ä»¬çš„é€šé“é…ç½®å—å†…è¿˜æ˜¯æ—§çš„è¯ä¹¦, å½“ç„¶è¿ä¸ä¸Šäº†, è¿™é‡Œå¿…é¡»è¦æ›´æ–°å®ƒä»¬çš„åˆ›ä¸–åŒºå—æ‰è¡Œ, æ“ä½œè¿‡äºç¹ç, ä¸”åœ¨åŒºå—é“¾åˆ›å»ºåˆæœŸå¾ˆå®¹æ˜“å¯¼è‡´æ•´ä¸ªè”ç›Ÿçš„raftå…±è¯†å´©æºƒæ‰.</p><h3 id="3">3</h3><p>æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£, å‘ç°ordererå’Œraftçš„ç«¯å£å¯ä»¥åˆ†å¼€, ä¹Ÿå°±æ˜¯è¯´ordererå’Œraft grpcæœåŠ¡å¯ä»¥åˆ†å¼€äº†, åæ¥æµ‹è¯•æ‰å‘ç°æ˜¯è‡ªå·±æƒ³é”™äº†, ä¸”å®˜æ–¹æ–‡æ¡£çš„è¯¯å¯¼æ€§å¤ªå¼ºäº†, raftå’Œç»„ç»‡çš„è¯ä¹¦ä»æ—§æ˜¯ç»‘å®šåœ¨ä¸€èµ·çš„, å¦‚æœä¸€ä¸ªç»„ç»‡åªæœ‰ä¸€ä¸ªcaè¯ä¹¦ä¸”æ‹¥æœ‰å¤šä¸ªraftèŠ‚ç‚¹ä¾æ—§æ— æ³•æ›´æ¢.<br>å¦‚æœä½¿ç”¨ä¸åŒçš„è¯ä¹¦, æŸ¥çœ‹ordererçš„æŠ¥é”™, å¯ä»¥å‘ç°æ˜¯åœ¨ordererè¿æ¥å…¶ä»–ordererçš„raftèŠ‚ç‚¹æ—¶ä¼šå‡ºé—®é¢˜, ä¼šæŠ¥è¯ä¹¦éªŒè¯ä¸é€šè¿‡, è¿™é‡Œæˆ‘æ‰å‘ç°ä¸‹é¢çš„è§£å†³æ–¹æ³•.</p><h2 id="æ–¹æ³•">æ–¹æ³•</h2><p>æœ€åæ‰å‘ç°fabricä¸€ä¸ªç»„ç»‡çš„mspç›®å½•ä¸‹çš„è¯ä¹¦éƒ½æ˜¯å¯ä»¥æ”¾å¤šä¸ªcaè¯ä¹¦çš„, åˆ›å»ºåˆ›ä¸–åŒºå—æ—¶, é…ç½®å—å†…çš„è¯ä¹¦æ•°ç»„å°±ä¼šæœ‰ä¸¤ä¸ªè¯ä¹¦, è¿™æ ·å³ä½¿ordererå’Œraftä½¿ç”¨ä¸åŒçš„caè¯ä¹¦ç­¾å‘ä¸‹æ¥çš„tlsè¯ä¹¦, åªè¦åœ¨ç»„ç»‡çš„caåˆ—è¡¨å†…å°±ä¸ä¼šæœ‰é—®é¢˜.</p><p>è¿™æ ·å°±æœ‰äº†æ›´æ¢è¯ä¹¦çš„æ–¹æ³•, è¿‡ç¨‹å¤§æ¦‚æ˜¯è¿™æ ·çš„:</p><ul><li>å…ˆå°†æ–°çš„tlscaè¯ä¹¦æ·»åŠ åˆ°æ‰€æœ‰åˆ°é€šé“é…ç½®å—å†…, æ³¨æ„è¿™é‡Œæ˜¯æ·»åŠ , ä¸æ˜¯æ›¿æ¢.</li><li>æ›¿æ¢é€šé“é…ç½®å—å†…ä¸€ä¸ªraftèŠ‚ç‚¹çš„è¯ä¹¦ä¸ºæ–°è¯ä¹¦, æ›¿æ¢æœ¬åœ°ordererèŠ‚ç‚¹çš„è¯ä¹¦æ–‡ä»¶, é‡å¯èŠ‚ç‚¹.</li><li>é‡å¤ä»¥ä¸Šæ­¥éª¤ç›´åˆ°æ›¿æ¢äº†æ‰€æœ‰raftèŠ‚ç‚¹çš„è¯ä¹¦.</li><li>ç„¶åå†æ›¿æ¢å…¶ä»–çš„caè¯ä¹¦, adminè¯ä¹¦ä¹‹ç±»çš„.</li><li>æœ€åå°†é€šé“é…ç½®å—å†…çš„æ—§è¯ä¹¦åˆ é™¤æ‰.</li></ul><p>è¿™æ ·å°±å®Œæˆæ›¿æ¢äº†, å¤§æ¦‚è¿‡ç¨‹å°±æ˜¯å¦‚æ­¤, å®é™…æ“ä½œæ—¶å¯èƒ½ä¼šæœ‰æ‰€å‡ºå…¥.<br>å½“ç„¶å¦‚æœè§‰å¾—æ²¡æœ‰åˆ é™¤æ—§è¯ä¹¦çš„å¿…è¦ä¹Ÿå¯ä»¥ä¸åˆ é™¤.</p><h2 id="é™„åŠ ">é™„åŠ </h2><p>å…³äºfabric ca</p><p>fabric caåœ¨ç­¾å‘è¯ä¹¦æ—¶, caå°±æ˜¯fabric ca serverä¸‹çš„ca, ä¸ä¼šé‡æ–°ç­¾å‘æ–°çš„ca.</p><p>å…³äºmspç›®å½•</p><p>keystore &lt;- èŠ‚ç‚¹/ç”¨æˆ·è¯ä¹¦çš„å¯†é’¥<br>signcerts &lt;- èŠ‚ç‚¹/ç”¨æˆ·è¯ä¹¦</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘ä¸€ç›´åœ¨ç ”ç©¶å…³äºå¦‚ä½•ç»™ä¸€ä¸ªfabricçš„ç»„ç»‡æ›´æ¢ä¸€ä¸ªæ–°çš„è¯ä¹¦, åŒ…æ‹¬æ‰€æœ‰åŠ å…¥çš„é€šé“, æ‰€æœ‰peerå’Œorderer.&lt;br&gt;
ç”¨äº†å¾ˆå¤šçœ‹ä¼¼å®Œç¾çš„æ–¹æ³•å´å¤šæ¬¡æµ‹è¯•å¤±è´¥, æœ€åæ€»ç®—æ‰¾åˆ°ä¸€ç§æ–¹æ³•.&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-json&quot; data-language=&quot;json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;channel_group&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;Application&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;Org1MSP&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                        &lt;span class=&quot;token property&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                        &lt;span class=&quot;token property&quot;&gt;&quot;mod_policy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Admins&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                        &lt;span class=&quot;token property&quot;&gt;&quot;values&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                            &lt;span class=&quot;token property&quot;&gt;&quot;MSP&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                        &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0&quot;&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                    &lt;span class=&quot;token property&quot;&gt;&quot;Org2MSP&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                        &lt;span class=&quot;token property&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                        &lt;span class=&quot;token property&quot;&gt;&quot;mod_policy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Admins&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                        &lt;span class=&quot;token property&quot;&gt;&quot;values&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                            &lt;span class=&quot;token property&quot;&gt;&quot;MSP&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                        &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0&quot;&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1&quot;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
            &lt;span class=&quot;token property&quot;&gt;&quot;Orderer&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;OrdererOrg&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                        &lt;span class=&quot;token property&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                        &lt;span class=&quot;token property&quot;&gt;&quot;values&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                            &lt;span class=&quot;token property&quot;&gt;&quot;MSP&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                        &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0&quot;&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                &lt;span class=&quot;token property&quot;&gt;&quot;values&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;ConsensusType&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                        &lt;span class=&quot;token property&quot;&gt;&quot;mod_policy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Admins&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                        &lt;span class=&quot;token property&quot;&gt;&quot;value&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                            &lt;span class=&quot;token property&quot;&gt;&quot;metadata&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                                &lt;span class=&quot;token property&quot;&gt;&quot;consenters&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                                    &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                                        &lt;span class=&quot;token property&quot;&gt;&quot;client_tls_cert&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;==&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                                        &lt;span class=&quot;token property&quot;&gt;&quot;host&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;orderer.example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                                        &lt;span class=&quot;token property&quot;&gt;&quot;port&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;7050&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                                        &lt;span class=&quot;token property&quot;&gt;&quot;server_tls_cert&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;==&quot;&lt;/span&gt;
                                    &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
                                &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                                &lt;span class=&quot;token property&quot;&gt;&quot;options&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
                                    &lt;span class=&quot;token property&quot;&gt;&quot;election_tick&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                                    &lt;span class=&quot;token property&quot;&gt;&quot;heartbeat_tick&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                                    &lt;span class=&quot;token property&quot;&gt;&quot;max_inflight_blocks&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                                    &lt;span class=&quot;token property&quot;&gt;&quot;snapshot_interval_size&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16777216&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                                    &lt;span class=&quot;token property&quot;&gt;&quot;tick_interval&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;500ms&quot;&lt;/span&gt;
                                &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                            &lt;span class=&quot;token property&quot;&gt;&quot;state&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;STATE_NORMAL&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                            &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;etcdraft&quot;&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                        &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0&quot;&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0&quot;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
        &lt;span class=&quot;token property&quot;&gt;&quot;sequence&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;2&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸€ä¸ªé€šé“é…ç½®å—ç±»ä¼¼ä¸Šé¢è¿™ç§,ä¸ºäº†çœ‹çš„æ¸…æ¥šæœ‰äº›å†…å®¹æˆ‘åˆ äº†, æ›´æ¢è¯ä¹¦æˆ‘ä»¬éœ€è¦ä¿è¯applicationåŠordererçš„MSPæ˜¯ç›¸åŒçš„, å¦åˆ™æ›´æ–°é…ç½®å—æ˜¯ä¸ä¼šæˆåŠŸçš„, ä¸”æˆ‘ä»¬å¾—ä¿è¯å½“å‰ç»„ç»‡çš„raftèŠ‚ç‚¹çš„è¯ä¹¦ä¹Ÿè¦å…¨éƒ¨æ›´æ¢æ‰.&lt;/p&gt;
&lt;h2 id=&quot;å¤±è´¥è¿‡ç¨‹&quot;&gt;å¤±è´¥è¿‡ç¨‹&lt;/h2&gt;</summary>
    
    
    
    <category term="Hyperledger fabric" scheme="https://asutorufa.github.io/categories/Hyperledger-fabric/"/>
    
    
    <category term="blockchain" scheme="https://asutorufa.github.io/tags/blockchain/"/>
    
    <category term="Hyperledger Fabric" scheme="https://asutorufa.github.io/tags/Hyperledger-Fabric/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨GVT-gæ˜¾å¡è™šæ‹ŸåŒ–</title>
    <link href="https://asutorufa.github.io/posts/3a1d136/"/>
    <id>https://asutorufa.github.io/posts/3a1d136/</id>
    <published>2021-01-17T20:53:29.000Z</published>
    <updated>2021-01-17T20:53:29.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸ºå†…æ ¸æ·»åŠ å‚æ•°">ä¸ºå†…æ ¸æ·»åŠ å‚æ•°</h2><p>æ¯”å¦‚<code>grub</code>åœ¨<code>/etc/default/grub</code>çš„<code>GRUB_CMDLINE_LINUX_DEFAULT=</code>ä¸­æ·»åŠ </p><pre class="language-ini" data-language="ini"><code class="language-ini"><span class="token key attr-name">intel_iommu</span><span class="token punctuation">=</span><span class="token value attr-value">on i915.enable_gvt=1 i915.enable_guc=0</span></code></pre><h2 id="å¯ç”¨modules">å¯ç”¨modules</h2><p>åœ¨<code>/etc/mkinitcpio.conf</code>çš„MODULES=()`ä¸­æ·»åŠ :</p><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token comment"># linux 5.14åï¼Œarchçš„linuxå†…æ ¸æ¨¡å—å·²ç»ä¸ä¼šå‹¾é€‰vfio-mdevï¼Œè‡ªæµ‹ä¸å½±å“gvt-g</span>kvmgt vfio vfio-iommu-type1s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶åè¿è¡Œ,æˆ‘ç”¨çš„zenå†…æ ¸æ‰€ä»¥æ˜¯linux-zen,é»˜è®¤å†…æ ¸æ˜¯linux</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> mkinitcpio <span class="token parameter variable">-p</span> linux-zen</code></pre><p>é‡å¯è®¡ç®—æœº</p><p>æŸ¥çœ‹<code>/sys/devices/pci0000:00/0000:00:02.0/mdev_supported_types</code>å¯ä»¥çœ‹è§ç±»ä¼¼å¦‚ä¸‹çš„ç›®å½•</p><span id="more"></span><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ls /sys/devices/pci$&#123;GVT_DOM&#125;/$GVT_PCI/mdev_supported_types</span>i915-GVTg_V5_1  <span class="token comment"># Video memory: &lt;512MB, 2048MB>, resolution: up to 1920x1200</span>i915-GVTg_V5_2  <span class="token comment"># Video memory: &lt;256MB, 1024MB>, resolution: up to 1920x1200</span>i915-GVTg_V5_4  <span class="token comment"># Video memory: &lt;128MB, 512MB>, resolution: up to 1920x1200</span>i915-GVTg_V5_8  <span class="token comment"># Video memory: &lt;64MB, 384MB>, resolution: up to 1024x768</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‘createæ–‡ä»¶ä¸­å†™å…¥uuid(è‡ªå·±ç”Ÿæˆ)å°±ä¼šåˆ›å»ºç›¸åº”çš„è™šæ‹Ÿæ˜¾å¡</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$GVT_GUID</span>"</span> <span class="token operator">></span> <span class="token string">"/sys/devices/pci<span class="token variable">$&#123;GVT_DOM&#125;</span>/<span class="token variable">$GVT_PCI</span>/mdev_supported_types/<span class="token variable">$GVT_TYPE</span>/create"</span></code></pre><p>ç§»é™¤</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">></span> /sys/bus/pci/devices/<span class="token variable">$GVT_PCI</span>/<span class="token variable">$GVT_GUID</span>/remove</code></pre><h2 id="qemuæ·»åŠ é’©å­-å¯åŠ¨è™šæ‹Ÿæœºæ—¶è‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿæ˜¾å¡">qemuæ·»åŠ é’©å­, å¯åŠ¨è™šæ‹Ÿæœºæ—¶è‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿæ˜¾å¡</h2><p><code>/etc/libvirt/hooks/qemu</code>ä¸­, æ²’æœ‰åˆ™è‡ªå·±åˆ›å»º</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token assign-left variable">GVT_PCI</span><span class="token operator">=</span><span class="token operator">&lt;</span>GVT_PCI<span class="token operator">></span> <span class="token comment"># è¿™é‡Œä¸ºæ˜¾å¡çš„åœ°å€, æ¯”å¦‚ 0000:00:02.0</span><span class="token assign-left variable">GVT_GUID</span><span class="token operator">=</span><span class="token operator">&lt;</span>GVT_GUID<span class="token operator">></span> <span class="token comment"># è¿™é‡Œä¸ºè‡ªå·±ç”Ÿæˆçš„uuid</span><span class="token assign-left variable">MDEV_TYPE</span><span class="token operator">=</span><span class="token operator">&lt;</span>GVT_TYPE<span class="token operator">></span> <span class="token comment"># è¿™é‡Œä¸ºè¦ä½¿ç”¨çš„è™šæ‹Ÿçš„ç±»å‹, æ¯”å¦‚ i915-GVTg_V5_8</span><span class="token assign-left variable">DOMAIN</span><span class="token operator">=</span><span class="token operator">&lt;</span>DOMAIN name<span class="token operator">></span> <span class="token comment"># qemuè™šæ‹Ÿæœºçš„åå­—</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ge</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$1</span> <span class="token operator">=</span> <span class="token string">"<span class="token variable">$DOMAIN</span>"</span> <span class="token parameter variable">-a</span> <span class="token variable">$2</span> <span class="token operator">=</span> <span class="token string">"prepare"</span> <span class="token parameter variable">-a</span> <span class="token variable">$3</span> <span class="token operator">=</span> <span class="token string">"begin"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$GVT_GUID</span>"</span> <span class="token operator">></span> <span class="token string">"/sys/bus/pci/devices/<span class="token variable">$GVT_PCI</span>/mdev_supported_types/<span class="token variable">$MDEV_TYPE</span>/create"</span>    <span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$1</span> <span class="token operator">=</span> <span class="token string">"<span class="token variable">$DOMAIN</span>"</span> <span class="token parameter variable">-a</span> <span class="token variable">$2</span> <span class="token operator">=</span> <span class="token string">"release"</span> <span class="token parameter variable">-a</span> <span class="token variable">$3</span> <span class="token operator">=</span> <span class="token string">"end"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>        <span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">></span> /sys/bus/pci/devices/<span class="token variable">$GVT_PCI</span>/<span class="token variable">$GVT_GUID</span>/remove    <span class="token keyword">fi</span><span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å¯åŠ¨è™šæ‹Ÿæœºæ—¶ä¼šè‡ªåŠ¨åˆ›å»º, åœæ­¢åä¼šè‡ªåŠ¨åˆ é™¤</p><h2 id="ç”Ÿæˆè™šæ‹Ÿæœºé…ç½®">ç”Ÿæˆè™šæ‹Ÿæœºé…ç½®</h2><p>å¯ä»¥ä½¿ç”¨<code>virt-manager</code>å…ˆç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿæœº, å†ä¿®æ”¹ç›¸åº”çš„é…ç½®, é»˜è®¤é…ç½®æ–‡ä»¶åœ¨<code>/etc/libvirt/qemu/</code><br>éœ€è¦æ·»åŠ /ä¿®æ”¹çš„é…ç½®:</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">qemu:</span>commandline</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">qemu:</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>-set<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">qemu:</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>device.hostdev0.x-igd-opregion=on<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">qemu:</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>-set<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">qemu:</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>device.hostdev0.ramfb=on<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">qemu:</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>-set<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">qemu:</span>arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>device.hostdev0.driver=vfio-pci-nohotplug<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">qemu:</span>env</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>MESA_LOADER_DRIVER_OVERRIDE<span class="token punctuation">'</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>i965<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span> <span class="token comment">&lt;!--intelå¯ç”¨OpenGLå¯èƒ½ä¼šèŠ±å±, ä¸ä¼šå°±ä¸è¦åŠ è¿™ä¸€æ¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">qemu:</span>commandline</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>hostdevé…ç½®å¯ä»¥åœ¨æ·»åŠ ç¡¬ä»¶(PCI HOST Devices)çš„ç•Œé¢ç›´æ¥ä¿®æ”¹xml, æ›´æ–¹ä¾¿ä¸€ç‚¹</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hostdev</span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>subsystem<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>mdev<span class="token punctuation">'</span></span> <span class="token attr-name">managed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>no<span class="token punctuation">'</span></span> <span class="token attr-name">model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>vfio-pci<span class="token punctuation">'</span></span> <span class="token attr-name">display</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>on<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span> <span class="token attr-name">uuid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>93397e71-15bf-4889-98b7-aa2d735e6260<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>pci<span class="token punctuation">'</span></span> <span class="token attr-name">domain</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>0x0000<span class="token punctuation">'</span></span> <span class="token attr-name">bus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>0x00<span class="token punctuation">'</span></span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>0x09<span class="token punctuation">'</span></span> <span class="token attr-name">function</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>0x0<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hostdev</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>model</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>none<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>graphics</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>spice<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listen</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>none<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">compression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>off<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jpeg</span> <span class="token attr-name">compression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>never<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>zlib</span> <span class="token attr-name">compression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>never<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>playback</span> <span class="token attr-name">compression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>off<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>streaming</span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>off<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>gl</span> <span class="token attr-name">enable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>yes<span class="token punctuation">'</span></span> <span class="token attr-name">rendernode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/dev/dri/by-path/pci-0000:00:02.0-render<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>graphics</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vcpu</span> <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>static<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vcpu</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cputune</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vcpupin</span> <span class="token attr-name">vcpu</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>0<span class="token punctuation">'</span></span> <span class="token attr-name">cpuset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>1<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vcpupin</span> <span class="token attr-name">vcpu</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>1<span class="token punctuation">'</span></span> <span class="token attr-name">cpuset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>2<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cputune</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç»“å°¾">ç»“å°¾</h2><p>å¯åŠ¨è™šæ‹Ÿæœºå, è¿›å…¥è™šæ‹Ÿæœºå®‰è£…ç›¸åº”çš„æ˜¾å¡é©±åŠ¨å°±è¡Œäº†.<br>è¿™æ ·å°±å¿«å¾ˆå¤šäº†, æ¯”è½¯ä»¶æ¸²æŸ“å¿«å¤šäº†, è¿™æ ·ç”¨linuxä¹Ÿèƒ½æ„‰å¿«çš„ä½¿ç”¨å…¶ä»–ç³»ç»Ÿäº†.</p><hr><p><a href="https://wiki.archlinux.org/index.php/Intel_GVT-g">Intel_GVT-g</a><br><a href="https://medium.com/@langleyhouge/%E8%AE%A9-kvm-%E4%B8%8A%E7%9A%84-windows-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%8F%92%E4%B8%8Agvt-g-%E7%9A%84%E7%BF%85%E8%86%80-ac0ac28b73b8">è®© KVM ä¸Šçš„ Windows è™šæ‹Ÿæœºæ’ä¸ŠGVT-g çš„ç¿…è†€</a><br><a href="https://www.libvirt.org/hooks.html">libvirt hooks</a><br><a href="https://blog.bepbep.co/posts/gvt/">Intel Gvt</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ä¸ºå†…æ ¸æ·»åŠ å‚æ•°&quot;&gt;ä¸ºå†…æ ¸æ·»åŠ å‚æ•°&lt;/h2&gt;
&lt;p&gt;æ¯”å¦‚&lt;code&gt;grub&lt;/code&gt;åœ¨&lt;code&gt;/etc/default/grub&lt;/code&gt;çš„&lt;code&gt;GRUB_CMDLINE_LINUX_DEFAULT=&lt;/code&gt;ä¸­æ·»åŠ &lt;/p&gt;
&lt;pre class=&quot;language-ini&quot; data-language=&quot;ini&quot;&gt;&lt;code class=&quot;language-ini&quot;&gt;&lt;span class=&quot;token key attr-name&quot;&gt;intel_iommu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;on i915.enable_gvt=1 i915.enable_guc=0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;å¯ç”¨modules&quot;&gt;å¯ç”¨modules&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;code&gt;/etc/mkinitcpio.conf&lt;/code&gt;çš„MODULES=()`ä¸­æ·»åŠ :&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-ini&quot; data-language=&quot;ini&quot;&gt;&lt;code class=&quot;language-ini&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# linux 5.14åï¼Œarchçš„linuxå†…æ ¸æ¨¡å—å·²ç»ä¸ä¼šå‹¾é€‰vfio-mdevï¼Œè‡ªæµ‹ä¸å½±å“gvt-g&lt;/span&gt;
kvmgt vfio vfio-iommu-type1s&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç„¶åè¿è¡Œ,æˆ‘ç”¨çš„zenå†…æ ¸æ‰€ä»¥æ˜¯linux-zen,é»˜è®¤å†…æ ¸æ˜¯linux&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; mkinitcpio &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; linux-zen&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é‡å¯è®¡ç®—æœº&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹&lt;code&gt;/sys/devices/pci0000:00/0000:00:02.0/mdev_supported_types&lt;/code&gt;å¯ä»¥çœ‹è§ç±»ä¼¼å¦‚ä¸‹çš„ç›®å½•&lt;/p&gt;</summary>
    
    
    
    <category term="Linux" scheme="https://asutorufa.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://asutorufa.github.io/tags/Linux/"/>
    
    <category term="qemu" scheme="https://asutorufa.github.io/tags/qemu/"/>
    
    <category term="GVT-g" scheme="https://asutorufa.github.io/tags/GVT-g/"/>
    
    <category term="intel" scheme="https://asutorufa.github.io/tags/intel/"/>
    
  </entry>
  
  <entry>
    <title>gpgä½¿ç”¨</title>
    <link href="https://asutorufa.github.io/posts/7d547224/"/>
    <id>https://asutorufa.github.io/posts/7d547224/</id>
    <published>2020-10-02T14:00:01.000Z</published>
    <updated>2020-10-02T14:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç”Ÿæˆä¸€ä¸ªå¯†é’¥</p><pre class="language-bash" data-language="bash"><code class="language-bash">gpg --full-gen-key</code></pre><p>ä¹‹åä¼šé€‰æ‹©åŠ å¯†æ–¹å¼, æœ‰æ•ˆæœŸ, ç”¨æˆ·ååŠé‚®ç®±, å¯†ç , æŒ‰è‡ªå·±éœ€æ±‚å¡«å°±è¡Œäº†.</p><p>åˆ›å»ºä¸€ä¸ªå­å¯†é’¥</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gpg --edit-key <span class="token punctuation">[</span>key hash<span class="token punctuation">]</span>gpg<span class="token operator">></span> addkey<span class="token comment">#åªæœ‰ä¸å‰é¢æ˜¯ç›¸åŒçš„, æŒ‰éœ€æ±‚é€‰æ‹©.</span>gpg<span class="token operator">></span> save<span class="token comment"># ä¿å­˜</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¼å‡ºå¯†é’¥</p><pre class="language-bash" data-language="bash"><code class="language-bash">gpg <span class="token parameter variable">-o</span> /path/gpg_key --export-secret-keys <span class="token punctuation">[</span>key hash<span class="token punctuation">]</span></code></pre><p>å¯¼å‡ºå­å¯†é’¥</p><pre class="language-bash" data-language="bash"><code class="language-bash">gpg <span class="token parameter variable">-o</span> /path/gpg_key.sub --export-secret-subkeys <span class="token punctuation">[</span>key hash<span class="token punctuation">]</span></code></pre><p>å¯¼å‡ºåŠé”€è¯ä¹¦</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gpg --generate-revocation <span class="token punctuation">[</span>key hash<span class="token punctuation">]</span><span class="token comment"># è¾“å‡ºæ˜¯æ–‡æœ¬å†…å®¹, å¤åˆ¶ä¿å­˜ä¸‹æ¥å°±è¡Œäº†</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><span id="more"></span><p>åˆ é™¤å¯†é’¥</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gpg --delete-secret-keys <span class="token punctuation">[</span>key hash<span class="token punctuation">]</span>gpg --delete-keys <span class="token punctuation">[</span>key hash<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¯¼å…¥å­å¯†é’¥</p><pre class="language-bash" data-language="bash"><code class="language-bash">gpg <span class="token parameter variable">--import</span> /path/gpg_key.sub</code></pre><p>æŸ¥çœ‹å¯†é’¥</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gpg <span class="token parameter variable">-k</span>gpg <span class="token parameter variable">-K</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åŠ å¯†æ–‡ä»¶</p><pre class="language-bash" data-language="bash"><code class="language-bash">gpg <span class="token parameter variable">-r</span> <span class="token punctuation">[</span>user name<span class="token punctuation">]</span> <span class="token parameter variable">-o</span> <span class="token punctuation">[</span>output file<span class="token punctuation">]</span> <span class="token parameter variable">-e</span> <span class="token punctuation">[</span>filename<span class="token punctuation">]</span></code></pre><p>è§£å¯†</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gpg <span class="token parameter variable">-o</span> <span class="token punctuation">[</span>output file<span class="token punctuation">]</span> <span class="token parameter variable">-d</span> <span class="token punctuation">[</span>filename<span class="token punctuation">]</span> <span class="token comment"># è¾“å‡ºåˆ°æ–‡ä»¶</span>gpg <span class="token parameter variable">-d</span> <span class="token punctuation">[</span>filename<span class="token punctuation">]</span> <span class="token comment"># ç›´æ¥è¾“å‡ºåˆ°ç»ˆç«¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><p><a href="https://gist.github.com/jhjguxin/6037564">GPG åŠ å¯†è§£å¯†ç®€æ˜æ•™ç¨‹</a><br><a href="https://mogeko.me/2019/068/">GPG çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç”Ÿæˆä¸€ä¸ªå¯†é’¥&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;gpg --full-gen-key&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¹‹åä¼šé€‰æ‹©åŠ å¯†æ–¹å¼, æœ‰æ•ˆæœŸ, ç”¨æˆ·ååŠé‚®ç®±, å¯†ç , æŒ‰è‡ªå·±éœ€æ±‚å¡«å°±è¡Œäº†.&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªå­å¯†é’¥&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;gpg --edit-key &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key hash&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

gpg&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; addkey
&lt;span class=&quot;token comment&quot;&gt;#åªæœ‰ä¸å‰é¢æ˜¯ç›¸åŒçš„, æŒ‰éœ€æ±‚é€‰æ‹©.&lt;/span&gt;

gpg&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; save
&lt;span class=&quot;token comment&quot;&gt;# ä¿å­˜&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯¼å‡ºå¯†é’¥&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;gpg &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; /path/gpg_key --export-secret-keys &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key hash&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯¼å‡ºå­å¯†é’¥&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;gpg &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; /path/gpg_key.sub --export-secret-subkeys &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key hash&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯¼å‡ºåŠé”€è¯ä¹¦&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;gpg --generate-revocation &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key hash&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# è¾“å‡ºæ˜¯æ–‡æœ¬å†…å®¹, å¤åˆ¶ä¿å­˜ä¸‹æ¥å°±è¡Œäº†&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://asutorufa.github.io/tags/linux/"/>
    
    <category term="encrypt" scheme="https://asutorufa.github.io/tags/encrypt/"/>
    
  </entry>
  
  <entry>
    <title>GeoIP mmdb format</title>
    <link href="https://asutorufa.github.io/posts/931c13a4/"/>
    <id>https://asutorufa.github.io/posts/931c13a4/</id>
    <published>2020-07-27T22:15:17.000Z</published>
    <updated>2020-07-27T22:15:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>complete document <a href="https://maxmind.github.io/MaxMind-DB/">MaxMind DB File Format SpecificationDescription</a></p><p>here is only how convert trie tree to array</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">0100, 1011 -> trie<span class="token code keyword">              root               |         +-----+------+        /              \       0                1     /   \             /  \</span>   null   1           0   null         / \        /   \        0 null     null   1       / \               / \       0 null         null  1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>trie -&gt; array<br>left is 0, right is 1<br>value is index of array<span id="more"></span></p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"> left | right  byte/index2     |   4    0-1null  |   6    2-38     |  null  4-510    |  null  6-7null  |  12    8-914    |  null  10-11null  |  16    11-12end   |  null  12-13null  |  end   13-14array: [2,4,null,6,8,null,10,null,null,12,14,null,null,16,end,null,null,end]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>for example:</p><p>index 1:<br>next left index 2 is null, so 00* is not exist<br>next right index 2+1 = 3 is not null, continue search until end or null</p><p>this is one byte as one child, but one byte max is 255, if node more than 255, we can use multiple byte as one child</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;complete document &lt;a href=&quot;https://maxmind.github.io/MaxMind-DB/&quot;&gt;MaxMind DB File Format SpecificationDescription&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;here is only how convert trie tree to array&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;0100, 1011 -&gt; trie

&lt;span class=&quot;token code keyword&quot;&gt;              root
               |
         +-----+------+
        /              &#92;
       0                1
     /   &#92;             /  &#92;&lt;/span&gt;
   null   1           0   null
         / &#92;        /   &#92;
        0 null     null   1
       / &#92;               / &#92;
       0 null         null  1&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;trie -&amp;gt; array&lt;br&gt;
left is 0, right is 1&lt;br&gt;
value is index of array</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="Network" scheme="https://asutorufa.github.io/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>DNS over HTTPS</title>
    <link href="https://asutorufa.github.io/posts/4b39445f/"/>
    <id>https://asutorufa.github.io/posts/4b39445f/</id>
    <published>2020-06-23T00:30:08.000Z</published>
    <updated>2020-06-23T00:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªDNSç³»åˆ—ç°åœ¨æœ‰ä»¥ä¸‹å‡ ç¯‡æ–‡ç« <br><a href="/posts/f05986bf/">DNS</a>  <a href="/posts/668530ca/">EDNS</a> <a href="/posts/1751943e/">DNSSEC</a> <a href="/posts/4b39445f/">DNS over HTTPS</a> å®Œæ•´ä»£ç è¯·çœ‹<a href="https://github.com/Asutorufa/yuhaiin/tree/master/net/dns">DNS</a></p><hr><p>DOHå°±æ¯”è¾ƒç®€å•äº†,å› ä¸ºDOHä½¿ç”¨çš„è¯·æ±‚æ•°æ®å’Œåº”ç­”æ•°æ®å‡ä¸ºä¹‹å‰çš„DNSåè®®æ ¼å¼,åŒ…æ‹¬DNS,EDNS,DNSSECâ€¦å½“ç„¶æ˜¯å¦æ”¯æŒEDNS,DNSSECéœ€è¦çœ‹DNSæœåŠ¡å™¨çš„æ”¯æŒæƒ…å†µ<br>DOHçš„æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯æŠŠDNSä½¿ç”¨çš„UDP,æ¢æˆäº†HTTPS,è¿™æ ·å°±èƒ½é˜²æ­¢DNSæ±¡æŸ“äº†,è€Œä¸”å¯ä»¥ä½¿ç”¨DNSSECåŠ ä¸ŠESNIæ¥é˜²æ­¢è¯ä¹¦åŠ«æŒ,DOHçš„åè®®åœ¨<a href="https://tools.ietf.org/html/rfc8484">rfc8484</a>ä¸­æœ‰å®šä¹‰<br>DOHä¸»è¦æœ‰ä¸¤ç§æ–¹å¼HTTPçš„GETè¯·æ±‚å’ŒPOSTçš„è¯·æ±‚</p><h2 id="GET">GET</h2><p>GETè¯·æ±‚éœ€è¦ä½¿ç”¨BASE64å¯¹è¯·æ±‚çš„å­—èŠ‚æ•°æ®è¿›è¡Œåºåˆ—åŒ–,ç„¶åä½œä¸ºå‚æ•°ä¼ é€’,è·å–åˆ°çš„æ•°æ®ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰çš„è§£æè¿›è¡Œè§£æå°±è¡Œäº†</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">get</span><span class="token punctuation">(</span>dReq <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> server <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>body <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> query <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span>base64<span class="token punctuation">.</span>URLEncoding<span class="token punctuation">.</span><span class="token function">EncodeToString</span><span class="token punctuation">(</span>dReq<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"="</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> urls <span class="token operator">:=</span> <span class="token string">"https://"</span> <span class="token operator">+</span> server <span class="token operator">+</span> <span class="token string">"/dns-query?dns="</span> <span class="token operator">+</span> query res<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>urls<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err <span class="token punctuation">&#125;</span> <span class="token keyword">defer</span> res<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> body<span class="token punctuation">,</span> err <span class="token operator">=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>Body<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err <span class="token punctuation">&#125;</span> <span class="token keyword">return</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="POST">POST</h2><p>POSTå¹¶ä¸éœ€è¦è¿›è¡Œåºåˆ—åŒ–,ç›´æ¥æŠŠåŸå§‹è¯·æ±‚æ•°æ®ä½œä¸ºbodyå°±è¡Œäº†</p><span id="more"></span><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">post</span><span class="token punctuation">(</span>dReq <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> server <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>body <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> client <span class="token operator">:=</span> <span class="token operator">&amp;</span>http<span class="token punctuation">.</span>Client<span class="token punctuation">&#123;</span>Timeout<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">&#125;</span> req<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">NewRequest</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>MethodPost<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>dReq<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"DOH:post() newReq -> %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span> urls<span class="token punctuation">,</span> err <span class="token operator">:=</span> url<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">"//"</span> <span class="token operator">+</span> server<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"DOH:post() urlParse -> %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span> req<span class="token punctuation">.</span>URL<span class="token punctuation">.</span>Scheme <span class="token operator">=</span> <span class="token string">"https"</span> req<span class="token punctuation">.</span>URL<span class="token punctuation">.</span>Host <span class="token operator">=</span> urls<span class="token punctuation">.</span>Host req<span class="token punctuation">.</span>URL<span class="token punctuation">.</span>Path <span class="token operator">=</span> urls<span class="token punctuation">.</span>Path <span class="token operator">+</span> <span class="token string">"/dns-query"</span> req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"accept"</span><span class="token punctuation">,</span> <span class="token string">"application/dns-message"</span><span class="token punctuation">)</span> req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"content-type"</span><span class="token punctuation">,</span> <span class="token string">"application/dns-message"</span><span class="token punctuation">)</span> req<span class="token punctuation">.</span>ContentLength <span class="token operator">=</span> <span class="token function">int64</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>dReq<span class="token punctuation">)</span><span class="token punctuation">)</span> resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"DOH:post() req -> %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span> <span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> body<span class="token punctuation">,</span> err <span class="token operator">=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"DOH:post() readBody -> %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®Œæ•´ä»£ç è¯·çœ‹å¼€å¤´</p><hr><blockquote><p><a href="https://tools.ietf.org/html/rfc8484">rfc8484</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™ä¸ªDNSç³»åˆ—ç°åœ¨æœ‰ä»¥ä¸‹å‡ ç¯‡æ–‡ç« &lt;br&gt;
&lt;a href=&quot;/posts/f05986bf/&quot;&gt;DNS&lt;/a&gt;  &lt;a href=&quot;/posts/668530ca/&quot;&gt;EDNS&lt;/a&gt; &lt;a href=&quot;/posts/1751943e/&quot;&gt;DNSSEC&lt;/a&gt; &lt;a href=&quot;/posts/4b39445f/&quot;&gt;DNS over HTTPS&lt;/a&gt; å®Œæ•´ä»£ç è¯·çœ‹&lt;a href=&quot;https://github.com/Asutorufa/yuhaiin/tree/master/net/dns&quot;&gt;DNS&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;DOHå°±æ¯”è¾ƒç®€å•äº†,å› ä¸ºDOHä½¿ç”¨çš„è¯·æ±‚æ•°æ®å’Œåº”ç­”æ•°æ®å‡ä¸ºä¹‹å‰çš„DNSåè®®æ ¼å¼,åŒ…æ‹¬DNS,EDNS,DNSSECâ€¦å½“ç„¶æ˜¯å¦æ”¯æŒEDNS,DNSSECéœ€è¦çœ‹DNSæœåŠ¡å™¨çš„æ”¯æŒæƒ…å†µ&lt;br&gt;
DOHçš„æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯æŠŠDNSä½¿ç”¨çš„UDP,æ¢æˆäº†HTTPS,è¿™æ ·å°±èƒ½é˜²æ­¢DNSæ±¡æŸ“äº†,è€Œä¸”å¯ä»¥ä½¿ç”¨DNSSECåŠ ä¸ŠESNIæ¥é˜²æ­¢è¯ä¹¦åŠ«æŒ,DOHçš„åè®®åœ¨&lt;a href=&quot;https://tools.ietf.org/html/rfc8484&quot;&gt;rfc8484&lt;/a&gt;ä¸­æœ‰å®šä¹‰&lt;br&gt;
DOHä¸»è¦æœ‰ä¸¤ç§æ–¹å¼HTTPçš„GETè¯·æ±‚å’ŒPOSTçš„è¯·æ±‚&lt;/p&gt;
&lt;h2 id=&quot;GET&quot;&gt;GET&lt;/h2&gt;
&lt;p&gt;GETè¯·æ±‚éœ€è¦ä½¿ç”¨BASE64å¯¹è¯·æ±‚çš„å­—èŠ‚æ•°æ®è¿›è¡Œåºåˆ—åŒ–,ç„¶åä½œä¸ºå‚æ•°ä¼ é€’,è·å–åˆ°çš„æ•°æ®ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰çš„è§£æè¿›è¡Œè§£æå°±è¡Œäº†&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-go&quot; data-language=&quot;go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dReq &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; server &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;body &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
 query &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; strings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;base64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;URLEncoding&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;EncodeToString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dReq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;=&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
 urls &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; server &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/dns-query?dns=&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query
 res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;urls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
 &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
 &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
 &lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Body&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
 body&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ioutil&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ReadAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Body&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
 &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
 &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
 &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;POST&quot;&gt;POST&lt;/h2&gt;
&lt;p&gt;POSTå¹¶ä¸éœ€è¦è¿›è¡Œåºåˆ—åŒ–,ç›´æ¥æŠŠåŸå§‹è¯·æ±‚æ•°æ®ä½œä¸ºbodyå°±è¡Œäº†&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="golang" scheme="https://asutorufa.github.io/tags/golang/"/>
    
    <category term="DNS" scheme="https://asutorufa.github.io/tags/DNS/"/>
    
    <category term="DOH" scheme="https://asutorufa.github.io/tags/DOH/"/>
    
  </entry>
  
  <entry>
    <title>DNSSEC</title>
    <link href="https://asutorufa.github.io/posts/1751943e/"/>
    <id>https://asutorufa.github.io/posts/1751943e/</id>
    <published>2020-06-23T00:21:33.000Z</published>
    <updated>2020-06-23T00:21:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªDNSç³»åˆ—ç°åœ¨æœ‰ä»¥ä¸‹å‡ ç¯‡æ–‡ç« <br><a href="/posts/f05986bf/">DNS</a>  <a href="/posts/668530ca/">EDNS</a> <a href="/posts/1751943e/">DNSSEC</a> <a href="/posts/4b39445f/">DNS over HTTPS</a> å®Œæ•´ä»£ç è¯·çœ‹<a href="https://github.com/Asutorufa/yuhaiin/tree/master/net/dns">DNS</a></p><hr><p>æ³¨æ„: è¿™é‡Œæˆ‘åªå®Œæˆäº†è¯·æ±‚å­—æ®µ,ä¸»è¦åŸå› æ˜¯å› ä¸ºæˆ‘å­¦ä¹ è¿™äº›DNSåè®®æ˜¯ä¸ºäº†æ‰¾åˆ°é˜²æ­¢DNSæ±¡æŸ“çš„æ–¹æ³•,è€ŒDNSSECå¹¶ä¸èƒ½,è€Œä¸”åº”ç­”å¤´æ¯”è¾ƒå¤æ‚,å¯èƒ½è¿˜è¦äº†è§£sslå’Œtlsçš„çŸ¥è¯†,æ‰€ä»¥è¿™é‡Œæˆ‘æ²¡æœ‰å®Œæˆä»£ç ,æƒ³äº†è§£çš„è¯·çœ‹<a href="https://tools.ietf.org/html/rfc3225">protocol change</a> <a href="https://tools.ietf.org/html/rfc4034">rfc4034</a> <a href="https://tools.ietf.org/html/rfc4035">rfc4035</a> <a href="https://tools.ietf.org/html/rfc4034#appendix-A.1">Algorithm</a></p><p>DNSSECä¹Ÿæ˜¯ä½¿ç”¨äº†EDNS,è€Œä¸”åªéœ€è¦æ”¹ä¸€ä¸ªå­—æ®µ,å°±æ˜¯ä¹‹å‰æåˆ°Z,å…·ä½“åè®®è¯·çœ‹</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">          +0 (MSB)                +1 (LSB)   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+0: |   EXTENDED-RCODE      |       VERSION         |   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+2: |DO|                    Z                       |   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®Œæˆè¯·æ±‚å¤´</p><span id="more"></span><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> eDNSHeader <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span> DnsHeader   <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span> Name        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token builtin">byte</span> Type        <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">byte</span> PayloadSize <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">byte</span> ExtendRCode <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token builtin">byte</span> EDNSVersion <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token builtin">byte</span> Z           <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">byte</span> Data        <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">createDNSSEC</span><span class="token punctuation">(</span>domain <span class="token builtin">string</span><span class="token punctuation">,</span> reqType2 reqType<span class="token punctuation">)</span> <span class="token punctuation">(</span>header eDNSHeader<span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//eDNSHeader := createEDNSReq(domain,reqType2,[]byte&#123;&#125;)</span> header <span class="token operator">=</span> eDNSHeader<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> header<span class="token punctuation">.</span>DnsHeader <span class="token operator">=</span> <span class="token function">creatRequest</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> reqType2<span class="token punctuation">)</span> header<span class="token punctuation">.</span>Name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0b0</span> header<span class="token punctuation">.</span>Type <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00101001</span><span class="token punctuation">&#125;</span> header<span class="token punctuation">.</span>PayloadSize <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00010000</span><span class="token punctuation">,</span> <span class="token number">0b00000000</span><span class="token punctuation">&#125;</span> <span class="token comment">//4096</span> header<span class="token punctuation">.</span>ExtendRCode <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">&#125;</span> header<span class="token punctuation">.</span>EDNSVersion <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">&#125;</span> header<span class="token punctuation">.</span>Z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b10000000</span><span class="token punctuation">,</span> <span class="token number">0b00000000</span><span class="token punctuation">&#125;</span> <span class="token comment">// Do bit = 1</span> <span class="token keyword">return</span> header<span class="token punctuation">,</span> <span class="token function">createEDNSRequ</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¯ä¸æ˜¯å¾ˆç®€å•,å†ç»“åˆä¹‹å‰çš„EDNSå°±èƒ½å®Œæˆå®Œæ•´çš„è¯·æ±‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™ä¸ªDNSç³»åˆ—ç°åœ¨æœ‰ä»¥ä¸‹å‡ ç¯‡æ–‡ç« &lt;br&gt;
&lt;a href=&quot;/posts/f05986bf/&quot;&gt;DNS&lt;/a&gt;  &lt;a href=&quot;/posts/668530ca/&quot;&gt;EDNS&lt;/a&gt; &lt;a href=&quot;/posts/1751943e/&quot;&gt;DNSSEC&lt;/a&gt; &lt;a href=&quot;/posts/4b39445f/&quot;&gt;DNS over HTTPS&lt;/a&gt; å®Œæ•´ä»£ç è¯·çœ‹&lt;a href=&quot;https://github.com/Asutorufa/yuhaiin/tree/master/net/dns&quot;&gt;DNS&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ³¨æ„: è¿™é‡Œæˆ‘åªå®Œæˆäº†è¯·æ±‚å­—æ®µ,ä¸»è¦åŸå› æ˜¯å› ä¸ºæˆ‘å­¦ä¹ è¿™äº›DNSåè®®æ˜¯ä¸ºäº†æ‰¾åˆ°é˜²æ­¢DNSæ±¡æŸ“çš„æ–¹æ³•,è€ŒDNSSECå¹¶ä¸èƒ½,è€Œä¸”åº”ç­”å¤´æ¯”è¾ƒå¤æ‚,å¯èƒ½è¿˜è¦äº†è§£sslå’Œtlsçš„çŸ¥è¯†,æ‰€ä»¥è¿™é‡Œæˆ‘æ²¡æœ‰å®Œæˆä»£ç ,æƒ³äº†è§£çš„è¯·çœ‹&lt;a href=&quot;https://tools.ietf.org/html/rfc3225&quot;&gt;protocol change&lt;/a&gt; &lt;a href=&quot;https://tools.ietf.org/html/rfc4034&quot;&gt;rfc4034&lt;/a&gt; &lt;a href=&quot;https://tools.ietf.org/html/rfc4035&quot;&gt;rfc4035&lt;/a&gt; &lt;a href=&quot;https://tools.ietf.org/html/rfc4034#appendix-A.1&quot;&gt;Algorithm&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;DNSSECä¹Ÿæ˜¯ä½¿ç”¨äº†EDNS,è€Œä¸”åªéœ€è¦æ”¹ä¸€ä¸ªå­—æ®µ,å°±æ˜¯ä¹‹å‰æåˆ°Z,å…·ä½“åè®®è¯·çœ‹&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;          +0 (MSB)                +1 (LSB)
   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
0: |   EXTENDED-RCODE      |       VERSION         |
   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
2: |DO|                    Z                       |
   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å®Œæˆè¯·æ±‚å¤´&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="golang" scheme="https://asutorufa.github.io/tags/golang/"/>
    
    <category term="DNS" scheme="https://asutorufa.github.io/tags/DNS/"/>
    
    <category term="UDP" scheme="https://asutorufa.github.io/tags/UDP/"/>
    
    <category term="DNSSEC" scheme="https://asutorufa.github.io/tags/DNSSEC/"/>
    
  </entry>
  
  <entry>
    <title>EDNS</title>
    <link href="https://asutorufa.github.io/posts/668530ca/"/>
    <id>https://asutorufa.github.io/posts/668530ca/</id>
    <published>2020-06-22T23:09:49.000Z</published>
    <updated>2020-06-22T23:09:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªDNSç³»åˆ—ç°åœ¨æœ‰ä»¥ä¸‹å‡ ç¯‡æ–‡ç« <br><a href="/posts/f05986bf/">DNS</a>  <a href="/posts/668530ca/">EDNS</a> <a href="/posts/1751943e/">DNSSEC</a> <a href="/posts/4b39445f/">DNS over HTTPS</a> å®Œæ•´ä»£ç è¯·çœ‹<a href="https://github.com/Asutorufa/yuhaiin/tree/master/net/dns">DNS</a></p><h2 id="EDNS">EDNS</h2><p>ä¸Šä¸€ç¯‡æˆ‘ä»¬å†™äº†DNS,EDNSå°±æ˜¯DNSçš„åŠŸèƒ½æ‰©å…….<br>ä¸Šä¸€ç¯‡çš„DNSé‡Œå¤´éƒ¨æœ‰ARCOUNTçš„è®¡æ•°,EDNSå°±åŒ…å«åœ¨é‚£ä¸ªé‡Œé¢,EDNSå‘é€çš„è¯·æ±‚åœ¨è¯·æ±‚å¤´ä¹‹åçš„Additionalä¸­,åº”ç­”åœ¨Answerå’ŒAuthoritativeä¹‹å,æˆ‘ä»¬å¯çœ‹ä»¥ä¸‹å›¾,è·Ÿæ¸…æ™°äº†å§</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">+---------------------+|        Header       |+---------------------+|       Question      | the question for the name server+---------------------+|        Answer       | RRs answering the question+---------------------+|      Authority      | RRs pointing toward an authority+---------------------+|      Additional     | RRs holding additional information+---------------------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åè®®æ ¼å¼">åè®®æ ¼å¼</h2><p>å…·ä½“åè®®å†…å®¹è¯·çœ‹<a href="https://tools.ietf.org/html/rfc2671">rfc2671</a>,<a href="https://tools.ietf.org/html/rfc7871">rfc7871</a></p><span id="more"></span><p>AdditinoalåŒ…å«ä»¥ä¸‹éƒ¨åˆ†</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">     Field Name   Field Type     Description     <span class="token hr punctuation">------------------------------------------------------</span>     NAME         domain name    empty (root domain)     TYPE         u_int16_t      OPT     CLASS        u_int16_t      sender's UDP payload size     TTL          u_int32_t      extended RCODE and flags     RDLEN        u_int16_t      describes RDATA     RDATA        octet stream   &#123;attribute,value&#125; pairsTTLä¸­çš„ä¸œè¥¿å¹¶ä¸æ˜¯æˆ‘ä»¬ä¹‹å‰è¯´åˆ°çš„TTL,è¿™é‡Œçš„TTLåªæ˜¯ä¸€ä¸ªåç§°,æ²¡æœ‰å…·ä½“çš„å«ä¹‰,TTLä¸­åŒ…å«ä»¥ä¸‹å†…å®¹<span class="token code keyword">                      +0 (MSB)                            +1 (LSB)      +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+</span>   0: |         EXTENDED-RCODE        |            VERSION            |      +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+   2: |                               Z                               |      +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+   EXTENDED-RCODE  Forms upper 8 bits of extended 12-bit RCODE.  Note                   that EXTENDED-RCODE value "0" indicates that an                   unextended RCODE is in use (values "0" through "15").   VERSION         EDNS VERSION   Z               Set to zero by senders and ignored by receivers,                   unless modified in a subsequent specification.è¿™é‡ŒZæˆ‘ä»¬ä¹‹åä¼šç”¨åˆ°(ä¸æ˜¯è¿™ä¸€ç¯‡æ–‡ç« )RDATAä¸­å°±æ˜¯å¯¹å„ç§æ‰©å……åŠŸèƒ½çš„è¯·æ±‚å­—æ®µ,è€Œæ¯ä¸ªä¸åŒçš„åŠŸèƒ½åˆæœ‰ç€ä¸åŒçš„è¯·æ±‚åè®®RDATAçš„æ ¼å¼å¦‚ä¸‹<span class="token code keyword">                +0 (MSB)                            +1 (LSB)     +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+</span>  0: |                          OPTION-CODE                          |     +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+  2: |                         OPTION-LENGTH                         |     +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+  4: |                                                               |     /                          OPTION-DATA                          /     /                                                               /     +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+   OPTION-CODE    (Assigned by IANA.)   OPTION-LENGTH  Size (in octets) of OPTION-DATA.   OPTION-DATA    Varies per OPTION-CODE.å¦‚SubNetä¸­çš„è¯·æ±‚å­—æ®µå°±åŒ…å«åœ¨å…¶ä¸­RDATAä¸­,æ‰€ä»¥æˆ‘ä»¬è¦å…ˆå®ŒæˆSubNetçš„å­—èŠ‚æ•°ç»„æ‰èƒ½ç”Ÿæˆä¸€ä¸ªAdditional,å› ä¸ºè¯·æ±‚ä¸­éœ€è¦æ•°æ®çš„é•¿åº¦RDLEN<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºEDNSä¸­æ‰©å±•çš„åè®®éå¸¸å¤š,è¿™é‡Œæˆ‘ä»¬å°±ä»¥å¸¸ç”¨çš„SubNetä¸ºä¾‹å§,æ›´å¤šå…¶ä»–ç±»å‹è¯·çœ‹<a href="https://www.iana.org/assignments/dns-parameters/dns-parameters.xhtml#dns-parameters-11">dns-parameters</a><br>å› ä¸ºæˆ‘ä»¬ä»¥SubNetä¸ºä¾‹,æ‰€ä»¥å…ˆè¦äº†è§£ä¸‹SubNetçš„å…·ä½“åè®®æ ¼å¼</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">             +0 (MSB)                            +1 (LSB)   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+0: |                          OPTION-CODE                          |   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+2: |                         OPTION-LENGTH                         |   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+4: |                            FAMILY                             |   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+6: |     SOURCE PREFIX-LENGTH      |     SCOPE PREFIX-LENGTH       |   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+8: |                           ADDRESS...                          /   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+o  SOURCE PREFIX-LENGTH, an unsigned octet representing the leftmost   number of significant bits of ADDRESS to be used for the lookup.   In responses, it mirrors the same value as in the queries.o  SCOPE PREFIX-LENGTH, an unsigned octet representing the leftmost   number of significant bits of ADDRESS that the response covers.   In queries, it MUST be set to 0.o  ADDRESS, variable number of octets, contains either an IPv4 or   IPv6 address, depending on FAMILY, which MUST be truncated to the   number of bits indicated by the SOURCE PREFIX-LENGTH field,   padding with 0 bits to pad to the end of the last octet needed.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå‰é¢ä¸‰ä¸ªå­—æ®µå°±æ˜¯æˆ‘ä»¬ä¹‹å‰RDATAä¸­è§„å®šçš„åè®®æ ¼å¼,åé¢å°±æ˜¯SubNetçš„æ ¼å¼<br>SubNetçš„OPTION-CODEä¸º8,<br>OPTION-LENGTHå°±æ˜¯å®Œæˆä¹‹åçš„é•¿åº¦<br>FAMILYè¡¨ç¤ºè®¾ç½®çš„IPçš„ç±»å‹ IPv4ä¸º1,IPv6ä¸º2 æ›´å¤šç±»å‹è¯·çœ‹<a href="https://www.iana.org/assignments/address-family-numbers/address-family-numbers.xhtml">address-family-numbers</a><br>SOURCE PREFIX-LENGTHä¸ºæŸ¥è¯¢ä¸­ä½ç½®åç§»(å°±æ˜¯CIDRä¸­çš„mask),å…·ä½“è¯·äº†è§£CIDR,æ˜¯è®¡ç®—æœºç½‘ç»œå¾ˆåŸºç¡€çš„çŸ¥è¯†<br>SCOPE PREFIX-LENGTHæ˜¯å“åº”è¿”å›çš„ä½ç½®åç§»,åœ¨æŸ¥è¯¢ä¸­åº”ä¸º0<br>ADDRESSå°±æ˜¯è®¾ç½®çš„SubNetçš„IPåœ°å€,ä¾æ®ä¸Šé¢çš„FAMILY</p><h2 id="è¯·æ±‚">è¯·æ±‚</h2><p>çœ‹è¿‡å…·ä½“åè®®æ ¼å¼è§„å®šå,æˆ‘ä»¬å°±å¯ä»¥æ¥å®Œæˆä»£ç äº†</p><p>å…ˆå®šä¹‰ä»¥ä¸‹å„ç§è¯·æ±‚çš„OPTION-CODE</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> <span class="token punctuation">(</span>  Reserved         <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000000</span><span class="token punctuation">&#125;</span> <span class="token comment">//0</span>  LLQ              <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000001</span><span class="token punctuation">&#125;</span> <span class="token comment">//1 Optional</span>  UL               <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000010</span><span class="token punctuation">&#125;</span> <span class="token comment">//2 On-hold</span>  NSID             <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000011</span><span class="token punctuation">&#125;</span> <span class="token comment">//3 Standard</span>  Reserved2        <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000100</span><span class="token punctuation">&#125;</span> <span class="token comment">//4</span>  DAU              <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000101</span><span class="token punctuation">&#125;</span> <span class="token comment">//5 Standard</span>  DHU              <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000110</span><span class="token punctuation">&#125;</span> <span class="token comment">//6 Standard</span>  N3U              <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000111</span><span class="token punctuation">&#125;</span> <span class="token comment">//7 Standard</span>  EdnsClientSubnet <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001000</span><span class="token punctuation">&#125;</span> <span class="token comment">//8 Optional</span>  EDNSEXPIRE       <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001001</span><span class="token punctuation">&#125;</span> <span class="token comment">//9 Optional</span>  COOKIE           <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001010</span><span class="token punctuation">&#125;</span> <span class="token comment">//10 Standard</span>  TcpKeepalive     <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001011</span><span class="token punctuation">&#125;</span> <span class="token comment">//11 Standard</span>  Padding          <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001100</span><span class="token punctuation">&#125;</span> <span class="token comment">//12 Standard</span>  CHAIN            <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001101</span><span class="token punctuation">&#125;</span> <span class="token comment">//13 Standard</span>  KEYTAG           <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001110</span><span class="token punctuation">&#125;</span> <span class="token comment">//14 Optional</span>  ExtendedDNSError <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001111</span><span class="token punctuation">&#125;</span> <span class="token comment">//15 Standard</span>  EDNSClientTag    <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00010000</span><span class="token punctuation">&#125;</span> <span class="token comment">//16 Optional</span>  EDNSServerTag    <span class="token operator">=</span> EDNSOPT<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00010001</span><span class="token punctuation">&#125;</span> <span class="token comment">//17 Optional</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå®ŒæˆSubNetçš„</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">createEdnsClientSubnet</span><span class="token punctuation">(</span>ip net<span class="token punctuation">.</span>IP<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span> <span class="token punctuation">&#123;</span>  optionCode <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span>EdnsClientSubnet<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> EdnsClientSubnet<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span>  family <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000001</span><span class="token punctuation">&#125;</span> <span class="token comment">// 1:Ipv4 2:IPv6 https://www.iana.org/assignments/address-family-numbers/address-family-numbers.xhtml</span>  sourceNetmask <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00100000</span><span class="token punctuation">&#125;</span>      <span class="token comment">// 32</span>  scopeNetmask <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">&#125;</span>       <span class="token comment">//0 In queries, it MUST be set to 0.</span>  subnet <span class="token operator">:=</span> ip<span class="token punctuation">.</span><span class="token function">To4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                       <span class="token comment">//depending family</span>  <span class="token keyword">if</span> subnet <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    subnet <span class="token operator">=</span> ip<span class="token punctuation">.</span><span class="token function">To16</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    family <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000010</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  optionData <span class="token operator">:=</span> bytes<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span>family<span class="token punctuation">,</span> sourceNetmask<span class="token punctuation">,</span> scopeNetmask<span class="token punctuation">,</span> subnet<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  optionLength <span class="token operator">:=</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>optionData<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> bytes<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span>optionCode<span class="token punctuation">,</span> optionLength<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> optionData<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†å®ŒæˆAdditional,åŠ ä¸Šå®Œæ•´çš„è¯·æ±‚å¤´,æ³¨æ„è¿™é‡Œæˆ‘ä»¬è¦ä¿®æ”¹ä¸€ä¸‹è¯·æ±‚å¤´ä¸­ArCountçš„å¤§å°</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">createEDNSReq</span><span class="token punctuation">(</span>domain <span class="token builtin">string</span><span class="token punctuation">,</span> reqType2 reqType<span class="token punctuation">,</span> eDNS <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span> <span class="token punctuation">&#123;</span>  normalReq <span class="token operator">:=</span> <span class="token function">creatRequest</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> reqType2<span class="token punctuation">)</span>  normalReq<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0b00000000</span>  normalReq<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0b00000001</span>  name <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">&#125;</span>  typeR <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00101001</span><span class="token punctuation">&#125;</span>       <span class="token comment">//41</span>  payloadSize <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00010000</span><span class="token punctuation">,</span> <span class="token number">0b00000000</span><span class="token punctuation">&#125;</span> <span class="token comment">//4096</span>  extendRcode <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">&#125;</span>  eDNSVersion <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">&#125;</span>  z <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000000</span><span class="token punctuation">&#125;</span>  <span class="token keyword">var</span> dataLength <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">byte</span>  <span class="token keyword">if</span> eDNS <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    dataLength <span class="token operator">=</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>eDNS<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> bytes<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span>normalReq<span class="token punctuation">,</span> name<span class="token punctuation">,</span> typeR<span class="token punctuation">,</span> payloadSize<span class="token punctuation">,</span> extendRcode<span class="token punctuation">,</span> eDNSVersion<span class="token punctuation">,</span> z<span class="token punctuation">,</span> dataLength<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> eDNS<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åº”ç­”">åº”ç­”</h2><p>æˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹åº”ç­”çš„è§£æé¡ºåº,å°±è·Ÿæœ€å¼€å§‹çš„ä¸€æ ·</p><ul><li>Header</li><li>Answer</li><li>Authority</li><li>Additional</li></ul><p>Headerå’ŒAnswerçš„è§£ææˆ‘ä»¬ä¸Šä¸€ç¯‡å·²ç»å®Œæˆäº†,è¿™é‡Œéœ€è¦å®ŒæˆAuthorityå’ŒAdditional</p><p>å› ä¸ºæˆ‘ä»¬ä¸éœ€è¦Authorityå†…çš„å…·ä½“å†…å®¹,è¿™é‡Œæˆ‘ä»¬å°±ç›´æ¥è·å–åˆ°Authorityä¹‹åçš„æ•°æ®å°±è¡Œäº†</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">resolveAuthoritative</span><span class="token punctuation">(</span>c <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> nsCount <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>left <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">for</span> nsCount <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>    nsCount<span class="token operator">--</span>    <span class="token boolean">_</span><span class="token punctuation">,</span> <span class="token boolean">_</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token function">getName</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> b<span class="token punctuation">)</span>    c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// type</span>    c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// class</span>    c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// ttl</span>    dataLength <span class="token operator">:=</span> <span class="token function">int</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token function">int</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// data length</span>    c <span class="token operator">=</span> c<span class="token punctuation">[</span>dataLength<span class="token punctuation">:</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> c<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Additional, SubNet</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">resolveAdditional</span><span class="token punctuation">(</span>b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> arCount <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">for</span> arCount <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>    arCount<span class="token operator">--</span>    <span class="token comment">//name := b[:1]</span>    b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    typeE <span class="token operator">:=</span> b<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>    b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment">//payLoadSize := b[:2]</span>    b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment">//rCode := b[:1]</span>    b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment">//version := b[:1]</span>    b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment">//z := b[:2]</span>    b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    dataLength <span class="token operator">:=</span> <span class="token function">int</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token function">int</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment">//log.Println(name, typeE, payLoadSize, rCode, version, z, dataLength)</span>    <span class="token keyword">if</span> typeE<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">||</span> typeE<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">41</span> <span class="token punctuation">&#123;</span>      <span class="token comment">//optData := b[:dataLength]</span>      b <span class="token operator">=</span> b<span class="token punctuation">[</span>dataLength<span class="token punctuation">:</span><span class="token punctuation">]</span>      <span class="token keyword">continue</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> dataLength <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">continue</span>    <span class="token punctuation">&#125;</span>    optCode <span class="token operator">:=</span> EDNSOPT<span class="token punctuation">&#123;</span>b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span>    b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    optionLength <span class="token operator">:=</span> <span class="token function">int</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token function">int</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">switch</span> optCode <span class="token punctuation">&#123;</span>    <span class="token keyword">case</span> EdnsClientSubnet<span class="token punctuation">:</span>      <span class="token comment">//family := b[:2]</span>      b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>      <span class="token comment">//sourceNetmask := b[:1]</span>      <span class="token comment">//log.Println("sourceNetmask", sourceNetmask)</span>      b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>      <span class="token comment">//scopeNetmask := b[:1]</span>      <span class="token comment">//log.Println("scopeNetmask", scopeNetmask)</span>      b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>      <span class="token comment">// Subnet IP</span>      <span class="token comment">//if family[0] == 0 &amp;&amp; family[1] == 1 &#123;</span>      <span class="token comment">//log.Println(b[:4])</span>      <span class="token comment">//&#125;</span>      <span class="token comment">//if family[0] == 0 &amp;&amp; family[1] == 2 &#123;</span>      <span class="token comment">//log.Println(b[:16])</span>      <span class="token comment">//&#125;</span>      b <span class="token operator">=</span> b<span class="token punctuation">[</span>optionLength<span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">default</span><span class="token punctuation">:</span>      <span class="token comment">//log.Println("opt data:", b[:optionLength])</span>      b <span class="token operator">=</span> b<span class="token punctuation">[</span>optionLength<span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åéœ€è¦åœ¨ä¹‹å‰çš„DNSåˆ†æåŠ ä¸Šè¿™ä¸¤ä¸ªå‡½æ•°,å®Œæ•´ä»£ç è¯·çœ‹å¼€å¤´</p><hr><blockquote><p><a href="https://tools.ietf.org/html/rfc2671">rfc2671</a><br><a href="https://tools.ietf.org/html/rfc7871">rfc7871</a><br><a href="https://www.iana.org/assignments/dns-parameters/dns-parameters.xhtml#dns-parameters-11">dns-parameters</a><br><a href="https://www.iana.org/assignments/address-family-numbers/address-family-numbers.xhtml">address-family-numbers</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™ä¸ªDNSç³»åˆ—ç°åœ¨æœ‰ä»¥ä¸‹å‡ ç¯‡æ–‡ç« &lt;br&gt;
&lt;a href=&quot;/posts/f05986bf/&quot;&gt;DNS&lt;/a&gt;  &lt;a href=&quot;/posts/668530ca/&quot;&gt;EDNS&lt;/a&gt; &lt;a href=&quot;/posts/1751943e/&quot;&gt;DNSSEC&lt;/a&gt; &lt;a href=&quot;/posts/4b39445f/&quot;&gt;DNS over HTTPS&lt;/a&gt; å®Œæ•´ä»£ç è¯·çœ‹&lt;a href=&quot;https://github.com/Asutorufa/yuhaiin/tree/master/net/dns&quot;&gt;DNS&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;EDNS&quot;&gt;EDNS&lt;/h2&gt;
&lt;p&gt;ä¸Šä¸€ç¯‡æˆ‘ä»¬å†™äº†DNS,EDNSå°±æ˜¯DNSçš„åŠŸèƒ½æ‰©å…….&lt;br&gt;
ä¸Šä¸€ç¯‡çš„DNSé‡Œå¤´éƒ¨æœ‰ARCOUNTçš„è®¡æ•°,EDNSå°±åŒ…å«åœ¨é‚£ä¸ªé‡Œé¢,EDNSå‘é€çš„è¯·æ±‚åœ¨è¯·æ±‚å¤´ä¹‹åçš„Additionalä¸­,åº”ç­”åœ¨Answerå’ŒAuthoritativeä¹‹å,æˆ‘ä»¬å¯çœ‹ä»¥ä¸‹å›¾,è·Ÿæ¸…æ™°äº†å§&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;+---------------------+
|        Header       |
+---------------------+
|       Question      | the question for the name server
+---------------------+
|        Answer       | RRs answering the question
+---------------------+
|      Authority      | RRs pointing toward an authority
+---------------------+
|      Additional     | RRs holding additional information
+---------------------+&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;åè®®æ ¼å¼&quot;&gt;åè®®æ ¼å¼&lt;/h2&gt;
&lt;p&gt;å…·ä½“åè®®å†…å®¹è¯·çœ‹&lt;a href=&quot;https://tools.ietf.org/html/rfc2671&quot;&gt;rfc2671&lt;/a&gt;,&lt;a href=&quot;https://tools.ietf.org/html/rfc7871&quot;&gt;rfc7871&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="golang" scheme="https://asutorufa.github.io/tags/golang/"/>
    
    <category term="DNS" scheme="https://asutorufa.github.io/tags/DNS/"/>
    
    <category term="UDP" scheme="https://asutorufa.github.io/tags/UDP/"/>
    
    <category term="EDNS" scheme="https://asutorufa.github.io/tags/EDNS/"/>
    
  </entry>
  
  <entry>
    <title>HP Laptop linux ä¸‹intel&amp;amdåŒæ˜¾å¡</title>
    <link href="https://asutorufa.github.io/posts/34615c2d/"/>
    <id>https://asutorufa.github.io/posts/34615c2d/</id>
    <published>2020-06-05T15:12:33.000Z</published>
    <updated>2020-06-05T15:12:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>æŸ¥çœ‹<code>åŒæ˜¾å¡</code>åˆ‡æ¢æƒ…å†µï¼Œæ­£å¸¸æƒ…å†µä¸‹å¦‚æœæ²¡æœ‰åœ¨ç”¨ç‹¬æ˜¾åº”è¯¥æ˜¾ç¤ºæ˜¯<code>DynOff</code>ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œå³ä½¿æ˜¯ä¸å¼€æ¡Œé¢ä¹Ÿæ˜¯<code>DynPwr</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span> ~ <span class="token punctuation">]</span> <span class="token function">cat</span> /sys/kernel/debug/vgaswitcheroo/switch<span class="token number">0</span>:DIS-Audio: :DynPwr:0000:01:00.1<span class="token number">1</span>:IGD:+:Pwr:0000:00:02.0<span class="token number">2</span>:DIS: :DynPwr:0000:01:00.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æŸ¥çœ‹<code>dmesg</code>æ‰¾åˆ°</p><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>    <span class="token number">3.495606</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>drm<span class="token punctuation">]</span> amdgpu kernel modesetting enabled<span class="token punctuation">.</span><span class="token punctuation">[</span>    <span class="token number">3.495628</span><span class="token punctuation">]</span> <span class="token property">vga_switcheroo:</span> detected switching method \_SB_<span class="token punctuation">.</span>PCI0<span class="token punctuation">.</span>GFX0<span class="token punctuation">.</span>ATPX handle<span class="token punctuation">[</span>    <span class="token number">3.495741</span><span class="token punctuation">]</span> ATPX version <span class="token number">1</span><span class="token punctuation">,</span> functions <span class="token number">0x00000033</span><span class="token punctuation">[</span>    <span class="token number">3.495873</span><span class="token punctuation">]</span> ATPX Hybrid Graphics<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰¾åˆ°äº†è°ƒç”¨çš„æ–¹æ³•ï¼Œç½‘ä¸Šæœäº†ä¸€åœˆéƒ½æ²¡æœ‰ä½¿ç”¨æ–¹æ³•ï¼Œç„¶åä½¿ç”¨<code>acpi_call</code>å°è¯•äº†å‡ ä¸ªå‚æ•°ï¼Œæœ€åæ‰¾åˆ°</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"\_SB_.PCI0.GFX0.ATPX 2 0"</span> <span class="token operator">></span>  /proc/acpi/call</code></pre><p>å—¯ï¼Œç¡®å®æœ‰ç”¨ï¼Œä½†æ˜¯å®åœ¨æ˜¯å¤ªæš´åŠ›äº†ï¼Œç›´æ¥æŠŠæ•´ä¸ªæ˜¾å¡ç§»é™¤ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æ—¥å¿—<span id="more"></span></p><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>drm<span class="token operator">:</span>amdgpu_pci_remove <span class="token punctuation">[</span>amdgpu<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">*</span><span class="token level error important">ERROR</span><span class="token operator">*</span> Hotplug removal is not supported<span class="token punctuation">[</span><span class="token number">11499.551786</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>drm<span class="token punctuation">]</span> <span class="token property">amdgpu:</span> finishing device<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">11499.554123</span><span class="token punctuation">]</span> CP HQD IQ timer status time out<span class="token punctuation">[</span><span class="token number">11499.554442</span><span class="token punctuation">]</span> CP HQD dequeue request time out<span class="token punctuation">[</span><span class="token number">11503.557688</span><span class="token punctuation">]</span> cp queue preemption time out<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">11503.557729</span><span class="token punctuation">]</span> Creating topology SYSFS entries<span class="token punctuation">[</span><span class="token number">11503.557800</span><span class="token punctuation">]</span> <span class="token property">amdgpu:</span> <span class="token punctuation">[</span>powerplay<span class="token punctuation">]</span>                    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                failed to send message <span class="token number">84</span> ret is <span class="token number">65535</span> <span class="token punctuation">[</span><span class="token number">11503.793030</span><span class="token punctuation">]</span> <span class="token property">amdgpu:</span> <span class="token punctuation">[</span>powerplay<span class="token punctuation">]</span> Failed to force to switch arbf0<span class="token operator">!</span><span class="token punctuation">[</span><span class="token number">11503.928787</span><span class="token punctuation">]</span> amdgpu <span class="token number">0000</span><span class="token operator">:</span><span class="token number">01</span><span class="token operator">:</span><span class="token number">00.0</span><span class="token operator">:</span> <span class="token punctuation">[</span>drm<span class="token operator">:</span>amdgpu_ring_test_helper <span class="token punctuation">[</span>amdgpu<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">*</span><span class="token level error important">ERROR</span><span class="token operator">*</span> ring kiq_2<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0 test failed <span class="token operator">(</span><span class="token operator">-</span><span class="token number">110</span><span class="token operator">)</span><span class="token punctuation">[</span><span class="token number">11503.928865</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>drm<span class="token operator">:</span>gfx_v8_0_hw_fini <span class="token punctuation">[</span>amdgpu<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">*</span><span class="token level error important">ERROR</span><span class="token operator">*</span> KCQ disable failed<span class="token punctuation">[</span><span class="token number">11504.164622</span><span class="token punctuation">]</span> cp is busy<span class="token punctuation">,</span> skip halt cp<span class="token punctuation">[</span><span class="token number">11504.282335</span><span class="token punctuation">]</span> rlc is busy<span class="token punctuation">,</span> skip halt rlc<span class="token punctuation">[</span><span class="token number">11504.421048</span><span class="token punctuation">]</span> <span class="token separator comment">------------</span><span class="token punctuation">[</span> cut here <span class="token punctuation">]</span><span class="token separator comment">------------</span><span class="token punctuation">[</span><span class="token number">11504.421115</span><span class="token punctuation">]</span> <span class="token level warning important">WARNING</span><span class="token operator">:</span> CPU<span class="token operator">:</span> <span class="token number">3</span> PID<span class="token operator">:</span> <span class="token number">167022</span> at drivers<span class="token operator">/</span>gpu<span class="token operator">/</span>drm<span class="token operator">/</span>amd<span class="token operator">/</span>amdgpu<span class="token operator">/</span>amdgpu_vm<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">3170</span> amdgpu_vm_manager_fini<span class="token operator">+</span><span class="token number">0x1e</span><span class="token operator">/</span><span class="token number">0x50</span> <span class="token punctuation">[</span>amdgpu<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">11504.421115</span><span class="token punctuation">]</span> <span class="token property">Modules linked in:</span> acpi_call<span class="token operator">(</span>OE<span class="token operator">)</span> ccm rfcomm cmac algif_hash algif_skcipher af_alg bnep btusb btrtl btbcm btintel bluetooth snd_hda_codec_realtek snd_hda_codec_generic ledtrig_audio hid_generic usbhid hid ecdh_generic ecc mousedev amdgpu uvcvideo videobuf2_vmalloc videobuf2_memops videobuf2_v4l2 videobuf2_common x86_pkg_temp_thermal intel_powerclamp coretemp videodev kvm_intel mc kvm nls_iso8859_1 nls_cp437 vfat fat i915 iwlmvm fuse irqbypass mac80211 crct10dif_pclmul gpu_sched crc32_pclmul snd_hda_codec_hdmi libarc4 ghash_clmulni_intel snd_hda_intel ttm hp_wmi snd_intel_dspcfg i2c_algo_bit snd_hda_codec mei_hdcp intel_rapl_msr wmi_bmof sparse_keymap iTCO_wdt iTCO_vendor_support aesni_intel crypto_simd joydev iwlwifi cryptd snd_hda_core glue_helper snd_hwdep intel_cstate snd_pcm drm_kms_helper intel_uncore intel_rapl_perf snd_timer cfg80211 input_leds psmouse pcspkr snd i2c_i801 cec r8169 rc_core intel_gtt realtek syscopyarea sysfillrect processor_thermal_device sysimgblt mei_me<span class="token punctuation">[</span><span class="token number">11504.421137</span><span class="token punctuation">]</span>  libphy intel_rapl_common rfkill int340x_thermal_zone soundcore intel_pch_thermal fb_sys_fops intel_soc_dts_iosf mei wmi battery hp_accel evdev lis3lv02d mac_hid hp_wireless int3400_thermal acpi_thermal_rel ac vboxnetflt<span class="token operator">(</span>OE<span class="token operator">)</span> vboxnetadp<span class="token operator">(</span>OE<span class="token operator">)</span> drm vboxdrv<span class="token operator">(</span>OE<span class="token operator">)</span> crypto_user agpgart ip_tables x_tables ext4 crc32c_generic crc16 mbcache jbd2 rtsx_pci_sdmmc serio_raw mmc_core atkbd libps2 crc32c_intel xhci_pci xhci_hcd rtsx_pci i8042 serio<span class="token punctuation">[</span><span class="token number">11504.421149</span><span class="token punctuation">]</span> <span class="token property">CPU:</span> <span class="token number">3</span> PID<span class="token operator">:</span> <span class="token number">167022</span> Comm<span class="token operator">:</span> kworker<span class="token operator">/</span>u8<span class="token operator">:</span><span class="token number">0</span> Tainted<span class="token operator">:</span> G        W  OE     <span class="token number">5.6.15</span><span class="token operator">-</span>arch1<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">#</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">11504.421150</span><span class="token punctuation">]</span> <span class="token property">Hardware name:</span> HP OMEN by HP Laptop<span class="token operator">/</span><span class="token number">82EA</span><span class="token punctuation">,</span> BIOS F<span class="token punctuation">.</span><span class="token date number">53 12/12</span><span class="token operator">/</span><span class="token number">2019</span><span class="token punctuation">[</span><span class="token number">11504.421153</span><span class="token punctuation">]</span> <span class="token property">Workqueue:</span> kacpi_hotplug acpi_hotplug_work_fn<span class="token punctuation">[</span><span class="token number">11504.421221</span><span class="token punctuation">]</span> <span class="token property">RIP:</span> <span class="token number">0010</span><span class="token operator">:</span>amdgpu_vm_manager_fini<span class="token operator">+</span><span class="token number">0x1e</span><span class="token operator">/</span><span class="token number">0x50</span> <span class="token punctuation">[</span>amdgpu<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">11504.421222</span><span class="token punctuation">]</span> <span class="token property">Code:</span> c7 <span class="token number">83</span> a0 <span class="token number">4e</span> <span class="token date number">00 00 00</span> <span class="token date number">00 00 00</span> eb <span class="token number">87</span> <span class="token number">0f</span> <span class="token number">1f</span> <span class="token date number">44 00 00</span> <span class="token date number">55 48 89</span> fd <span class="token number">48</span> <span class="token number">81</span> c7 a8 <span class="token number">4e</span> <span class="token date number">00 00 48</span> <span class="token number">83</span> ec <span class="token date number">08 48 83</span> bd b0 <span class="token number">4e</span> <span class="token date number">00 00 00</span> <span class="token number">74</span> <span class="token number">14</span> <span class="token operator">&lt;</span><span class="token number">0f</span><span class="token operator">></span> <span class="token number">0b</span> e8 <span class="token number">4b</span> <span class="token number">3d</span> a3 d5 <span class="token number">48</span> <span class="token number">89</span> ef <span class="token number">48</span> <span class="token number">83</span> c4 <span class="token number">08</span> <span class="token number">5d</span> e9 ce <span class="token date number">96 00 00</span> <span class="token number">31</span> f6<span class="token punctuation">[</span><span class="token number">11504.421223</span><span class="token punctuation">]</span> <span class="token property">RSP:</span> <span class="token number">0018</span><span class="token operator">:</span>ffffb45703ae3c90 EFLAGS<span class="token operator">:</span> <span class="token number">00010286</span><span class="token punctuation">[</span><span class="token number">11504.421225</span><span class="token punctuation">]</span> <span class="token property">RAX:</span> <span class="token number">0000000000000000</span> RBX<span class="token operator">:</span> ffff8c0f0cdc0000 RCX<span class="token operator">:</span> <span class="token number">0000000000000000</span><span class="token punctuation">[</span><span class="token number">11504.421225</span><span class="token punctuation">]</span> <span class="token property">RDX:</span> <span class="token property">ffff8c0f1c718000 RSI:</span> <span class="token property">ffff8c0f0cb53000 RDI:</span> ffff8c0f0cdc4ea8<span class="token punctuation">[</span><span class="token number">11504.421226</span><span class="token punctuation">]</span> <span class="token property">RBP:</span> <span class="token property">ffff8c0f0cdc0000 R08:</span> <span class="token number">0000000000000040</span> R09<span class="token operator">:</span> <span class="token number">0000000000000000</span><span class="token punctuation">[</span><span class="token number">11504.421227</span><span class="token punctuation">]</span> <span class="token property">R10:</span> <span class="token number">0000000000000000</span> R11<span class="token operator">:</span> ffff8c0f08056438 R12<span class="token operator">:</span> <span class="token number">0000000000000001</span><span class="token punctuation">[</span><span class="token number">11504.421228</span><span class="token punctuation">]</span> <span class="token property">R13:</span> <span class="token property">ffff8c0f0cdd5020 R14:</span> <span class="token property">ffff8c0f1c0de800 R15:</span> ffff8c0f1c09f740<span class="token punctuation">[</span><span class="token number">11504.421229</span><span class="token punctuation">]</span> <span class="token property">FS:</span>  <span class="token number">0000000000000000</span><span class="token operator">(</span><span class="token number">0000</span><span class="token operator">)</span> GS<span class="token operator">:</span>ffff8c0f1ed80000<span class="token operator">(</span><span class="token number">0000</span><span class="token operator">)</span> knlGS<span class="token operator">:</span><span class="token number">0000000000000000</span><span class="token punctuation">[</span><span class="token number">11504.421230</span><span class="token punctuation">]</span> <span class="token property">CS:</span>  <span class="token number">0010</span> DS<span class="token operator">:</span> <span class="token number">0000</span> ES<span class="token operator">:</span> <span class="token number">0000</span> CR0<span class="token operator">:</span> <span class="token number">0000000080050033</span><span class="token punctuation">[</span><span class="token number">11504.421230</span><span class="token punctuation">]</span> <span class="token property">CR2:</span> <span class="token number">00007f5a4f135fd8</span> CR3<span class="token operator">:</span> <span class="token number">00000001a020a001</span> CR4<span class="token operator">:</span> <span class="token number">00000000003606e0</span><span class="token punctuation">[</span><span class="token number">11504.421231</span><span class="token punctuation">]</span> <span class="token property">Call Trace:</span><span class="token punctuation">[</span><span class="token number">11504.421300</span><span class="token punctuation">]</span>  gmc_v8_0_sw_fini<span class="token operator">+</span><span class="token number">0x16</span><span class="token operator">/</span><span class="token number">0x60</span> <span class="token punctuation">[</span>amdgpu<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">11504.421386</span><span class="token punctuation">]</span>  amdgpu_device_fini<span class="token operator">+</span><span class="token number">0x255</span><span class="token operator">/</span><span class="token number">0x46f</span> <span class="token punctuation">[</span>amdgpu<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">11504.421446</span><span class="token punctuation">]</span>  amdgpu_driver_unload_kms<span class="token operator">+</span><span class="token number">0x47</span><span class="token operator">/</span><span class="token number">0x90</span> <span class="token punctuation">[</span>amdgpu<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">11504.421463</span><span class="token punctuation">]</span>  drm_dev_unregister<span class="token operator">+</span><span class="token number">0x4b</span><span class="token operator">/</span><span class="token number">0xb0</span> <span class="token punctuation">[</span>drm<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">11504.421521</span><span class="token punctuation">]</span>  amdgpu_pci_remove<span class="token operator">+</span><span class="token number">0x2e</span><span class="token operator">/</span><span class="token number">0x50</span> <span class="token punctuation">[</span>amdgpu<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">11504.421525</span><span class="token punctuation">]</span>  pci_device_remove<span class="token operator">+</span><span class="token number">0x3b</span><span class="token operator">/</span><span class="token number">0xa0</span><span class="token punctuation">[</span><span class="token number">11504.421528</span><span class="token punctuation">]</span>  __device_release_driver<span class="token operator">+</span><span class="token number">0x15c</span><span class="token operator">/</span><span class="token number">0x210</span><span class="token punctuation">[</span><span class="token number">11504.421529</span><span class="token punctuation">]</span>  device_release_driver<span class="token operator">+</span><span class="token number">0x24</span><span class="token operator">/</span><span class="token number">0x30</span><span class="token punctuation">[</span><span class="token number">11504.421532</span><span class="token punctuation">]</span>  pci_stop_bus_device<span class="token operator">+</span><span class="token number">0x68</span><span class="token operator">/</span><span class="token number">0x90</span><span class="token punctuation">[</span><span class="token number">11504.421534</span><span class="token punctuation">]</span>  pci_stop_and_remove_bus_device<span class="token operator">+</span><span class="token number">0xe</span><span class="token operator">/</span><span class="token number">0x20</span><span class="token punctuation">[</span><span class="token number">11504.421536</span><span class="token punctuation">]</span>  disable_slot<span class="token operator">+</span><span class="token number">0x49</span><span class="token operator">/</span><span class="token number">0x90</span><span class="token punctuation">[</span><span class="token number">11504.421538</span><span class="token punctuation">]</span>  acpiphp_check_bridge<span class="token punctuation">.</span>part<span class="token punctuation">.</span>0<span class="token operator">+</span><span class="token number">0xba</span><span class="token operator">/</span><span class="token number">0x140</span><span class="token punctuation">[</span><span class="token number">11504.421540</span><span class="token punctuation">]</span>  acpiphp_hotplug_notify<span class="token operator">+</span><span class="token number">0x170</span><span class="token operator">/</span><span class="token number">0x280</span><span class="token punctuation">[</span><span class="token number">11504.421541</span><span class="token punctuation">]</span>  <span class="token operator">?</span> acpiphp_post_dock_fixup<span class="token operator">+</span><span class="token number">0xe0</span><span class="token operator">/</span><span class="token number">0xe0</span><span class="token punctuation">[</span><span class="token number">11504.421544</span><span class="token punctuation">]</span>  acpi_device_hotplug<span class="token operator">+</span><span class="token number">0x9e</span><span class="token operator">/</span><span class="token number">0x410</span><span class="token punctuation">[</span><span class="token number">11504.421547</span><span class="token punctuation">]</span>  acpi_hotplug_work_fn<span class="token operator">+</span><span class="token number">0x3d</span><span class="token operator">/</span><span class="token number">0x50</span><span class="token punctuation">[</span><span class="token number">11504.421549</span><span class="token punctuation">]</span>  process_one_work<span class="token operator">+</span><span class="token number">0x1da</span><span class="token operator">/</span><span class="token number">0x3d0</span><span class="token punctuation">[</span><span class="token number">11504.421551</span><span class="token punctuation">]</span>  worker_thread<span class="token operator">+</span><span class="token number">0x4d</span><span class="token operator">/</span><span class="token number">0x3e0</span><span class="token punctuation">[</span><span class="token number">11504.421553</span><span class="token punctuation">]</span>  <span class="token operator">?</span> rescuer_thread<span class="token operator">+</span><span class="token number">0x3f0</span><span class="token operator">/</span><span class="token number">0x3f0</span><span class="token punctuation">[</span><span class="token number">11504.421555</span><span class="token punctuation">]</span>  kthread<span class="token operator">+</span><span class="token number">0x117</span><span class="token operator">/</span><span class="token number">0x130</span><span class="token punctuation">[</span><span class="token number">11504.421556</span><span class="token punctuation">]</span>  <span class="token operator">?</span> __kthread_bind_mask<span class="token operator">+</span><span class="token number">0x60</span><span class="token operator">/</span><span class="token number">0x60</span><span class="token punctuation">[</span><span class="token number">11504.421559</span><span class="token punctuation">]</span>  ret_from_fork<span class="token operator">+</span><span class="token number">0x35</span><span class="token operator">/</span><span class="token number">0x40</span><span class="token punctuation">[</span><span class="token number">11504.421562</span><span class="token punctuation">]</span> <span class="token separator comment">---</span><span class="token punctuation">[</span> end trace <span class="token number">9fc85d768333e4aa</span> <span class="token punctuation">]</span><span class="token separator comment">---</span><span class="token punctuation">[</span><span class="token number">11504.434382</span><span class="token punctuation">]</span> Move buffer fallback to memcpy unavailable<span class="token punctuation">[</span><span class="token number">11504.434384</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>TTM<span class="token punctuation">]</span> Buffer eviction failed<span class="token punctuation">[</span><span class="token number">11504.434384</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>TTM<span class="token punctuation">]</span> Cleanup eviction failed<span class="token punctuation">[</span><span class="token number">11504.434402</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>TTM<span class="token punctuation">]</span> Finalizing pool allocator<span class="token punctuation">[</span><span class="token number">11504.434881</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>TTM<span class="token punctuation">]</span> Finalizing DMA pool allocator<span class="token punctuation">[</span><span class="token number">11504.434971</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>TTM<span class="token punctuation">]</span> Zone  kernel<span class="token operator">:</span> Used memory at exit<span class="token operator">:</span> <span class="token number">4312</span> KiB<span class="token punctuation">[</span><span class="token number">11504.434974</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>TTM<span class="token punctuation">]</span> Zone   dma32<span class="token operator">:</span> Used memory at exit<span class="token operator">:</span> <span class="token number">0</span> KiB<span class="token punctuation">[</span><span class="token number">11504.434976</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>drm<span class="token punctuation">]</span> <span class="token property">amdgpu:</span> ttm finalized<span class="token punctuation">[</span><span class="token number">11504.434989</span><span class="token punctuation">]</span> <span class="token property">vga_switcheroo:</span> disabled<span class="token punctuation">[</span><span class="token number">11504.435496</span><span class="token punctuation">]</span> i915 <span class="token number">0000</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">02.0</span><span class="token operator">:</span> vgaarb<span class="token operator">:</span> changed VGA decodes<span class="token operator">:</span> olddecodes<span class="token operator">=</span>none<span class="token punctuation">,</span>decodes<span class="token operator">=</span>io<span class="token operator">+</span>mem<span class="token operator">:</span>owns<span class="token operator">=</span>io<span class="token operator">+</span>mem<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰€ä»¥ä¹°ç¬”è®°æœ¬ä¸€å®šè¦ä¹°æœ‰<code>linux</code>è®¤è¯çš„ç”µè„‘ï¼Œå³ä½¿ä¸æ˜¯ä¹Ÿå°½é‡ä¸è¦ä¹°åŒæ˜¾å¡äº†ï¼Œæˆ‘ä¹°çš„è¿™ä¸ªæ˜¾å¡åŸºæœ¬é—²ç½®ï¼Œæˆ‘ä¹Ÿä¸å–œæ¬¢æ‰“æ¸¸æˆï¼Œåè€Œè€—ç”µã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æŸ¥çœ‹&lt;code&gt;åŒæ˜¾å¡&lt;/code&gt;åˆ‡æ¢æƒ…å†µï¼Œæ­£å¸¸æƒ…å†µä¸‹å¦‚æœæ²¡æœ‰åœ¨ç”¨ç‹¬æ˜¾åº”è¯¥æ˜¾ç¤ºæ˜¯&lt;code&gt;DynOff&lt;/code&gt;ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œå³ä½¿æ˜¯ä¸å¼€æ¡Œé¢ä¹Ÿæ˜¯&lt;code&gt;DynPwr&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; ~ &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; /sys/kernel/debug/vgaswitcheroo/switch
&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;:DIS-Audio: :DynPwr:0000:01:00.1
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;:IGD:+:Pwr:0000:00:02.0
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;:DIS: :DynPwr:0000:01:00.0&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æŸ¥çœ‹&lt;code&gt;dmesg&lt;/code&gt;æ‰¾åˆ°&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-log&quot; data-language=&quot;log&quot;&gt;&lt;code class=&quot;language-log&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;    &lt;span class=&quot;token number&quot;&gt;3.495606&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;drm&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; amdgpu kernel modesetting enabled&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;    &lt;span class=&quot;token number&quot;&gt;3.495628&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;vga_switcheroo:&lt;/span&gt; detected switching method &#92;_SB_&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PCI0&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GFX0&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ATPX handle
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;    &lt;span class=&quot;token number&quot;&gt;3.495741&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; ATPX version &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; functions &lt;span class=&quot;token number&quot;&gt;0x00000033&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;    &lt;span class=&quot;token number&quot;&gt;3.495873&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; ATPX Hybrid Graphics&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ‰¾åˆ°äº†è°ƒç”¨çš„æ–¹æ³•ï¼Œç½‘ä¸Šæœäº†ä¸€åœˆéƒ½æ²¡æœ‰ä½¿ç”¨æ–¹æ³•ï¼Œç„¶åä½¿ç”¨&lt;code&gt;acpi_call&lt;/code&gt;å°è¯•äº†å‡ ä¸ªå‚æ•°ï¼Œæœ€åæ‰¾åˆ°&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&#92;_SB_.PCI0.GFX0.ATPX 2 0&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;  /proc/acpi/call&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å—¯ï¼Œç¡®å®æœ‰ç”¨ï¼Œä½†æ˜¯å®åœ¨æ˜¯å¤ªæš´åŠ›äº†ï¼Œç›´æ¥æŠŠæ•´ä¸ªæ˜¾å¡ç§»é™¤ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æ—¥å¿—</summary>
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
    <category term="bios" scheme="https://asutorufa.github.io/tags/bios/"/>
    
    <category term="computer" scheme="https://asutorufa.github.io/tags/computer/"/>
    
  </entry>
  
  <entry>
    <title>DNSå®¢æˆ·ç«¯åè®®è¯¦è§£</title>
    <link href="https://asutorufa.github.io/posts/f05986bf/"/>
    <id>https://asutorufa.github.io/posts/f05986bf/</id>
    <published>2020-05-31T18:44:37.000Z</published>
    <updated>2020-05-31T18:44:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªDNSç³»åˆ—ç°åœ¨æœ‰ä»¥ä¸‹å‡ ç¯‡æ–‡ç« <br><a href="/posts/f05986bf/">DNS</a>  <a href="/posts/668530ca/">EDNS</a> <a href="/posts/1751943e/">DNSSEC</a> <a href="/posts/4b39445f/">DNS over HTTPS</a> å®Œæ•´ä»£ç è¯·çœ‹<a href="https://github.com/Asutorufa/yuhaiin/tree/master/net/dns">DNS</a></p><h2 id="DNS-Header">DNS Header</h2><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">                                1  1  1  1  1  1  0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                      ID                       |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|QR|   Opcode  |AA|TC|RD|RA|   Z    |   RCODE   |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                    QDCOUNT                    |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                    ANCOUNT                    |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                    NSCOUNT                    |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                    ARCOUNT                    |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>headeråœ¨dnsè¯·æ±‚å’Œåº”ç­”ä¸­ç›¸åŒçš„,æŸ¥è¯¢ä¸­æœ‰Query Section,åº”ç­”ä¸­æœ‰answer section.</p><ul><li>ID: 2å­—èŠ‚,åº”ç­”ä¸­ä¹Ÿæœ‰ID,å¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯å¦ä¸ºæˆ‘ä»¬è¯·æ±‚çš„åº”ç­”</li><li>QRï¼š1bit,è¯·æ±‚æ—¶ä¸º0,åº”ç­”æ—¶ä¸º1</li><li>Opcodeï¼š4bit é€šå¸¸å€¼ä¸º0ï¼ˆæ ‡å‡†æŸ¥è¯¢ï¼‰ï¼Œå…¶ä»–å€¼ä¸º1ï¼ˆåå‘æŸ¥è¯¢ï¼‰å’Œ2ï¼ˆæœåŠ¡å™¨çŠ¶æ€è¯·æ±‚ï¼‰,[3,15]ä¿ç•™å€¼</li><li>AAï¼š1bit authoritative answer,åœ¨åº”ç­”ä¸­æ‰æœ‰æ•ˆ</li><li>TCï¼š1bit è¡¨ç¤ºå¯æˆªæ–­</li><li>RDï¼š1bit æœŸæœ›ä½¿ç”¨é€’å½’æŸ¥è¯¢</li><li>RAï¼š1bit åœ¨åº”ç­”ä¸­è¿”å›,è¿”å›æœåŠ¡å™¨æ˜¯å¦æ”¯æŒé€’å½’æŸ¥è¯¢</li><li>Zï¼š Reserved for future use.</li><li>RCODEï¼š4bit,åº”ç­”ç ,ä»£è¡¨è¿”å›çš„çŠ¶æ€<ul><li>0 No Error</li><li>1 Format error æ ¼å¼é”™è¯¯</li><li>2 Server failure æœåŠ¡å™¨å¤±è´¥</li><li>3 Name Error æŸ¥è¯¢åŸŸåé”™è¯¯</li><li>4 Not Implemented æœªå®ç°çš„æŸ¥è¯¢æ–¹å¼</li><li>5 Refused æ‹’ç»</li><li>6-15 Reserved for future use.<span id="more"></span></li></ul></li><li>QDCOUNT è¯·æ±‚çš„ä¸ªæ•°</li><li>ANCOUNT åº”ç­”çš„ä¸ªæ•°</li><li>NSCOUNT æ— ç¬¦å·16bitæ•´æ•°è¡¨ç¤ºæŠ¥æ–‡æˆæƒæ®µä¸­çš„æˆæƒè®°å½•æ•°ã€‚</li><li>ARCOUNT æ— ç¬¦å·16bitæ•´æ•°è¡¨ç¤ºæŠ¥æ–‡é™„åŠ æ®µä¸­çš„é™„åŠ è®°å½•æ•°ã€‚</li></ul><h2 id="æŸ¥è¯¢">æŸ¥è¯¢</h2><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">                                1  1  1  1  1  1  0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                                               |/                     QNAME                     //                                               /+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                     QTYPE                     |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                     QCLASS                    |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>QNAMEï¼šä¸å®šé•¿,æ ¼å¼ä¸ºåŸŸåä»¥ç‚¹åˆ†å‰²çš„é•¿åº¦,æœ«å°¾ä»¥0ç»“å°¾,ä¾‹å¦‚:</p>  <pre class="language-txt" data-language="txt"><code class="language-txt">www.google.com -> 3www6google3com0</code></pre></li><li><p>QTYPE:æŸ¥è¯¢çš„ç±»å‹<br>å¸¸ç”¨çš„æˆ‘ä»¬éœ€è¦çŸ¥é“Aä¸ºIPV4,AAAAä¸ºIPV6</p>  <pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">TYPE            value and meaningA               1 a host addressNS              2 an authoritative name serverMD              3 a mail destination (Obsolete - use MX)MF              4 a mail forwarder (Obsolete - use MX)CNAME           5 the canonical name for an aliasSOA             6 marks the start of a zone of authorityMB              7 a mailbox domain name (EXPERIMENTAL)MG              8 a mail group member (EXPERIMENTAL)MR              9 a mail rename domain name (EXPERIMENTAL)NULL            10 a null RR (EXPERIMENTAL)WKS             11 a well known service descriptionPTR             12 a domain name pointerHINFO           13 host informationMINFO           14 mailbox or mail list informationMX              15 mail exchangeTXT             16 text stringsAAAA            28 &lt;- https://www.ietf.org/rfc/rfc3596.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>QCLASSï¼šæ— ç¬¦å·16bitæ•´æ•°è¡¨ç¤ºæŸ¥è¯¢çš„ç±»,æ¯”å¦‚ï¼ŒINä»£è¡¨Internet.</p></li></ul><p>ç°åœ¨æˆ‘ä»¬æ¥å®Œæˆç”Ÿæˆè¯·æ±‚çš„ä»£ç <br>ä½¿ç”¨å…¨å±€å˜é‡æ¥å­˜å‚¨è¯·æ±‚çš„ç±»å‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> reqType <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token keyword">var</span> <span class="token punctuation">(</span>  A     <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000001</span><span class="token punctuation">&#125;</span> <span class="token comment">// 1</span>  NS    <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000010</span><span class="token punctuation">&#125;</span> <span class="token comment">// 2</span>  MD    <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000011</span><span class="token punctuation">&#125;</span> <span class="token comment">// 3</span>  MF    <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000100</span><span class="token punctuation">&#125;</span> <span class="token comment">// 3</span>  CNAME <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000101</span><span class="token punctuation">&#125;</span> <span class="token comment">// 5</span>  SOA   <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000110</span><span class="token punctuation">&#125;</span> <span class="token comment">// 6</span>  MB    <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000111</span><span class="token punctuation">&#125;</span> <span class="token comment">// 7</span>  MG    <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001000</span><span class="token punctuation">&#125;</span> <span class="token comment">// 8</span>  MR    <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001001</span><span class="token punctuation">&#125;</span> <span class="token comment">// 9</span>  NULL  <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001010</span><span class="token punctuation">&#125;</span> <span class="token comment">// 10</span>  WKS   <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001011</span><span class="token punctuation">&#125;</span> <span class="token comment">// 11</span>  PTR   <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001100</span><span class="token punctuation">&#125;</span> <span class="token comment">// 12</span>  HINFO <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001101</span><span class="token punctuation">&#125;</span> <span class="token comment">// 13</span>  MINFO <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001110</span><span class="token punctuation">&#125;</span> <span class="token comment">// 14</span>  MX    <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00001111</span><span class="token punctuation">&#125;</span> <span class="token comment">// 15</span>  TXT   <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00010000</span><span class="token punctuation">&#125;</span> <span class="token comment">// 16</span>  AAAA  <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00011100</span><span class="token punctuation">&#125;</span> <span class="token comment">// 28 https://www.ietf.org/rfc/rfc3596.txt</span>  <span class="token comment">// for req</span>  AXFR <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b11111100</span><span class="token punctuation">&#125;</span> <span class="token comment">// 252</span>  ANY  <span class="token operator">=</span> reqType<span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b11111111</span><span class="token punctuation">&#125;</span> <span class="token comment">// 255</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œéœ€è¦æ³¨æ„æœ‰äº›å­—æ®µæ˜¯ä»¥ä½çš„å¤§å°æ¥å­˜å‚¨çš„,éœ€è¦ä½¿ç”¨ç§»ä½è¿ç®—ç¬¦æ¥è®¡ç®—(åœ¨å®Œæˆè¿™ä¸ªåè®®å‰,æˆ‘å†™äº†socks5,å› ä¸ºsocks5ä¸­å…¨éƒ¨ä¸ºå­—èŠ‚çš„å¤§å°,å¯èƒ½æœ‰äººä¼šå‡ºç°ä¸æˆ‘ç›¸åŒçš„é”™è¯¯,æ‰€ä»¥éœ€è¦æ³¨æ„ä¸€ä¸‹)</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">creatRequest</span><span class="token punctuation">(</span>domain <span class="token builtin">string</span><span class="token punctuation">,</span> reqType reqType<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span> <span class="token punctuation">&#123;</span>    id <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token function">byte</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">byte</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token comment">// id:</span>    qr <span class="token operator">:=</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0b0</span><span class="token punctuation">)</span>                                          <span class="token comment">// qr 0</span>  opCode <span class="token operator">:=</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0b0000</span><span class="token punctuation">)</span>                                   <span class="token comment">// opcode 0000</span>  aa <span class="token operator">:=</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0b0</span><span class="token punctuation">)</span>                                          <span class="token comment">// aa 0</span>  tc <span class="token operator">:=</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0b0</span><span class="token punctuation">)</span>                                          <span class="token comment">// tc 0</span>  rd <span class="token operator">:=</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0b1</span><span class="token punctuation">)</span>                                          <span class="token comment">// rd 1</span>  ra <span class="token operator">:=</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0b0</span><span class="token punctuation">)</span>                                          <span class="token comment">// ra 0</span>  z <span class="token operator">:=</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0b000</span><span class="token punctuation">)</span>                                         <span class="token comment">// z 000</span>  rCode <span class="token operator">:=</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0b0000</span><span class="token punctuation">)</span>                                    <span class="token comment">// rCode 0000</span>  qr2rCode <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span>qr<span class="token operator">&lt;&lt;</span><span class="token number">7</span> <span class="token operator">+</span> opCode<span class="token operator">&lt;&lt;</span><span class="token number">3</span> <span class="token operator">+</span> aa<span class="token operator">&lt;&lt;</span><span class="token number">2</span> <span class="token operator">+</span> tc<span class="token operator">&lt;&lt;</span><span class="token number">1</span> <span class="token operator">+</span> rd<span class="token punctuation">,</span> ra<span class="token operator">&lt;&lt;</span><span class="token number">7</span> <span class="token operator">+</span> z<span class="token operator">&lt;&lt;</span><span class="token number">4</span> <span class="token operator">+</span> rCode<span class="token punctuation">&#125;</span>  qdCount <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000001</span><span class="token punctuation">&#125;</span> <span class="token comment">// request number => bit: 00000000 00000001 -> 01</span>  anCount <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000000</span><span class="token punctuation">&#125;</span> <span class="token comment">// answer number(no use for req) => bit: 00000000 00000000</span>  nsCount <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000000</span><span class="token punctuation">&#125;</span> <span class="token comment">//(no use for req) => bit: 00000000 00000000</span>  arCount <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000000</span><span class="token punctuation">&#125;</span> <span class="token comment">//(no use for req) => bit: 00000000 00000000</span>  <span class="token keyword">var</span> qName <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>  <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> x <span class="token operator">:=</span> <span class="token keyword">range</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> <span class="token string">"."</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    qName <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>qName<span class="token punctuation">,</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    qName <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>qName<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  qName <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>qName<span class="token punctuation">,</span> <span class="token number">0b00000000</span><span class="token punctuation">)</span> <span class="token comment">// add the 0 for last of domain</span>  qType <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span>reqType<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> reqType<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span>  <span class="token comment">// type:</span>  qClass <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0b00000000</span><span class="token punctuation">,</span> <span class="token number">0b00000001</span><span class="token punctuation">&#125;</span> <span class="token comment">// 1 -> from internet</span>  <span class="token keyword">return</span> bytes<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span>id<span class="token punctuation">,</span> qr2rCode<span class="token punctuation">,</span> qdCount<span class="token punctuation">,</span> anCount<span class="token punctuation">,</span> nsCount<span class="token punctuation">,</span> arCount<span class="token punctuation">,</span> qName<span class="token punctuation">,</span> qType<span class="token punctuation">,</span> qClass<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬å·²ç»å¾—åˆ°äº†å®Œæ•´çš„è¯·æ±‚å­—èŠ‚æ•°ç»„,ç„¶åä½¿ç”¨UDPåè®®å‘èµ·è¯·æ±‚å°±è¡Œäº†ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// æ­¤å¤„ä»¥www.google.comåŠ1111 DNSä¸ºä¾‹</span>req <span class="token operator">:=</span> <span class="token function">creatRequest</span><span class="token punctuation">(</span><span class="token string">"www.google.com"</span><span class="token punctuation">,</span> A<span class="token punctuation">)</span>conn<span class="token punctuation">,</span> err <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">DialTimeout</span><span class="token punctuation">(</span><span class="token string">"udp"</span><span class="token punctuation">,</span> <span class="token string">"1.1.1.1:53"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token operator">*</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err<span class="token punctuation">&#125;</span><span class="token keyword">defer</span> conn<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err<span class="token punctuation">&#125;</span><span class="token boolean">_</span> <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">SetDeadline</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">)</span>n<span class="token punctuation">,</span> err <span class="token operator">:=</span> conn<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦è§£æåº”ç­”è¯·æ±‚äº†,æ¥è·å–æˆ‘ä»¬éœ€è¦çš„æ•°æ®.</p><h2 id="åº”ç­”">åº”ç­”</h2><p>åº”ç­”æ•°æ®ä¸­å…·æœ‰headerå’Œè¯·æ±‚å­—æ®µ,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆå†™ä¸€ä¸ªresovle headeræ¥åˆ†æheader.<br>ä¹‹å‰æˆ‘ä»¬å®Œæˆäº†åŸŸåç¼–ç çš„ä»£ç ,å°±æ˜¯<code>3www6google3com0</code>è¿™ä¸ª,è¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦å®Œæˆä¸€ä¸ªè§£æçš„.</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">getName</span><span class="token punctuation">(</span>c <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> all <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> x <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">for</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&amp;</span><span class="token number">128</span> <span class="token operator">==</span> <span class="token number">128</span> <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&amp;</span><span class="token number">64</span> <span class="token operator">==</span> <span class="token number">64</span> <span class="token punctuation">&#123;</span> <span class="token comment">// &lt;- è¿™é‡Œçš„è¿™ä¸ªä¼šåœ¨ä¸‹é¢çš„answer sectionä¸­è§£é‡Š</span>      l <span class="token operator">:=</span> c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>      c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>      tmp<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> <span class="token function">getName</span><span class="token punctuation">(</span>all<span class="token punctuation">[</span>l<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> all<span class="token punctuation">)</span>      name <span class="token operator">+=</span> tmp      <span class="token comment">//log.Println(c, name)</span>      <span class="token keyword">break</span>    <span class="token punctuation">&#125;</span>    name <span class="token operator">+=</span> <span class="token function">string</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token function">int</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span>    c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token function">int</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>      c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// lastOfDomain: one byte 0</span>      <span class="token keyword">break</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> name<span class="token punctuation">,</span> c<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¹‹åå°±å¯ä»¥æ¥åˆ†æheaderäº†ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">resolveHeader</span><span class="token punctuation">(</span>req <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> answer <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>anCount <span class="token builtin">int</span><span class="token punctuation">,</span> answerSection <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// resolve answer</span>  <span class="token keyword">if</span> answer<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> req<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> answer<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> req<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> <span class="token comment">// compare id</span>    <span class="token comment">// not the answer</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"id not same"</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> answer<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&amp;</span><span class="token number">8</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span> <span class="token comment">// check the QR is 1(Answer)</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"the qr is not 1(Answer)"</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  rCode <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"%08b"</span><span class="token punctuation">,</span> answer<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// check Response code(rCode)</span>  <span class="token keyword">switch</span> rCode <span class="token punctuation">&#123;</span>  <span class="token keyword">case</span> <span class="token string">"0000"</span><span class="token punctuation">:</span> <span class="token comment">// no error</span>    <span class="token keyword">break</span>  <span class="token keyword">case</span> <span class="token string">"0001"</span><span class="token punctuation">:</span> <span class="token comment">// Format error</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"request format error"</span><span class="token punctuation">)</span>  <span class="token keyword">case</span> <span class="token string">"0010"</span><span class="token punctuation">:</span> <span class="token comment">//Server failure</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"dns Server failure"</span><span class="token punctuation">)</span>  <span class="token keyword">case</span> <span class="token string">"0011"</span><span class="token punctuation">:</span> <span class="token comment">//Name Error</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"no such name"</span><span class="token punctuation">)</span>  <span class="token keyword">case</span> <span class="token string">"0100"</span><span class="token punctuation">:</span> <span class="token comment">// Not Implemented</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"dns server not support this request"</span><span class="token punctuation">)</span>  <span class="token keyword">case</span> <span class="token string">"0101"</span><span class="token punctuation">:</span> <span class="token comment">//Refused</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"dns server Refuse"</span><span class="token punctuation">)</span>  <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token comment">// Reserved for future use.</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"other error"</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">//qdCountA := []byte&#123;b[4], b[5]&#125;  // no use, for request</span>  <span class="token comment">//anCountA := []byte&#123;answer[6], answer[7]&#125;</span>  anCount <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>answer<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token function">int</span><span class="token punctuation">(</span>answer<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//nsCount2arCountA := []byte&#123;b[8], b[9], b[10], b[11]&#125; // no use</span>  c <span class="token operator">:=</span> answer<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">:</span><span class="token punctuation">]</span>  <span class="token keyword">var</span> x <span class="token builtin">string</span>  x<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token function">getName</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> answer<span class="token punctuation">)</span>  log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"qType:"</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>  log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"qClass:"</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>  <span class="token keyword">return</span> anCount<span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¹‹åå°±æ˜¯æˆ‘ä»¬çœŸæ­£éœ€è¦çš„æ•°æ®,Answer section</p><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">                               1  1  1  1  1  1  0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                                               |/                                               //                      NAME                     /|                                               |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                      TYPE                     |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                     CLASS                     |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                      TTL                      ||                                               |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+|                   RDLENGTH                    |+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--|/                     RDATA                     //                                               /+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>NAMEï¼šä¸å®šé•¿ä¸ä¹‹å‰QNAMEç›¸åŒ,è¿™é‡Œä¼šä½¿ç”¨çœç•¥å­—æ®µï¼šå‰ä¸¤bitä¸º11è¡¨ç¤ºå‹ç¼©æ ¼å¼ï¼Œè€Œåé¢è·Ÿçš„14bitè¡¨ç¤ºçš„æ˜¯Nameæ‰€åœ¨çš„ä½ç½®ç›¸å¯¹äºDNSé¦–éƒ¨çš„åç§»å€¼<br>å¦‚ï¼šä¹‹å‰çš„headeræ•°ç»„ä¸­å‡ºç°è¿‡3www6google3com0,ä¸”å¤„çš„ä½ç½®ä¸º12,è¿™é‡Œå°±å¯ä»¥ç”¨192 12ä¸¤ä¸ªå­—èŠ‚æ¥çœç•¥(192æ˜¯å› ä¸º11000000,å‰ä¸¤ä½ä¸º11)</li><li>QTYPEï¼šä¸ä¹‹å‰çš„TYPEç›¸åŒ</li><li>CLASSï¼šä¸ä¹‹å‰çš„QCLASSç›¸åŒ</li><li>TTL: å°±æ˜¯TTL å¯ä»¥ä½¿ç”¨æœç´¢å¼•æ“æŸ¥è¯¢ä¸€ä¸‹</li><li>RDLENGTH: RDATAçš„é•¿åº¦</li></ul><p>è¿™ä¸ªAnswer sectionä¸ä¹‹å‰çš„headerä¸åŒ,å¹¶ä¸æ˜¯åªå‡ºç°ä¸€æ¬¡,ä¸headerä¸­ANCOUNTæœ‰å…³,å¦‚æœANCOUNTä¸ä¸º1,åé¢å°±ä¼šå‡ºç°å¤šä¸ª,è¦ä½¿ç”¨å¾ªç¯æ¥è·å–æ‰€æœ‰åº”ç­”æ•°æ®</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// resolve answer</span>anCount<span class="token punctuation">,</span> c<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">resolveHeader</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> b<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err<span class="token punctuation">&#125;</span><span class="token comment">// answer section</span>log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span>log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Answer section:"</span><span class="token punctuation">)</span><span class="token keyword">var</span> x <span class="token builtin">string</span><span class="token keyword">for</span> anCount <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>  x<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token function">getName</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> b<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>  log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>  tYPE <span class="token operator">:=</span> reqType<span class="token punctuation">&#123;</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span>  log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"type:"</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// type</span>  log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"class:"</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// class</span>  log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ttl:"</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// ttl 4byte</span>  sum <span class="token operator">:=</span> <span class="token function">int</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token function">int</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"rdlength"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span>  c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// RDLENGTH  è·³è¿‡æ€»å’Œï¼Œå› ä¸ºæ€»å’Œä¸åŒ…æ‹¬è®¡ç®—åŸŸåçš„é•¿åº¦ 2+int(c[0])&lt;&lt;8+int(c[1])</span>  <span class="token keyword">switch</span> tYPE <span class="token punctuation">&#123;</span>  <span class="token keyword">case</span> A<span class="token punctuation">:</span>    DNS <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>DNS<span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// 4 byte ip addr</span>  <span class="token keyword">case</span> AAAA<span class="token punctuation">:</span>    DNS <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>DNS<span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// 16 byte ip addr</span>  <span class="token keyword">case</span> NS<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> MD<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> MF<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> CNAME<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> SOA<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> MG<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> MB<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> MR<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> NULL<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> WKS<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> PTR<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> HINFO<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> MINFO<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> MX<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">case</span> TXT<span class="token punctuation">:</span>    <span class="token keyword">fallthrough</span>  <span class="token keyword">default</span><span class="token punctuation">:</span>    log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"rdata"</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span><span class="token punctuation">:</span>sum<span class="token punctuation">]</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> c<span class="token punctuation">[</span>sum<span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// RDATA</span>  <span class="token punctuation">&#125;</span>  anCount <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è™½ç„¶è¿™é‡Œæˆ‘åªå¤„ç†äº†A,å’ŒAAAAçš„è¯·æ±‚ç±»å‹,ä½†æ˜¯æ¯ä¸ªç±»å‹çš„æ•°æ®æ ¼å¼åœ¨<a href="https://www.ietf.org/rfc/rfc1035.txt">rfc1035</a>éƒ½æœ‰è¯¦ç»†è®°å½•,æƒ³è¦è‡ªå·±å®ç°å¹¶ä¸éš¾,æ¯•ç«Ÿæˆ‘ä»¬å·²ç»å®Œæˆçš„å¤§éƒ¨åˆ†çš„æ•°æ®è§£æ,å‰©ä¸‹çš„ä¸€ç‚¹ä¹Ÿåº”è¯¥é—®é¢˜ä¸å¤§.</p><hr><blockquote><p><a href="https://www.ietf.org/rfc/rfc1035.txt">rfc1035</a><br><a href="https://www.ietf.org/rfc/rfc3596.txt">rfc3596</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™ä¸ªDNSç³»åˆ—ç°åœ¨æœ‰ä»¥ä¸‹å‡ ç¯‡æ–‡ç« &lt;br&gt;
&lt;a href=&quot;/posts/f05986bf/&quot;&gt;DNS&lt;/a&gt;  &lt;a href=&quot;/posts/668530ca/&quot;&gt;EDNS&lt;/a&gt; &lt;a href=&quot;/posts/1751943e/&quot;&gt;DNSSEC&lt;/a&gt; &lt;a href=&quot;/posts/4b39445f/&quot;&gt;DNS over HTTPS&lt;/a&gt; å®Œæ•´ä»£ç è¯·çœ‹&lt;a href=&quot;https://github.com/Asutorufa/yuhaiin/tree/master/net/dns&quot;&gt;DNS&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;DNS-Header&quot;&gt;DNS Header&lt;/h2&gt;
&lt;pre class=&quot;line-numbers language-txt&quot; data-language=&quot;txt&quot;&gt;&lt;code class=&quot;language-txt&quot;&gt;                                1  1  1  1  1  1
  0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                      ID                       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|QR|   Opcode  |AA|TC|RD|RA|   Z    |   RCODE   |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                    QDCOUNT                    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                    ANCOUNT                    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                    NSCOUNT                    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                    ARCOUNT                    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;headeråœ¨dnsè¯·æ±‚å’Œåº”ç­”ä¸­ç›¸åŒçš„,æŸ¥è¯¢ä¸­æœ‰Query Section,åº”ç­”ä¸­æœ‰answer section.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ID: 2å­—èŠ‚,åº”ç­”ä¸­ä¹Ÿæœ‰ID,å¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯å¦ä¸ºæˆ‘ä»¬è¯·æ±‚çš„åº”ç­”&lt;/li&gt;
&lt;li&gt;QRï¼š1bit,è¯·æ±‚æ—¶ä¸º0,åº”ç­”æ—¶ä¸º1&lt;/li&gt;
&lt;li&gt;Opcodeï¼š4bit é€šå¸¸å€¼ä¸º0ï¼ˆæ ‡å‡†æŸ¥è¯¢ï¼‰ï¼Œå…¶ä»–å€¼ä¸º1ï¼ˆåå‘æŸ¥è¯¢ï¼‰å’Œ2ï¼ˆæœåŠ¡å™¨çŠ¶æ€è¯·æ±‚ï¼‰,[3,15]ä¿ç•™å€¼&lt;/li&gt;
&lt;li&gt;AAï¼š1bit authoritative answer,åœ¨åº”ç­”ä¸­æ‰æœ‰æ•ˆ&lt;/li&gt;
&lt;li&gt;TCï¼š1bit è¡¨ç¤ºå¯æˆªæ–­&lt;/li&gt;
&lt;li&gt;RDï¼š1bit æœŸæœ›ä½¿ç”¨é€’å½’æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;RAï¼š1bit åœ¨åº”ç­”ä¸­è¿”å›,è¿”å›æœåŠ¡å™¨æ˜¯å¦æ”¯æŒé€’å½’æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;Zï¼š Reserved for future use.&lt;/li&gt;
&lt;li&gt;RCODEï¼š4bit,åº”ç­”ç ,ä»£è¡¨è¿”å›çš„çŠ¶æ€
&lt;ul&gt;
&lt;li&gt;0 No Error&lt;/li&gt;
&lt;li&gt;1 Format error æ ¼å¼é”™è¯¯&lt;/li&gt;
&lt;li&gt;2 Server failure æœåŠ¡å™¨å¤±è´¥&lt;/li&gt;
&lt;li&gt;3 Name Error æŸ¥è¯¢åŸŸåé”™è¯¯&lt;/li&gt;
&lt;li&gt;4 Not Implemented æœªå®ç°çš„æŸ¥è¯¢æ–¹å¼&lt;/li&gt;
&lt;li&gt;5 Refused æ‹’ç»&lt;/li&gt;
&lt;li&gt;6-15 Reserved for future use.</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="golang" scheme="https://asutorufa.github.io/tags/golang/"/>
    
    <category term="DNS" scheme="https://asutorufa.github.io/tags/DNS/"/>
    
    <category term="UDP" scheme="https://asutorufa.github.io/tags/UDP/"/>
    
  </entry>
  
  <entry>
    <title>ç¿»è¯‘-Cç¨‹åºå‘˜æ‰€åº”è¯¥çŸ¥é“çš„å†…å­˜</title>
    <link href="https://asutorufa.github.io/posts/f87fc9f0/"/>
    <id>https://asutorufa.github.io/posts/f87fc9f0/</id>
    <published>2020-05-04T00:26:24.000Z</published>
    <updated>2020-05-04T00:26:24.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åŸæ–‡ç«  <a href="https://marek.vavrusa.com/memory/#mmap-fun">What a C programmer should know about memory</a><br>æç¤º: <strong>æœ¬ç¯‡æ–‡ç« çš„å›¾ç‰‡éƒ½æ˜¯ç›´æ¥ä½¿ç”¨åŸæ–‡ä¸­çš„å›¾ç‰‡çš„åœ°å€,å¦‚æœæ— æ³•æ˜¾ç¤º,è¯·æŒ‚ä»£ç†</strong></p></blockquote><hr><p>2007å¹´,Ulrich Drepperå†™äº†ä¸€ç¯‡&quot;<a href="http://www.akkadia.org/drepper/cpumemory.pdf">æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥çŸ¥é“çš„å†…å­˜</a>&quot;.æ˜¯çš„,è™½ç„¶è¿™ç¯‡æ–‡ç« åˆç»†åˆé•¿,ä½†åšåˆ°äº†å®ƒæ‰€åº”åšåˆ°çš„.å¾ˆå¤šå¹´å,è™šæ‹Ÿå†…å­˜çš„æ¦‚å¿µå¯¹äºå¾ˆå¤šäººæ¥è¯´ä»ç„¶éš¾ä»¥ç¢ç£¨,ä»¿ä½›æ˜¯æŸç§é­”æ³•.æˆ‘æ— æ³•æŠ—æ‹’çš„å¼•ç”¨ä¸€ä¸‹.å¾ˆå¤šå¹´åç”šè‡³åŸå§‹æ–‡ç« çš„æœ‰æ•ˆæ€§ä¹Ÿè¢«<a href="https://stackoverflow.com/questions/8126311/what-every-programmer-should-know-about-memory">è´¨ç–‘</a>,åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆäº‹?</p><blockquote><p>åŒ—æ¡¥,è¿™æ˜¯ä»€ä¹ˆä¸œè¥¿?é‚£ä¸æ˜¯å··æˆ˜.</p></blockquote><p>æˆ‘å°è¯•ä»&quot;å­¦ä¹ é”çš„åŸºæœ¬åŸç†&quot;å»ä¼ è¾¾å®ç”¨çš„ä¸€é¢(æ¯”å¦‚:ä½ èƒ½åšä»€ä¹ˆ)å’Œæ›´å¤šæœ‰è¶£çš„ä¸œè¥¿.å¯ä»¥çœ‹å¾…è¿™æ˜¯ä¸€ä¸ªèƒ¶æ°´åœ¨åŸå§‹æ–‡ç« å’Œä½ æ¯å¤©ä½¿ç”¨çš„ä¸œè¥¿ä¹‹é—´.ä¾‹å­å°†ä½¿ç”¨linuxä¸Šçš„C99,ä½†æ˜¯æ›´å¤šä¸»é¢˜å°†æ˜¯æ™®éçš„.<br>ç¼–è¾‘: è™½ç„¶æˆ‘å¯¹Windowsä¸äº†è§£,ä½†æˆ‘å¾ˆä¹æ„è”ç³»æ–‡ç« å»è§£é‡Š.æˆ‘ä¼šå°½å…¨åŠ›å»æèµ·ä»€ä¹ˆå‡½æ•°æ˜¯å¹³å°ç‰¹æœ‰çš„,ä½†æ˜¯å†ä¸€æ¬¡æˆ‘åªæ˜¯ä¸€ä¸ªäºº.å¦‚æœä½ å‘ç°å‡ºå…¥,è¯·è®©æˆ‘çŸ¥é“.<br>äº‹ä¸å®œè¿Ÿï¼Œå€’ä¸€æ¯å’–å•¡ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><p>è¯‘è€…æ³¨:</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">worth one's salt:    good or competent at the job or profession specified.    ig:"any astrologer worth her salt would have predicted this"what gives?    æ˜¯åœ¨è‹±è¯­å¯¹è¯ä¸­å¸¸ç”¨çš„ä¸€å¥å£è¯­    é€šå¸¸ç”¨å®ƒçš„æ—¶å€™åªæœ‰ä¸¤å±‚æ„æ€    ä¸€ä¸ªæ˜¯What's happening?å‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿ    å¦ä¸€ä¸ªæ˜¯What is the news?æœ‰ä»€ä¹ˆæ¶ˆæ¯ï¼Ÿthe practical side    å®ç”¨çš„ä¸€é¢<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç†è§£è™šæ‹Ÿå†…å­˜-å¤æ‚ä¸”ç¥ç§˜">ç†è§£è™šæ‹Ÿå†…å­˜ - å¤æ‚ä¸”ç¥ç§˜</h2><p>é™¤éä½ è¦å¤„ç†ä¸€äº›åµŒå…¥ç³»ç»Ÿæˆ–å†…æ ¸ç©ºé—´çš„ä»£ç ,å¦åˆ™ä½ åº”è¯¥åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹è¿›è¡Œ.è¿™å¤ªæ£’äº†,ä½ çš„ç¨‹åºä¸€å®šæ‹¥æœ‰å®ƒè‡ªå·±çš„[è™šæ‹Ÿ]åœ°å€ç©ºé—´.â€œè™šæ‹Ÿ&quot;åœ¨è¿™é‡Œå¾ˆé‡è¦.è¿™æ„å‘³ç€,é™¤äº†å…¶ä»–äº‹æƒ…å¤–,ä½ ä¸ä¼šè¢«å¯ä½¿ç”¨çš„å†…å­˜é™åˆ¶,ä½†æ˜¯ä¹Ÿæ— æƒè·å¾—ä»»ä½•.ä¸ºäº†ä½¿ç”¨è¿™äº›ç©ºé—´,ä½ ä¸å¾—å‘æ“ä½œç³»ç»Ÿè¦ä¸€äº›çœŸä¸œè¥¿æ¥ä½œåæ´,è¿™è¢«å«åšæ˜ å°„.åæ´å¯èƒ½æ˜¯ç‰©ç†å†…å­˜,ä¹Ÿå¯èƒ½æ˜¯æŒä¹…æ€§å­˜å‚¨.å‰è€…ä¹Ÿè¢«å«åš&quot;åŒ¿åæ˜ å°„â€.ä½†æ˜¯,ç¨å®‰å‹¿èº.<span id="more"></span><br>è™šæ‹Ÿå†…å­˜åˆ†é…(virtual memory allocator=VMA)å¯ä»¥ç»™ä½ æ‰€ä¸å­˜åœ¨çš„å†…å­˜,ä»–åªèƒ½å¾’åŠ³çš„å¸Œæœ›ä½ ä¸è¦å»ä½¿ç”¨å®ƒ,å°±åƒç°åœ¨çš„é“¶è¡Œ.è¿™æ˜¯è¿‡é‡ä½¿ç”¨(<a href="https://www.kernel.org/doc/Documentation/vm/overcommit-accounting">overcommiting</a>),å¹¶ä¸”ä¹Ÿå­˜åœ¨æœ‰éœ€æ±‚çš„ç¨‹åº(ç¨€ç–æ•°ç»„),è¿™ä¹Ÿæ„å‘³ç€å†…å­˜åˆ†é…ä¸èƒ½ç®€å•çš„è¯´&quot;ä¸&quot;.</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">char</span> <span class="token operator">*</span>block <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>block <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token operator">-</span>ENOMEM<span class="token punctuation">;</span> <span class="token comment">/* Sad :( */</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ£€æŸ¥NULLæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•,ä½†ä¹Ÿæ²¡æœ‰æ›¾ç»é‚£ä¹ˆå¼ºå¤§.å› ä¸ºè¿‡é‡ä½¿ç”¨(overcommiting)çš„å­˜åœ¨,æ“ä½œç³»ç»Ÿå¯èƒ½ç»™ä½ çš„å†…å­˜åˆ†é…å™¨åˆ†é…ä¸€ä¸ªæœ‰æ•ˆçš„å†…å­˜æŒ‡é’ˆ,ä½†å½“ä½ å»è®¿é—®æ—¶-dang*.è¿™é‡Œçš„dangæ˜¯æœ‰å¹³å°å·®å¼‚çš„,ä½†æ™®éæƒ…å†µä¸‹<a href="http://www.win.tue.nl/~aeb/linux/lk/lk-9.html#ss9.6">oom(out-of-memory) killer</a>å°†ç»“æŸä½ çš„ç¨‹åº.</p><p><em>è¿™é‡Œè¿‡äºç®€å•,as timbatron noted,å¹¶ä¸”å°†åœ¨<a href="https://marek.vavrusa.com/memory/#pagefault">è§£é‡ŠæŒ‰éœ€åˆ†é¡µ</a>èŠ‚è§£é‡Š.ä½†æ˜¯æˆ‘æƒ³è¦åœ¨ç ”ç©¶ç»†èŠ‚ä¹‹å‰å…ˆè¿‡ä¸€éæ›´æ™®éçš„çŸ¥è¯†.</em></p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">the plot thickens    said to mean that a complicated situation or series of events starts to become even more complicated or mysterious    At this point the plot thickened further. A link emerged between the attempt to kill the Pope and the kidnapping of the American.guaranteed ç¾ [ËŒÉ¡erÉ™nËˆtid] è‹± [ËŒÉ¡Ã¦rÉ™nËˆtiËd]    adj. å¿…å®šçš„ï¼Œè‚¯å®šçš„bounded ç¾ ['baundid] è‹± [ËˆbaÊŠndÉªd]    æœ‰ç•Œé™çš„, æœ‰é™åˆ¶çš„entitled ç¾ [É›nËˆtaÉªtÉ™ld; ÉªnËˆtaÉªtÉ™ld] è‹± [ÉªnËˆtaÉªtÉ™ld]    adj. æœ‰èµ„æ ¼çš„hold your horses<span class="token code keyword">    used to tell someone to stop and consider carefully their decision or opinion about something:    Just hold your horses, Bill! Let's think about this for a moment.    åœä¸‹ä¾†æƒ³æƒ³ï¼Œä¸”æ…¢â€¦ ç¨å®‰å‹¿èº</span>vain ç¾ [veÉªn] è‹± [veÉªn]    adj. å¾’åŠ³çš„a good practice ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç»•é“-å†…å­˜å¸ƒå±€">ç»•é“ - å†…å­˜å¸ƒå±€</h2><p>è¿›ç¨‹å†…å­˜çš„å¸ƒå±€å·²ç»å¾ˆå¥½çš„åœ¨Gustavo Duarteæ‰€è‘—çš„<a href="http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory/">å‰–æç¨‹åºå†…å­˜ä¸­</a>ä¸­è¿›è¡Œè§£é‡Š,æ‰€ä»¥æˆ‘å°†å¼•ç”¨å¹¶å‚è€ƒåŸå§‹æ–‡ç« ,æˆ‘å¸Œæœ›è¿™æ˜¯åˆç†çš„ä½¿ç”¨.æˆ‘åªæœ‰ä¸€ç‚¹æƒ³è¦å¹æ¯›æ±‚ç–µä¸€ä¸‹,é‚£å°±æ˜¯ä»–åªè®²åˆ°äº†x86-32çš„å†…å­˜å¸ƒå±€,ä½†æ˜¯å¹¸è¿çš„æ˜¯åœ¨x86-64ä¸­å¹¶æ²¡æœ‰å¤šå¤§çš„å˜åŒ–,åªæ˜¯è¿›ç¨‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ç©ºé—´ - åœ¨linuxä¸­é«˜è¾¾ 48 bits.</p><p><img src="http://static.duartes.org/img/blogPosts/linuxFlexibleAddressSpaceLayout.png" alt="linuxå†…å­˜å¸ƒå±€" loading="lazy"></p><center>Source: Linux address space layout by <a href="http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory/">Gustavo Duarte</a></center><p>è¿™ä¹Ÿå±•ç¤ºäº†å†…å­˜æ˜ å°„æ®µ(<code>memory mapping segment</code>=MMS)æ˜¯å‘ä¸‹å¢é•¿çš„,ä½†æ˜¯å¹¶éæ€»æ˜¯å¦‚æ­¤.å†…å­˜æ˜ å°„æ®µé€šå¸¸å¼€å§‹ä¸(<a href="http://lxr.free-electrons.com/source/mm/mmap.c#L1953">x86/mm/mmap.c:113</a>å’Œ<a href="http://lxr.free-electrons.com/source/arch/x86/mm/mmap.c#L113">arch/mm/mmap.c:1953</a>)ä¸€ä¸ªæ ˆåº•çš„éšæœºåœ°å€.ä½†ä¹Ÿå¯ä»¥å¼€å§‹äºæ ˆä¹‹ä¸Šæˆ–å‘æ ˆä¹‹ä¸Šå¢é•¿å½“ä¸”ä»…å½“æ ˆå¾ˆå¤§æˆ–æ ˆæ— é™å¤§,æˆ–è€…å…¼å®¹å¸ƒå±€æ˜¯è¢«å…è®¸çš„.è¿™é‡è¦å—?ä¸,ä½†æ˜¯è¿™å°†å¸®åŠ©ä½ ç†è§£<a href="https://marek.vavrusa.com/memory/#mmap-fun">è‡ªç”±åœ°å€èŒƒå›´</a>.<br>çœ‹é‚£ä¸ªå›¾è¡¨,ä½ å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªä¸åŒçš„å˜é‡å­˜æ”¾ä½ç½®:è¿›ç¨‹æ•°æ®æ®µ(é™æ€å­˜å‚¨æˆ–å †åˆ†é…),å†…å­˜æ˜ å°„æ®µ,å’Œæ ˆ.è®©æˆ‘ä»¬ä»è¿™ä¸ªå¼€å§‹</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">anatomy ç¾ [É™ËˆnÃ¦tÉ™mi] è‹± [É™ËˆnÃ¦tÉ™mÉª]    n. è§£å‰–å­¦ï¼›ç»“æ„ï¼›èº«ä½“ï¼›å‰–æquibble ç¾ [ËˆkwÉªbÉ™l] è‹± [ËˆkwÉªbÉ™l]    vi /ËˆkwÉªbÉ™l/        1.ï¼ˆå°¤æŒ‡ä¸ºæªå¡ï¼‰å¹æ¯›æ±‚ç–µï¼Œè¯¡è¾©        2.ç”¨åŒå…³è¯­ï¼›è¯´ä¿çš®è¯    n /ËˆkwÉªbÉ™l/        1.ï¼ˆå°¤æŒ‡ä¸ºæªå¡ï¼‰å¹æ¯›æ±‚ç–µï¼ŒæŠ±æ€¨        2.åŒå…³è¯­fair ç¾ [fÉ›r] è‹± [fÉ›É™]    åˆç†çš„iff [if]    abbr. (= if and only if) å½“ä¸”ä»…å½“<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº†è§£æ ˆåˆ†é…">äº†è§£æ ˆåˆ†é…</h2><p>å®ç”¨è…°å¸¦(è¯‘è€…æ³¨ï¼šæ­¤å¤„ä¸ºç›´è¯‘ï¼ŒåŸæ–‡ä¸ºUtility belt)ï¼š</p><ul><li><a href="https://linux.die.net/man/3/alloca">alloca()-åœ¨è°ƒç”¨è€…çš„æ ˆå¸§ä¸­åˆ†é…å†…å­˜</a></li><li><a href="https://linux.die.net/man/2/getrlimit">getrlimit()-è·å–/è®¾ç½®èµ„æºé™åˆ¶</a></li><li><a href="https://linux.die.net/man/2/sigaltstack">sigaltstack()-è®¾ç½®å¹¶ä¸”(æˆ–)å¾—åˆ°ä¿¡å·æ ˆä¸Šä¸‹æ–‡</a></li></ul><p>æ ˆæ˜“äºç†è§£,æ‰€æœ‰äººéƒ½çŸ¥é“å¦‚ä½•åœ¨æ ˆä¸­åˆ›å»ºä¸€ä¸ªå˜é‡,ä¸æ˜¯å—?<br>è¿™é‡Œæœ‰ä¸¤ä¸ªä¾‹å­:</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> stairway <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">int</span> heaven<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å˜é‡çš„æœ‰æ•ˆæ€§è¢«èŒƒå›´æ‰€é™åˆ¶.åœ¨Cè¯­è¨€ä¸­,è¿™æ„å‘³ç€:<code>&#123;&#125;</code>.æ‰€ä»¥æ¯æ¬¡å‡ºç°å³èŠ±æ‹¬å·æ—¶å°±æ„å‘³ç€ä¸€ä¸ªå˜é‡çš„ç»“æŸ.ç„¶åè¿™é‡Œæœ‰<a href="https://linux.die.net/man/3/alloca">alloca()</a>,å…è®¸åœ¨å½“å‰çš„æ ˆå¸§ä¸­åŠ¨æ€åˆ†é…å†…å­˜.æ ˆå¸§ä¸å†…å­˜æ¡†æ¶(memory frame)(ä¹Ÿè¢«å«åšç‰©ç†é¡µ(physical page))ä¸åŒ,è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å¯ä»¥è¢«æ”¾å…¥æ ˆä¸­çš„æ•°æ®ç»„(å‡½æ•°,å‚æ•°,å˜é‡â€¦).æ¯å½“æˆ‘ä»¬åœ¨æ ˆé¡¶æ—¶,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰©ä½™çš„å†…å­˜ç›´åˆ°è¾¾åˆ°æ ˆçš„å¤§å°é™åˆ¶.<br>è¿™å°±æ˜¯å¯å˜é•¿æ•°ç»„(variable-length arrays=VLA),ä»¥åŠalloca()çš„å·¥ä½œæ–¹å¼,ä½†æ˜¯æœ‰ä¸€ä¸ªä¸åŒ-å¯å˜é•¿çš„æ•°ç»„çš„æœ‰æ•ˆæ€§è¢«èŒƒå›´é™åˆ¶,allocaå°†ä¿ç•™å†…å­˜ç›´åˆ°å‡½æ•°è¿”å›(æˆ–è¢«é‡Šæ”¾).è¿™ä¸æ˜¯å•çº¯çš„è¯­æ³•è­¦å¯Ÿ(è¯‘è€…æ³¨:åŸæ–‡language lawyering,è¿™èŠ‚ä¸‹é¢æœ‰è¯¦ç»†ç¿»è¯‘),è¿™ç¡®å®æ˜¯ä¸€ä¸ªé—®é¢˜å¦‚æœä½ åœ¨å¾ªç¯ä¸­ä½¿ç”¨alloca,å› ä¸ºä½ æ²¡æœ‰ä»»ä½•æ‰‹æ®µå»é‡Šæ”¾å®ƒ.</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">laugh</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> megatron<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">char</span> <span class="token operator">*</span>res <span class="token operator">=</span> <span class="token function">alloca</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">memcpy</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">"ha"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">char</span> vla<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token char">'h'</span><span class="token punctuation">,</span><span class="token char">'a'</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span> <span class="token comment">/* vla dies, res lives */</span><span class="token punctuation">&#125;</span> <span class="token comment">/* all allocas die */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯å˜é•¿æ•°ç»„å’Œallocaéƒ½ä¸é€‚åˆå¤§åˆ†é…,å› ä¸ºä½ å‡ ä¹æ²¡æœ‰æ§åˆ¶å¯ç”¨çš„æ ˆå†…å­˜å¹¶ä¸”è¶…è¿‡æ ˆé™åˆ¶çš„åˆ†é…å°†å¯¼è‡´æ ˆæº¢å‡º.è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•,ä½†éƒ½ä¸å®ç”¨.<br>ç¬¬ä¸€ä¸ªæ–¹æ³•å°±æ˜¯ä½¿ç”¨sigaltstack()å»æŠ“è·<code>SIGSEGV</code>å¹¶å¤„ç†.ç„¶è€Œè¿™ä»…ä»…æ˜¯è®©ä½ æŠ“è·åˆ°æ ˆæº¢å‡º.<br>å¦ä¸€ä¸ªæ–¹æ³•æ˜¯ä»¥<code>split-stacks</code>è¿›è¡Œç¼–è¯‘,é¡¾åæ€ä¹‰,è¿™çœŸçš„å°±æ˜¯æŠŠå•ç‰‡æ ˆåˆ†ä¸ºè¾ƒå°çš„æ ˆé“¾è¡¨ä¹Ÿè¢«å«åš<code>stacklets</code>.å°±æˆ‘æ‰€çŸ¥,GCCå’Œclangéƒ½æ”¯æŒ-fsplit-stacké€‰é¡¹.ç†è®ºä¸Šè¿™ä¹Ÿæ”¹å–„äº†å†…å­˜çš„æ¶ˆè€—é‡å¹¶ä¸”é™ä½äº†åˆ›å»ºçº¿ç¨‹çš„æˆæœ¬ - å› ä¸ºæ ˆä¸€å¼€å§‹å°±å¾ˆå°å¹¶ä¸”æŒ‰éœ€å¢é•¿.å®é™…ä¸Š,é¢„æœŸå¯èƒ½ä¼šæœ‰å…¼å®¹æ€§é—®é¢˜,å› ä¸ºä»–éœ€è¦ä¸€ä¸ªsplit-stacké“¾è¡¨æ„ŸçŸ¥å™¨(è¯‘è€…æ³¨:åŸæ–‡aware linker)(å¦‚:gold)ä¸split-stack unawareåº“é…åˆä½¿ç”¨,è€Œä¸”è¿˜æœ‰æ€§èƒ½é—®é¢˜(Agis Anastasopoulosçš„&quot;hot split&quot;åœ¨Goä¸­æ˜¯ä¸ªå¾ˆå¥½çš„<a href="http://agis.io/2014/03/25/contiguous-stacks-in-go.html">è§£é‡Š</a>)</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">Stack Frame æ ˆå¸§digest [ËˆdaÉªËŒdÊ’É›st]    ç†è§£a variable dies å˜é‡çš„ç»“æŸaka = also-known-asthis is how è¿™å°±æ˜¯...means [mÄ“nz]    åè¯ æ‰‹æ®µ; æ–¹æ³•; å·¥å…·; åŠæ³•; å¾„; ç¹‡; æ¬¾grow on demand æŒ‰éœ€å¢é•¿play nice with é…åˆscope ç¾ [skoÊŠp] è‹± [skÉ™ÊŠp]    n. èŒƒå›´ï¼Œé¢†åŸŸï¼›remaining å…¶ä½™<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>language lawyer</strong> from <a href="https://www.reddit.com/r/cpp/comments/52yd5s/what_does_stroustrup_mean_by_language_lawyers_hes/">What does Stroustrup mean by â€˜language lawyersâ€™? Heâ€™s said it more than a few times.</a><br>A language lawyer is generally someone that is familiar enough with the details of the standard that they can quote it chapter and verse in order to answer a question, solve a problem, prove a point, etc. The standard is the ultimate authority on what is and isnâ€™t valid C++, and much like the law itâ€™s written in very technical and precise language that requires some effort to really unpack, so there are several parallels to the field of law.<br>It can have both positive and negative connotations. The idea is that you shouldnâ€™t need to be a language lawyer to be able to learn and use the language. At the same time, having a single document that precisely defines the semantics of the language is a significant advantage that many other languages lack, so the fact that itâ€™s possible to be a language lawyer is not an automatic negative. In order to have compatible implementations itâ€™s necessary to define all the edge conditions and dark corners of the language, even if it results in some truly out there passages of the standard.</p><h2 id="äº†è§£å †åˆ†é…">äº†è§£å †åˆ†é…</h2><p>Utility belt:</p><ul><li><a href="https://linux.die.net/man/2/sbrk">brk(), sbrk() - manipulate the data segment size</a></li><li><a href="https://linux.die.net/man/3/malloc">malloc() family - portable libc memory allocator</a></li></ul><p>å †åˆ†é…å¯ä»¥ç®€å•çš„çœ‹ä½œæ˜¯ç§»åŠ¨å †æ®µçš„ç»“æŸä½ç½®(<a href="https://linux.die.net/man/2/sbrk">program break</a>)å’Œå£°æ˜å†…å­˜åœ¨æ—§ä½ç½®å’Œæ–°ä½ç½®ä¹‹é—´ã€‚åˆ°äº†è¿™ä¸€ç‚¹ï¼Œå †åˆ†é…å’Œæ ˆåˆ†é…ä¸€æ ·å¿«(æ²¡æœ‰åˆ†é¡µï¼Œå‡è®¾æ ˆå·²é”å®šåœ¨å†…å­˜ä¸­)ã€‚ä½†æ˜¯æœ‰ä¸€åªçŒ«(cat)ï¼Œæˆ‘çš„æ„æ€æ˜¯æ•è·(catch)ï¼Œè¯¥æ­»çš„(dammit)ã€‚</p><pre class="language-c" data-language="c"><code class="language-c"><span class="token keyword">char</span> <span class="token operator">*</span>block <span class="token operator">=</span> <span class="token function">sbrk</span><span class="token punctuation">(</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>(1)æˆ‘ä»¬ä¸èƒ½é‡æ–°å£°æ˜æœªä½¿ç”¨çš„å†…å­˜å—ï¼Œ(2)ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºå †åœ¨çº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œ(3)æ¥å£å¾ˆéš¾ç§»æ¤ï¼Œåº“ä¸èƒ½æ¥è§¦åˆ°ä¸­æ–­</p><blockquote><p>man 3 sbrk â€” Various systems use various types for the argument of sbrk(). Common are int, ssize_t, ptrdiff_t, intptr_t.</p></blockquote><p>ç”±äºè¿™äº›åŸå› ï¼Œlibcå®ç°äº†ç”¨äºå†…å­˜åˆ†é…çš„é›†ä¸­å¼æ¥å£ã€‚å®ç°æ–¹å¼<a href="https://en.wikibooks.org/wiki/C_Programming/C_Reference/stdlib.h/malloc#Implementations">å„ä¸ç›¸åŒ</a>ï¼Œä½†æ˜¯å®ƒæ”¯æŒçº¿ç¨‹å®‰å…¨çš„ä»»æ„å¤§å°çš„å†…å­˜åˆ†é…â€¦ä½†æœ‰ä»£ä»·ã€‚ä»£ä»·æ˜¯å»¶è¿Ÿï¼Œå› ä¸ºè¿™é‡Œè¿˜æ¶‰åŠé”ï¼Œæ•°æ®ç»“æ„ä¿ç•™æœ‰å…³å·²ç”¨/å¯ç”¨å—çš„ä¿¡æ¯ä»¥åŠé¢å¤–çš„å†…å­˜å¼€é”€ã€‚å †ä¹Ÿä¸æ˜¯å”¯ä¸€ä½¿ç”¨çš„ï¼Œå› ä¸ºå†…å­˜æ˜ å°„æ®µä¹Ÿç»å¸¸åº”ç”¨äºå¤§å†…å­˜å—ã€‚</p><blockquote><p>man 3 malloc â€” Normally, malloc() allocates memory from the heap, â€¦ when allocating blocks of memory larger than<br>MMAP_THRESHOLD, the glibc malloc() implementation allocates the memory as a private anonymous mapping.</p></blockquote><p>å› ä¸ºä»<code>start_brk</code>åˆ°<code>brk</code>å †æ€»æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥ä½ ä¸èƒ½ç²¾ç¡®é’»å–æ¼æ´ç©¿è¿‡å®ƒå¹¶å‡å°‘æ•°æ®æ®µå¤§å°ã€‚æƒ³è±¡ä»¥ä¸‹æƒ…èŠ‚ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">char</span> <span class="token operator">*</span>truck <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">char</span> <span class="token operator">*</span>bike  <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">free</span><span class="token punctuation">(</span>truck<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å †[åˆ†é…å™¨]ç§»åŠ¨<code>brk</code>ä¸º<code>truck</code>è…¾å‡ºç©ºé—´ã€‚åŒæ ·ä¸º<code>bike</code>ä¹Ÿè¿›è¡Œç›¸åŒçš„æ“ä½œã€‚ä½†æ˜¯åœ¨<code>truck</code>é‡Šæ”¾åï¼Œ<code>brk</code>ä¹Ÿæ— æ³•é™çº§(å‘ä¸‹ç§»)ï¼Œå› ä¸º<code>bike</code>å æ®æœ€é«˜æ®µåœ°å€ã€‚ç»“è®ºå°±æ˜¯ä½ çš„ç¨‹åºå¯ä»¥é‡ç”¨ä¹‹å‰<code>truck</code>çš„å†…å­˜ï¼Œä½†æ˜¯ä¸ä¼šè¢«äº¤å›ç³»ç»Ÿç›´åˆ°<code>bike</code>è¢«é‡Šæ”¾ã€‚<br>å‡è®¾<code>truck</code>è¢«æ˜ å°„ï¼Œå®ƒå°†ä¸èƒ½å¤„äºå †æ®µï¼Œå¹¶ä¸”ä¸èƒ½å½±å“ç¨‹åºä¸­æ–­(program break)ã€‚ä¸è¿‡ï¼Œè¿™ç§æŠ€å·§å¹¶ä¸èƒ½é˜»æ­¢å› å°åˆ†é…(å¦ä¸€ç§è¯´æ³•ä¹Ÿå«â€œç¢ç‰‡åŒ–â€)è€Œé€ æˆçš„æ¼æ´ã€‚<br>æ³¨æ„<code>free()</code>ä¸æ€»æ˜¯å°è¯•å»ç¼©å°æ•°æ®æ®µï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ª<a href="https://marek.vavrusa.com/memory/#pagefault">æ½œåœ¨çš„æ˜‚è´µæ“ä½œ</a>ã€‚è¿™å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„ç¨‹åºæ¥è¯´æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚å®ˆæŠ¤ç¨‹åºã€‚ä¸€ä¸ªGNUçš„æ‹“å±•ï¼Œè¢«å«åš<a href="https://linux.die.net/man/3/malloc_trim">malloc_trim()</a>ï¼Œç”¨äºä»å †é¡¶éƒ¨é‡Šæ”¾å†…å­˜ï¼Œä½†å¯èƒ½ä¼šå¾ˆæ…¢ã€‚å®ƒå¯¹å¾ˆå¤šå°å¯¹è±¡çš„ä¼¤å®³å¾ˆå¤§ï¼Œå› æ­¤åº”è°¨æ…ä½¿ç”¨ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">sans [sÃ¦nz]    <span class="token bold"><span class="token punctuation">__</span><span class="token content">æ²¡æœ‰</span><span class="token punctuation">__</span></span>,åœ¨å¤–,å¤–éƒ¨portable [ËˆpÉ”ËtÉ™bÉ™l]    å¯ç§»æ¤çš„The cost    ä»£ä»·utilised    adj. è¢«åˆ©ç”¨çš„exclusively [iks'klu:sivli]    adv. ç‹¬å åœ°ï¼Œä¸“é—¨åœ°ï¼Œå®Œå…¨åœ°contiguous [kÉ™nËˆtÉªgjuÉ™s]    adj. é‚»è¿‘çš„ï¼›<span class="token bold"><span class="token punctuation">__</span><span class="token content">è¿ç»­çš„</span><span class="token punctuation">__</span></span>scenario [sÉ™ËˆnÉ›riËŒoÊŠ]    n. <span class="token bold"><span class="token punctuation">__</span><span class="token content">æƒ…èŠ‚</span><span class="token punctuation">__</span></span>ï¼›å‰§æœ¬ï¼›æ–¹æ¡ˆreuse [riËˆjuz]    n. å†ç”¨ï¼Œé‡æ–°ä½¿ç”¨    v. å†ç”¨ï¼Œé‡æ–°ä½¿ç”¨fragmentation [frÃ¦gmÉ™n'teiÊƒÉ™n]    ç¢ç‰‡sparingly [ËˆspeÉ™rÉªÅ‹lÉª]    adv. æ‹˜è°¨åœ°;æœ´å®åœ°;èŠ‚ä¿­åœ°<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æœªå®Œå¾…ç»­-ä¸å®šæ—¶æ¥ç€ç¿»è¯‘">æœªå®Œå¾…ç»­-ä¸å®šæ—¶æ¥ç€ç¿»è¯‘</h2><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">conquering [ËˆkÉ’Å‹kÉ™rÉªÅ‹]    adj /ËˆkÉ’Å‹kÉ™rÉªÅ‹/ è¿›è¡Œå¾æœçš„<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡ç«  &lt;a href=&quot;https://marek.vavrusa.com/memory/#mmap-fun&quot;&gt;What a C programmer should know about memory&lt;/a&gt;&lt;br&gt;
æç¤º: &lt;strong&gt;æœ¬ç¯‡æ–‡ç« çš„å›¾ç‰‡éƒ½æ˜¯ç›´æ¥ä½¿ç”¨åŸæ–‡ä¸­çš„å›¾ç‰‡çš„åœ°å€,å¦‚æœæ— æ³•æ˜¾ç¤º,è¯·æŒ‚ä»£ç†&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;2007å¹´,Ulrich Drepperå†™äº†ä¸€ç¯‡&amp;quot;&lt;a href=&quot;http://www.akkadia.org/drepper/cpumemory.pdf&quot;&gt;æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥çŸ¥é“çš„å†…å­˜&lt;/a&gt;&amp;quot;.æ˜¯çš„,è™½ç„¶è¿™ç¯‡æ–‡ç« åˆç»†åˆé•¿,ä½†åšåˆ°äº†å®ƒæ‰€åº”åšåˆ°çš„.å¾ˆå¤šå¹´å,è™šæ‹Ÿå†…å­˜çš„æ¦‚å¿µå¯¹äºå¾ˆå¤šäººæ¥è¯´ä»ç„¶éš¾ä»¥ç¢ç£¨,ä»¿ä½›æ˜¯æŸç§é­”æ³•.æˆ‘æ— æ³•æŠ—æ‹’çš„å¼•ç”¨ä¸€ä¸‹.å¾ˆå¤šå¹´åç”šè‡³åŸå§‹æ–‡ç« çš„æœ‰æ•ˆæ€§ä¹Ÿè¢«&lt;a href=&quot;https://stackoverflow.com/questions/8126311/what-every-programmer-should-know-about-memory&quot;&gt;è´¨ç–‘&lt;/a&gt;,åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆäº‹?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŒ—æ¡¥,è¿™æ˜¯ä»€ä¹ˆä¸œè¥¿?é‚£ä¸æ˜¯å··æˆ˜.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘å°è¯•ä»&amp;quot;å­¦ä¹ é”çš„åŸºæœ¬åŸç†&amp;quot;å»ä¼ è¾¾å®ç”¨çš„ä¸€é¢(æ¯”å¦‚:ä½ èƒ½åšä»€ä¹ˆ)å’Œæ›´å¤šæœ‰è¶£çš„ä¸œè¥¿.å¯ä»¥çœ‹å¾…è¿™æ˜¯ä¸€ä¸ªèƒ¶æ°´åœ¨åŸå§‹æ–‡ç« å’Œä½ æ¯å¤©ä½¿ç”¨çš„ä¸œè¥¿ä¹‹é—´.ä¾‹å­å°†ä½¿ç”¨linuxä¸Šçš„C99,ä½†æ˜¯æ›´å¤šä¸»é¢˜å°†æ˜¯æ™®éçš„.&lt;br&gt;
ç¼–è¾‘: è™½ç„¶æˆ‘å¯¹Windowsä¸äº†è§£,ä½†æˆ‘å¾ˆä¹æ„è”ç³»æ–‡ç« å»è§£é‡Š.æˆ‘ä¼šå°½å…¨åŠ›å»æèµ·ä»€ä¹ˆå‡½æ•°æ˜¯å¹³å°ç‰¹æœ‰çš„,ä½†æ˜¯å†ä¸€æ¬¡æˆ‘åªæ˜¯ä¸€ä¸ªäºº.å¦‚æœä½ å‘ç°å‡ºå…¥,è¯·è®©æˆ‘çŸ¥é“.&lt;br&gt;
äº‹ä¸å®œè¿Ÿï¼Œå€’ä¸€æ¯å’–å•¡ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚&lt;/p&gt;
&lt;p&gt;è¯‘è€…æ³¨:&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;worth one&#39;s salt:
    good or competent at the job or profession specified.
    ig:&quot;any astrologer worth her salt would have predicted this&quot;

what gives?
    æ˜¯åœ¨è‹±è¯­å¯¹è¯ä¸­å¸¸ç”¨çš„ä¸€å¥å£è¯­
    é€šå¸¸ç”¨å®ƒçš„æ—¶å€™åªæœ‰ä¸¤å±‚æ„æ€
    ä¸€ä¸ªæ˜¯What&#39;s happening?å‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿ
    å¦ä¸€ä¸ªæ˜¯What is the news?æœ‰ä»€ä¹ˆæ¶ˆæ¯ï¼Ÿ

the practical side
    å®ç”¨çš„ä¸€é¢&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;ç†è§£è™šæ‹Ÿå†…å­˜-å¤æ‚ä¸”ç¥ç§˜&quot;&gt;ç†è§£è™šæ‹Ÿå†…å­˜ - å¤æ‚ä¸”ç¥ç§˜&lt;/h2&gt;
&lt;p&gt;é™¤éä½ è¦å¤„ç†ä¸€äº›åµŒå…¥ç³»ç»Ÿæˆ–å†…æ ¸ç©ºé—´çš„ä»£ç ,å¦åˆ™ä½ åº”è¯¥åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹è¿›è¡Œ.è¿™å¤ªæ£’äº†,ä½ çš„ç¨‹åºä¸€å®šæ‹¥æœ‰å®ƒè‡ªå·±çš„[è™šæ‹Ÿ]åœ°å€ç©ºé—´.â€œè™šæ‹Ÿ&amp;quot;åœ¨è¿™é‡Œå¾ˆé‡è¦.è¿™æ„å‘³ç€,é™¤äº†å…¶ä»–äº‹æƒ…å¤–,ä½ ä¸ä¼šè¢«å¯ä½¿ç”¨çš„å†…å­˜é™åˆ¶,ä½†æ˜¯ä¹Ÿæ— æƒè·å¾—ä»»ä½•.ä¸ºäº†ä½¿ç”¨è¿™äº›ç©ºé—´,ä½ ä¸å¾—å‘æ“ä½œç³»ç»Ÿè¦ä¸€äº›çœŸä¸œè¥¿æ¥ä½œåæ´,è¿™è¢«å«åšæ˜ å°„.åæ´å¯èƒ½æ˜¯ç‰©ç†å†…å­˜,ä¹Ÿå¯èƒ½æ˜¯æŒä¹…æ€§å­˜å‚¨.å‰è€…ä¹Ÿè¢«å«åš&amp;quot;åŒ¿åæ˜ å°„â€.ä½†æ˜¯,ç¨å®‰å‹¿èº.</summary>
    
    
    
    <category term="Program" scheme="https://asutorufa.github.io/categories/Program/"/>
    
    
    <category term="C" scheme="https://asutorufa.github.io/tags/C/"/>
    
    <category term="English" scheme="https://asutorufa.github.io/tags/English/"/>
    
    <category term="translate" scheme="https://asutorufa.github.io/tags/translate/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³linuxä¸‹Realtek ALC295çš„è€³æœºç‚¸è£‚å£°</title>
    <link href="https://asutorufa.github.io/posts/67c8ee7f/"/>
    <id>https://asutorufa.github.io/posts/67c8ee7f/</id>
    <published>2020-04-25T22:57:40.000Z</published>
    <updated>2020-04-25T22:57:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ªäººä½¿ç”¨çš„ç¬”è®°æœ¬æ˜¯æš—å½±ç²¾çµ2 PRO,äº§å“åç§°æ˜¯: OMEN by HP Laptop 15-ax210TX.</p><p>æœ€åˆæœ¬äººè£…çš„æ˜¯ubuntu,å·¦è¾¹è€³æœºçš„å£°éŸ³ä¸€ç›´æœ‰å™¼é‡Œå•ªå•¦çš„ç‚¸è£‚å£°,åæ¥æ¢äº†Archè¿˜æ˜¯ä¸€æ ·çš„æƒ…å†µ,è€Œä¸”æœ¬äººå–œæ¬¢å¬å®‰é™çš„å£°éŸ³,ç±»ä¼¼è¯»æ•…äº‹æˆ–æ˜¯å¿ƒè·³å£°è¿™ç§,æ¯æ¬¡å¬åˆ°åŠˆè£‚å•ªå•¦çš„å£°éŸ³çœŸæ˜¯éš¾å—.</p><p>æœ€åˆå°è¯•è¿‡Arch wikiä¸­çš„å„ç§æ–¹æ³• åŒ…æ‹¬</p><blockquote><p><a href="https://wiki.archlinux.org/index.php/PulseAudio/Troubleshooting#Glitches,_skips_or_crackling">PulseAudio/Troubleshooting#Glitches,_skips_or_crackling</a><br><a href="https://wiki.archlinux.org/index.php/PulseAudio/Troubleshooting#Static_noise_when_using_headphones">PulseAudio/Troubleshooting#Static_noise_when_using_headphones</a></p></blockquote><p>éƒ½æ²¡æœ‰ä»»ä½•æ”¹è¿›.</p><p>ç›´åˆ°åæ¥æ‰å‘ç°è¿™æ˜¯linuxä¸‹Realtek ALC295çš„é©±åŠ¨ä¸å®Œå–„å¯¼è‡´çš„,è¿™ä¸ªbugåœ¨17å¹´å°±æå‡ºäº†,è‡³ä»Šéƒ½æ²¡æœ‰å¾—åˆ°è§£å†³.</p><blockquote><p><a href="https://bugzilla.kernel.org/show_bug.cgi?id=195457">Bug 195457 - Realtek ALC295 still unsupported</a><br><a href="https://bugs.launchpad.net/ubuntu/+source/alsa-driver/+bug/1648183">Crackling and popping sound when using headphones</a></p></blockquote><p>å³ä½¿æœ‰äººæäº¤è¡¥ä¸å¹¶åˆå¹¶åˆ°äº†linuxå†…æ ¸ä¸­</p><blockquote><p><a href="https://github.com/torvalds/linux/commit/44be77c590f381bc629815ac789b8b15ecc4ddcf#diff-6cb60ab78549a5b6838f746b9e128105">ALSA: hda - Fix missing COEF init for ALC225/295/299</a></p></blockquote><p>ä½†æ˜¯äº‹å®è¯æ˜å¹¶æ²¡æœ‰ç”¨</p><p>ä¾ç…§ä¸Šé¢æœ‰äººæä¾›çš„æ–¹æ³•å´æœ‰æ•ˆ(çœ‹èµ·æ¥è·Ÿæäº¤è¡¥ä¸å·®ä¸å¤š,ä½†æ˜¯è¡¥ä¸å´æ²¡æœ‰èµ·ä½œç”¨):</p><span id="more"></span><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">I've managed to fix this problem on my machine (HP Omen 15 running Ubuntu 17.04 using codec for Realtek ALC295 sound device). To fix the problem, I can do the following:Install alsa-tools if not installed:sudo apt install alsa-toolsCreate and save a script in /usr/local/bin:<span class="token title important"><span class="token punctuation">#</span>!/bin/bash</span>hda-verb /dev/snd/hwC0D0 0x20 SET_COEF_INDEX 0x67hda-verb /dev/snd/hwC0D0 0x20 SET_PROC_COEF 0x3000Run the script as root in a terminal to immediately fix the problem.To run the script on startup, use cron with the @reboot command:sudo crontab -eand then add line in crontab:@reboot [full path to script]To run script on resume from suspend, copy the script to /lib/systemd/system-sleepFor more technical details regarding this fix, see https://bugzilla.kernel.org/show_bug.cgi?id=195457<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>archä¸‹ç±»ä¼¼ é™¤äº†æ˜¯ç”¨pacmanå®‰è£…alsa-tools,ä¹‹åæ“ä½œæ˜¯ä¸€æ ·çš„.</p><p>ä¸ä½¿ç”¨crontab,ä½¿ç”¨systemdçš„æ–¹æ³•<a href="https://wiki.archlinux.org/index.php/ASUS_Zenbook_UX430/UX530#Headphones_audio_is_too_low">ASUS_Zenbook_UX430/UX530#Headphones_audio_is_too_low</a></p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">In order to fix it, install alsa-tools or hda-verbAUR and create the file:/usr/local/bin/fix_headphones_audio.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span>  <span class="token assign-left variable">DEVICE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> /dev/snd/hwC<span class="token punctuation">[</span><span class="token punctuation">[</span>:print:<span class="token punctuation">]</span><span class="token punctuation">]</span>*D0 <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span><span class="token variable">`</span></span>  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$DEVICE</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    hda-verb <span class="token string">"<span class="token variable">$DEVICE</span>"</span> 0x20 SET_COEF_INDEX 0x67    hda-verb <span class="token string">"<span class="token variable">$DEVICE</span>"</span> 0x20 SET_PROC_COEF 0x3000    <span class="token builtin class-name">break</span>  <span class="token keyword">fi</span>  <span class="token function">sleep</span> <span class="token number">1</span><span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">Then create a systemd script with the following content:/etc/systemd/system/fix_headphones_audio.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span><span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">Fix headphones audio after boot &amp; resume.</span><span class="token key attr-name">After</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target suspend.target hibernate.target</span><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span><span class="token key attr-name">Type</span><span class="token punctuation">=</span><span class="token value attr-value">oneshot</span><span class="token key attr-name">ExecStart</span><span class="token punctuation">=</span><span class="token value attr-value">/bin/sh '/usr/local/bin/fix_headphones_audio.sh'</span><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span><span class="token key attr-name">WantedBy</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target suspend.target hibernate.target</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="language-markdown" data-language="markdown"><code class="language-markdown">And finally, start and enable fix_headphones_audio.service.</code></pre><hr><blockquote><p><a href="https://bugzilla.kernel.org/show_bug.cgi?id=195457">Bug 195457 - Realtek ALC295 still unsupported</a><br><a href="https://bugs.launchpad.net/ubuntu/+source/alsa-driver/+bug/1648183">Crackling and popping sound when using headphones</a><br><a href="https://askubuntu.com/questions/873881/how-to-install-bang-and-olufsen-audio-drivers-for-hp-laptop">How to install Bang and Olufsen Audio drivers for HP laptop?</a><br><a href="https://wiki.archlinux.org/index.php/ASUS_Zenbook_UX430/UX530#Headphones_audio_is_too_low">ASUS_Zenbook_UX430/UX530#Headphones_audio_is_too_low</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸ªäººä½¿ç”¨çš„ç¬”è®°æœ¬æ˜¯æš—å½±ç²¾çµ2 PRO,äº§å“åç§°æ˜¯: OMEN by HP Laptop 15-ax210TX.&lt;/p&gt;
&lt;p&gt;æœ€åˆæœ¬äººè£…çš„æ˜¯ubuntu,å·¦è¾¹è€³æœºçš„å£°éŸ³ä¸€ç›´æœ‰å™¼é‡Œå•ªå•¦çš„ç‚¸è£‚å£°,åæ¥æ¢äº†Archè¿˜æ˜¯ä¸€æ ·çš„æƒ…å†µ,è€Œä¸”æœ¬äººå–œæ¬¢å¬å®‰é™çš„å£°éŸ³,ç±»ä¼¼è¯»æ•…äº‹æˆ–æ˜¯å¿ƒè·³å£°è¿™ç§,æ¯æ¬¡å¬åˆ°åŠˆè£‚å•ªå•¦çš„å£°éŸ³çœŸæ˜¯éš¾å—.&lt;/p&gt;
&lt;p&gt;æœ€åˆå°è¯•è¿‡Arch wikiä¸­çš„å„ç§æ–¹æ³• åŒ…æ‹¬&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://wiki.archlinux.org/index.php/PulseAudio/Troubleshooting#Glitches,_skips_or_crackling&quot;&gt;PulseAudio/Troubleshooting#Glitches,_skips_or_crackling&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://wiki.archlinux.org/index.php/PulseAudio/Troubleshooting#Static_noise_when_using_headphones&quot;&gt;PulseAudio/Troubleshooting#Static_noise_when_using_headphones&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;éƒ½æ²¡æœ‰ä»»ä½•æ”¹è¿›.&lt;/p&gt;
&lt;p&gt;ç›´åˆ°åæ¥æ‰å‘ç°è¿™æ˜¯linuxä¸‹Realtek ALC295çš„é©±åŠ¨ä¸å®Œå–„å¯¼è‡´çš„,è¿™ä¸ªbugåœ¨17å¹´å°±æå‡ºäº†,è‡³ä»Šéƒ½æ²¡æœ‰å¾—åˆ°è§£å†³.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://bugzilla.kernel.org/show_bug.cgi?id=195457&quot;&gt;Bug 195457 - Realtek ALC295 still unsupported&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://bugs.launchpad.net/ubuntu/+source/alsa-driver/+bug/1648183&quot;&gt;Crackling and popping sound when using headphones&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å³ä½¿æœ‰äººæäº¤è¡¥ä¸å¹¶åˆå¹¶åˆ°äº†linuxå†…æ ¸ä¸­&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/torvalds/linux/commit/44be77c590f381bc629815ac789b8b15ecc4ddcf#diff-6cb60ab78549a5b6838f746b9e128105&quot;&gt;ALSA: hda - Fix missing COEF init for ALC225/295/299&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½†æ˜¯äº‹å®è¯æ˜å¹¶æ²¡æœ‰ç”¨&lt;/p&gt;
&lt;p&gt;ä¾ç…§ä¸Šé¢æœ‰äººæä¾›çš„æ–¹æ³•å´æœ‰æ•ˆ(çœ‹èµ·æ¥è·Ÿæäº¤è¡¥ä¸å·®ä¸å¤š,ä½†æ˜¯è¡¥ä¸å´æ²¡æœ‰èµ·ä½œç”¨):&lt;/p&gt;</summary>
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
    <category term="driver" scheme="https://asutorufa.github.io/tags/driver/"/>
    
    <category term="Realtek ALC295" scheme="https://asutorufa.github.io/tags/Realtek-ALC295/"/>
    
  </entry>
  
  <entry>
    <title>NATç©¿é€</title>
    <link href="https://asutorufa.github.io/posts/1124a628/"/>
    <id>https://asutorufa.github.io/posts/1124a628/</id>
    <published>2020-04-22T11:33:26.000Z</published>
    <updated>2020-04-22T11:33:26.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="NAT-ç½‘ç»œåœ°å€è½¬æ¢">NAT ç½‘ç»œåœ°å€è½¬æ¢</h2><p>ç½‘ç»œåœ°å€è½¬æ¢ NAT (Network Address Translation)  æ–¹æ³•äº1994å¹´æå‡ºã€‚<br>éœ€è¦åœ¨ä¸“ç”¨ç½‘è¿æ¥åˆ°äº’è”ç½‘çš„è·¯ç”±å™¨ä¸Šå®‰è£… NAT è½¯ä»¶ã€‚è£…æœ‰ NAT è½¯ä»¶çš„è·¯ç”±å™¨å«ä½œ NATè·¯ç”±å™¨ï¼Œå®ƒè‡³å°‘æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„å¤–éƒ¨å…¨çƒIPåœ°å€ã€‚<br>æ‰€æœ‰ä½¿ç”¨æœ¬åœ°åœ°å€çš„ä¸»æœºåœ¨å’Œå¤–ç•Œé€šä¿¡æ—¶ï¼Œéƒ½è¦åœ¨ NAT è·¯ç”±å™¨ä¸Šå°†å…¶æœ¬åœ°åœ°å€è½¬æ¢æˆå…¨çƒ IP åœ°å€ï¼Œæ‰èƒ½å’Œäº’è”ç½‘è¿æ¥ã€‚</p><h3 id="ç½‘ç»œåœ°å€è½¬æ¢çš„è¿‡ç¨‹">ç½‘ç»œåœ°å€è½¬æ¢çš„è¿‡ç¨‹</h3><p>å†…éƒ¨ä¸»æœº A ç”¨æœ¬åœ°åœ°å€ IPA å’Œäº’è”ç½‘ä¸Šä¸»æœº B é€šä¿¡æ‰€å‘é€çš„æ•°æ®æŠ¥å¿…é¡»ç»è¿‡ NAT è·¯ç”±å™¨ã€‚<br>NAT è·¯ç”±å™¨å°†æ•°æ®æŠ¥çš„æºåœ°å€ IPA è½¬æ¢æˆå…¨çƒåœ°å€ IPGï¼Œ<strong>å¹¶æŠŠè½¬æ¢ç»“æœè®°å½•åˆ°NATåœ°å€è½¬æ¢è¡¨ä¸­</strong>ï¼Œç›®çš„åœ°å€ IPB ä¿æŒä¸å˜ï¼Œç„¶åå‘é€åˆ°äº’è”ç½‘ã€‚<br>NAT è·¯ç”±å™¨æ”¶åˆ°ä¸»æœº B å‘å›çš„æ•°æ®æŠ¥æ—¶ï¼ŒçŸ¥é“æ•°æ®æŠ¥ä¸­çš„æºåœ°å€æ˜¯ IPB è€Œç›®çš„åœ°å€æ˜¯ IPGã€‚<br>æ ¹æ® NAT è½¬æ¢è¡¨ï¼ŒNAT è·¯ç”±å™¨å°†ç›®çš„åœ°å€ IPG è½¬æ¢ä¸º IPAï¼Œè½¬å‘ç»™æœ€ç»ˆçš„å†…éƒ¨ä¸»æœº Aã€‚</p><p>ç½‘ç»œåœ°å€è½¬æ¢è¡¨ä¾‹å­:</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">+-------------+---------------+| private IP  |   public IP   |+-------------+---------------+| 192.168.1.55|219.152.168.222|+-------------+---------------+| 192.168.1.59|219.152.168.223|+-------------+---------------+|192.168.1.155|219.152.168.224|+-------------+---------------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><h3 id="NAPT-ç½‘ç»œåœ°å€ä¸ç«¯å£å·è½¬æ¢">NAPT ç½‘ç»œåœ°å€ä¸ç«¯å£å·è½¬æ¢</h3><p>ä¸ºäº†æ›´åŠ æœ‰æ•ˆåœ°åˆ©ç”¨ NAT è·¯ç”±å™¨ä¸Šçš„å…¨çƒIPåœ°å€ï¼Œç°åœ¨å¸¸ç”¨çš„ NAT è½¬æ¢è¡¨æŠŠè¿è¾“å±‚çš„ç«¯å£å·ä¹Ÿåˆ©ç”¨ä¸Šã€‚è¿™æ ·ï¼Œå°±å¯ä»¥ä½¿å¤šä¸ªæ‹¥æœ‰æœ¬åœ°åœ°å€çš„ä¸»æœºï¼Œå…±ç”¨ä¸€ä¸ª NAT è·¯ç”±å™¨ä¸Šçš„å…¨çƒ IP åœ°å€ï¼Œå› è€Œå¯ä»¥åŒæ—¶å’Œäº’è”ç½‘ä¸Šçš„ä¸åŒä¸»æœºè¿›è¡Œé€šä¿¡ã€‚<br>ä½¿ç”¨ç«¯å£å·çš„ NAT å«ä½œç½‘ç»œåœ°å€ä¸ç«¯å£å·è½¬æ¢NAPT (Network Address and Port Translation)ï¼Œè€Œä¸ä½¿ç”¨ç«¯å£å·çš„ NAT å°±å«ä½œä¼ ç»Ÿçš„ NAT (traditional NAT)ã€‚</p><p>å¸¦ç«¯å£çš„ç½‘ç»œåœ°å€è½¬æ¢è¡¨ä¾‹å­:</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">+-----------------+--------------------+|   private IP    |     public IP      |+-----------------+--------------------+|192.168.1.55:5566|219.152.168.222:9200|+-----------------+--------------------+| 192.168.1.59:80 |219.152.168.222:9201|+-----------------+--------------------+|192.168.1.59:4465|219.152.168.222:9202|+-----------------+--------------------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä¸åŒç±»å‹çš„NAT">ä¸åŒç±»å‹çš„NAT</h3><p>æ¥è‡ªWikipedia</p><ul><li>å®Œå…¨åœ†é”¥å‹NATï¼ˆFull cone NATï¼‰ï¼Œå³ä¸€å¯¹ä¸€ï¼ˆone-to-oneï¼‰NAT<br>ä¸€æ—¦ä¸€ä¸ªå†…éƒ¨åœ°å€ï¼ˆiAddr:portï¼‰æ˜ å°„åˆ°å¤–éƒ¨åœ°å€ï¼ˆeAddr:portï¼‰ï¼Œæ‰€æœ‰å‘è‡ªiAddr:portçš„åŒ…éƒ½ç»ç”±eAddr:portå‘å¤–å‘é€ã€‚ä»»æ„å¤–éƒ¨ä¸»æœºéƒ½èƒ½é€šè¿‡ç»™eAddr:portå‘åŒ…åˆ°è¾¾iAddr:portï¼ˆæ³¨ï¼športä¸éœ€è¦ä¸€æ ·ï¼‰</li><li>å—é™åœ†é”¥å‹NATï¼ˆAddress-Restricted cone NATï¼‰<br>å†…éƒ¨å®¢æˆ·ç«¯å¿…é¡»é¦–å…ˆå‘é€æ•°æ®åŒ…åˆ°å¯¹æ–¹ï¼ˆIP=X.X.X.Xï¼‰ï¼Œç„¶åæ‰èƒ½æ¥æ”¶æ¥è‡ªX.X.X.Xçš„æ•°æ®åŒ…ã€‚åœ¨é™åˆ¶æ–¹é¢ï¼Œå”¯ä¸€çš„è¦æ±‚æ˜¯æ•°æ®åŒ…æ˜¯æ¥è‡ªX.X.X.Xã€‚<br>å†…éƒ¨åœ°å€ï¼ˆiAddr:port1ï¼‰æ˜ å°„åˆ°å¤–éƒ¨åœ°å€ï¼ˆeAddr:port2ï¼‰ï¼Œæ‰€æœ‰å‘è‡ªiAddr:port1çš„åŒ…éƒ½ç»ç”±eAddr:port2å‘å¤–å‘é€ã€‚å¤–éƒ¨ä¸»æœºï¼ˆhostAddr:anyï¼‰èƒ½é€šè¿‡ç»™eAddr:port2å‘åŒ…åˆ°è¾¾iAddr:port1ã€‚ï¼ˆæ³¨ï¼šanyæŒ‡å¤–éƒ¨ä¸»æœºæºç«¯å£ä¸å—é™åˆ¶ï¼Œä½†æ˜¯ç›®çš„ç«¯å£å¿…é¡»æ˜¯port2ã€‚åªæœ‰å¤–éƒ¨ä¸»æœºæ•°æ®åŒ…çš„ç›®çš„IP ä¸º å†…éƒ¨å®¢æˆ·ç«¯çš„æ‰€æ˜ å°„çš„å¤–éƒ¨ipï¼Œä¸”ç›®çš„ç«¯å£ä¸ºport2æ—¶æ•°æ®åŒ…æ‰è¢«æ”¾è¡Œã€‚ï¼‰</li><li>ç«¯å£å—é™åœ†é”¥å‹NATï¼ˆPort-Restricted cone NATï¼‰<br>ç±»ä¼¼å—é™åˆ¶é”¥å½¢NATï¼ˆRestricted cone NATï¼‰ï¼Œä½†æ˜¯è¿˜æœ‰ç«¯å£é™åˆ¶ã€‚<br>ä¸€æ—¦ä¸€ä¸ªå†…éƒ¨åœ°å€ï¼ˆiAddr:port1ï¼‰æ˜ å°„åˆ°å¤–éƒ¨åœ°å€ï¼ˆeAddr:port2ï¼‰ï¼Œæ‰€æœ‰å‘è‡ªiAddr:port1çš„åŒ…éƒ½ç»ç”±eAddr:port2å‘å¤–å‘é€ã€‚<br>åœ¨å—é™åœ†é”¥å‹NATåŸºç¡€ä¸Šå¢åŠ äº†å¤–éƒ¨ä¸»æœºæºç«¯å£å¿…é¡»æ˜¯å›ºå®šçš„ã€‚</li><li>å¯¹ç§°NATï¼ˆSymmetric NATï¼‰<br>æ¯ä¸€ä¸ªæ¥è‡ªç›¸åŒå†…éƒ¨IPä¸ç«¯å£ï¼Œåˆ°ä¸€ä¸ªç‰¹å®šç›®çš„åœ°åœ°å€å’Œç«¯å£çš„è¯·æ±‚ï¼Œéƒ½æ˜ å°„åˆ°ä¸€ä¸ªç‹¬ç‰¹çš„å¤–éƒ¨IPåœ°å€å’Œç«¯å£ã€‚<br>åŒä¸€å†…éƒ¨IPä¸ç«¯å£å‘åˆ°ä¸åŒçš„ç›®çš„åœ°å’Œç«¯å£çš„ä¿¡æ¯åŒ…ï¼Œéƒ½ä½¿ç”¨ä¸åŒçš„æ˜ å°„<br>åªæœ‰æ›¾ç»æ”¶åˆ°è¿‡å†…éƒ¨ä¸»æœºæ•°æ®çš„å¤–éƒ¨ä¸»æœºï¼Œæ‰èƒ½å¤ŸæŠŠæ•°æ®åŒ…å‘å›</li></ul><h2 id="UDPæ‰“æ´">UDPæ‰“æ´</h2><p>UDPæ‰“æ´å°±æ˜¯åˆ©ç”¨äº†NATåœ°å€è½¬æ¢è¡¨.</p><h3 id="æ­£å¸¸è®¿é—®ä¸€å°å…·æœ‰å…¬ç½‘IPçš„ä¸»æœº">æ­£å¸¸è®¿é—®ä¸€å°å…·æœ‰å…¬ç½‘IPçš„ä¸»æœº</h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">      +-----+A <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>-</span>  <span class="token attr-name">|</span> <span class="token attr-name">NAT</span> <span class="token attr-name">|</span>  <span class="token attr-name">-----Public</span> <span class="token attr-name">INTERNET</span> <span class="token attr-name">-</span><span class="token punctuation">></span></span> B      +-----+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç”±ä¸»æœºAå‘ä¸»æœºBå‘èµ·è¯·æ±‚.<br>NATå°†å†…ç½‘åœ°å€è½¬æ¢ä¸ºå…¬ç½‘åœ°å€,å¹¶å­˜åœ¨NATè½¬æ¢è¡¨ä¸­,è¿™æ ·NATå°±çŸ¥é“äº†æ¥è‡ªBçš„è®¿é—®åº”è¯¥å‘ç»™A.</p><h3 id="ä¸¤å°éƒ½åœ¨NATä¸­çš„ä¸»æœºå»ºç«‹è¿æ¥">ä¸¤å°éƒ½åœ¨NATä¸­çš„ä¸»æœºå»ºç«‹è¿æ¥</h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">      +-----+                              +-----+A <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>-</span>  <span class="token attr-name">|NATA</span> <span class="token attr-name">|</span>  <span class="token attr-name">-----</span> <span class="token attr-name">Public</span> <span class="token attr-name">INTERNET</span> <span class="token attr-name">-----</span> <span class="token attr-name">|</span> <span class="token attr-name">NATB|</span>  <span class="token attr-name">-</span><span class="token punctuation">></span></span> B      +-----+                              +-----+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸¤å°NATçš„å…¬ç½‘åœ°å€å’Œä¸»æœºA,Bçš„ç«¯å£.<br>å‡è®¾NATAçš„å…¬ç½‘åœ°å€ä¸º1.1.1.1,ä¸»æœºAçš„ç«¯å£ä¸º1000,NATBçš„å…¬ç½‘åœ°å€ä¸º1.0.0.1,ä¸»æœºBçš„ç«¯å£ä¸º1001.<br>ç„¶åç”±Aå‘1.0.0.1:1001å‘èµ·UDPè¯·æ±‚,è¿™æ ·NATAå°±ä¼šè®°ä½æ¥è‡ª1.0.0.1:1001çš„è¯·æ±‚åº”è¯¥å‘ç»™A.<br>Bä¹Ÿè¿›è¡ŒåŒæ ·çš„æ“ä½œå‘1.1.1.1:1000,å‘èµ·UDPè¯·æ±‚.<br>è¿™æ ·Aå’ŒBå°±å»ºç«‹èµ·äº†ä¸€æ¡è¿æ¥.</p><p>ä¸ºäº†çŸ¥é“ä¸»æœºAå’Œä¸»æœºBæ‰€åœ¨ç½‘ç»œå…¬ç½‘åœ°å€,æˆ‘ä»¬éœ€è¦æœ‰ä¸€å°åœ¨å…¬ç½‘ä¸­çš„ä¸»æœºæ¥å­˜å‚¨Aå’ŒBçš„å…¬ç½‘åœ°å€å’Œç«¯å£.</p><h3 id="STUN">STUN</h3><p>STUNï¼ˆSession Traversal Utilities for NATï¼ŒNATä¼šè¯ç©¿è¶Šåº”ç”¨ç¨‹åºï¼‰æ˜¯ä¸€ç§ç½‘ç»œåè®®ï¼Œå®ƒå…è®¸ä½äºNATï¼ˆæˆ–å¤šé‡NATï¼‰åçš„å®¢æˆ·ç«¯æ‰¾å‡ºè‡ªå·±çš„å…¬ç½‘åœ°å€ï¼ŒæŸ¥å‡ºè‡ªå·±ä½äºå“ªç§ç±»å‹çš„NATä¹‹åä»¥åŠNATä¸ºæŸä¸€ä¸ªæœ¬åœ°ç«¯å£æ‰€ç»‘å®šçš„Internetç«¯ç«¯å£ã€‚è¿™äº›ä¿¡æ¯è¢«ç”¨æ¥åœ¨ä¸¤ä¸ªåŒæ—¶å¤„äºNATè·¯ç”±å™¨ä¹‹åçš„ä¸»æœºä¹‹é—´åˆ›å»ºUDPé€šä¿¡ã€‚è¯¥åè®®ç”±<a href="https://tools.ietf.org/html/rfc5389">RFC 5389</a>å®šä¹‰ã€‚</p><h3 id="TURN">TURN</h3><p>TURNï¼ˆå…¨åTraversal Using Relay NATï¼‰ï¼Œæ˜¯ä¸€ç§æ•°æ®ä¼ è¾“åè®®ï¼ˆdata-transfer protocolï¼‰ã€‚å…è®¸åœ¨TCPæˆ–UDPçš„è¿åœ¨çº¿è·¨è¶ŠNATæˆ–é˜²ç«å¢™ã€‚<br>TURNæ˜¯ä¸€ä¸ªclient-serveråè®®ã€‚TURNçš„NATç©¿é€æ–¹æ³•ä¸STUNç±»ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡è·å–åº”ç”¨å±‚ä¸­çš„å…¬æœ‰åœ°å€è¾¾åˆ°NATç©¿é€ã€‚ä½†å®ç°TURN clientçš„ç»ˆç«¯å¿…é¡»åœ¨é€šä¿¡å¼€å§‹å‰ä¸TURN serverè¿›è¡Œäº¤äº’ï¼Œå¹¶è¦æ±‚TURN serveräº§ç”Ÿ&quot;relay port&quot;ï¼Œä¹Ÿå°±æ˜¯relayed-transport-addressã€‚è¿™æ—¶TURN serverä¼šåˆ›å»ºpeerï¼Œå³è¿œç¨‹ç«¯ç‚¹ï¼ˆremote endpointsï¼‰ï¼Œå¼€å§‹è¿›è¡Œä¸­ç»§ï¼ˆrelayï¼‰çš„åŠ¨ä½œï¼ŒTURN clientåˆ©ç”¨relay portå°†æ•°æ®å‘é€è‡³peerï¼Œå†ç”±peerè½¬ä¼ åˆ°å¦ä¸€æ–¹çš„TURN clientã€‚è¯¥åè®®ç”±<a href="https://tools.ietf.org/html/rfc5766">RFC 5766</a>å®šä¹‰ã€‚</p><hr><blockquote><p><a href="https://zh.wikipedia.org/wiki/STUN">STUN</a><br><a href="https://zh.wikipedia.org/wiki/TURN">TURN</a><br><a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2">ç½‘ç»œåœ°å€è½¬æ¢</a><br><a href="https://blog.csdn.net/ustcgy/article/details/5655050">NATä¸NATç©¿é€(äºŒ)</a><br><a href="https://zhuanlan.zhihu.com/p/40816201">ç®€å•è§£é‡Š P2P æŠ€æœ¯ä¹‹ UDP æ‰“æ´</a><br><a href="http://www.52im.net/thread-50-1-1.html">P2PæŠ€æœ¯è¯¦è§£(ä¸€)ï¼šNATè¯¦è§£â€”â€”è¯¦ç»†åŸç†ã€P2Pç®€ä»‹</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;NAT-ç½‘ç»œåœ°å€è½¬æ¢&quot;&gt;NAT ç½‘ç»œåœ°å€è½¬æ¢&lt;/h2&gt;
&lt;p&gt;ç½‘ç»œåœ°å€è½¬æ¢ NAT (Network Address Translation)  æ–¹æ³•äº1994å¹´æå‡ºã€‚&lt;br&gt;
éœ€è¦åœ¨ä¸“ç”¨ç½‘è¿æ¥åˆ°äº’è”ç½‘çš„è·¯ç”±å™¨ä¸Šå®‰è£… NAT è½¯ä»¶ã€‚è£…æœ‰ NAT è½¯ä»¶çš„è·¯ç”±å™¨å«ä½œ NATè·¯ç”±å™¨ï¼Œå®ƒè‡³å°‘æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„å¤–éƒ¨å…¨çƒIPåœ°å€ã€‚&lt;br&gt;
æ‰€æœ‰ä½¿ç”¨æœ¬åœ°åœ°å€çš„ä¸»æœºåœ¨å’Œå¤–ç•Œé€šä¿¡æ—¶ï¼Œéƒ½è¦åœ¨ NAT è·¯ç”±å™¨ä¸Šå°†å…¶æœ¬åœ°åœ°å€è½¬æ¢æˆå…¨çƒ IP åœ°å€ï¼Œæ‰èƒ½å’Œäº’è”ç½‘è¿æ¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç½‘ç»œåœ°å€è½¬æ¢çš„è¿‡ç¨‹&quot;&gt;ç½‘ç»œåœ°å€è½¬æ¢çš„è¿‡ç¨‹&lt;/h3&gt;
&lt;p&gt;å†…éƒ¨ä¸»æœº A ç”¨æœ¬åœ°åœ°å€ IPA å’Œäº’è”ç½‘ä¸Šä¸»æœº B é€šä¿¡æ‰€å‘é€çš„æ•°æ®æŠ¥å¿…é¡»ç»è¿‡ NAT è·¯ç”±å™¨ã€‚&lt;br&gt;
NAT è·¯ç”±å™¨å°†æ•°æ®æŠ¥çš„æºåœ°å€ IPA è½¬æ¢æˆå…¨çƒåœ°å€ IPGï¼Œ&lt;strong&gt;å¹¶æŠŠè½¬æ¢ç»“æœè®°å½•åˆ°NATåœ°å€è½¬æ¢è¡¨ä¸­&lt;/strong&gt;ï¼Œç›®çš„åœ°å€ IPB ä¿æŒä¸å˜ï¼Œç„¶åå‘é€åˆ°äº’è”ç½‘ã€‚&lt;br&gt;
NAT è·¯ç”±å™¨æ”¶åˆ°ä¸»æœº B å‘å›çš„æ•°æ®æŠ¥æ—¶ï¼ŒçŸ¥é“æ•°æ®æŠ¥ä¸­çš„æºåœ°å€æ˜¯ IPB è€Œç›®çš„åœ°å€æ˜¯ IPGã€‚&lt;br&gt;
æ ¹æ® NAT è½¬æ¢è¡¨ï¼ŒNAT è·¯ç”±å™¨å°†ç›®çš„åœ°å€ IPG è½¬æ¢ä¸º IPAï¼Œè½¬å‘ç»™æœ€ç»ˆçš„å†…éƒ¨ä¸»æœº Aã€‚&lt;/p&gt;
&lt;p&gt;ç½‘ç»œåœ°å€è½¬æ¢è¡¨ä¾‹å­:&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-markdown&quot; data-language=&quot;markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;+-------------+---------------+
| private IP  |   public IP   |
+-------------+---------------+
| 192.168.1.55|219.152.168.222|
+-------------+---------------+
| 192.168.1.59|219.152.168.223|
+-------------+---------------+
|192.168.1.155|219.152.168.224|
+-------------+---------------+&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="UDP" scheme="https://asutorufa.github.io/tags/UDP/"/>
    
    <category term="NAT" scheme="https://asutorufa.github.io/tags/NAT/"/>
    
  </entry>
  
  <entry>
    <title>ã¨ã‚ã‚‹ç•ªçµ„ã®è¨˜éŒ²</title>
    <link href="https://asutorufa.github.io/posts/fe7367b8/"/>
    <id>https://asutorufa.github.io/posts/fe7367b8/</id>
    <published>2020-02-15T01:00:24.000Z</published>
    <updated>2020-03-12T01:00:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ã‚ãŸãã—ã¯ãŸãã•ã‚“è¨€è‘‰çŸ¥ã‚Šã¾ã—ãŸã€è¨˜éŒ²ã—ãŸã„ã€ä¾‹ãˆã°ï¼šã©ã“è¦‹ã¤ã‹ã£ãŸã€ã©ã†ãŠã‚‚ã†ã€‚<br>ä»Šå›ã¯ã€Œï¼’ï¼’ãƒ»ï¼—ã€€è¨ˆç®—ä¸­ã€ã€ã“ã®ç•ªçµ„ã™ã”ããŠã‚‚ã—ã‚ã„ã€ãœã²è¦‹ã¦ãã ã•ã„ã€‚</p><h2 id="ãƒ„ãƒƒã‚³ãƒŸãƒ»æ¼«æ‰ãƒ»å‘†ã‘">ãƒ„ãƒƒã‚³ãƒŸãƒ»æ¼«æ‰ãƒ»å‘†ã‘</h2><p>ã“ã®ç•ªçµ„ã®MCã¯ä¸‰å››éƒã•ã‚“ã€ãŠãµãŸã‚Šã¯ãŠç¬‘ã„èŠ¸äººã§ã™ã­ã€ã“ã®å‰ã«ç§ã¯å…¨ç„¶ã—ã‚‰ãªã‹ã£ãŸã€ã„ã¤ã‚‚ã€Œãƒ„ãƒƒã‚³ãƒŸã€ã‚’è¨€ã†ã§ã€çŸ¥ã‚ŠãŸã„ã§ã™ã‹ã‚‰ã—ã‚‰ã¹ã¾ã—ãŸã€‚</p><h2 id="ãƒ‘ã‚¯ãƒª">ãƒ‘ã‚¯ãƒª</h2><p>ã€Œæ»å·ã¿ã†ã®ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãŒä¸ŠãŒã‚‹å‹•ç”»é¸æ‰‹æ¨©ã€ã§éƒ½ã¡ã‚ƒã‚“ã®å¾—ç‚¹ã¯ï¼ç‚¹ã€ç†ç”±ã¯å½¼å¥³ä½œã‚ŠASMRå‹•ç”»ã¯æœ€åˆã¿ã†ã¡ã‚ƒã‚“ã®è‡ªå·±PRå‹•ç”»ã®ãªã‹ã®ã²ã¨ã¤ã®ãƒ‘ã‚¯ãƒªã€‚ã“ã“ãŒã‚ãŸãã—çŸ¥ã‚Šã¾ã—ãŸã€‚</p><h2 id="é†é†å‘³">é†é†å‘³</h2><p>ç›¸ç”°ã•ã‚“ã¯ã¨ã‚ã‚‹å›ã‚ã‚‹VTRã®è©•ä¾¡ã§ã™ã€‚</p><h2 id="å±ç†å±ˆ">å±ç†å±ˆ</h2><p>æ¡œã¡ã‚ƒã‚“ãŸãã•ã‚“å±ç†å±ˆã‚’è¨€ã£ãŸã€ã§ã‚‚ã‹ã‚ã„ã„ã§ã™ã€‚</p><h2 id="ã‚­ãƒ£ãƒã‚¯ãƒ©">ã‚­ãƒ£ãƒã‚¯ãƒ©</h2><p>ã€Œèª°ã‹ã‚­ãƒ£ãƒã‚¯ãƒ©ã«èª˜ã†ãŸã‚‰ã©ã†ã§ã™ã‹ï¼Ÿã€ã¯ç¬¬ï¼—ï¼“å›ã¨ï¼—ï¼”å›ã§ã²ã¨ã¤å•é¡Œã§ã™ã€‚ç¥æœ¨ã¿ã‹ã¿å„ªã—ã™ãã‚‹ã€çµæœå—ã‘ã‚‹ã€‚</p><h2 id="ãŸã‚å£">ãŸã‚å£</h2><p>ã˜ã¤ã¯ã‚ãŸãã—ã¯æ—¥æœ¬ã®ä¸Šä¸‹é–¢ä¿‚ç†è§£ä¸èƒ½ã€‚ãªã‚“ã§ã€Œå…ˆè¼©ã«å¯¾ã—ã¦ãŸã‚å£ãªã‚“ã§ã‚ã‚Šå¾—ãªã„ã ã‚ã†ã€‚ã€ã€å …è‹¦ã—ã„éãã‚‹ã˜ã‚ƒãªã„ã‹ã€‚</p><h2 id="ã‚ªãƒ©ã‚ªãƒ©">ã‚ªãƒ©ã‚ªãƒ©</h2><p>ã‚ãŸãã—ä»Šè¦šãˆã‚‹ã®ã¯ã“ã‚Œã¯ç›¸ç”°ã•ã‚“èª°ã«è©•ä¾¡ã§ã™ã€‚</p><h2 id="ã‚ªãƒ•ã‚·ãƒ§ãƒƒãƒˆãƒ»ã‚°ãƒ©ãƒ“ã‚¢">ã‚ªãƒ•ã‚·ãƒ§ãƒƒãƒˆãƒ»ã‚°ãƒ©ãƒ“ã‚¢</h2><p>ï¼‘ï¼ã„ã¤ã‚‚ã®å†™çœŸ<br>ï¼’ï¼ã‚¢ã‚¤ãƒ‰ãƒ«ã®å†™çœŸ</p><h2 id="ãƒ­ã‚±">ãƒ­ã‚±</h2><p>å¤šåˆ†VTRã§ã™ã€‚å¤–ã¸å‡ºã¦ã«æ’®å½±ã™ã‚‹ã“ã¨ã€‚</p><hr><p>ã¾ã ã¾ã ã‚ã‚‹ã§ã™ã€‚</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;æœ€è¿‘ã‚ãŸãã—ã¯ãŸãã•ã‚“è¨€è‘‰çŸ¥ã‚Šã¾ã—ãŸã€è¨˜éŒ²ã—ãŸã„ã€ä¾‹ãˆã°ï¼šã©ã“è¦‹ã¤ã‹ã£ãŸã€ã©ã†ãŠã‚‚ã†ã€‚&lt;br&gt;
ä»Šå›ã¯ã€Œï¼’ï¼’ãƒ»ï¼—ã€€è¨ˆç®—ä¸­ã€ã€ã“ã®ç•ªçµ„ã™ã”ããŠã‚‚ã—ã‚ã„ã€ãœã²è¦‹ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;h2</summary>
        
      
    
    
    
    <category term="æ—¥æœ¬èª" scheme="https://asutorufa.github.io/categories/%E6%97%A5%E6%9C%AC%E8%AA%9E/"/>
    
    
    <category term="æ—¥æœ¬èª" scheme="https://asutorufa.github.io/tags/%E6%97%A5%E6%9C%AC%E8%AA%9E/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨Android/PCä¸ºlinuxæ‹“å±•å±å¹•</title>
    <link href="https://asutorufa.github.io/posts/4f3989f0/"/>
    <id>https://asutorufa.github.io/posts/4f3989f0/</id>
    <published>2020-02-12T18:42:51.000Z</published>
    <updated>2020-02-12T18:42:51.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ–°å»ºè™šæ‹Ÿå±å¹•">æ–°å»ºè™šæ‹Ÿå±å¹•</h2><p>è®¡ç®—å‡ºæ‹“å±•å±å¹•æ‰€éœ€çš„ä¿¡æ¯.æ¯”å¦‚æˆ‘æƒ³æ‹“å±•1920x1200 60fpsçš„è™šæ‹Ÿå±å¹•:</p><pre class="language-bash" data-language="bash"><code class="language-bash">gtf <span class="token number">1920</span> <span class="token number">1200</span> <span class="token number">60</span></code></pre><p>ç»“æœ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 1920x1200 @ 60.00 Hz (GTF) hsync: 74.52 kHz; pclk: 193.16 MHz</span> Modeline <span class="token string">"1920x1200_60.00"</span>  <span class="token number">193.16</span>  <span class="token number">1920</span> <span class="token number">2048</span> <span class="token number">2256</span> <span class="token number">2592</span>  <span class="token number">1200</span> <span class="token number">1201</span> <span class="token number">1204</span> <span class="token number">1242</span>  <span class="token parameter variable">-HSync</span> +Vsync<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä½¿ç”¨xrandræ·»åŠ æ–°çš„mode,å‚æ•°å°±æ˜¯ä¸Šé¢ç»“æœ<code>Modeline</code>åé¢é‚£äº›ä¸œè¥¿:</p><pre class="language-bash" data-language="bash"><code class="language-bash">xrandr <span class="token parameter variable">--newmode</span> <span class="token string">"1920x1200_60.00"</span>  <span class="token number">193.16</span>  <span class="token number">1920</span> <span class="token number">2048</span> <span class="token number">2256</span> <span class="token number">2592</span>  <span class="token number">1200</span> <span class="token number">1201</span> <span class="token number">1204</span> <span class="token number">1242</span>  <span class="token parameter variable">-HSync</span> +Vsync</code></pre><p>ä½¿ç”¨xrandræŸ¥çœ‹ç©ºé—²çš„æ¥å£:</p><span id="more"></span><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span> ~ <span class="token punctuation">]</span> xrandrScreen <span class="token number">0</span>: minimum <span class="token number">8</span> x <span class="token number">8</span>, current <span class="token number">1920</span> x <span class="token number">1080</span>, maximum <span class="token number">32767</span> x <span class="token number">32767</span>eDP1 connected primary 1920x1080+0+0 <span class="token punctuation">(</span>normal left inverted right x axis y axis<span class="token punctuation">)</span> 340mm x 190mm   1920x1080     <span class="token number">60.02</span>*+  <span class="token number">40.03</span>  HDMI1 disconnected <span class="token punctuation">(</span>normal left inverted right x axis y axis<span class="token punctuation">)</span>VIRTUAL1 disconnected <span class="token punctuation">(</span>normal left inverted right x axis y axis<span class="token punctuation">)</span>HDMI-1-2 disconnected <span class="token punctuation">(</span>normal left inverted right x axis y axis<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¯”å¦‚æˆ‘ç›®å‰åœ¨ä½¿ç”¨çš„å±å¹•æ˜¯eDP1,ä¸‹é¢éƒ½ä¸ºç©ºé—²,å¦‚æœæœ‰è™šæ‹Ÿçš„å°±ç”¨è™šæ‹Ÿçš„,æ²¡æœ‰è™šæ‹Ÿçš„ç”¨HDMIçš„ä¹Ÿè¡Œ:</p><pre class="language-bash" data-language="bash"><code class="language-bash">xrandr <span class="token parameter variable">--addmode</span> VIRTUAL1 1920x1200_60.00</code></pre><p>æ‹“å±•å±å¹•åˆ°å·¦é¢:</p><pre class="language-bash" data-language="bash"><code class="language-bash">xrandr <span class="token parameter variable">--output</span> VIRTUAL1 <span class="token parameter variable">--mode</span> 1920x1200_60.00 --left-of eDP1 <span class="token comment"># &lt;- è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨--right-of,å°±æ˜¯æ‹“å±•åˆ°å·¦è¾¹.</span></code></pre><p>ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»åˆ›å»ºå¥½äº†ä¸€ä¸ªè™šæ‹Ÿå±å¹•.</p><p>å¦‚æœæƒ³åˆ é™¤ä¸Šé¢æ–°å»ºçš„ä¸œè¥¿,å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤(æ³¨æ„ç›¸å…³å‚æ•°æ¢æˆè‡ªå·±çš„)æˆ–è€…ç›´æ¥é‡å¯ç”µè„‘å°±å¥½äº†.</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">xrandr <span class="token parameter variable">--output</span> VIRTUAL1 <span class="token parameter variable">--off</span>xrandr <span class="token parameter variable">--delmode</span> VIRTUAL1 1920x1200_60.00xrndr <span class="token parameter variable">--rmmode</span> 1920x1200_60.00<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="è¿æ¥å±å¹•">è¿æ¥å±å¹•</h2><p>è¿æ¥å±å¹•å¯ä»¥ç”¨teamvieweræˆ–è€…x11vnc,ä»¥åŠå„ç§è¿œç¨‹æ§åˆ¶ç”µè„‘çš„è½¯ä»¶,è¿™é‡Œæˆ‘æ›´å»ºè®®ä½¿ç”¨teamviewer,æ›´æµç•…,è€Œä¸”æ–¹æ³•ç®€å•.</p><h3 id="x11vnc">x11vnc</h3><pre class="language-bash" data-language="bash"><code class="language-bash">x11vnc <span class="token parameter variable">-clip</span> 1920x1200+0+0 <span class="token comment"># &lt;-è¿™é‡Œçš„ä¸¤ä¸ª0,åˆ†åˆ«æ˜¯å¼€å§‹å‰ªåˆ‡çš„xå’Œyçš„åæ ‡,å¦‚æœä½ æ‹“å±•åˆ°äº†å³è¾¹,è¿™é‡Œå°±è¦åŠ ä¸Šç›¸åº”çš„å¤§å°.</span></code></pre><p>ç„¶åä½¿ç”¨å®‰å“ä¸Šçš„è¿æ¥vncçš„è½¯ä»¶å³å¯,é»˜è®¤ç«¯å£æ˜¯5900.</p><h2 id="ä½¿ç”¨usbåŠ å¿«ä¼ è¾“é€Ÿåº¦">ä½¿ç”¨usbåŠ å¿«ä¼ è¾“é€Ÿåº¦</h2><p>æŠŠæ‰‹æœºç”¨usbè¿æ¥åˆ°ç”µè„‘ä¸Š,ç„¶åç”¨adbè¿æ¥.</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb devices</code></pre><h3 id="x11vnc-2">x11vnc</h3><p>è¿™ä¸ªçš„é»˜è®¤ç«¯å£æ˜¯5900,å°†ç”µè„‘ç«¯å£æ˜ å°„åˆ°androidä¸Š.</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb reverse tcp:5900 tcp:5900</code></pre><p>ç„¶åæ‰‹æœºä¸Šç›´æ¥è¿æ¥127.0.0.1:5900å°±å¯ä»¥</p><h3 id="teamviewer">teamviewer</h3><p>åˆ°teamviewerå®˜ç½‘æŸ¥è¯¢,å¯ä»¥çŸ¥é“é»˜è®¤ç«¯å£ä¸º:</p><blockquote><p>TCP / UDPç«¯å£5938<br>TCPç«¯å£443<br>TCPç«¯å£80</p></blockquote><pre class="language-bash" data-language="bash"><code class="language-bash">adb reverse tcp:5938 tcp:5938</code></pre><p>åé¢çš„443å’Œ80ä¹Ÿå¯åšæ˜ å°„,ä¸è¿‡æˆ‘è¿™é‡Œå°±ä½¿ç”¨äº†5938å°±æˆåŠŸäº†.<br>ç„¶åæ‰‹æœºä¸Šçš„teamviewerè¿æ¥127.0.0.1å°±å¯ä»¥äº†.</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><blockquote><p><a href="https://sangams.com.np/using-android-pc-as-a-second-monitor-in-linux/">Using Android/PC as a Second Monitor in Linux</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æ–°å»ºè™šæ‹Ÿå±å¹•&quot;&gt;æ–°å»ºè™šæ‹Ÿå±å¹•&lt;/h2&gt;
&lt;p&gt;è®¡ç®—å‡ºæ‹“å±•å±å¹•æ‰€éœ€çš„ä¿¡æ¯.æ¯”å¦‚æˆ‘æƒ³æ‹“å±•1920x1200 60fpsçš„è™šæ‹Ÿå±å¹•:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;gtf &lt;span class=&quot;token number&quot;&gt;1920&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1200&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»“æœ&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 1920x1200 @ 60.00 Hz (GTF) hsync: 74.52 kHz; pclk: 193.16 MHz&lt;/span&gt;
 Modeline &lt;span class=&quot;token string&quot;&gt;&quot;1920x1200_60.00&quot;&lt;/span&gt;  &lt;span class=&quot;token number&quot;&gt;193.16&lt;/span&gt;  &lt;span class=&quot;token number&quot;&gt;1920&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2048&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2256&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2592&lt;/span&gt;  &lt;span class=&quot;token number&quot;&gt;1200&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1201&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1204&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1242&lt;/span&gt;  &lt;span class=&quot;token parameter variable&quot;&gt;-HSync&lt;/span&gt; +Vsync&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨xrandræ·»åŠ æ–°çš„mode,å‚æ•°å°±æ˜¯ä¸Šé¢ç»“æœ&lt;code&gt;Modeline&lt;/code&gt;åé¢é‚£äº›ä¸œè¥¿:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;xrandr &lt;span class=&quot;token parameter variable&quot;&gt;--newmode&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1920x1200_60.00&quot;&lt;/span&gt;  &lt;span class=&quot;token number&quot;&gt;193.16&lt;/span&gt;  &lt;span class=&quot;token number&quot;&gt;1920&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2048&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2256&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2592&lt;/span&gt;  &lt;span class=&quot;token number&quot;&gt;1200&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1201&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1204&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1242&lt;/span&gt;  &lt;span class=&quot;token parameter variable&quot;&gt;-HSync&lt;/span&gt; +Vsync&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨xrandræŸ¥çœ‹ç©ºé—²çš„æ¥å£:&lt;/p&gt;</summary>
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
    <category term="android" scheme="https://asutorufa.github.io/tags/android/"/>
    
    <category term="linux" scheme="https://asutorufa.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>linux PPPOEæ‹¨å·ä¸Šç½‘</title>
    <link href="https://asutorufa.github.io/posts/59c8ffd6/"/>
    <id>https://asutorufa.github.io/posts/59c8ffd6/</id>
    <published>2020-02-08T16:26:57.000Z</published>
    <updated>2020-02-08T16:26:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…rp-pppoe">å®‰è£…rp-pppoe</h2><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> rp-pppoe</code></pre><h2 id="é…ç½®">é…ç½®</h2><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> pppoe-setup</code></pre><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> Enter your PPPoE user name:</code></pre><p>è¿™é‡Œè¾“å…¥ç½‘ç»œè¿è¥å•†æä¾›ç»™ä½ çš„ç”¨æˆ·å.</p><span id="more"></span><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> Enter the Ethernet interface connected to the DSL modemFor Solaris, this is likely to be something like /dev/hme0.For Linux, it will be ethn, where <span class="token string">'n'</span> is a number. <span class="token builtin class-name">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œè¾“å…¥ä½ é“¾æ¥ç½‘ç»œçš„ç½‘å¡,å¯ä»¥ä½¿ç”¨<code>ip addr</code>è¿›è¡ŒæŸ¥çœ‹ æ¯”å¦‚<code>eth1</code>,<code>wlo1</code>.</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> Enter the demand value <span class="token punctuation">(</span>default no<span class="token punctuation">)</span>:</code></pre><p>è¿™é‡Œå¯ä»¥ç›´æ¥å›è½¦</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> Enter the DNS information here:</code></pre><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> Enter the secondary DNS server address here:</code></pre><p>è¿™é‡Œè¾“å…¥ä¸¤ä¸ªDNS,æ¯”å¦‚<code>1.1.1.1</code>,<code>8.8.8.8</code>.</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> Please enter your PPPoE password:  </code></pre><p>è¿™é‡Œè¾“å…¥ç½‘ç»œè¿è¥å•†æä¾›ç»™ä½ çš„å¯†ç .</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">The firewall choices are:<span class="token number">0</span> - NONE: This script will not <span class="token builtin class-name">set</span> any firewall rules.  You are responsible          <span class="token keyword">for</span> ensuring the security of your machine.  You are STRONGLY          recommended to use some kind of firewall rules.<span class="token number">1</span> - STANDALONE: Appropriate <span class="token keyword">for</span> a basic stand-alone web-surfing workstation<span class="token number">2</span> - MASQUERADE: Appropriate <span class="token keyword">for</span> a machine acting as an Internet gateway                <span class="token keyword">for</span> a LAN<span class="token operator">>></span><span class="token operator">></span> Choose a <span class="token builtin class-name">type</span> of firewall <span class="token punctuation">(</span><span class="token number">0</span>-2<span class="token punctuation">)</span>:<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä½¿ç”¨1,å¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚é€‰æ‹©é˜²ç«å¢™é…ç½®.</p><h2 id="å¯ç”¨">å¯ç”¨</h2><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> pppoe-start</code></pre><p>å¯ä»¥ä½¿ç”¨<code>ip addr</code>è¿›è¡ŒæŸ¥çœ‹,ç°åœ¨åº”è¯¥æœ‰ä¸€ä¸ª<code>ppp0</code>çš„ç½‘ç»œ.</p><h2 id="æŸ¥çœ‹è·¯ç”±ç¡®è®¤å¯ç”¨">æŸ¥çœ‹è·¯ç”±ç¡®è®¤å¯ç”¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span> ~ <span class="token punctuation">]</span> routeKernel IP routing tableDestination     Gateway         Genmask         Flags Metric Ref    Use Ifacedefault         <span class="token number">0.0</span>.0.0         <span class="token number">0.0</span>.0.0         U     <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> ppp0                                <span class="token punctuation">..</span>.                                <span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ²¡æœ‰defaultåˆ°ppp0çš„è¿™æ¡è·¯ç”±,éœ€è¦æ‰‹åŠ¨åˆ›å»º:</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> route <span class="token function">add</span> default dev ppp0</code></pre><h2 id="å¼•ç”¨">å¼•ç”¨</h2><blockquote><ul><li><a href="https://www.cnblogs.com/viusuangio/p/7112674.html">archlinux pppoeæ‹¨å·è¿æ¥ä½¿ç”¨è¯¦è§£[è½¬è½½]</a></li><li><a href="https://www.librehat.com/guide-on-linux-ppp-over-wireless-network/">Linuxä¸‹è¿æ¥æ— çº¿ç½‘ç»œåæ‹¨å·ï¼ˆå³PPP over WiFiï¼‰</a></li></ul></blockquote>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å®‰è£…rp-pppoe&quot;&gt;å®‰è£…rp-pppoe&lt;/h2&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pacman &lt;span class=&quot;token parameter variable&quot;&gt;-S&lt;/span&gt; rp-pppoe&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;é…ç½®&quot;&gt;é…ç½®&lt;/h2&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; pppoe-setup&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; Enter your PPPoE user name:&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œè¾“å…¥ç½‘ç»œè¿è¥å•†æä¾›ç»™ä½ çš„ç”¨æˆ·å.&lt;/p&gt;</summary>
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
    <category term="archlinux" scheme="https://asutorufa.github.io/tags/archlinux/"/>
    
    <category term="linux" scheme="https://asutorufa.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>OpenCVç³å­”å®šä½</title>
    <link href="https://asutorufa.github.io/posts/88967b7c/"/>
    <id>https://asutorufa.github.io/posts/88967b7c/</id>
    <published>2020-02-06T18:15:35.000Z</published>
    <updated>2020-02-06T18:15:35.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ©ç”¨OpenCVè‡ªå¸¦çš„åˆ†ç±»å™¨è¯†åˆ«é¢éƒ¨åŠçœ¼ç›">åˆ©ç”¨OpenCVè‡ªå¸¦çš„åˆ†ç±»å™¨è¯†åˆ«é¢éƒ¨åŠçœ¼ç›</h2><p>OpenCVè‡ªå¸¦é‡Œè®¸å¤šåˆ†ç±»å™¨,å¯åœ¨<a href="https://github.com/opencv/opencv/tree/master/data/haarcascades">haarcascades</a>ä¸‹è½½</p><h3 id="è·å–é¢éƒ¨">è·å–é¢éƒ¨</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// è·å–é¢éƒ¨</span><span class="token comment">// image ä¸ºè¾“å…¥çš„OpenCVçš„æ ¼å¼çš„å›¾åƒ</span><span class="token comment">// out ä¸ºè¾“å‡ºå›¾åƒ &lt;- æ­¤å¤„è¾“å‡ºå›¾åƒä¸ºè£å‰ªä¸‹æ¥çš„çŸ©å½¢é¢éƒ¨å›¾åƒ</span><span class="token keyword">bool</span> <span class="token function">get_face</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat image<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>out<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// å°†å›¾åƒè½¬ä¸ºç°åº¦å›¾åƒ,å¯æé«˜è¯†åˆ«ç²¾åº¦</span>    cv<span class="token double-colon punctuation">::</span>Mat gray<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">cvtColor</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> CV_BGR2GRAY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ­¤å¤„çš„rectä¸ºç”¨æ¥å­˜å‚¨è¯†åˆ«å‡ºçš„é¢éƒ¨çš„å®šä½ &lt;- è¿™é‡Œä¸ºvectoræ˜¯å› ä¸ºè¯†åˆ«çš„é¢éƒ¨å¯èƒ½ä¸æ­¢ä¸ºä¸€ä¸ª</span>    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Rect<span class="token operator">></span> rect<span class="token punctuation">;</span>    <span class="token comment">// åˆå§‹åŒ–OpenCVçš„åˆ†ç±»å™¨</span>    cv<span class="token double-colon punctuation">::</span>CascadeClassifier cas <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">CascadeClassifier</span><span class="token punctuation">(</span><span class="token string">"haarcascade_frontalface_default.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cas<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> rect<span class="token punctuation">,</span> <span class="token number">1.15</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ¤æ–­rectæ˜¯å¦ä¸ºç©º,ä¸ºç©ºçš„è¯å°±æ˜¯æ²¡æœ‰è¢«è¯†åˆ«çš„é¢éƒ¨</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è¾“å‡ºå›¾åƒ,è¿™é‡Œçš„rectå¯èƒ½ä¸æ­¢ä¸ºä¸€ä¸ª(å› ä¸ºå¯èƒ½ä¸æ­¢ä¸€å¼ è„¸),æ‰€ä»¥å®é™…ä¸­åº”è¯¥ä½¿ç”¨forå¾ªç¯</span>    <span class="token comment">// æˆ‘è¿™é‡Œç”¨rect[0]ä¸ºäº†ç®€åŒ–</span>    out <span class="token operator">=</span> <span class="token function">image</span><span class="token punctuation">(</span>rect<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><h3 id="è·å–çœ¼ç›">è·å–çœ¼ç›</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// è¿™é‡Œä¸ä¸Šé¢ç›¸åŒ(è¿™é‡Œæˆ‘åªè¯†åˆ«å·¦çœ¼,OpenCVè¿˜æä¾›äº†å…¶ä»–æ–‡ä»¶å¯è·å–å³çœ¼å’ŒåŒçœ¼)</span><span class="token keyword">bool</span> <span class="token function">get_left_eye</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat image<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>out<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// ä¹‹åä¸é¢éƒ¨ç›¸åŒ</span>    cv<span class="token double-colon punctuation">::</span>Mat gray<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">cvtColor</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> CV_BGR2GRAY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Rect<span class="token operator">></span> rect<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>CascadeClassifier cas <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">CascadeClassifier</span><span class="token punctuation">(</span><span class="token string">"xml/haarcascade_lefteye_2splits.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cas<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> rect<span class="token punctuation">,</span> <span class="token number">1.15</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    out <span class="token operator">=</span> <span class="token function">image</span><span class="token punctuation">(</span>rect<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç³å­”å®šä½">ç³å­”å®šä½</h2><ul><li>è·å–çš„çœ¼ç›å›¾åƒ</li><li>è£å‰ªå»é™¤çœ‰æ¯›</li><li>ä¼½é©¬çŸ«æ­£æé«˜å›¾åƒå¯¹æ¯”åº¦</li><li>è½¬åŒ–ä¸ºç°åº¦å›¾åƒ</li><li>åˆ©ç”¨thresholdè¿›è¡Œé˜ˆå€¼æ“ä½œ(æ­¤å¤„å¯èƒ½ä¼šæ”¹ä¸ºinRange,ç›®å‰è¿˜åœ¨æµ‹è¯•)</li><li>è…èš€</li><li>è†¨èƒ€</li><li>medianBlurå¹³æ»‘å›¾åƒ</li><li>æ£€æµ‹å…³é”®ç‚¹å¹¶ç”»åœ¨å›¾åƒä¸Š</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å®šä½çœ¼çƒ -> æ£€æµ‹å…³é”®ç‚¹</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>KeyPoint<span class="token operator">></span> <span class="token function">dector</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat image<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>SimpleBlobDetector<span class="token double-colon punctuation">::</span>Params detector_params<span class="token punctuation">;</span>    detector_params<span class="token punctuation">.</span>filterByArea <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    detector_params<span class="token punctuation">.</span>maxArea <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Ptr<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>SimpleBlobDetector<span class="token operator">></span> blob_dector <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">SimpleBlobDetector</span><span class="token double-colon punctuation">::</span><span class="token function">create</span><span class="token punctuation">(</span>detector_params<span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>KeyPoint<span class="token operator">></span> keypoints<span class="token punctuation">;</span>    blob_dector<span class="token operator">-></span><span class="token function">detect</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> keypoints<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> keypoints<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">bool</span> <span class="token function">get_pupil</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat image<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>out<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// width -> image.rows ;</span>    <span class="token comment">// height -> image.cols;</span>    <span class="token comment">// cut eyebrow è£å‰ª å»é™¤çœ‰æ¯›</span>    image <span class="token operator">=</span> <span class="token function">image</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">Rect</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>cols <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>rows <span class="token operator">/</span> <span class="token number">2.5</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>rows <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Gamma correction/gamma nonlinearity ä¼½é©¬æ ¡æ­£ -> https://www.cnblogs.com/sdu20112013/p/11597171.html</span>    cv<span class="token double-colon punctuation">::</span>Mat <span class="token function">look_up_table</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> CV_8U<span class="token punctuation">)</span><span class="token punctuation">;</span>    uchar <span class="token operator">*</span>p <span class="token operator">=</span> look_up_table<span class="token punctuation">.</span><span class="token function">ptr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> gamma <span class="token operator">=</span> <span class="token number">0.7</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">256</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">saturate_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">pow</span><span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token number">255.0</span><span class="token punctuation">,</span> gamma<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">255.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">LUT</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> look_up_table<span class="token punctuation">,</span> image<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat gray<span class="token punctuation">;</span>    <span class="token comment">// è½¬åŒ–ä¸ºç°åº¦å›¾åƒ</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">cvtColor</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> CV_BGR2GRAY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// é˜ˆå€¼æ“ä½œ</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">threshold</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> inRange_threshold<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> CV_THRESH_BINARY<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è†¨èƒ€åŠè…èš€</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">erode</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">dilate</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¹³æ»‘å›¾åƒ</span>    cv <span class="token double-colon punctuation">::</span><span class="token function">medianBlur</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ£€æµ‹å¹¶ç”»å‡ºå…³é”®ç‚¹</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">drawKeypoints</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token function">dector</span><span class="token punctuation">(</span>gray<span class="token punctuation">)</span><span class="token punctuation">,</span> image<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>DrawMatchesFlags<span class="token double-colon punctuation">::</span>DRAW_RICH_KEYPOINTS<span class="token punctuation">)</span><span class="token punctuation">;</span>    out <span class="token operator">=</span> image<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é™„å½•">é™„å½•</h2><h3 id="OpenCVåœ¨ArchLinuxä¸Šçš„ä½¿ç”¨">OpenCVåœ¨ArchLinuxä¸Šçš„ä½¿ç”¨</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> opencv<span class="token comment"># vtkå’Œhdf5ä¸ºopencvçš„ä¾èµ–,ä¸å®‰è£…ç¼–è¯‘ä¼šå¤±è´¥</span><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> vtk<span class="token function">sudo</span> pacman <span class="token parameter variable">-Ss</span> hdf5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Cmakeæ–‡ä»¶">Cmakeæ–‡ä»¶</h3><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.14</span><span class="token punctuation">)</span><span class="token keyword">project</span><span class="token punctuation">(</span>eyedector<span class="token punctuation">)</span><span class="token keyword">add_definitions</span><span class="token punctuation">(</span>-std=c++<span class="token number">11</span><span class="token punctuation">)</span><span class="token comment"># è¿™é‡Œåªéœ€è¦æ·»åŠ OpenCVçš„å°±èƒ½ç¼–è¯‘æˆåŠŸ</span><span class="token keyword">find_package</span><span class="token punctuation">(</span>OpenCV REQUIRED<span class="token punctuation">)</span><span class="token keyword">link_libraries</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>OpenCV_LIBS<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>out opencvtest.cpp<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ©ç”¨å®‰å“æ‰‹æœºå……å½“ç½‘ç»œæ‘„åƒå¤´">åˆ©ç”¨å®‰å“æ‰‹æœºå……å½“ç½‘ç»œæ‘„åƒå¤´</h3><p>æ‰‹æœºå®‰è£…è¿™ä¸ª<a href="https://play.google.com/store/apps/details?id=com.pas.webcam">IP Webcam</a>,ä½¿ç”¨æ—¶ä¼šæ˜¾ç¤ºå±€åŸŸç½‘ä¸­çš„åœ°å€</p><p>OpenCVä¸­</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">cv<span class="token double-colon punctuation">::</span>VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token string">"http://192.168.0.xx:8080/video"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œä¸ºç½‘ç»œæ‘„åƒå¤´çš„åœ°å€,éœ€è¦åœ¨åé¢åŠ ä¸Š/video</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat frame<span class="token punctuation">;</span>    cap <span class="token operator">>></span> frame<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;åˆ©ç”¨OpenCVè‡ªå¸¦çš„åˆ†ç±»å™¨è¯†åˆ«é¢éƒ¨åŠçœ¼ç›&quot;&gt;åˆ©ç”¨OpenCVè‡ªå¸¦çš„åˆ†ç±»å™¨è¯†åˆ«é¢éƒ¨åŠçœ¼ç›&lt;/h2&gt;
&lt;p&gt;OpenCVè‡ªå¸¦é‡Œè®¸å¤šåˆ†ç±»å™¨,å¯åœ¨&lt;a href=&quot;https://github.com/opencv/opencv/tree/master/data/haarcascades&quot;&gt;haarcascades&lt;/a&gt;ä¸‹è½½&lt;/p&gt;
&lt;h3 id=&quot;è·å–é¢éƒ¨&quot;&gt;è·å–é¢éƒ¨&lt;/h3&gt;
&lt;pre class=&quot;line-numbers language-cpp&quot; data-language=&quot;cpp&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// è·å–é¢éƒ¨&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// image ä¸ºè¾“å…¥çš„OpenCVçš„æ ¼å¼çš„å›¾åƒ&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// out ä¸ºè¾“å‡ºå›¾åƒ &amp;lt;- æ­¤å¤„è¾“å‡ºå›¾åƒä¸ºè£å‰ªä¸‹æ¥çš„çŸ©å½¢é¢éƒ¨å›¾åƒ&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_face&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cv&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;Mat image&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cv&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;Mat &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// å°†å›¾åƒè½¬ä¸ºç°åº¦å›¾åƒ,å¯æé«˜è¯†åˆ«ç²¾åº¦&lt;/span&gt;
    cv&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;Mat gray&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cv&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cvtColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gray&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; CV_BGR2GRAY&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// æ­¤å¤„çš„rectä¸ºç”¨æ¥å­˜å‚¨è¯†åˆ«å‡ºçš„é¢éƒ¨çš„å®šä½ &amp;lt;- è¿™é‡Œä¸ºvectoræ˜¯å› ä¸ºè¯†åˆ«çš„é¢éƒ¨å¯èƒ½ä¸æ­¢ä¸ºä¸€ä¸ª&lt;/span&gt;
    std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;cv&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;Rect&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; rect&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// åˆå§‹åŒ–OpenCVçš„åˆ†ç±»å™¨&lt;/span&gt;
    cv&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;CascadeClassifier cas &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cv&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;CascadeClassifier&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;haarcascade_frontalface_default.xml&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;detectMultiScale&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gray&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rect&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.15&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// åˆ¤æ–­rectæ˜¯å¦ä¸ºç©º,ä¸ºç©ºçš„è¯å°±æ˜¯æ²¡æœ‰è¢«è¯†åˆ«çš„é¢éƒ¨&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// è¾“å‡ºå›¾åƒ,è¿™é‡Œçš„rectå¯èƒ½ä¸æ­¢ä¸ºä¸€ä¸ª(å› ä¸ºå¯èƒ½ä¸æ­¢ä¸€å¼ è„¸),æ‰€ä»¥å®é™…ä¸­åº”è¯¥ä½¿ç”¨forå¾ªç¯&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// æˆ‘è¿™é‡Œç”¨rect[0]ä¸ºäº†ç®€åŒ–&lt;/span&gt;
    out &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rect&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="Computer Graphics" scheme="https://asutorufa.github.io/categories/Computer-Graphics/"/>
    
    
    <category term="C++" scheme="https://asutorufa.github.io/tags/C/"/>
    
    <category term="OpenCV" scheme="https://asutorufa.github.io/tags/OpenCV/"/>
    
    <category term="archlinux" scheme="https://asutorufa.github.io/tags/archlinux/"/>
    
  </entry>
  
  <entry>
    <title>http Keep-Alive</title>
    <link href="https://asutorufa.github.io/posts/d91b7c06/"/>
    <id>https://asutorufa.github.io/posts/d91b7c06/</id>
    <published>2019-12-23T23:37:32.000Z</published>
    <updated>2019-12-23T23:37:32.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="http-keep-alive">http keep-alive</h2><p>httpå¤´éƒ¨<code>Connection: Keep-Alive</code>ä»£è¡¨è¿æ¥è¯·æ±‚ä¿æŒé•¿è¿æ¥<br><strong>å¦‚æœæ˜¯httpä»£ç†,å¿…é¡»å¤„ç†<code>Proxy-Connection: Keep-Alive</code>ä¸º<code>Connection: Keep-Alive</code>,å¦‚æœä»£ç†æ²¡æœ‰å®ç°<code>Keep-Alive</code>å°±ä¸å˜æˆ–è€…å°†Connectionè®¾ä¸ºclose.</strong></p><p>ä¼˜ç‚¹:å‡å°‘æ¡æ‰‹æ¬¡æ•°,å¦‚ä¸‹å›¾(å›¾æ¥æºæ–‡ç« æœ€ä¸‹é¢)<br><img src="https://milestone-of-se.nesuke.com/wp-content/uploads/2018/12/http-keepalive-2v2.png" alt="keep-alive" loading="lazy"></p><span id="more"></span><h2 id="åˆ¤æ–­ä¸€æ¬¡è¿æ¥çš„ä¼ è¾“ç»“æŸ">åˆ¤æ–­ä¸€æ¬¡è¿æ¥çš„ä¼ è¾“ç»“æŸ</h2><h3 id="ä½¿ç”¨æ¶ˆæ¯é¦–éƒ¨å­—æ®µConent-Length">ä½¿ç”¨æ¶ˆæ¯é¦–éƒ¨å­—æ®µ<code>Conent-Length</code></h3><p><code>Conent-Length</code>è¡¨ç¤ºå®ä½“å†…å®¹é•¿åº¦ï¼Œå®¢æˆ·ç«¯ï¼ˆæœåŠ¡å™¨ï¼‰å¯ä»¥æ ¹æ®è¿™ä¸ªå€¼æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦æ¥æ”¶å®Œæˆã€‚</p><h3 id="ä½¿ç”¨Transfer-Encoding-chunked">ä½¿ç”¨<code>Transfer-Encoding: chunked</code></h3><p>chunkç¼–ç å°†æ•°æ®åˆ†æˆä¸€å—ä¸€å—çš„å‘ç”Ÿã€‚Chunkedç¼–ç å°†ä½¿ç”¨è‹¥å¹²ä¸ªChunkä¸²è¿è€Œæˆï¼Œç”±ä¸€ä¸ªæ ‡æ˜é•¿åº¦ä¸º0çš„chunkæ ‡ç¤ºç»“æŸã€‚</p><hr><p>å‚è€ƒ:</p><ul><li><a href="https://www.google.com/amp/s/milestone-of-se.nesuke.com/nw-basic/as-nw-engineer/keepalive-tcp-http/%3Famp=1">ã€å›³è§£ã€‘TCP Keep-Alive/http Keep-Aliveã®ä»•çµ„ã¿ã¨é•ã„ ï½Client/Serverã®æŒ™å‹•ã¨ãƒ¡ãƒªãƒƒãƒˆ,è¨­å®šï½</a></li><li><a href="https://www.cnblogs.com/skynet/archive/2010/12/11/1903347.html#!comments">HTTPå¤´éƒ¨è¯¦è§£</a></li><li><a href="https://www.jianshu.com/p/49551bda6619">HTTPåè®®çš„Keep-Alive æ¨¡å¼</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;http-keep-alive&quot;&gt;http keep-alive&lt;/h2&gt;
&lt;p&gt;httpå¤´éƒ¨&lt;code&gt;Connection: Keep-Alive&lt;/code&gt;ä»£è¡¨è¿æ¥è¯·æ±‚ä¿æŒé•¿è¿æ¥&lt;br&gt;
&lt;strong&gt;å¦‚æœæ˜¯httpä»£ç†,å¿…é¡»å¤„ç†&lt;code&gt;Proxy-Connection: Keep-Alive&lt;/code&gt;ä¸º&lt;code&gt;Connection: Keep-Alive&lt;/code&gt;,å¦‚æœä»£ç†æ²¡æœ‰å®ç°&lt;code&gt;Keep-Alive&lt;/code&gt;å°±ä¸å˜æˆ–è€…å°†Connectionè®¾ä¸ºclose.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¼˜ç‚¹:å‡å°‘æ¡æ‰‹æ¬¡æ•°,å¦‚ä¸‹å›¾(å›¾æ¥æºæ–‡ç« æœ€ä¸‹é¢)&lt;br&gt;
&lt;img src=&quot;https://milestone-of-se.nesuke.com/wp-content/uploads/2018/12/http-keepalive-2v2.png&quot; alt=&quot;keep-alive&quot; loading=&quot;lazy&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="HTTP" scheme="https://asutorufa.github.io/tags/HTTP/"/>
    
    <category term="proxy" scheme="https://asutorufa.github.io/tags/proxy/"/>
    
  </entry>
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ </title>
    <link href="https://asutorufa.github.io/posts/33115a55/"/>
    <id>https://asutorufa.github.io/posts/33115a55/</id>
    <published>2019-11-09T13:50:02.000Z</published>
    <updated>2019-11-14T13:50:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>å¦‚æœä»¥ä¸‹çš„è¡¨æ ¼åŠå›¾åƒå‡ºç°æ ¼å¼é—®é¢˜,è¯·å°†ä½ çš„æµè§ˆå™¨ä¸­æ–‡å­—ä½“çš„ç­‰å®½å­—ä½“è®¾ç½®å¥½</strong></p><h2 id="ä¸€-é¢„å¤„ç†">ä¸€.é¢„å¤„ç†</h2><h3 id="æå–ç‰¹å¾é‡">æå–ç‰¹å¾é‡</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Human created algorithm: äººæƒ³åˆ°çš„ç®—æ³•         +-----------------------+-------<span class="token operator">></span> <span class="token operator">|</span>Human created algorithm<span class="token operator">|</span> --------<span class="token operator">></span> ç­”æ¡ˆ         +-----------------------+Human created Feature quantity: äººæƒ³åˆ°çš„ç‰¹å¾é‡      +------------------------------------------+       +---------------------------+----<span class="token operator">></span> <span class="token operator">|</span>Human created Feature quantity<span class="token punctuation">(</span>SIF,HGD<span class="token punctuation">..</span>.<span class="token punctuation">)</span><span class="token operator">|</span> ----<span class="token operator">></span> <span class="token operator">|</span>Machine learning<span class="token punctuation">(</span>svm,knn<span class="token punctuation">..</span><span class="token punctuation">)</span><span class="token operator">|</span> ---<span class="token operator">></span> ç­”æ¡ˆ      +------------------------------------------+       +---------------------------+Feature quantity <span class="token function">find</span> by computer: è®¡ç®—æœºè‡ªåŠ¨å¯»æ‰¾ç‰¹å¾é‡         +-----------------------------------+         <span class="token operator">|</span>        Neural Networks            <span class="token operator">|</span>-------<span class="token operator">></span> <span class="token operator">|</span>      <span class="token punctuation">(</span>Machine learning<span class="token punctuation">)</span>           <span class="token operator">|</span> --------<span class="token operator">></span> ç­”æ¡ˆ         <span class="token operator">|</span> Feature quantity <span class="token function">find</span> by computer <span class="token operator">|</span>         +-----------------------------------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Hyper-Parameter">Hyper-Parameter</h3><ol><li>è®¾å®šè¶…å‚æ•°çš„èŒƒå›´</li><li>ä»è®¾å®šçš„è¶…å‚æ•°çš„èŒƒå›´ä¸­éšæœºé‡‡æ ·</li><li>ä½¿ç”¨æ­¥éª¤1ä¸­é‡‡æ ·åˆ°çš„è¶…å‚æ•°çš„å€¼è¿›è¡Œå­¦ä¹ ,é€šè¿‡éªŒè¯æ•°æ®,è¯„ä¼°è¯†åˆ«ç²¾åº¦(è¦å°†epochè®¾ç½®å¾—å¾ˆå°)</li><li>é‡å¤æ­¥éª¤1å’Œæ­¥éª¤2,æ ¹æ®ä»–ä»¬çš„è¯†åˆ«ç²¾åº¦çš„ç»“æœç¼©å°è¶…å‚æ•°çš„èŒƒå›´</li></ol><blockquote><p>è¶…å‚æ•°ä¼˜åŒ–å‚è€ƒ:è´å¶æ–¯æœ€ä¼˜åŒ–</p></blockquote><h4 id="æƒé‡">æƒé‡</h4><p>æƒé‡çš„åˆå§‹å€¼:ä¸åº”è¯¥è®¾ç½®ä¸º0/1(è®¾ç½®ä¸º0æˆ–1,å¯èƒ½é€ æˆæ¢¯åº¦æ¶ˆå¤±),åº”é€‰æ‹©éšæœºç”Ÿæˆåˆå§‹å€¼</p><blockquote><p>å…¶ä»–æƒé‡åˆå§‹å€¼: Heåˆå§‹å€¼</p></blockquote><h4 id="è¾“å‡ºå±‚">è¾“å‡ºå±‚</h4><p>è¾“å‡ºå±‚çš„ç¥ç»æ•°é‡éœ€è¦æ ¹æ®å¾…è§£å†³çš„é—®é¢˜æ¥å†³å®š,å¦‚:å¯¹äºåˆ†ç±»é—®é¢˜,è¾“å‡ºå±‚çš„ç¥ç»å…ƒæ•°é‡ä¸€èˆ¬è®¾å®šä¸ºç±»åˆ«çš„æ•°é‡.</p><span id="more"></span><h2 id="äºŒ-æ¿€æ´»å‡½æ•°">äºŒ.æ¿€æ´»å‡½æ•°</h2><p>æ¿€æ´»å‡½æ•°ç”¨æ¥å†³å®šå¦‚ä½•æ¥æ¿€æ´»(å¤„ç†)è¾“å…¥çš„ä¿¡å·.<br>å¦‚:<br>æ„ŸçŸ¥å™¨<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mi>b</mi><mo>+</mo><msub><mi>w</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex"> a = b + w_1x_1 + w_2x_2 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">signal <span class="token builtin class-name">:</span> è¾“å…¥çš„ä¿¡å·Biasing: åç½®Weight <span class="token builtin class-name">:</span> æƒé‡+-----+---------+<span class="token operator">|</span>x1 x2<span class="token operator">|</span> Signal  <span class="token operator">|</span>+-----+---------+<span class="token operator">|</span>  b  <span class="token operator">|</span> Biasing <span class="token operator">|</span>+-----+---------+<span class="token operator">|</span>w1 w2<span class="token operator">|</span> Weight  <span class="token operator">|</span>+-----+---------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">    b   +--------------------+ <span class="token number">1</span>----<span class="token operator">></span> <span class="token operator">|</span>                    <span class="token operator">|</span>        <span class="token operator">|</span> +---+  h<span class="token punctuation">(</span><span class="token punctuation">)</span>  +---+  <span class="token operator">|</span>   w1   <span class="token operator">|</span> <span class="token operator">|</span> a <span class="token operator">|</span> ----<span class="token operator">></span> <span class="token operator">|</span> y <span class="token operator">|</span>  <span class="token operator">|</span>x1----<span class="token operator">></span> <span class="token operator">|</span> +---+       +---+  <span class="token operator">|</span>        <span class="token operator">|</span>                    <span class="token operator">|</span>   w2   <span class="token operator">|</span>                    <span class="token operator">|</span>x2----<span class="token operator">></span> <span class="token operator">|</span>                    <span class="token operator">|</span>        +--------------------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="sigmoidå‡½æ•°">sigmoidå‡½æ•°</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex"> h(x) = \frac{1}{1+exp(-1)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3651em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><h3 id="é˜¶è¶Šå‡½æ•°">é˜¶è¶Šå‡½æ•°</h3><p>åœ¨æ•°å­¦ä¸­ï¼Œå¦‚æœå®æ•°åŸŸä¸Šçš„æŸä¸ªå‡½æ•°å¯ä»¥ç”¨åŠå¼€åŒºé—´ä¸Šçš„æŒ‡ç¤ºå‡½æ•°çš„æœ‰é™æ¬¡çº¿æ€§ç»„åˆæ¥è¡¨ç¤ºï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ˜¯é˜¶è·ƒå‡½æ•°ï¼Œæˆ–è€…å«èµ«ç»´èµ›å¾·å‡½æ•°ã€‚æ¢ä¸€ç§ä¸å¤ªæ­£å¼çš„è¯´æ³•å°±æ˜¯ï¼Œé˜¶è·ƒå‡½æ•°æ˜¯æœ‰é™æ®µåˆ†æ®µå¸¸æ•°å‡½æ•°çš„ç»„åˆã€‚</p><h3 id="ReLV-Rectified-Linear-Vnit-å‡½æ•°">ReLV(Rectified Linear Vnit)å‡½æ•°</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>xÂ &gt;Â 0</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>xÂ &lt;=Â 0</mtext></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">f(x)=\begin{cases}x&amp; \text{x &gt; 0}\\0&amp; \text{x &lt;= 0}\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">xÂ &gt;Â 0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">xÂ &lt;=Â 0</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br>ç”±äºhexoæ¸²æŸ“å™¨çš„é—®é¢˜,æ­¤å¤„å…¬å¼æœ¬æ¥åº”è¯¥ä¸ºä¸¤è¡Œ,å¦‚ä¸‹:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">        +- x <span class="token punctuation">(</span>x<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span>f<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">=</span>  <span class="token operator">|</span>        +- <span class="token number">0</span> <span class="token punctuation">(</span>x<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="ä¸‰-æŸå¤±å‡½æ•°">ä¸‰.æŸå¤±å‡½æ•°</h2><p>è¡¨ç¤ºç¥ç»ç½‘ç»œæ€§èƒ½çš„&quot;æ¶åŠ£ç¨‹åº¦&quot;çš„æŒ‡æ ‡,åŠå½“å‰çš„å‡çº§ç½‘ç»œå¯¹ç›‘ç£æ•°æ®åœ¨å¤šå¤§ç¨‹åº¦ä¸Šä¸æ‹Ÿåˆ,åœ¨å¤šå¤§ç¨‹åº¦ä¸Šä¸ä¸€è‡´.</p><h3 id="å‡æ–¹è¯¯å·®">å‡æ–¹è¯¯å·®</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msub><mo>âˆ‘</mo><mi>k</mi></msub><mo stretchy="false">(</mo><msub><mi>y</mi><mi>k</mi></msub><mo>âˆ’</mo><msub><mi>t</mi><mi>k</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">E = \frac{1}{2} \sum_k (y_k - t_k)^2 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1864em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>: æ•°æ®çš„ç»´åº¦<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">y_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>: ç¥ç»ç½‘ç»œçš„è¾“å‡º<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">t_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>: ç›‘ç£æ•°æ®</p><h3 id="äº¤å‰ç†µè¯¯å·®">äº¤å‰ç†µè¯¯å·®</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>=</mo><mo>âˆ’</mo><msub><mo>âˆ‘</mo><mi>k</mi></msub><msub><mi>t</mi><mi>k</mi></msub><mi>log</mi><mo>â¡</mo><msub><mi>y</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">E = - \sum_k t_k \log y_k </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1864em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>: æ•°æ®çš„ç»´åº¦<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">y_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>: ç¥ç»ç½‘ç»œçš„è¾“å‡º<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">t_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>: ç›‘ç£æ•°æ®</p><h2 id="å››-ç½‘ç»œå±‚">å››.ç½‘ç»œå±‚</h2><h3 id="sigmoidå±‚">sigmoidå±‚</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex"> y = \frac{1}{1+exp(-1)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3651em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><h3 id="Affineå±‚-ä»¿å°„å˜æ¢">Affineå±‚(ä»¿å°„å˜æ¢)</h3><p>ä»¿å°„å˜æ¢åŒ…æ‹¬ä¸€æ¬¡çº¿æ€§å˜æ¢å’Œä¸€æ¬¡å¹³ç§»å˜æ¢,åˆ†åˆ«å¯¹åº”ç¥ç»ç½‘ç»œçš„åŠ æƒå’Œè¿ç®—ä¸åŠ åç½®è¿ç®—</p><h3 id="Convolutional-Neural-Network-å·ç§¯ç¥ç»ç½‘ç»œ-CNN">Convolutional Neural Network(å·ç§¯ç¥ç»ç½‘ç»œ,CNN)</h3><h4 id="å·ç§¯å±‚">å·ç§¯å±‚</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">                       æ»¤æ³¢å™¨<span class="token punctuation">(</span>ç›¸å½“äºæƒé‡<span class="token punctuation">)</span>                     åç½®+---+---+---+---+<span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span>       +---+---+---++---+---+---+---+       <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span>         +---+---+                 +---+---+<span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span>       +---+---+---+         <span class="token operator">|</span><span class="token number">15</span> <span class="token operator">|</span> <span class="token number">16</span><span class="token operator">|</span>    +---+        <span class="token operator">|</span><span class="token number">18</span> <span class="token operator">|</span> <span class="token number">19</span><span class="token operator">|</span>+---+---+---+---+   â¨€   <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span>  ----<span class="token operator">></span>  +---+---+  + <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span>   ---<span class="token operator">></span> +---+---+<span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span>       +---+---+---+         <span class="token operator">|</span> <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">15</span><span class="token operator">|</span>    +---+        <span class="token operator">|</span> <span class="token number">9</span> <span class="token operator">|</span> <span class="token number">18</span><span class="token operator">|</span>+---+---+---+---+       <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span>         +---+---+                 +---+---+<span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span>       +---+---+---++---+---+---+---+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mi>H</mi></msub><mo>=</mo><mfrac><mrow><mi>H</mi><mo>+</mo><mn>2</mn><mi>P</mi><mo>âˆ’</mo><msub><mi>F</mi><mi>H</mi></msub></mrow><mi>S</mi></mfrac><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">O_H = \frac{H+2P-F_H}{S} + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2336em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8886em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4103em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span><span class="mbin mtight">+</span><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">âˆ’</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mi>W</mi></msub><mo>=</mo><mfrac><mrow><mi>W</mi><mo>+</mo><mn>2</mn><mi>P</mi><mo>âˆ’</mo><msub><mi>F</mi><mi>W</mi></msub></mrow><mi>S</mi></mfrac><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">O_W = \frac{W+2P-F_W}{S} + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2336em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8886em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4103em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="mbin mtight">+</span><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">âˆ’</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span><br>è¾“å‡ºå¤§å°: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>O</mi><mi>H</mi></msub><mo separator="true">,</mo><msub><mi>O</mi><mi>W</mi></msub></mrow><annotation encoding="application/x-tex">O_H,O_W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br>æ»¤æ³¢å™¨å¤§å°: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>H</mi></msub><mo separator="true">,</mo><msub><mi>F</mi><mi>W</mi></msub></mrow><annotation encoding="application/x-tex">F_H,F_W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br>å¡«å……å¤§å°: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> , è°ƒæ•´è¾“å‡ºå¤§å°ä¸ºç›¸åŒå¤§å°çš„çŸ©é˜µ<br>æ­¥å¹…: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> , åº”ç”¨æ»¤æ³¢å™¨çš„é—´éš”</p><h4 id="æ± åŒ–å±‚-ç¼©å°é«˜é•¿æ–¹å‘ä¸Šçš„ç©ºé—´çš„è¿ç®—-æé«˜é²æ£’æ€§">æ± åŒ–å±‚(ç¼©å°é«˜é•¿æ–¹å‘ä¸Šçš„ç©ºé—´çš„è¿ç®—,æé«˜é²æ£’æ€§)</h4><p>å¦‚:maxæ± </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">                  Maxæ± +---+---+---+---+<span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span>+---+---+---+---+             +---+---+<span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span>     Max     <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span>+---+---+---+---+  -------<span class="token operator">></span>   +---+---+<span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span>             <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span>+---+---+---+---+             +---+---+<span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span>+---+---+---+---+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å…¨è¿æ¥å±‚">å…¨è¿æ¥å±‚</h4><p>å…¨è¿æ¥å±‚å°±æ˜¯ä¸€èˆ¬çš„æ¿€æ´»å‡½æ•°,åœ¨tensorflowä¹Ÿæ˜¯Dense,æ”¾åœ¨å·ç§¯å±‚å’Œæ± åŒ–å±‚ä¹‹åè¿›è¡Œæ•°æ®çš„å¤„ç†</p><h4 id="CNNä»£è¡¨ç½‘ç»œ">CNNä»£è¡¨ç½‘ç»œ</h4><h5 id="LeNet">LeNet</h5><p>æ¿€æ´»å‡½æ•°: sigmoid<br>æ± åŒ–æ–¹æ³•: å­é‡‡æ ·</p><h5 id="AlexNet">AlexNet</h5><p>æ¿€æ´»å‡½æ•°: ReLV<br>å±€éƒ¨æ­£è§„åŒ– LRN(Local Response Normalization)å¹¶ä½¿ç”¨Dropout</p><h2 id="äº”-ä¼˜åŒ–å‡½æ•°">äº”.ä¼˜åŒ–å‡½æ•°</h2><h3 id="æ¢¯åº¦ä¸‹é™æ³•">æ¢¯åº¦ä¸‹é™æ³•</h3><ul><li>å¯¼æ•°: ä½¿ç”¨æ•°å€¼å¾®åˆ†è¿‘ä¼¼æ›¿ä»£å¯¼æ•°</li><li>åå¯¼æ•°: ä¸å¯¼æ•°ç›¸åŒ</li><li>æ¢¯åº¦: ç”±å…¨éƒ¨å˜é‡çš„åå¯¼æ•°æ±‡æ€»è€Œæˆçš„å‘é‡ç§°ä¸ºæ¢¯åº¦,æ–¹å‘å‘é‡å˜åŒ–æœ€å¿«çš„åœ°æ–¹,æ–¹å‘å‘é‡çš„å¯¼æ•°.<br>å¦‚:<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mfrac><msub><mi>Î³</mi><mi>f</mi></msub><msub><mi>Î³</mi><msub><mi>x</mi><mn>0</mn></msub></msub></mfrac><mo separator="true">,</mo><mfrac><msub><mi>Î³</mi><mi>f</mi></msub><msub><mi>Î³</mi><msub><mi>x</mi><mn>1</mn></msub></msub></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex"> (\frac{\gamma_f}{\gamma_{x_0}},\frac{\gamma_f}{\gamma_{x_1}}) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4094em;vertical-align:-0.5949em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8145em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.6444em;"></span><span class="mord mtight">0</span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2996em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.357em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.5131em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2901em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5949em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8145em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.6444em;"></span><span class="mord mtight">1</span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2996em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.357em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.5131em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2901em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5949em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></li><li>è´Ÿæ¢¯åº¦æ–¹å‘: æ˜¯æ¢¯åº¦æ³•ä¸­å˜é‡æ›´æ–°çš„æ–¹å‘,æ¢¯åº¦æŒ‡ç¤ºçš„æ–¹å‘æ˜¯å„ç‚¹å¤„çš„å‡½æ•°å€¼å‡å°‘é‡æœ€å¤šçš„æ–¹å‘.</li><li>æ­¥éª¤<ol><li>mini-batch</li><li>è®¡ç®—æ¢¯åº¦: æ±‚å‡ºå„ä¸ªæƒé‡å‚æ•°çš„æ¢¯åº¦</li><li>æ›´æ–°å‚æ•°: å°†æƒé‡æ²¿æ¢¯åº¦æ–¹å‘è¿›è¡Œå¾®å°æ›´æ–°</li><li>é‡å¤: é‡å¤æ­¥éª¤1,2,3</li></ol></li></ul><h4 id="BGD-æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•">BGD(æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•)</h4><p>æ˜¯æ¢¯åº¦ä¸‹é™æ³•çš„å…¶ä¸­ä¸€ç§</p><h4 id="SGD-éšæœºæ¢¯åº¦ä¸‹é™æ³•">SGD(éšæœºæ¢¯åº¦ä¸‹é™æ³•)</h4><p>æ˜¯æ¢¯åº¦ä¸‹é™æ³•çš„å…¶ä¸­ä¸€ç§<br>éšæœºæ¢¯åº¦ä¸‹é™æ˜¯é€šè¿‡æ¯ä¸ªæ ·æœ¬æ¥è¿­ä»£æ›´æ–°ä¸€æ¬¡ï¼Œå¯¹æ¯”ä¸Šé¢çš„æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼Œè¿­ä»£ä¸€æ¬¡éœ€è¦ç”¨åˆ°æ‰€æœ‰è®­ç»ƒæ ·æœ¬</p><h4 id="M-BGD-min-batch-å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•">M-BGD(min-batch å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•)</h4><p>min-batch: åœ¨æ‰€æœ‰æ•°æ®ä¸­,éšæœºé€‰å–ä¸€éƒ¨åˆ†æ•°æ®</p><h3 id="Momentum">Momentum</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo>â†</mo><mi>Î±</mi><mi>v</mi><mo>âˆ’</mo><mi>Î·</mi><mfrac><msub><mi>Î³</mi><mi>L</mi></msub><msub><mi>Î³</mi><mi>W</mi></msub></mfrac></mrow><annotation encoding="application/x-tex"> v \leftarrow \alpha{v} - \eta{\frac{\gamma_L}{\gamma_W}} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2286em;vertical-align:-0.4811em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Î·</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>â†</mo><mi>W</mi><mo>+</mo><mi>v</mi></mrow><annotation encoding="application/x-tex"> W \leftarrow W + v </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>: æƒé‡<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><msub><mi>Î³</mi><mi>L</mi></msub><msub><mi>Î³</mi><mi>W</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">\frac{\gamma_L}{\gamma_W}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2286em;vertical-align:-0.4811em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>: æŸå¤±å‡½æ•°å…³äºWçš„æ¢¯åº¦<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î·</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Î·</span></span></span></span>: å­¦ä¹ ç‡<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>: é€Ÿåº¦</p><h3 id="AdaGrad">AdaGrad</h3><p>ä¸ºå‚æ•°çš„æ¯ä¸ªå…ƒç´ é€‚å½“çš„è°ƒæ•´å­¦ä¹ ç‡<br>learning rate decay:å­¦ä¹ ç‡è¡°å‡çš„æ–¹æ³•,ä¸€å¼€å§‹&quot;å¤š&quot;å­¦,ç„¶åé€æ¸å°‘å­¦<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>â†</mo><mi>h</mi><mo>+</mo><mfrac><msub><mi>Î³</mi><mi>L</mi></msub><msub><mi>Î³</mi><mi>W</mi></msub></mfrac><mo>â¨€</mo><mfrac><msub><mi>Î³</mi><mi>L</mi></msub><msub><mi>Î³</mi><mi>W</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">h \leftarrow h + \frac{\gamma_L}{\gamma_W} \bigodot \frac{\gamma_L}{\gamma_W}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2311em;vertical-align:-0.4811em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-symbol small-op" style="position:relative;top:0em;">â¨€</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>â†</mo><mi>W</mi><mo>âˆ’</mo><mi>Î·</mi><mfrac><mn>1</mn><msqrt><mi>h</mi></msqrt></mfrac><mfrac><msub><mi>Î³</mi><mi>L</mi></msub><msub><mi>Î³</mi><mi>W</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">W \leftarrow W - \eta{\frac{1}{\sqrt h}}{\frac{\gamma_L}{\gamma_W}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.3831em;vertical-align:-0.538em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Î·</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.5335em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9378em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal mtight" style="padding-left:0.833em;">h</span></span><span style="top:-2.8978em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1022em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â¨€</mo></mrow><annotation encoding="application/x-tex">\bigodot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop op-symbol small-op" style="position:relative;top:0em;">â¨€</span></span></span></span>: è¡¨ç¤ºå¯¹ç«‹çŸ©é˜µå…ƒç´ çš„ä¹˜æ³•<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>: æƒé‡å‚æ•°<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><msub><mi>Î³</mi><mi>L</mi></msub><msub><mi>Î³</mi><mi>W</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">\frac{\gamma_L}{\gamma_W}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2286em;vertical-align:-0.4811em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0556em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>: æŸå¤±å‡½æ•°å…³äºWçš„æ¢¯åº¦<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î·</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Î·</span></span></span></span>: å­¦ä¹ ç‡</p><h3 id="Adam-èåˆAdaGradå’ŒMomentum">Adam(èåˆAdaGradå’ŒMomentum)</h3><p>å…·ä½“å†…å®¹è¯·æŸ¥çœ‹åŸè®ºæ–‡</p><h3 id="æŠ‘åˆ¶è¿‡æ‹Ÿåˆ">æŠ‘åˆ¶è¿‡æ‹Ÿåˆ</h3><h3 id="softMaxå±‚">softMaxå±‚</h3><p>softMaxå±‚æ˜¯æŠŠè¾“å…¥å€¼æ­£è§„åŒ–åå†è¾“å‡º</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">        +---+<span class="token number">5.3</span> --<span class="token operator">></span> <span class="token operator">|</span> s <span class="token operator">|</span> --<span class="token operator">></span> <span class="token number">0.008</span><span class="token number">0.3</span> --<span class="token operator">></span> <span class="token operator">|</span> o <span class="token operator">|</span> --<span class="token operator">></span> <span class="token number">0.00005</span><span class="token number">10.1</span>--<span class="token operator">></span> <span class="token operator">|</span> f <span class="token operator">|</span> --<span class="token operator">></span> <span class="token number">0.991</span>   <span class="token builtin class-name">.</span>    <span class="token operator">|</span> t <span class="token operator">|</span>  <span class="token builtin class-name">.</span>   <span class="token builtin class-name">.</span>    <span class="token operator">|</span> m <span class="token operator">|</span>  <span class="token builtin class-name">.</span>   <span class="token builtin class-name">.</span>    <span class="token operator">|</span> a <span class="token operator">|</span>  <span class="token builtin class-name">.</span>   <span class="token builtin class-name">.</span>    <span class="token operator">|</span> x <span class="token operator">|</span>  <span class="token builtin class-name">.</span><span class="token number">0.01</span>--<span class="token operator">></span> <span class="token operator">|</span>   <span class="token operator">|</span> --<span class="token operator">></span> <span class="token number">0.00004</span>        +---+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="batch-normalization-æ‰¹é‡æ­£åˆ™åŒ–">batch normalization(æ‰¹é‡æ­£åˆ™åŒ–)</h4><h5 id="æ­£åˆ™åŒ–">æ­£åˆ™åŒ–</h5><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¼</mi><mi>B</mi></msub><mo>â†</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\mu_B \leftarrow {\frac{1}{m}}{\sum_{i=1}^m}{x_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mi>B</mi><mn>2</mn></msubsup><mo>â†</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mi>Î¼</mi><mi>B</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mrow><annotation encoding="application/x-tex">\sigma^2_B \leftarrow {\frac{1}{m}}{\sum_{i=1}^m}{(x_i-\mu_B)^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0894em;vertical-align:-0.2753em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4247em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2753em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>^</mo></mover><mi>i</mi></msub><mo>â†</mo><mfrac><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mi>Î¼</mi><mi>B</mi></msub></mrow><msqrt><mrow><msubsup><mi>Ïƒ</mi><mi>B</mi><mn>2</mn></msubsup><mo>+</mo><mi>Îµ</mi></mrow></msqrt></mfrac></mrow><annotation encoding="application/x-tex">\hat{x}_i \leftarrow \frac{x_i-\mu_B}{\sqrt {\sigma^2_B + \varepsilon}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.684em;vertical-align:-0.8296em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8544em;"><span style="top:-2.4761em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0198em;"><span class="svg-align" style="top:-3.4286em;"><span class="pstrut" style="height:3.4286em;"></span><span class="mord mtight" style="padding-left:1.19em;"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8051em;"><span style="top:-2.1607em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span><span style="top:-2.8448em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3393em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">Îµ</span></span></span><span style="top:-2.9918em;"><span class="pstrut" style="height:3.4286em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.5429em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.5429em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4368em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">âˆ’</span><span class="mord mtight"><span class="mord mathnormal mtight">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8296em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¼</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">\mu_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>: å‡å€¼<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mi>B</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\sigma^2_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0894em;vertical-align:-0.2753em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4247em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2753em;"><span></span></span></span></span></span></span></span></span></span>: æ–¹å·®<br>è¿›è¡Œç¼©æ”¾å’Œå¹³ç§»: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>â†</mo><mi>Î³</mi><msub><mover accent="true"><mi>x</mi><mo>^</mo></mover><mi>i</mi></msub><mo>+</mo><mi>Î²</mi></mrow><annotation encoding="application/x-tex">y_i \leftarrow \gamma \hat{x}_i + \beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span>ä¸ºå‚æ•°,åˆå€¼ä¸º1å’Œ0)</p><p>æ­£åˆ™åŒ–æ­¥éª¤:</p><ol><li>æƒå€¼è¡°å‡(æŠ‘åˆ¶è¿‡æ‹Ÿåˆ): ä¸ºæŸå¤±å‡½æ•°åŠ ä¸Š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>Î»</mi><msup><mi>W</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">{\frac{1}{2}}{\lambda}{W^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mord"><span class="mord mathnormal">Î»</span></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">Î»</span></span></span></span>:æ§åˆ¶æ­£åˆ™åŒ–å¼ºåº¦çš„è¶…å‚æ•° W:æƒé‡)</li><li>Dropout:åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­éšæœºåˆ é™¤ç¥ç»å…ƒçš„æ–¹æ³•</li></ol><h2 id="å…­-æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹">å…­.æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹</h2><ol><li>åˆå§‹åŒ–<ul><li>ç½‘ç»œåˆå§‹åŒ–</li><li>ä¼˜åŒ–å™¨åˆå§‹åŒ–</li></ul></li><li>mini-batch</li><li>è®¡ç®—æ¢¯åº¦ -&gt; æ›´æ–°æ¢¯åº¦ -&gt; ä¼˜åŒ–æ¢¯åº¦</li><li>è·å–æŸå¤±å‡½æ•°</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;å¦‚æœä»¥ä¸‹çš„è¡¨æ ¼åŠå›¾åƒå‡ºç°æ ¼å¼é—®é¢˜,è¯·å°†ä½ çš„æµè§ˆå™¨ä¸­æ–‡å­—ä½“çš„ç­‰å®½å­—ä½“è®¾ç½®å¥½&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;ä¸€-é¢„å¤„ç†&quot;&gt;ä¸€.é¢„å¤„ç†&lt;/h2&gt;
&lt;h3 id=&quot;æå–ç‰¹å¾é‡&quot;&gt;æå–ç‰¹å¾é‡&lt;/h3&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;Human created algorithm: äººæƒ³åˆ°çš„ç®—æ³•
         +-----------------------+
-------&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;Human created algorithm&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; --------&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; ç­”æ¡ˆ
         +-----------------------+

Human created Feature quantity: äººæƒ³åˆ°çš„ç‰¹å¾é‡
      +------------------------------------------+       +---------------------------+
----&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;Human created Feature quantity&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SIF,HGD&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ----&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;Machine learning&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;svm,knn&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ---&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; ç­”æ¡ˆ
      +------------------------------------------+       +---------------------------+

Feature quantity &lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt; by computer: è®¡ç®—æœºè‡ªåŠ¨å¯»æ‰¾ç‰¹å¾é‡
         +-----------------------------------+
         &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;        Neural Networks            &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
-------&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;      &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Machine learning&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;           &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; --------&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; ç­”æ¡ˆ
         &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Feature quantity &lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt; by computer &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
         +-----------------------------------+&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;Hyper-Parameter&quot;&gt;Hyper-Parameter&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;è®¾å®šè¶…å‚æ•°çš„èŒƒå›´&lt;/li&gt;
&lt;li&gt;ä»è®¾å®šçš„è¶…å‚æ•°çš„èŒƒå›´ä¸­éšæœºé‡‡æ ·&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨æ­¥éª¤1ä¸­é‡‡æ ·åˆ°çš„è¶…å‚æ•°çš„å€¼è¿›è¡Œå­¦ä¹ ,é€šè¿‡éªŒè¯æ•°æ®,è¯„ä¼°è¯†åˆ«ç²¾åº¦(è¦å°†epochè®¾ç½®å¾—å¾ˆå°)&lt;/li&gt;
&lt;li&gt;é‡å¤æ­¥éª¤1å’Œæ­¥éª¤2,æ ¹æ®ä»–ä»¬çš„è¯†åˆ«ç²¾åº¦çš„ç»“æœç¼©å°è¶…å‚æ•°çš„èŒƒå›´&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;è¶…å‚æ•°ä¼˜åŒ–å‚è€ƒ:è´å¶æ–¯æœ€ä¼˜åŒ–&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;æƒé‡&quot;&gt;æƒé‡&lt;/h4&gt;
&lt;p&gt;æƒé‡çš„åˆå§‹å€¼:ä¸åº”è¯¥è®¾ç½®ä¸º0/1(è®¾ç½®ä¸º0æˆ–1,å¯èƒ½é€ æˆæ¢¯åº¦æ¶ˆå¤±),åº”é€‰æ‹©éšæœºç”Ÿæˆåˆå§‹å€¼&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å…¶ä»–æƒé‡åˆå§‹å€¼: Heåˆå§‹å€¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;è¾“å‡ºå±‚&quot;&gt;è¾“å‡ºå±‚&lt;/h4&gt;
&lt;p&gt;è¾“å‡ºå±‚çš„ç¥ç»æ•°é‡éœ€è¦æ ¹æ®å¾…è§£å†³çš„é—®é¢˜æ¥å†³å®š,å¦‚:å¯¹äºåˆ†ç±»é—®é¢˜,è¾“å‡ºå±‚çš„ç¥ç»å…ƒæ•°é‡ä¸€èˆ¬è®¾å®šä¸ºç±»åˆ«çš„æ•°é‡.&lt;/p&gt;</summary>
    
    
    
    <category term="Machine Learning" scheme="https://asutorufa.github.io/categories/Machine-Learning/"/>
    
    
    <category term="Deep Learning" scheme="https://asutorufa.github.io/tags/Deep-Learning/"/>
    
  </entry>
  
  <entry>
    <title>æ±‡ç¼–è¯­è¨€å­¦ä¹ </title>
    <link href="https://asutorufa.github.io/posts/4f95e9f6/"/>
    <id>https://asutorufa.github.io/posts/4f95e9f6/</id>
    <published>2019-09-01T13:57:00.000Z</published>
    <updated>2019-09-08T00:20:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æƒ³äº†è§£ä¸€ä¸‹cæ˜¯å¦‚ä½•ç¼–è¯‘ä¸ºæ±‡ç¼–è¯­è¨€çš„<br>é¦–å…ˆå†™äº†ä¸€ä¸ªç›¸å½“ç®€å•çš„c</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"stdio.h"</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>    <span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨<code>gcc -S</code>ç¼–è¯‘ä¸ºæ±‡ç¼–è¯­è¨€:</p><pre class="line-numbers language-nasm" data-language="nasm"><code class="language-nasm"> .file <span class="token string">"hello.c"</span> .text .section .rodata<span class="token label function">.LC0:</span> .string <span class="token string">"%d %d"</span> .text .globl main .type main, @function<span class="token label function">main:</span><span class="token label function">.LFB0:</span> .cfi_startproc pushq <span class="token operator">%</span><span class="token register variable">rbp</span> .cfi_def_cfa_offset <span class="token number">16</span> .cfi_offset <span class="token number">6</span>, <span class="token operator">-</span><span class="token number">16</span> movq <span class="token operator">%</span><span class="token register variable">rsp</span>, <span class="token operator">%</span><span class="token register variable">rbp</span> .cfi_def_cfa_register <span class="token number">6</span> subq <span class="token number">$16</span>, <span class="token operator">%</span><span class="token register variable">rsp</span> movl <span class="token number">$1</span>, <span class="token operator">-</span><span class="token number">16</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>) movl <span class="token number">$2</span>, <span class="token operator">-</span><span class="token number">12</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>) movl <span class="token operator">-</span><span class="token number">16</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>), <span class="token operator">%</span><span class="token register variable">edx</span> movl <span class="token operator">-</span><span class="token number">12</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>), <span class="token operator">%</span><span class="token register variable">eax</span> addl <span class="token operator">%</span><span class="token register variable">edx</span>, <span class="token operator">%</span><span class="token register variable">eax</span> movl <span class="token operator">%</span><span class="token register variable">eax</span>, <span class="token operator">-</span><span class="token number">8</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>) movl <span class="token number">$7</span>, <span class="token operator">-</span><span class="token number">4</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>) movl <span class="token operator">-</span><span class="token number">4</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>), <span class="token operator">%</span><span class="token register variable">edx</span> movl <span class="token operator">-</span><span class="token number">8</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>), <span class="token operator">%</span><span class="token register variable">eax</span> movl <span class="token operator">%</span><span class="token register variable">eax</span>, <span class="token operator">%</span><span class="token register variable">esi</span> leaq .LC0(<span class="token operator">%</span>rip), <span class="token operator">%</span><span class="token register variable">rdi</span> movl <span class="token number">$0</span>, <span class="token operator">%</span><span class="token register variable">eax</span> call printf@PLT movl <span class="token number">$0</span>, <span class="token operator">%</span><span class="token register variable">eax</span> leave .cfi_def_cfa <span class="token number">7</span>, <span class="token number">8</span> ret .cfi_endproc<span class="token label function">.LFE0:</span> .size main, .<span class="token operator">-</span>main .ident <span class="token string">"GCC: (GNU) 9.1.0"</span> .section .note.GNU<span class="token operator">-</span>stack,<span class="token string">""</span>,@progbits<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥â€ç‚¹â€åšä¸ºå‰ç¼€çš„æŒ‡ä»¤éƒ½æ˜¯ç”¨æ¥æŒ‡å¯¼æ±‡ç¼–å™¨çš„å‘½ä»¤ã€‚<br>ç²¾ç®€ä¸€ä¸‹å·®ä¸å¤šè¿™æ ·:<span id="more"></span></p><pre class="line-numbers language-nasm" data-language="nasm"><code class="language-nasm"><span class="token label function">.LC0:</span> .string <span class="token string">"%d %d"</span> .text .globl main .type main, @function<span class="token label function">main:</span> pushq <span class="token operator">%</span><span class="token register variable">rbp</span> movq <span class="token operator">%</span><span class="token register variable">rsp</span>, <span class="token operator">%</span><span class="token register variable">rbp</span> movl <span class="token number">$1</span>, <span class="token operator">-</span><span class="token number">16</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>) movl <span class="token number">$2</span>, <span class="token operator">-</span><span class="token number">12</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>) movl <span class="token operator">-</span><span class="token number">16</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>), <span class="token operator">%</span><span class="token register variable">edx</span> movl <span class="token operator">-</span><span class="token number">12</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>), <span class="token operator">%</span><span class="token register variable">eax</span> addl <span class="token operator">%</span><span class="token register variable">edx</span>, <span class="token operator">%</span><span class="token register variable">eax</span> movl <span class="token operator">%</span><span class="token register variable">eax</span>, <span class="token operator">-</span><span class="token number">8</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>) movl <span class="token number">$7</span>, <span class="token operator">-</span><span class="token number">4</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>) movl <span class="token operator">-</span><span class="token number">4</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>), <span class="token operator">%</span><span class="token register variable">edx</span> movl <span class="token operator">-</span><span class="token number">8</span>(<span class="token operator">%</span><span class="token register variable">rbp</span>), <span class="token operator">%</span><span class="token register variable">eax</span> movl <span class="token operator">%</span><span class="token register variable">eax</span>, <span class="token operator">%</span><span class="token register variable">esi</span> leaq .LC0(<span class="token operator">%</span>rip), <span class="token operator">%</span><span class="token register variable">rdi</span> movl <span class="token number">$0</span>, <span class="token operator">%</span><span class="token register variable">eax</span> call printf@PLT movl <span class="token number">$0</span>, <span class="token operator">%</span><span class="token register variable">eax</span> leave ret<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é¦–å…ˆäº†è§£ä¸€ä¸‹å‡ ä¸ªå¯„å­˜å™¨<sup><a href="#1"><font color=red>[1]</font></a></sup></p><ul><li>%rbp æ˜¯æ ˆå¸§æŒ‡é’ˆï¼Œç”¨äºæ ‡è¯†å½“å‰æ ˆå¸§çš„èµ·å§‹ä½ç½®</li><li>%rsp æ˜¯å †æ ˆæŒ‡é’ˆå¯„å­˜å™¨ï¼Œé€šå¸¸ä¼šæŒ‡å‘æ ˆé¡¶ä½ç½®ï¼Œå †æ ˆçš„ pop å’Œpush æ“ä½œå°±æ˜¯é€šè¿‡æ”¹å˜ %rsp çš„å€¼å³ç§»åŠ¨å †æ ˆæŒ‡é’ˆçš„ä½ç½®æ¥å®ç°çš„ã€‚</li><li>%eax æ˜¯&quot;ç´¯åŠ å™¨&quot;(accumulator), å®ƒæ˜¯å¾ˆå¤šåŠ æ³•ä¹˜æ³•æŒ‡ä»¤çš„ç¼ºçœå¯„å­˜å™¨ã€‚</li><li>%edx åˆ™æ€»æ˜¯è¢«ç”¨æ¥æ”¾æ•´æ•°é™¤æ³•äº§ç”Ÿçš„ä½™æ•°ã€‚</li><li>%rip æŒ‡ä»¤åœ°å€å¯„å­˜å™¨ï¼Œç”¨æ¥å­˜å‚¨ CPU å³å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ã€‚æ¯æ¬¡ CPU æ‰§è¡Œå®Œç›¸åº”çš„æ±‡ç¼–æŒ‡ä»¤ä¹‹åï¼Œrip å¯„å­˜å™¨çš„å€¼å°±ä¼šè‡ªè¡Œç´¯åŠ ï¼›rip æ— æ³•ç›´æ¥èµ‹å€¼ï¼Œcall, ret, jmp ç­‰æŒ‡ä»¤å¯ä»¥ä¿®æ”¹ ripã€‚</li><li>%rdiï¼Œ%rsiï¼Œ%rdxï¼Œ%rcxï¼Œ%r8ï¼Œ%r9 ç”¨ä½œå‡½æ•°å‚æ•°ï¼Œä¾æ¬¡å¯¹åº”ç¬¬1å‚æ•°ï¼Œç¬¬2å‚æ•°ã€‚</li><li>ESI/EDI åˆ†åˆ«å«åš&quot;æº/ç›®æ ‡ç´¢å¼•å¯„å­˜å™¨&quot;(source/destination index),å› ä¸ºåœ¨å¾ˆå¤šå­—ç¬¦ä¸²æ“ä½œæŒ‡ä»¤ä¸­, DS:ESIæŒ‡å‘æºä¸²,è€ŒES:EDIæŒ‡å‘ç›®æ ‡ä¸².</li></ul><pre class="line-numbers language-nasm" data-language="nasm"><code class="language-nasm">pushq <span class="token operator">%</span><span class="token register variable">rbp</span>movq <span class="token operator">%</span><span class="token register variable">rsp</span>, <span class="token operator">%</span><span class="token register variable">rbp</span>ç¡®è®¤æ ˆ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><code>movl $1, -16(%rbp)</code> æŠŠ1ç§»å…¥å¯„å­˜å™¨rbqä¸­-16æ˜¯åœ°å€èµ·å§‹ä½ç½®<br><code>movl $2, -12(%rbp)</code> è·Ÿä¸Šé¢ç›¸åŒ<br><code>movl -16(%rbp), %edx</code> æŠŠ<code>-16(%rbp)</code>ç§»å…¥å¯„å­˜å™¨edxä¸­,ä¸Šé¢å¯çŸ¥å°±æ˜¯æŠŠ1ç§»å…¥edxä¸­<br><code>movl -12(%rbp), %eax</code> è·Ÿä¸Šé¢ç±»ä¼¼ ä¸è¿‡è¿™æ¬¡ç”¨çš„æ˜¯å¯„å­˜å™¨eax<br><code>addl %edx, %eax</code> æŠŠedxå’Œeaxä¸­çš„å†…å®¹ç›¸åŠ ,å¹¶å­˜å…¥edxä¸­<br><code>movl %eax, -8(%rbp)</code> æŠŠeaxä¸­çš„å†…å®¹å­˜å…¥rbqä¸­ä½ç½®ä¸º-8<br><code>movl $7, -4(%rbp)</code> æŠŠ7å­˜å…¥rbqä½ç½®ä¸º-4,å¯¹åº”cä»£ç ä¸º<code>int d = 3 + 4</code>,ç”±æ­¤å¯çŸ¥ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å…¶å®æ˜¯ä¼šè¿›è¡Œç›¸åº”ä¼˜åŒ–çš„<br><code>.LC0(%rip)</code>ã¯ã€printfãŒä½¿ã†ã‚¢ãƒ‰ãƒ¬ã‚¹ã€å‰ã‚‚ã£ã¦printfã§ä½¿ç”¨ã™ã‚‹æ›¸å¼ã‚’è¨­å®šã—ã¦ã„ã‚‹(å°±æ˜¯è¯´è®¾ç½®printfä½¿ç”¨çš„åœ°å€,å¹¶æå‰è®¾ç½®æ ¼å¼)<sup><a href="#2"><font color=red>[2]</font></a></sup><br><code>call printf@PLT</code> è°ƒç”¨printf<br><code>leave</code> ç¦»å¼€printf<br><code>ret</code>:ç»“æŸå½“å‰å‡½æ•°</p><hr><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç®€å•çš„å®æˆ˜ä¸€ä¸‹:<br>ç»™gccå¼€å¯O3çº§åˆ«çš„ä¼˜åŒ–:</p><pre class="language-bash" data-language="bash"><code class="language-bash">gcc <span class="token parameter variable">-O3</span> <span class="token parameter variable">-S</span></code></pre><p>ç”Ÿæˆçš„æ±‡ç¼–ç :</p><pre class="line-numbers language-nasm" data-language="nasm"><code class="language-nasm"> .file <span class="token string">"hello.c"</span> .text .section .rodata.str1<span class="token number">.1</span>,<span class="token string">"aMS"</span>,@progbits,<span class="token number">1</span><span class="token label function">.LC0:</span> .string <span class="token string">"%d %d"</span> .section .text.startup,<span class="token string">"ax"</span>,@progbits .p2align <span class="token number">4</span> .globl main .type main, @function<span class="token label function">main:</span><span class="token label function">.LFB11:</span> .cfi_startproc subq <span class="token number">$8</span>, <span class="token operator">%</span><span class="token register variable">rsp</span> .cfi_def_cfa_offset <span class="token number">16</span> movl <span class="token number">$7</span>, <span class="token operator">%</span><span class="token register variable">edx</span> movl <span class="token number">$3</span>, <span class="token operator">%</span><span class="token register variable">esi</span> xorl <span class="token operator">%</span><span class="token register variable">eax</span>, <span class="token operator">%</span><span class="token register variable">eax</span> leaq .LC0(<span class="token operator">%</span>rip), <span class="token operator">%</span><span class="token register variable">rdi</span> call printf@PLT xorl <span class="token operator">%</span><span class="token register variable">eax</span>, <span class="token operator">%</span><span class="token register variable">eax</span> addq <span class="token number">$8</span>, <span class="token operator">%</span><span class="token register variable">rsp</span> .cfi_def_cfa_offset <span class="token number">8</span> ret .cfi_endproc<span class="token label function">.LFE11:</span> .size main, .<span class="token operator">-</span>main .ident <span class="token string">"GCC: (GNU) 9.1.0"</span> .section .note.GNU<span class="token operator">-</span>stack,<span class="token string">""</span>,@progbits<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ä»¥ä¸Šæ±‡ç¼–ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°,ä¼˜åŒ–ä¹‹åçš„æ±‡ç¼–ä»£ç å°†æœ€åç›¸åŠ çš„å€¼ç»™äº†å†…å­˜,è€Œä¸åƒä¹‹å‰é‚£æ ·å…ˆå ç”¨ä¸¤ä¸ªå†…å­˜ç©ºé—´ç„¶åå†ç›¸åŠ .</p><hr><blockquote><p>[1] <a id="1"><a href="https://zhuanlan.zhihu.com/p/27339191">x86-64 ä¸‹å‡½æ•°è°ƒç”¨åŠæ ˆå¸§åŸç†</a></a><br>[2] <a id="2"><a href="https://qiita.com/diggy-mo/items/fe56f6ea357e5928a8ca">ã‚¢ã‚»ãƒ³ãƒ–ãƒ©å­¦ç¿’log_1</a></a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘æƒ³äº†è§£ä¸€ä¸‹cæ˜¯å¦‚ä½•ç¼–è¯‘ä¸ºæ±‡ç¼–è¯­è¨€çš„&lt;br&gt;
é¦–å…ˆå†™äº†ä¸€ä¸ªç›¸å½“ç®€å•çš„c&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-cpp&quot; data-language=&quot;cpp&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;stdio.h&quot;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; c &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; d &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;%d %d&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;c&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;gcc -S&lt;/code&gt;ç¼–è¯‘ä¸ºæ±‡ç¼–è¯­è¨€:&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-nasm&quot; data-language=&quot;nasm&quot;&gt;&lt;code class=&quot;language-nasm&quot;&gt; .file &lt;span class=&quot;token string&quot;&gt;&quot;hello.c&quot;&lt;/span&gt;
 .text
 .section .rodata
&lt;span class=&quot;token label function&quot;&gt;.LC0:&lt;/span&gt;
 .string &lt;span class=&quot;token string&quot;&gt;&quot;%d %d&quot;&lt;/span&gt;
 .text
 .globl main
 .type main, @function
&lt;span class=&quot;token label function&quot;&gt;main:&lt;/span&gt;
&lt;span class=&quot;token label function&quot;&gt;.LFB0:&lt;/span&gt;
 .cfi_startproc
 pushq &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rbp&lt;/span&gt;
 .cfi_def_cfa_offset &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;
 .cfi_offset &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;
 movq &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rsp&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rbp&lt;/span&gt;
 .cfi_def_cfa_register &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;
 subq &lt;span class=&quot;token number&quot;&gt;$16&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rsp&lt;/span&gt;
 movl &lt;span class=&quot;token number&quot;&gt;$1&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;(&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rbp&lt;/span&gt;)
 movl &lt;span class=&quot;token number&quot;&gt;$2&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;(&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rbp&lt;/span&gt;)
 movl &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;(&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rbp&lt;/span&gt;), &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;edx&lt;/span&gt;
 movl &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;(&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rbp&lt;/span&gt;), &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;eax&lt;/span&gt;
 addl &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;edx&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;eax&lt;/span&gt;
 movl &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;eax&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;(&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rbp&lt;/span&gt;)
 movl &lt;span class=&quot;token number&quot;&gt;$7&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;(&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rbp&lt;/span&gt;)
 movl &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;(&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rbp&lt;/span&gt;), &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;edx&lt;/span&gt;
 movl &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;(&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rbp&lt;/span&gt;), &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;eax&lt;/span&gt;
 movl &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;eax&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;esi&lt;/span&gt;
 leaq .LC0(&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;rip), &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;rdi&lt;/span&gt;
 movl &lt;span class=&quot;token number&quot;&gt;$0&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;eax&lt;/span&gt;
 call printf@PLT
 movl &lt;span class=&quot;token number&quot;&gt;$0&lt;/span&gt;, &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token register variable&quot;&gt;eax&lt;/span&gt;
 leave
 .cfi_def_cfa &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;
 ret
 .cfi_endproc
&lt;span class=&quot;token label function&quot;&gt;.LFE0:&lt;/span&gt;
 .size main, .&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;main
 .ident &lt;span class=&quot;token string&quot;&gt;&quot;GCC: (GNU) 9.1.0&quot;&lt;/span&gt;
 .section .note.GNU&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;stack,&lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;,@progbits&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»¥â€ç‚¹â€åšä¸ºå‰ç¼€çš„æŒ‡ä»¤éƒ½æ˜¯ç”¨æ¥æŒ‡å¯¼æ±‡ç¼–å™¨çš„å‘½ä»¤ã€‚&lt;br&gt;
ç²¾ç®€ä¸€ä¸‹å·®ä¸å¤šè¿™æ ·:</summary>
    
    
    
    <category term="assembly" scheme="https://asutorufa.github.io/categories/assembly/"/>
    
    
    <category term="æ±‡ç¼–è¯­è¨€" scheme="https://asutorufa.github.io/tags/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"/>
    
    <category term="assembly" scheme="https://asutorufa.github.io/tags/assembly/"/>
    
  </entry>
  
  <entry>
    <title>nodejså¼‚æ­¥å›è°ƒå‡½æ•°</title>
    <link href="https://asutorufa.github.io/posts/5938ae8c/"/>
    <id>https://asutorufa.github.io/posts/5938ae8c/</id>
    <published>2019-08-30T22:45:20.000Z</published>
    <updated>2019-08-30T22:45:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç ”ç©¶äº†ä¸€ä¸‹javascriptçš„å¼‚æ­¥å›è°ƒå‡½æ•°,æœ¬æ¥æƒ³åƒgolangé‚£æ ·ä½¿ç”¨chanå¯ä»¥è¿”å›åŸå§‹å€¼,ä¸è¿‡è²Œä¼¼æ— æ³•åšåˆ°,æœ€åæ­¢æ­¥async/await,å·®ä¸å¤šå°±æ˜¯ç”¨Promiseçš„resolveè¿”å›å€¼ç„¶åç”¨awaitè°ƒç”¨,ä¸è¿‡awaitå¿…é¡»ä½¿ç”¨åœ¨asyncçš„å‡½æ•°é‡Œ,å±€é™è¿˜æ˜¯æœ‰çš„.<br>å¦‚æœä½¿ç”¨éasyncçš„å‡½æ•°è°ƒç”¨,è¿”å›çš„ä¾æ—§æ˜¯Promiseç±»å‹,éœ€è¦ä½¿ç”¨.then.</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;ç ”ç©¶äº†ä¸€ä¸‹javascriptçš„å¼‚æ­¥å›è°ƒå‡½æ•°,æœ¬æ¥æƒ³åƒgolangé‚£æ ·ä½¿ç”¨chanå¯ä»¥è¿”å›åŸå§‹å€¼,ä¸è¿‡è²Œä¼¼æ— æ³•åšåˆ°,æœ€åæ­¢æ­¥async/await,å·®ä¸å¤šå°±æ˜¯ç”¨Promiseçš„resolveè¿”å›å€¼ç„¶åç”¨awaitè°ƒç”¨,ä¸è¿‡awaitå¿…é¡»ä½¿ç”¨åœ¨asyncçš„å‡½æ•°é‡Œ,å±€é™è¿˜æ˜¯æœ‰çš„</summary>
        
      
    
    
    
    <category term="nodejs" scheme="https://asutorufa.github.io/categories/nodejs/"/>
    
    
    <category term="nodejs" scheme="https://asutorufa.github.io/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>archlinuxå®‰è£…è®°å½•</title>
    <link href="https://asutorufa.github.io/posts/e3707853/"/>
    <id>https://asutorufa.github.io/posts/e3707853/</id>
    <published>2019-08-03T00:18:40.000Z</published>
    <updated>2022-10-25T04:45:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¯¦ç»†å®‰è£…æ•™ç¨‹è¯·å‚è€ƒarch wiki <a href="https://wiki.archlinux.org/index.php/Installation_guide_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Installation guide (ç®€ä½“ä¸­æ–‡)</a>,æ­¤å¤„åªè®°å½•å®‰è£…åé‡åˆ°çš„é—®é¢˜.</p><hr><p>æš—å½±ç²¾çµ2 PRO é™éŸ³LEDä¸èµ·ä½œç”¨å’Œå·¦è¾¹è€³æœºä¼šæœ‰å™¼é‡Œå•ªå•¦å£°:<br>å…·ä½“è§£å†³æ–¹æ³•æˆ‘å·²ç»å†™åˆ°archwikié‡Œäº†,è¯·çœ‹: <a href="https://wiki.archlinux.org/index.php?title=Laptop/HP#HP_Omen_15_ax210TX">Laptop/HP#HP_Omen_15_ax210TX</a></p><hr><p>grubæ›´æ–°èœå•</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">grub-mkconfig</span> <span class="token parameter variable">-o</span> /boot/grub/grub.cfg  </code></pre><p>å®‰è£…os-proberè®©grubæ£€æµ‹åˆ°å…¶ä»–ç³»ç»Ÿå¹¶è‡ªåŠ¨åˆ›å»ºå¼•å¯¼</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> os-prober</code></pre><p>ä½¿ç”¨system-boot(å°±æ˜¯ç›´æ¥ä½¿ç”¨linuxå†…æ ¸å¼•å¯¼ç³»ç»Ÿ,ä¸å†éœ€è¦grub,å¦‚æœæœ‰å¤šç³»ç»Ÿä¸æ¨è,ä¼šæŠŠefiåˆ†åŒºæå¾—å¾ˆä¹±):</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> efibootmgr dosfstools<span class="token comment"># æ­¤å¤„æ³¨æ„:æ­¤å¤„è¦æŠŠefiåˆ†åŒºæŒ‚è½½ä¸º/boot,è€Œéå¹³å¸¸çš„/boot/efi</span>bootctl <span class="token function">install</span> <span class="token parameter variable">--path</span><span class="token operator">=</span>/boot<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><span id="more"></span><p><strong>å…³äºefiçš„éƒ¨åˆ†å¯ä»¥çœ‹æˆ‘çš„å¦ä¸€è´´.</strong></p><p>arch å®‰è£…åº”ç”¨å åº”ç”¨èœå•ä¸åˆ·æ–°æ€ä¹ˆåŠ(è¿™ä¸ªæ­£å¸¸æƒ…å†µæ˜¯ä¸ä¼šé‡åˆ°çš„,åªæ˜¯åˆšè£…å®Œæœ‰äº›åŠŸèƒ½ä¸å®Œæ•´ä¼šè¿™æ ·,æˆ‘å°±é‡åˆ°äº†):</p><pre class="language-bash" data-language="bash"><code class="language-bash">kbuildsycoca5 <span class="token parameter variable">--noincremental</span></code></pre><hr><p>æ–°å¢ç”¨æˆ·<sup><a href='#1'><font color=red>[1]</font></a></sup>:<br>é¦–å…ˆæ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼Œå¹¶æŠŠå®ƒåŠ åˆ°wheelç»„</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">useradd</span> <span class="token parameter variable">-m</span> <span class="token parameter variable">-G</span> wheel <span class="token parameter variable">-s</span> /bin/bash  <span class="token punctuation">[</span>ç”¨æˆ·å<span class="token punctuation">]</span></code></pre><p>ç„¶åä¸ºè¿™ä¸ªç”¨æˆ·è®¾ç½®å¯†ç </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">passwd</span> <span class="token punctuation">[</span>ç”¨æˆ·å<span class="token punctuation">]</span></code></pre><p>æœ€åè®¾ç½®wheelç»„çš„ç”¨æˆ·èƒ½ç”¨sudoè·å–rootæƒé™:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">visudo    <span class="token comment">#æ‰¾åˆ°è¿™æ ·çš„ä¸€è¡Œ,æŠŠå‰é¢çš„#å»æ‰:</span>    <span class="token comment">#%wheel ALL=(ALL) ALL</span>æŒ‰ESCé”®ï¼Œè¾“å…¥x<span class="token operator">!</span>å›è½¦å°±å¯ä»¥ä¿å­˜å¹¶é€€å‡º<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><p>å…³é—­NetworkManagerç½‘ç»œæ£€æŸ¥(ping.archlinux.orgæœ‰æ—¶å€™ä¼šè¢«å¢™-_-)<br><a href="https://wiki.archlinux.org/title/NetworkManager#Checking_connectivity">NetworkManager#Checking_connectivity</a></p><p>å¯ç”¨dhcpè‡ªåŠ¨è·å–ç½‘ç»œåœ°å€,ä¸ç„¶å¼€æœºæ— æ³•è‡ªåŠ¨è”ç½‘</p><pre class="language-bash" data-language="bash"><code class="language-bash">systemctl <span class="token builtin class-name">enable</span> dhcpcd.service</code></pre><p>å¦‚æœåªä½¿ç”¨æœ‰çº¿ç½‘ç»œ å¯ä»¥ä½¿ç”¨<a href="https://wiki.archlinux.org/index.php/Systemd-networkd">Systemd-networkd</a><br>â€”â€”ä»¥ä¸‹å·²åŒ…å«dhcpçš„åŠŸèƒ½,ä¸‹é¢ä¸¤æ¡å‘½ä»¤åŒ…æ‹¬ä¸Šé¢é‚£ä¸ªçš„åŠŸèƒ½â€”â€”</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-s</span> networkmanagersystemctl <span class="token builtin class-name">enable</span> NetworkManager  <span class="token comment"># å¯åŠ¨è¿™ä¸ªåå¼€æœºæœ‰ä¸ªNetworkManager-wait-onlineä¼šå ç”¨å¤§æ¦‚6sçš„æ—¶é—´,å«Œæ…¢çš„å¯ä»¥å±è”½</span>systemctl mask NetworkManager-wait-online<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><p>å®‰è£…ä¸€ä¸ªå›¾å½¢ç•Œé¢,æ¯”å¦‚kde</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> plasma-desktopsystemctl start sddm.service  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç¼©ç•¥å›¾ç”Ÿæˆ<br>è‹¥è¦åœ¨æ¡Œé¢å’Œ Dolphin å†…ä¸ºåª’ä½“æˆ–æ–‡æ¡£æ–‡ä»¶ç”Ÿæˆç¼©ç•¥å›¾ï¼Œå®‰è£… <code>kdegraphics-thumbnailers</code>ï¼Œ<code>ffmpegthumbs</code>ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> kdegraphics-thumbnailers ffmpegthumbs</code></pre><p>ä¸€äº›gtkåº”ç”¨çš„plasma panelæ‰˜ç›˜å›¾æ ‡æ¨¡ç³Šä¸”å³é”®èœå•æ¯”è¾ƒå¥‡æ€ª<br>è§£å†³æ–¹æ³•: å®‰è£…libappindicator-gtk3 libappindicator-gtk2</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> libappindicator-gtk3 libappindicator-gtk2</code></pre><p>å®‰è£…ä¸€ä¸ªç»ˆç«¯,ä¸ç„¶è¿›å…¥å›¾å½¢ç•Œé¢åªèƒ½è¿›ttyè¾“å…¥å‘½ä»¤</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> konsole</code></pre><hr><p>æ— æ³•æ£€æµ‹åˆ°è“ç‰™é€‚é…å™¨:<br>å®‰è£…<code>bluez</code>,<code>bluez-utils</code></p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> bluez bluez-utils</code></pre><p>é¦–å…ˆç¡®å®šå†…æ ¸çš„è“ç‰™æ¨¡å—å·²è½½å…¥</p><pre class="language-bash" data-language="bash"><code class="language-bash">modinfo btusb</code></pre><p>å¦‚æœæ²¡æœ‰çš„è¯å°±æ˜¯æ²¡è½½å…¥,æ‰‹åŠ¨è½½å…¥:</p><pre class="language-bash" data-language="bash"><code class="language-bash">modprobe btusb</code></pre><p>å¼€å¯bluetoothæœåŠ¡</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl start bluetooth<span class="token comment"># å¼€æœºè‡ªå¯</span>systemctl <span class="token builtin class-name">enable</span> bluetooth<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¼€æœºåè‡ªåŠ¨å¯åŠ¨:<br>ä¿®æ”¹ <code>/etc/bluetooth/main.conf</code></p><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Policy</span><span class="token punctuation">]</span></span><span class="token comment"># è¿™ä¸€å¥çš„æ³¨é‡Šåˆ é™¤ å¹¶å°†falseæ”¹æˆtrue</span><span class="token key attr-name">AutoEnable</span><span class="token punctuation">=</span><span class="token value attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å·²çŸ¥é—®é¢˜:<br>æœ‰æ—¶å€™ä¼šå´©æºƒ,ä¸”æ— æ³•æ‰¾åˆ°è“ç‰™é€‚é…å™¨,ä½¿ç”¨<code>dmesg</code>æŸ¥çœ‹é”™è¯¯æ—¥å¿—.</p><hr><p>è“ç‰™è€³æœºå¯èƒ½è½½å…¥æ¨¡å—å¤±è´¥</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pactl load-module module-bluetooth-discoverFailure: Module initialization failed<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸´æ—¶è§£å†³æ–¹æ³•:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pactl unload-module  module-bluetooth-discoverpactl   load-module  module-bluetooth-discover<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>é•¿æœŸè§£å†³æ–¹æ³•<sup><a href='#2'><font color=red>[2]</font></a></sup>:</p><p>Edit the file:</p><pre class="language-bash" data-language="bash"><code class="language-bash">/etc/pulse/default.pa</code></pre><p>and comment out (with an # at the beginning of the line) the following line:</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#load-module module-bluetooth-discover</span></code></pre><p>now edit the file:</p><pre class="language-bash" data-language="bash"><code class="language-bash">/usr/bin/start-pulseaudio-x11</code></pre><p>and after the lines:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">[</span> xâ€<span class="token environment constant">$SESSION_MANAGER</span>â€ <span class="token operator">!=</span> x <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>     /usr/bin/pactl load-module module-x11-xsmp â€œdisplay<span class="token operator">=</span><span class="token environment constant">$DISPLAY</span> <span class="token assign-left variable">session_manager</span><span class="token operator">=</span><span class="token environment constant">$SESSION_MANAGER</span>â€ <span class="token operator">></span> /dev/null <span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>add the following line:</p><pre class="language-bash" data-language="bash"><code class="language-bash">/usr/bin/pactl load-module module-bluetooth-discover</code></pre><p>This way the Pulse audioâ€™s Bluetooth modules will not be downloaded at boot time but after x11 is started.</p><hr><p>å­—ä½“ä¼˜åŒ–:<br>æœ‰äº›å­—ä½“å¯èƒ½çœ‹ä¸è§,æ¯”å¦‚ ğ«”­ ğª ¸ :</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#å®‰è£… ttf-hanazono ttf-ume(mincho) å­—ä½“</span>pacman <span class="token parameter variable">-S</span> ttf-hanazono ttf-ume<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸è¦ä½¿ç”¨notoå’Œæ€æºé»‘ä½“çš„äºšæ´²å­—ä½“æ•´åˆåŒ…,å› ä¸ºä¼šä¼˜å…ˆä½¿ç”¨æ—¥è¯­å­—ä½“,é€ æˆä¸­æ–‡å¤§å°ä¸ä¸€,å°½é‡ä¸‹è½½æ€æºé»‘ä½“çš„åˆ†å¼€çš„å­—ä½“åŒ…,ç„¶ååœ¨<code>~/.config/fontconfig/fonts.conf</code>ä¸­å°†ä¸­æ–‡çš„æ€æºé»‘ä½“è®¾ç½®ä¸ºç¬¬ä¸€ä¸ª,å…·ä½“è®¾ç½®å‚è€ƒ<a href="https://wiki.archlinux.org/index.php/Font_configuration">Font_configuration</a></p><hr><p>è§£å†³DNSæ±¡æŸ“é—®é¢˜:<br>å®‰è£…dnscrypt-proxy å…·ä½“æ–¹æ³•å‚è§arch wiki <a href="https://wiki.archlinux.org/index.php/Dnscrypt-proxy">dnscrypt-proxy</a>,ä½¿ç”¨<a href="https://github.com/felixonmars/dnsmasq-china-list">dnsmasq-china-list</a>æ’é™¤ä¸­å›½åŸŸå</p><hr><p>arch ä½¿ç”¨pyhon-dlibä¼šæç¤º<code>Undefined symbol: cblas_dtrsm</code><br>ä½¿ç”¨auræˆ–archlinuxcnä¸­çš„openblas-lapack-gitä»£æ›¿pacmanæºä¸­çš„cblas,è²Œä¼¼æºä¸­çš„cblasç‰ˆæœ¬å¤ªä½</p><hr><p>è‡ªåŠ¨æ¸…é™¤pacmançš„ç¼“å­˜:<br>åˆ›å»º<code>/usr/share/libalpm/hooks/clean-pacman-cache.hook</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Trigger<span class="token punctuation">]</span>Operation <span class="token operator">=</span> RemoveOperation <span class="token operator">=</span> InstallOperation <span class="token operator">=</span> UpgradeType <span class="token operator">=</span> PackageTarget <span class="token operator">=</span> *<span class="token punctuation">[</span>Action<span class="token punctuation">]</span>Description <span class="token operator">=</span> Cleaning up old packages<span class="token punctuation">..</span>.When <span class="token operator">=</span> PostTransactionExec <span class="token operator">=</span> /usr/bin/paccache <span class="token parameter variable">-rvk3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>ext4åˆ†åŒºä¼˜åŒ–:</p><p><code>æœ‰å¤‡ç”¨ç”µæºæˆ–è€…ç¬”è®°æœ¬å¯ä»¥å…³é—­ext4çš„barrierså…·ä½“æ–¹æ³•å‚è€ƒ</code><a href="https://wiki.archlinux.org/index.php/Ext4#Turning_barriers_off">Ext4#Turning_barriers_off</a></p><p>è°ƒæ•´å†…æ ¸çš„I/Oè°ƒåº¦<a href="https://wiki.archlinux.org/title/Improving_performance#Changing_I/O_scheduler">Improving_performance#Changing_I/O_scheduler</a><br>The process to change I/O scheduler, depending on whether the disk is rotating or not can be automated and persist across reboots. For example the udev rule below sets the scheduler to none for NVMe, mq-deadline for SSD/eMMC, and bfq for rotational drives:</p><p>/etc/udev/rules.d/60-ioschedulers.rules</p><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token comment"># set scheduler for NVMe</span><span class="token key attr-name">ACTION</span><span class="token punctuation">=</span><span class="token value attr-value">="add|change", KERNEL=="nvme[0-9]n[0-9]", ATTR&#123;queue/scheduler&#125;="none"</span><span class="token comment"># set scheduler for SSD and eMMC</span><span class="token key attr-name">ACTION</span><span class="token punctuation">=</span><span class="token value attr-value">="add|change", KERNEL=="sd[a-z]|mmcblk[0-9]*", ATTR&#123;queue/rotational&#125;=="0", ATTR&#123;queue/scheduler&#125;="mq-deadline"</span><span class="token comment"># set scheduler for rotating disks</span><span class="token key attr-name">ACTION</span><span class="token punctuation">=</span><span class="token value attr-value">="add|change", KERNEL=="sd[a-z]", ATTR&#123;queue/rotational&#125;=="1", ATTR&#123;queue/scheduler&#125;="bfq"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>deadbeef-git æ‰“å¼€æç¤º<code>plugin cdda.so not found or failed to load</code><br>è§£å†³æ–¹æ³•: å®‰è£… libcddb libcdio</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> libcddb libcdio</code></pre><hr><p>ä½¿ç”¨anime4kä¼šæç¤ºç¼ºå°‘openCLåº“,å®‰è£…ocl-icd</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> ocl-icd</code></pre><hr><p>å¼€å¯powertopçš„è‡ªåŠ¨ä¼˜åŒ–èŠ‚çœç”µé‡:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#å®‰è£…powertop</span>pacman <span class="token parameter variable">-S</span> powertop<span class="token comment">#å¼€æœºè‡ªåŠ¨å¯ç”¨</span><span class="token function">vim</span> /etc/systemd/system/powertop.service<span class="token comment">#å¡«å…¥ä»¥ä¸‹å†…å®¹</span><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span><span class="token assign-left variable">Description</span><span class="token operator">=</span>Powertop tunings<span class="token punctuation">[</span>Service<span class="token punctuation">]</span><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/powertop --auto-tune <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">'on'</span><span class="token assign-left variable">RemainAfterExit</span><span class="token operator">=</span>true<span class="token punctuation">[</span>Install<span class="token punctuation">]</span><span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target<span class="token comment"># å¯ç”¨</span>systemctl <span class="token builtin class-name">enable</span> powertop.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸‹shellæ˜¯ç¦ç”¨usbçš„ä¼‘çœ ,ä¸ç„¶é¼ æ ‡ç”¨èµ·æ¥å¾ˆéš¾å—(<strong>æ³¨æ„:æ¯ä¸ªç”µè„‘çš„å‘½ä»¤éƒ½ä¸åŒ,è¯·è‡ªè¡Œç”¨powertopæŸ¥çœ‹ç›¸åº”çš„å‘½ä»¤</strong>)</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Autosuspend for USB device USB Optical Mouse [PixArt]</span><span class="token builtin class-name">echo</span> <span class="token string">'on'</span> <span class="token operator">></span> <span class="token string">'/sys/bus/usb/devices/1-1/power/control'</span><span class="token punctuation">;</span><span class="token comment"># Autosuspend for USB device HP Wide Vision HD [Generic]</span><span class="token builtin class-name">echo</span> <span class="token string">'on'</span> <span class="token operator">></span> <span class="token string">'/sys/bus/usb/devices/1-4/power/control'</span><span class="token punctuation">;</span><span class="token comment"># Autosuspend for USB device xHCI Host Controller [usb1]</span><span class="token builtin class-name">echo</span> <span class="token string">'on'</span> <span class="token operator">></span> <span class="token string">'/sys/bus/usb/devices/usb1/power/control'</span><span class="token punctuation">;</span><span class="token comment"># Autosuspend for USB device xHCI Host Controller [usb2]</span><span class="token builtin class-name">echo</span> <span class="token string">'on'</span> <span class="token operator">></span> <span class="token string">'/sys/bus/usb/devices/usb2/power/control'</span><span class="token punctuation">;</span><span class="token comment"># Autosuspend for unknown USB device 1-7 (8087:0a2a)</span><span class="token builtin class-name">echo</span> <span class="token string">'on'</span> <span class="token operator">></span> <span class="token string">'/sys/bus/usb/devices/1-7/power/control'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>rider éœ€è¦å®‰è£…moon(.net framework/.net core)</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> moon</code></pre><p>æœåŠ¡ç«¯éœ€è¦mono-xsp,ä½¿ç”¨aurå®‰è£…:</p><pre class="language-bash" data-language="bash"><code class="language-bash">yay <span class="token parameter variable">-S</span> xsp</code></pre><hr><p>vscode å¼€å‘<code>asp.net</code>:<br>å®‰è£… moon dotnet</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> moon dotnet-sdk</code></pre><p>dotnet å®‰è£… dotnet-dev-certs ç”Ÿæˆè¯ä¹¦:</p><pre class="language-bash" data-language="bash"><code class="language-bash">dotnet tool <span class="token function">install</span> <span class="token parameter variable">--global</span> dotnet-dev-certs</code></pre><p>exportè¦åŠ å…¥.bashrc æˆ–è€…æ¯æ¬¡å¼€å§‹å‰æ‰§è¡Œ</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$PATH</span>:/home/[user]/.dotnet/tools"</span></code></pre><p>ç”Ÿæˆè¯ä¹¦</p><pre class="language-bash" data-language="bash"><code class="language-bash">dotnet dev-certs https</code></pre><p>å¦‚æœæƒ³å¸è½½</p><pre class="language-bash" data-language="bash"><code class="language-bash">dotnet tool uninstall <span class="token parameter variable">--global</span> dotnet-dev-certs</code></pre><hr><p>ç¼–è¯‘æ±‡ç¼–è¯­è¨€ éœ€è¦å®‰è£…nasm</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> nasm</code></pre><hr><p>chrome/chromium å³ä½¿å·²ç»è®¾ç½®ä¸ºé»˜è®¤æµè§ˆå™¨ä¹Ÿä¼šæç¤ºè®¾ç½®ä¸ºé»˜è®¤æµè§ˆå™¨:<br>è§£å†³æ–¹æ³•:</p><blockquote><p>What has worked for me is go to <code>Settings -&gt; Applications -&gt; File Associations</code> and there, filter with <code>html</code>. Then for the entries <code>xhtml+xml</code> and <code>html</code>, you can move <code>Google Chrome</code> to the first position of the preference order.<a href="#3"><sup><font color=red>[3]</font></sup></a></p></blockquote><p>ä¸ªäººæµ‹è¯• åªè¦æŠŠ<code>xhtml+xml</code>çš„é»˜è®¤å¼€å¯æœ€é«˜ä¼˜å…ˆçº§åº”ç”¨è®¾ç½®ä¸ºchromium/chromeå°±è¡Œäº†</p><hr><p>archLinuxè¿›è¡ŒopenGlçš„å¼€å‘<br>å®‰è£…glfw-x11 glad-c-git</p><pre class="language-bash" data-language="bash"><code class="language-bash">yay <span class="token parameter variable">-S</span> glfw-x11 glad-c-git</code></pre><p>open GLå¯¼å…¥ç°æœ‰æ¨¡å‹æ—¶éœ€è¦å®‰è£…assimp:</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> assimp</code></pre><p>é¡ºä¾¿æ¨èä¸€ä¸ªglslçš„æ•™ç¨‹: <a href="https://learnopengl-cn.github.io/">LearnOpenGL CN</a></p><hr><p>pythonä½¿ç”¨tkinteréœ€è¦å®‰è£…tkåº“:</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> tk</code></pre><hr><p>kdeè®¾ç½®ä¸‰æŒ‡æ‰‹åŠ¿:</p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> gebaar xdotool</code></pre><hr><p>æ‰‹åŠ¨å®‰è£…mariadb:<br>è¿è¡Œ<code>mariadb/scripts/mariadb-install-db</code></p><p>è®¾ç½®è·¯å¾„(æç¤ºå¤±è´¥ è·¯å¾„æ›´æ”¹æˆåŠŸ):</p><pre class="language-bash" data-language="bash"><code class="language-bash">./mysqld <span class="token parameter variable">--datadir</span><span class="token operator">=</span><span class="token string">"./data"</span> <span class="token parameter variable">--langdir</span><span class="token operator">=</span><span class="token string">"./mysql/share"</span> <span class="token parameter variable">--basedir</span><span class="token operator">=</span><span class="token string">"./data/base"</span></code></pre><p>æœ€å</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">You can start the MariaDB daemon with:<span class="token builtin class-name">cd</span> <span class="token string">'.'</span> <span class="token punctuation">;</span> ./bin/mysqld_safe <span class="token parameter variable">--datadir</span><span class="token operator">=</span><span class="token string">'./data'</span>You can <span class="token builtin class-name">test</span> the MariaDB daemon with mysql-test-run.pl<span class="token builtin class-name">cd</span> <span class="token string">'./mysql-test'</span> <span class="token punctuation">;</span> perl mysql-test-run.pl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>ä½¿ç”¨redash:<br>å®‰è£…<code>docker-compose</code>(æ­¤å¤„å¯æ”¹dockerçš„rootç›®å½•,å»ºè®®è°·æ­Œ), æ‰‹åŠ¨å®‰è£…æ—¶éœ€è¦ä¸´æ—¶ä½¿ç”¨<code>pwgen</code>ç”Ÿæˆå¯†é’¥,å®‰è£…å®Œæˆåå¯å¸è½½.<br>å®‰è£…æ—¶å‚è€ƒubuntuçš„å®‰è£…è„šæœ¬ ç¨å¾®æ”¹æ”¹å°±è¡Œäº†</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> <span class="token function">docker-compose</span> pwgenpacman <span class="token parameter variable">-Rs</span> pwgen<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><p>é‡åˆ°ä»¥ä¸‹é—®é¢˜:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Possibly missing firmware <span class="token keyword">for</span> module: aic94xx Possibly missing firmware <span class="token keyword">for</span> module: wd719x<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç›´æ¥ä½¿ç”¨aurä¸­æä¾›çš„é©±åŠ¨:</p><pre class="language-bash" data-language="bash"><code class="language-bash">yay <span class="token parameter variable">-S</span> aic94xx-firmware wd719x-firmware</code></pre><hr><p>ä¸º<code>kde spellChecker</code>æ·»åŠ å­—å…¸:</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> hunspell-en_US</code></pre><hr><p>wine-wechat æ•°æ®æ–‡ä»¶:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">==</span><span class="token operator">></span> WeChat data will be put into ~/.local/lib/wine-wechat when needed.<span class="token operator">==</span><span class="token operator">></span> run <span class="token string">'wechat --config'</span> <span class="token keyword">if</span> you want to adjust DPI settings.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>wine-wechat è¿è¡Œè¦ä¿è¯å½“å‰è¿è¡Œç¯å¢ƒå˜é‡ä¸ºä¸­æ–‡,å¦åˆ™æ— æ³•æ˜¾ç¤ºä¸­æ–‡å­—ä½“,å³ä½¿wineè£…äº†ä¸­æ–‡å­—ä½“:</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>zh_CN.UTF-8 wechat</code></pre><p>ä½¿ç”¨æ­¤<a href="https://github.com/askme765cs/Wine-QQ-TIM">Wine-QQ-TIM</a>é¡¹ç›®çš„QQæˆ–è€…TIMä¹±ç ,ç¼ºå°‘å­—ä½“:</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> wqy-microhei</code></pre><hr><p>è€³æœºç”µæµå£°:</p><blockquote><p><a href="https://wiki.archlinux.org/index.php/PulseAudio/Troubleshooting#Glitches,_skips_or_crackling">Troubleshooting#Glitches,_skips_or_crackling</a></p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">The newer implementation of the PulseAudio sound server uses timer-based audio scheduling instead of the traditional, interrupt-driven approach.Timer-based scheduling may expose issues <span class="token keyword">in</span> some ALSA drivers. On the other hand, other drivers might be glitchy without it on, so check to see what works on your system.To turn timer-based scheduling off <span class="token function">add</span> <span class="token assign-left variable">tsched</span><span class="token operator">=</span><span class="token number">0</span> <span class="token keyword">in</span> /etc/pulse/default.pa:/etc/pulse/default.paload-module module-udev-detect <span class="token assign-left variable">tsched</span><span class="token operator">=</span><span class="token number">0</span>Then restart the PulseAudio server:$ pulseaudio <span class="token parameter variable">-k</span>$ pulseaudio <span class="token parameter variable">--start</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><a href="https://wiki.archlinux.org/index.php/PulseAudio/Troubleshooting#Static_noise_when_using_headphones">Troubleshooting#Static_noise_when_using_headphones</a></p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Static noise when using headphonesTime-based scheduling may be causing this, disable it as explained <span class="token keyword">in</span> <span class="token comment">#Glitches, skips or crackling.</span>Another reason you are encountering static noise <span class="token keyword">in</span> your headphone jack could be ALSA's loopback mixing.Make sure you have alsa-utils installed, launch alsamixer, <span class="token keyword">then</span> <span class="token keyword">select</span> your audio device <span class="token punctuation">(</span>pressing F6<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>, navigate all the way left using the left arrow, and stop on Loopback, <span class="token keyword">if</span> Enabled disable it using the down arrow. This should not impact audio playback or microphone recording negatively, unless you require loopback mixing.Some notebook models, like Dell XPS <span class="token number">13</span> <span class="token number">9360</span>, suffer from continuous hissing sound when a headphone is plugged in.Yet another reason <span class="token keyword">for</span> this symptom could be the power-saving mode of your audio device.<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> If you followed Power management<span class="token comment">#Audio, revert the changes and check if it solves the problem.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¼€å¯alsaçš„å™ªéŸ³æ¶ˆå‡æ¨¡å—:</p><blockquote><p><a href="https://wiki.archlinux.org/index.php/PulseAudio/Troubleshooting#Enable_Echo.2FNoise-Cancellation">Troubleshooting#Enable_Echo.2FNoise-Cancellation</a></p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Arch does not load the Pulseaudio Echo-Cancellation module by default, therefore, we have to <span class="token function">add</span> it <span class="token keyword">in</span> /etc/pulse/default.pa. First you can <span class="token builtin class-name">test</span> <span class="token keyword">if</span> the module is present with pacmd and entering list-modules. If you cannot <span class="token function">find</span> a line showing name: <span class="token operator">&lt;</span>module-echo-cancel<span class="token operator">></span> you have to <span class="token function">add</span>/etc/pulse/default.pa<span class="token comment">### Enable Echo/Noise-Cancellation</span>load-module module-echo-cancel <span class="token assign-left variable">use_master_format</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">aec_method</span><span class="token operator">=</span>webrtc <span class="token assign-left variable">aec_args</span><span class="token operator">=</span><span class="token string">"analog_gain_control=0\ digital_gain_control=1"</span> <span class="token assign-left variable">source_name</span><span class="token operator">=</span>echoCancel_source <span class="token assign-left variable">sink_name</span><span class="token operator">=</span>echoCancel_sinkset-default-source echoCancel_sourceset-default-sink echoCancel_sink<span class="token keyword">then</span> restart Pulseaudio$ pulseaudio <span class="token parameter variable">-k</span>$ pulseaudio <span class="token parameter variable">--start</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>kde discover æ— æ³•ä½¿ç”¨pacman backend<br><s>discover ä½¿ç”¨äº† packagekit,ä½¿ç”¨ pkcon éœ€è¦rootæƒé™,æŒ‰ç†æ¥è¯´packagekitä¼šè‡ªåŠ¨è·å–rootä¸”æ— éœ€è¾“å…¥å¯†ç ,ä½†discoveræ— æ³•è·å–rootå·²æ— æ³•å·²rootç”¨æˆ·è¿è¡Œ,é—®é¢˜æœªçŸ¥,æ”¾å¼ƒè§£å†³<br>è§£å†³æ–¹æ³•:<br>å¸è½½discover packagekit packagekit-qt5<br>æ–°å®‰è£…çš„è¯ ç´¢æ€§ä¸è£…å°±è¡Œäº†</s></p><p>2020å¹´2æœˆ4æ—¥å·²è§£å†³,é‡æ–°å®‰è£…åå¥½äº†,å¯èƒ½ä¹‹å‰æ˜¯bug,ç°åœ¨ä¿®å¤å¥½äº†</p><hr><p>C++ä½¿ç”¨openCV:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> opencv<span class="token comment"># vtkå’Œhdf5ä¸ºopenCVçš„ä¾èµ– ä¸å®‰è£…ä¼šç¼–è¯‘å¤±è´¥</span><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> vtk<span class="token function">sudo</span> pacman <span class="token parameter variable">-Ss</span> hdf5<span class="token comment"># cmakeç”¨æ¥ç”Ÿæˆmakefile</span>pacman <span class="token parameter variable">-S</span> cmake<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>traceroute:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#ç›®å‰ä½¿ç”¨äº†ipip.net çš„besttrace</span>pacman <span class="token parameter variable">-S</span> besttrace<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><p>wine é”™è¯¯<br><code>0009:err:module:load_so_dll failed to load .so lib &quot;/usr/bin/../lib32/wine/l3codeca.acm.so&quot;: libmpg123.so.0: cannot open shared object file: No such file or directory</code><br>è§£å†³æ–¹æ³•:<br><code>sudo pacman -S lib32-mpg123</code></p><p>åŒ…å«ä¸­å›½å›½å†…è½¯ä»¶çš„<a href="https://github.com/hillwoodroc/winetricks-zh">winetricks-zh</a></p><pre class="language-bash" data-language="bash"><code class="language-bash">pacman <span class="token parameter variable">-S</span> winetricks-zh</code></pre><p>qqè»½èŠç‰ˆéœ€è¦åº“:</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> lib32-libpulse</code></pre><hr><p>ark è§£å‹7zå’Œrar</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">æŸ¥çœ‹å¯é€‰ä¾èµ–pacman <span class="token parameter variable">-Qi</span> arkæ”¯æŒ7z<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> p7zipæ”¯æŒrar<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> <span class="token function">unrar</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>plasmaçš„é¼ æ ‡æ ·å¼æœ‰æ—¶å€™ä¼šä¸åº”ç”¨åœ¨æ ‡é¢˜æ å’Œå…¶ä»–åœ°æ–¹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">I had a similar problem on Arch.Try edit /usr/share/icons/default/index.themeReplace: <span class="token assign-left variable">Inherits</span><span class="token operator">=</span>Adwaitato: <span class="token assign-left variable">Inherits</span><span class="token operator">=</span>breeze_cursorsThis will change the cursor to the dark breeze, I don't know the name of the white cursor.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ul><li><a href="https://www.reddit.com/r/kde/comments/3pse8f/plasma_5_cursor_icon_changes_to_the_kde_classic/">[Plasma 5] Cursor icon changes to the â€œKDE Classicâ€ theme when hovering over a windows title bar/resizing it etc?</a></li><li><a href="https://wiki.archlinux.org/index.php/Cursor_themes_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#XDG_%E8%A7%84%E5%88%99">Cursor_themes_(ç®€ä½“ä¸­æ–‡)#XDG_è§„åˆ™</a></li></ul></blockquote><hr><p>plasmaè‡ªå¸¦çš„è™šæ‹Ÿæ¡Œé¢æŒ‡ç¤ºæœ‰äº›bugè€Œä¸”ä¸å¥½çœ‹,ä»£æ›¿é»˜è®¤è™šæ‹Ÿæ¡Œé¢çš„æŒ‡ç¤º</p><pre class="language-bash" data-language="bash"><code class="language-bash">yay <span class="token parameter variable">-S</span> plasma5-applets-virtual-desktop-bar-git</code></pre><hr><p>ä¸ºarchæ·»åŠ command not found</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> pkgfile</code></pre><p>æ›´æ–°command-not-foundæ•°æ®åº“</p><pre class="language-bash" data-language="bash"><code class="language-bash">pkgfile <span class="token parameter variable">-U</span></code></pre><p>æœ€ååœ¨<code>~/.bashrc</code>æ·»åŠ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> /usr/share/doc/pkgfile/command-not-found.bash</code></pre><hr><p>nethogs: æŒ‰è¿›ç¨‹æŸ¥çœ‹æµé‡å ç”¨</p><hr><p>cocä¸­cè¯­è¨€è‡ªåŠ¨è¡¥å…¨,éœ€è¦å®‰è£…ccls:</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> ccls</code></pre><hr><blockquote><ol><li>æ­¤æ–¹æ³•å‚è€ƒè‡ª <a id='1'><a href="https://www.jianshu.com/p/6eaf642a94ed">ç”¨æˆ·æ·»åŠ </a></a></li><li>æ­¤æ–¹æ³•å‚è€ƒè‡ª <a id='2'><a href="https://askubuntu.com/questions/689281/pulseaudio-can-not-load-bluetooth-module">PulseAudio can not load bluetooth module</a><br></a></li><li>æ­¤æ–¹æ³•æ¥è‡ª <a id="3"><a href="https://bbs.archlinux.org/viewtopic.php?id=198432">Plasma wont set Chromium as default browser</a></a></li></ol></blockquote><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¯¦ç»†å®‰è£…æ•™ç¨‹è¯·å‚è€ƒarch wiki &lt;a href=&quot;https://wiki.archlinux.org/index.php/Installation_guide_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&quot;&gt;Installation guide (ç®€ä½“ä¸­æ–‡)&lt;/a&gt;,æ­¤å¤„åªè®°å½•å®‰è£…åé‡åˆ°çš„é—®é¢˜.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æš—å½±ç²¾çµ2 PRO é™éŸ³LEDä¸èµ·ä½œç”¨å’Œå·¦è¾¹è€³æœºä¼šæœ‰å™¼é‡Œå•ªå•¦å£°:&lt;br&gt;
å…·ä½“è§£å†³æ–¹æ³•æˆ‘å·²ç»å†™åˆ°archwikié‡Œäº†,è¯·çœ‹: &lt;a href=&quot;https://wiki.archlinux.org/index.php?title=Laptop/HP#HP_Omen_15_ax210TX&quot;&gt;Laptop/HP#HP_Omen_15_ax210TX&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;grubæ›´æ–°èœå•&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;grub-mkconfig&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; /boot/grub/grub.cfg  &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å®‰è£…os-proberè®©grubæ£€æµ‹åˆ°å…¶ä»–ç³»ç»Ÿå¹¶è‡ªåŠ¨åˆ›å»ºå¼•å¯¼&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pacman &lt;span class=&quot;token parameter variable&quot;&gt;-S&lt;/span&gt; os-prober&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨system-boot(å°±æ˜¯ç›´æ¥ä½¿ç”¨linuxå†…æ ¸å¼•å¯¼ç³»ç»Ÿ,ä¸å†éœ€è¦grub,å¦‚æœæœ‰å¤šç³»ç»Ÿä¸æ¨è,ä¼šæŠŠefiåˆ†åŒºæå¾—å¾ˆä¹±):&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pacman &lt;span class=&quot;token parameter variable&quot;&gt;-S&lt;/span&gt; efibootmgr dosfstools
&lt;span class=&quot;token comment&quot;&gt;# æ­¤å¤„æ³¨æ„:æ­¤å¤„è¦æŠŠefiåˆ†åŒºæŒ‚è½½ä¸º/boot,è€Œéå¹³å¸¸çš„/boot/efi&lt;/span&gt;
bootctl &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/boot&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
    <category term="archlinux" scheme="https://asutorufa.github.io/tags/archlinux/"/>
    
    <category term="efi" scheme="https://asutorufa.github.io/tags/efi/"/>
    
    <category term="linux" scheme="https://asutorufa.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>CIDRåŒ¹é… åŸŸååŒ¹é…</title>
    <link href="https://asutorufa.github.io/posts/3cb4313e/"/>
    <id>https://asutorufa.github.io/posts/3cb4313e/</id>
    <published>2019-08-02T18:55:15.000Z</published>
    <updated>2020-06-23T00:55:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ‰€æœ‰å®Œæ•´å®ç°ä»£ç :<a href="https://github.com/Asutorufa/yuhaiin/tree/master/net/match">match</a></p><h2 id="CIDR">CIDR</h2><p>æˆ‘ä»¬çŸ¥é“cidrå¯¹ipåŒ¹é…æ—¶,åªè¦cidrçš„maské•¿åº¦çš„å‰å‡ ä½ä¸è¦åŒ¹é…çš„ipç›¸åŒ,åˆ™å¯ä»¥è¯´åŒ¹é…æˆåŠŸ.</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">å‡è®¾æœ‰ä¸€ä¸ªcidrä¸º128.0.0.1/24è½¬æ¢ä¸ºäºŒè¿›åˆ¶ <span class="token number">1000</span> 0000.0000 0000.0000 0000.0000 0001/24å¯ä»¥çŸ¥é“è¦åŒ¹é…ipçš„å‰24ä¸ºä¸cidrçš„å‰24<span class="token punctuation">(</span><span class="token number">1000</span> 0000.0000 0000.0000 0000<span class="token punctuation">)</span>ä½ç›¸åŒåˆ™åŒ¹é…æˆåŠŸå‡è®¾æœ‰ä¸€ä¸ªip <span class="token number">128.0</span>.0.128 äºŒè¿›åˆ¶ä¸º <span class="token number">1000</span> 0000.0000 0000.0000 0000.1000 0000å¯ä»¥çœ‹åˆ°å‰24ä½ä¸cidrç›¸åŒ åˆ™åŒ¹é…æˆåŠŸ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŸŸå">åŸŸå</h2><p>åŸŸåå°±æ¯”è¾ƒç®€å•äº†,ç›´æ¥æŒ‰ç‚¹åˆ†å‰²å°±è¡Œäº†</p><h2 id="å‰ç¼€æ ‘">å‰ç¼€æ ‘</h2><p>é€šè¿‡ä¸Šè¿°è§„åˆ™ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰ç¼€æ ‘å®ç°CIDRå¯¹ipçš„åŒ¹é…</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">        root       /    <span class="token punctuation">\</span>      <span class="token number">0</span>      <span class="token number">1</span>     / <span class="token punctuation">\</span>    / <span class="token punctuation">\</span>    <span class="token number">0</span>   <span class="token number">1</span>  <span class="token number">0</span>   <span class="token number">1</span>   /å½“ipåŒ¹é…åˆ°æ­¤å¤„,æ­¤å¤„å·²æ— ä»»ä½•å­æ ‘,ä¸”æ˜¯æŸä¸€cidrçš„æœ«å°¾æ—¶åˆ™åŒ¹é…æˆåŠŸè‹¥æ­¤å¤„èŠ‚ç‚¹ä¸ºnull<span class="token punctuation">(</span>golangä¸ºnil<span class="token punctuation">)</span>ä¸”ä¸æ˜¯æŸä¸€cidrçš„æœ«å°¾æ—¶åˆ™åŒ¹é…å¤±è´¥<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŸŸåçš„å‰ç¼€æ ‘ç›¸åŒ,åªä¸è¿‡åŸŸåä¸å†æ˜¯åªæœ‰0å’Œ1,è€Œä¸”åœ¨åŒ¹é…çš„æ—¶å€™è¿˜éœ€è¦è·³è¿‡å‰é¢çš„é‚£äº›å‰ç¼€.</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">        +---------+        <span class="token operator">|</span>  root   <span class="token operator">|</span>        +---------+       /     /      <span class="token punctuation">\</span>facebook   google   twitter  <span class="token punctuation">..</span>.  /        /   <span class="token punctuation">\</span>       <span class="token punctuation">\</span>com      com   mail    com   <span class="token punctuation">..</span>.                <span class="token punctuation">\</span>               comåœ¨å¯¹åŸŸååŒ¹é…æ—¶å¦‚å¯¹ www.play.google.comåŒ¹é…:    æ²¡æœ‰www  è·³è¿‡    æ²¡æœ‰play è·³è¿‡    æœ‰google ç»§ç»­    æœ‰com ä¸” åŸŸåå·²ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ -<span class="token operator">></span> åˆ¤æ–­trieä¸­æ˜¯å¦ä¸ºæœ€åçš„ä¸€ä¸ªå­æ ‘ -<span class="token operator">></span> æ˜¯ -<span class="token operator">></span> åŒ¹é…æˆåŠŸè¿™é‡Œæœ‰ä¸€ä¸ªæ˜æ˜¾çš„é—®é¢˜  æ¯”å¦‚æˆ‘ä»¬åŒæ—¶æ’å…¥äº†music.126.comå’Œ163.com  ç„¶åæˆ‘ä»¬éœ€è¦æŸ¥è¯¢music.163.comæ˜¯å¦è¢«åŒ¹é…  æ˜¯ä¸æ˜¯å‘ç°äº†é—®é¢˜,æ— æ³•è¢«åŒ¹é…,å› ä¸ºåŒ…å«music,æˆ‘ä»¬ä¼šåŒ¹é…åˆ°music.126.comè¿™æ¡çº¿,è€Œä¸æ˜¯163.comè¿™é‡Œæœ‰ä¸ªå¾ˆç®€å•çš„è§£å†³æ–¹æ³•,å°±æ˜¯æŠŠåŸŸåå€’è¿‡æ¥æ’å…¥,å€’è¿‡æ¥åŒ¹é…,å°±è·ŸJAVAåŒ…åé‚£æ ·        +---------+        <span class="token operator">|</span>  root   <span class="token operator">|</span>        +---------+             /            com        <span class="token punctuation">..</span>.           /   <span class="token punctuation">\</span>         <span class="token number">163</span>   <span class="token number">126</span>     <span class="token punctuation">..</span>.                 <span class="token punctuation">\</span>                musicè¿™æ ·å°±èƒ½è¢«æ­£ç¡®åŒ¹é…äº†,è€Œä¸”ä¼šç¼©çŸ­æ—¶é—´,ä¸ä¼šå»å®Œæ•´åŒ¹é…æ•´ä¸ªåŸŸå,åªåŒ¹é…åé¢æœ‰çš„å°±è¡Œäº†<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>trieæ ‘ç±»ä¼¼ä¸Šè¿°ç»“æ„</p><p>trieæ ‘èŠ‚ç‚¹ æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™<span id="more"></span><br>+node<br>|- bool(åˆ¤æ–­æ˜¯å¦åŒ¹é…æˆåŠŸ,æ˜¯å¦æ˜¯æŸä¸€cidrçš„æœ«å°¾)<br>|- left(å·¦æ ‘ä»£è¡¨0)<br>|- right(å³æ ‘ä»£è¡¨1)</p><p>åŸŸåçš„è¿™æ ·å†™<br>+node<br>|- bool<br>|- domainNode<br>|- next</p><h2 id="ä½¿ç”¨golangå®ç°">ä½¿ç”¨golangå®ç°</h2><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> node <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span> isLast <span class="token builtin">bool</span>    left   <span class="token operator">*</span>node    right  <span class="token operator">*</span>node<span class="token punctuation">&#125;</span><span class="token keyword">type</span> TrieTree <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    root <span class="token operator">*</span>node<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">NewTrieTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>TrieTree <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token operator">&amp;</span>TrieTree<span class="token punctuation">&#123;</span>    root<span class="token punctuation">:</span> <span class="token operator">&amp;</span>node<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹æ¯ä¸€ä¸ªCIDRçš„æ’å…¥<br>æ³¨æ„: æ­¤å¤„ä¼ å…¥çš„CIDRä¸ºCIDRå‰maskä½çš„äºŒè¿›åˆ¶å½¢å¼</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>trie <span class="token operator">*</span>TrieTree<span class="token punctuation">)</span> <span class="token function">Insert</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  nodeTemp <span class="token operator">:=</span> trie<span class="token punctuation">.</span>root  <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 1 byte is 49</span>    <span class="token keyword">if</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">49</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> nodeTemp<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>        nodeTemp<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span>      nodeTemp <span class="token operator">=</span> nodeTemp<span class="token punctuation">.</span>right    <span class="token punctuation">&#125;</span>    <span class="token comment">// 0 byte is 48</span>    <span class="token keyword">if</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">48</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> nodeTemp<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>        nodeTemp<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span>      nodeTemp <span class="token operator">=</span> nodeTemp<span class="token punctuation">.</span>left    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token function">len</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">&#123;</span>      nodeTemp<span class="token punctuation">.</span>isLast <span class="token operator">=</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹ipçš„åŒ¹é…<br>æ³¨æ„: æ­¤å¤„ä¼ å…¥çš„ipä¸ºipçš„äºŒè¿›åˆ¶å½¢å¼</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>trie <span class="token operator">*</span>TrieTree<span class="token punctuation">)</span> <span class="token function">Search</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">&#123;</span>  nodeTemp <span class="token operator">:=</span> trie<span class="token punctuation">.</span>root  <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">49</span> <span class="token punctuation">&#123;</span>      nodeTemp <span class="token operator">=</span> nodeTemp<span class="token punctuation">.</span>right    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">48</span> <span class="token punctuation">&#123;</span>      nodeTemp <span class="token operator">=</span> nodeTemp<span class="token punctuation">.</span>left    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> nodeTemp <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> nodeTemp<span class="token punctuation">.</span>isLast <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ‰€æœ‰å®Œæ•´å®ç°ä»£ç :&lt;a href=&quot;https://github.com/Asutorufa/yuhaiin/tree/master/net/match&quot;&gt;match&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;CIDR&quot;&gt;CIDR&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“cidrå¯¹ipåŒ¹é…æ—¶,åªè¦cidrçš„maské•¿åº¦çš„å‰å‡ ä½ä¸è¦åŒ¹é…çš„ipç›¸åŒ,åˆ™å¯ä»¥è¯´åŒ¹é…æˆåŠŸ.&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;å‡è®¾æœ‰ä¸€ä¸ªcidrä¸º128.0.0.1/24
è½¬æ¢ä¸ºäºŒè¿›åˆ¶ &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; 0000.0000 0000.0000 0000.0000 0001/24
å¯ä»¥çŸ¥é“è¦åŒ¹é…ipçš„å‰24ä¸ºä¸cidrçš„å‰24&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; 0000.0000 0000.0000 0000&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;ä½ç›¸åŒåˆ™åŒ¹é…æˆåŠŸ
å‡è®¾æœ‰ä¸€ä¸ªip &lt;span class=&quot;token number&quot;&gt;128.0&lt;/span&gt;.0.128 äºŒè¿›åˆ¶ä¸º &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; 0000.0000 0000.0000 0000.1000 0000
å¯ä»¥çœ‹åˆ°å‰24ä½ä¸cidrç›¸åŒ åˆ™åŒ¹é…æˆåŠŸ&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;åŸŸå&quot;&gt;åŸŸå&lt;/h2&gt;
&lt;p&gt;åŸŸåå°±æ¯”è¾ƒç®€å•äº†,ç›´æ¥æŒ‰ç‚¹åˆ†å‰²å°±è¡Œäº†&lt;/p&gt;
&lt;h2 id=&quot;å‰ç¼€æ ‘&quot;&gt;å‰ç¼€æ ‘&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ä¸Šè¿°è§„åˆ™ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰ç¼€æ ‘å®ç°CIDRå¯¹ipçš„åŒ¹é…&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;        root
       /    &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;
      &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;      &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
     / &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;    / &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;
    &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
   /
å½“ipåŒ¹é…åˆ°æ­¤å¤„,æ­¤å¤„å·²æ— ä»»ä½•å­æ ‘,ä¸”æ˜¯æŸä¸€cidrçš„æœ«å°¾æ—¶åˆ™åŒ¹é…æˆåŠŸ
è‹¥æ­¤å¤„èŠ‚ç‚¹ä¸ºnull&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;golangä¸ºnil&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;ä¸”ä¸æ˜¯æŸä¸€cidrçš„æœ«å°¾æ—¶åˆ™åŒ¹é…å¤±è´¥&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åŸŸåçš„å‰ç¼€æ ‘ç›¸åŒ,åªä¸è¿‡åŸŸåä¸å†æ˜¯åªæœ‰0å’Œ1,è€Œä¸”åœ¨åŒ¹é…çš„æ—¶å€™è¿˜éœ€è¦è·³è¿‡å‰é¢çš„é‚£äº›å‰ç¼€.&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;        +---------+
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;  root   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
        +---------+
       /     /      &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;
facebook   google   twitter  &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
  /        /   &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;       &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;
com      com   mail    com   &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
                &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;
               com

åœ¨å¯¹åŸŸååŒ¹é…æ—¶
å¦‚å¯¹ www.play.google.comåŒ¹é…:
    æ²¡æœ‰www  è·³è¿‡
    æ²¡æœ‰play è·³è¿‡
    æœ‰google ç»§ç»­
    æœ‰com ä¸” åŸŸåå·²ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ -&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; åˆ¤æ–­trieä¸­æ˜¯å¦ä¸ºæœ€åçš„ä¸€ä¸ªå­æ ‘ -&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; æ˜¯ -&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; åŒ¹é…æˆåŠŸ

è¿™é‡Œæœ‰ä¸€ä¸ªæ˜æ˜¾çš„é—®é¢˜
  æ¯”å¦‚æˆ‘ä»¬åŒæ—¶æ’å…¥äº†music.126.comå’Œ163.com
  ç„¶åæˆ‘ä»¬éœ€è¦æŸ¥è¯¢music.163.comæ˜¯å¦è¢«åŒ¹é…
  æ˜¯ä¸æ˜¯å‘ç°äº†é—®é¢˜,æ— æ³•è¢«åŒ¹é…,å› ä¸ºåŒ…å«music,æˆ‘ä»¬ä¼šåŒ¹é…åˆ°music.126.comè¿™æ¡çº¿,è€Œä¸æ˜¯163.com

è¿™é‡Œæœ‰ä¸ªå¾ˆç®€å•çš„è§£å†³æ–¹æ³•,å°±æ˜¯æŠŠåŸŸåå€’è¿‡æ¥æ’å…¥,å€’è¿‡æ¥åŒ¹é…,å°±è·ŸJAVAåŒ…åé‚£æ ·
        +---------+
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;  root   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
        +---------+
             /
            com        &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
           /   &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;
         &lt;span class=&quot;token number&quot;&gt;163&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;126&lt;/span&gt;     &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
                 &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;
                music

è¿™æ ·å°±èƒ½è¢«æ­£ç¡®åŒ¹é…äº†,è€Œä¸”ä¼šç¼©çŸ­æ—¶é—´,ä¸ä¼šå»å®Œæ•´åŒ¹é…æ•´ä¸ªåŸŸå,åªåŒ¹é…åé¢æœ‰çš„å°±è¡Œäº†&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;trieæ ‘ç±»ä¼¼ä¸Šè¿°ç»“æ„&lt;/p&gt;
&lt;p&gt;trieæ ‘èŠ‚ç‚¹ æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="CIDR" scheme="https://asutorufa.github.io/tags/CIDR/"/>
    
    <category term="golang" scheme="https://asutorufa.github.io/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>golangå®ç°å­è¿›ç¨‹åå°</title>
    <link href="https://asutorufa.github.io/posts/89c4c907/"/>
    <id>https://asutorufa.github.io/posts/89c4c907/</id>
    <published>2019-06-09T10:34:04.000Z</published>
    <updated>2019-06-09T10:34:04.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç³»ç»Ÿçš„è¿›ç¨‹æœºåˆ¶">ç³»ç»Ÿçš„è¿›ç¨‹æœºåˆ¶</h2><h3 id="linux">linux</h3><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">linuxä¸‹çš„è¿›ç¨‹æœºåˆ¶,å½“çˆ¶è¿›ç¨‹è¢«æ€æ­»ä¹‹å,å­è¿›ç¨‹å°±è¢«ç³»ç»Ÿæ¥ç®¡+ç³»ç»Ÿ|-çˆ¶è¿›ç¨‹ -> systemç®¡ç†|--å­è¿›ç¨‹ -> çˆ¶è¿›ç¨‹ç®¡ç†å½“çˆ¶è¿›ç¨‹è¢«æ€æ­»ä¹‹å+ç³»ç»Ÿ|-çˆ¶è¿›ç¨‹ -> è¢«æ€æ­»|--å­è¿›ç¨‹ -> systemç®¡ç†å¦‚æœå­è¿›ç¨‹è¢«æ€æ­»,è€Œä¸”çˆ¶è¿›ç¨‹æ²¡æœ‰å¤„ç†å­è¿›ç¨‹çš„å–„åå·¥ä½œ,é‚£ä¹ˆå­è¿›ç¨‹å°±ä¼šå˜æˆåƒµå°¸è¿›ç¨‹+ç³»ç»Ÿ|-çˆ¶è¿›ç¨‹ -> systemç®¡ç†|--å­è¿›ç¨‹(è¢«æ€æ­») -> åƒµå°¸è¿›ç¨‹  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><h3 id="windows">windows</h3><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">windowsä¸‹çš„è¿›ç¨‹æœºåˆ¶å°±ä¸å¤ªä¸€æ ·äº†,å½“çˆ¶è¿›ç¨‹è¢«æ€æ­»ä¹‹å,å­è¿›ç¨‹ä¹Ÿä¼šè¢«æ€æ­»ä½†æ˜¯å¦‚æœå­è¿›ç¨‹è¿˜æœ‰å­è¿›ç¨‹,æ€æ­»å­è¿›ç¨‹ä½†ä¸æ€æ­»çˆ¶è¿›ç¨‹,å­è¿›ç¨‹çš„å­è¿›ç¨‹å°±ä¼šè¢«ç³»ç»Ÿæ¥ç®¡+ç³»ç»Ÿ|-çˆ¶è¿›ç¨‹ -> systemç®¡ç†|--å­è¿›ç¨‹ -> çˆ¶è¿›ç¨‹ç®¡ç†|---å­™è¿›ç¨‹ -> å­è¿›ç¨‹ç®¡ç†å½“çˆ¶è¿›ç¨‹è¢«æ€æ­»+ç³»ç»Ÿ|-çˆ¶è¿›ç¨‹ -> è¢«æ€æ­»|--å­è¿›ç¨‹ -> è¢«æ€æ­»  |---å­™è¿›ç¨‹ -> è¢«æ€æ­»å½“å­è¿›ç¨‹è¢«æ€æ­»+ç³»ç»Ÿ|-çˆ¶è¿›ç¨‹ -> ç³»ç»Ÿç®¡ç†|--å­è¿›ç¨‹ -> è¢«æ€æ­»|-å­™è¿›ç¨‹ -> ç³»ç»Ÿç®¡ç†windowsçš„æœºåˆ¶å’Œlinuxä¸å¤ªä¸€æ ·,å¦‚æœå­è¿›ç¨‹è¢«æ€æ­»ä¹Ÿä¸ä¼šæœ‰åƒµå°¸è¿›ç¨‹è¿™ç§ä¸œè¥¿,æ‰€ä»¥å­è¿›ç¨‹å¯ä»¥æ”¾å¿ƒæ€æ­»<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®ç°golangçš„åå°">å®ç°golangçš„åå°</h2><p>å¦‚æœæƒ³å®ç°golangå­è¿›ç¨‹åå°,è€Œä¸”ä¸æ€æ­»å½“å‰çˆ¶è¿›ç¨‹,é‚£ä¹ˆæˆ‘ä»¬è‡³å°‘å¾—åˆ›å»ºå­è¿›ç¨‹,å­è¿›ç¨‹åˆ›å»ºå­™è¿›ç¨‹,ç„¶åæ€æ­»å­è¿›ç¨‹,è¿™ç§æ–¹æ³•ä¸ç®¡åœ¨linuxè¿˜æ˜¯windowséƒ½å¯ä»¥å®ç°<br>å¦‚æœä½¿ç”¨cè¯­è¨€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç³»ç»Ÿæä¾›çš„fork,ä½¿ç”¨double forkå®ç°ä¸Šè¿°è¿‡ç¨‹<br>golangåªæä¾›äº†forkexec,ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç¨‹åºåªèƒ½åˆ›å»ºå­è¿›ç¨‹<br><strong>é€šè¿‡è¿™ä¸ªæˆ‘æƒ³åˆ°äº†ä¸€ä¸ªæ¯”è¾ƒå¦ç±»çš„æ–¹æ³•,å°±æ˜¯åœ¨åˆ›å»ºè¿›ç¨‹çš„æ—¶å€™å†æ¬¡è°ƒç”¨æœ¬ç¨‹åºå†åˆ›å»ºè¿›ç¨‹,è¿™æ ·å°±ç›¸å½“äºåˆ›å»ºäº†å­è¿›ç¨‹,å­è¿›ç¨‹åˆ›å»ºå­™è¿›ç¨‹</strong><br><strong>å®ç°å°±æ˜¯ç»™ç¨‹åºåŠ å‚æ•°,å†æ¬¡è°ƒç”¨çš„æ—¶å€™åŠ ä¸Šè¿™ä¸ªå‚æ•°å†åˆ›å»ºæƒ³è¦çš„è¿›ç¨‹</strong></p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">daemonF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cmd <span class="token operator">:=</span> exec<span class="token punctuation">.</span><span class="token function">Command</span><span class="token punctuation">(</span><span class="token string">"puthon"</span><span class="token punctuation">,</span><span class="token string">"-m"</span><span class="token punctuation">,</span><span class="token string">"http.server"</span><span class="token punctuation">)</span>    cmd<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    daemon <span class="token operator">:=</span> flag<span class="token punctuation">.</span><span class="token function">Bool</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">)</span>    flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token operator">*</span>daemon <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token punctuation">&#123;</span>        <span class="token function">daemonF</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        nowFunction<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> filepath<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        cmd <span class="token operator">:=</span> exec<span class="token punctuation">.</span><span class="token function">Command</span><span class="token punctuation">(</span>nowFunction<span class="token punctuation">,</span><span class="token string">"-d"</span><span class="token punctuation">)</span>        cmd<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªç¨‹åºå«makebk,æœ‰ä¸€ä¸ªå‚æ•° -d+ç³»ç»Ÿ|-makebk(å†æ¬¡è°ƒç”¨makebkå¹¶åŠ ä¸Šå‚æ•°-d) -> çˆ¶è¿›ç¨‹:system|--makebk -d(åŠ ä¸Šå‚æ•°ä¹‹åå†åˆ›å»ºæƒ³è¦çš„è¿›ç¨‹) -> çˆ¶è¿›ç¨‹:makebk|---å­è¿›ç¨‹ -> çˆ¶è¿›ç¨‹:makebk -d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å°±å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¸‰å±‚ç»“æ„äº†,è¿™æ—¶å€™è®©çˆ¶è¿›ç¨‹æ€æ­»make -d,å°±å®ç°å­è¿›ç¨‹è¢«ç³»ç»Ÿæ¥ç®¡,å®ç°å­è¿›ç¨‹åå°</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ç³»ç»Ÿçš„è¿›ç¨‹æœºåˆ¶&quot;&gt;ç³»ç»Ÿçš„è¿›ç¨‹æœºåˆ¶&lt;/h2&gt;
&lt;h3 id=&quot;linux&quot;&gt;linux&lt;/h3&gt;
&lt;pre class=&quot;line-numbers language-txt&quot; data-language=&quot;txt&quot;&gt;&lt;code class=&quot;language-txt&quot;&gt;linuxä¸‹çš„è¿›ç¨‹æœºåˆ¶,å½“çˆ¶è¿›ç¨‹è¢«æ€æ­»ä¹‹å,å­è¿›ç¨‹å°±è¢«ç³»ç»Ÿæ¥ç®¡

+ç³»ç»Ÿ
|-çˆ¶è¿›ç¨‹ -&gt; systemç®¡ç†
|--å­è¿›ç¨‹ -&gt; çˆ¶è¿›ç¨‹ç®¡ç†

å½“çˆ¶è¿›ç¨‹è¢«æ€æ­»ä¹‹å

+ç³»ç»Ÿ
|-çˆ¶è¿›ç¨‹ -&gt; è¢«æ€æ­»
|--å­è¿›ç¨‹ -&gt; systemç®¡ç†

å¦‚æœå­è¿›ç¨‹è¢«æ€æ­»,è€Œä¸”çˆ¶è¿›ç¨‹æ²¡æœ‰å¤„ç†å­è¿›ç¨‹çš„å–„åå·¥ä½œ,é‚£ä¹ˆå­è¿›ç¨‹å°±ä¼šå˜æˆåƒµå°¸è¿›ç¨‹

+ç³»ç»Ÿ
|-çˆ¶è¿›ç¨‹ -&gt; systemç®¡ç†
|--å­è¿›ç¨‹(è¢«æ€æ­») -&gt; åƒµå°¸è¿›ç¨‹  &lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="golang" scheme="https://asutorufa.github.io/categories/golang/"/>
    
    
    <category term="golang" scheme="https://asutorufa.github.io/tags/golang/"/>
    
    <category term="linux" scheme="https://asutorufa.github.io/tags/linux/"/>
    
    <category term="windows" scheme="https://asutorufa.github.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>uefi and efi</title>
    <link href="https://asutorufa.github.io/posts/a99a60b1/"/>
    <id>https://asutorufa.github.io/posts/a99a60b1/</id>
    <published>2019-04-22T22:57:46.000Z</published>
    <updated>2020-04-29T22:57:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ›å»ºefiåˆ†åŒº:</p><p>åˆ›å»ºefiåˆ†åŒºè¦è®¾ç½®boot flag,è€Œä¸æ˜¯çº¯FAT32æ–‡ä»¶ç³»ç»Ÿ<br>ä½¿ç”¨gdisk</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gdisk /dev/sd**<span class="token comment">#è¿™é‡Œè¦æ³¨æ„åé¢è¾“å…¥åˆ†åŒºç³»ç»Ÿç¼–å· è¦é€‰æ‹©EFIåˆ†åŒº,ç›®å‰efiåˆ†åŒºç¼–å·æ˜¯ ef00</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä½¿ç”¨parted</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">parted</span> /dev/sd**<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> <span class="token builtin class-name">set</span> <span class="token number">1</span> boot on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¹‹åå†æ ¼å¼åŒ–ä¸ºfat32</p><pre class="language-bash" data-language="bash"><code class="language-bash">mkfs.vfat <span class="token parameter variable">-F</span> <span class="token number">32</span> /dev/sd**</code></pre><p>æ›´æ–°biosä¸­çš„å¯åŠ¨é¡¹åº”è¯¥åœ¨å°†å¯åŠ¨æ–‡ä»¶å®‰è£…åˆ°efiåˆ†åŒºæ—¶è¿˜è¦å‘biosä¸­çš„nvramå­˜å‚¨å™¨ä¸Šå†™å…¥ç›¸åº”çš„è·¯å¾„,åœ¨linuxä¸­å¯ä»¥ä½¿ç”¨efibootmgrå®Œæˆç›¸åº”çš„æ“ä½œ,å½“ç„¶å¦‚æœä½ æ˜¯å®‰è£…grub,å®‰è£…grubæ—¶ä¼šè‡ªåŠ¨å‘nvramä¸­å†™å…¥å†…å®¹,æ¯”å¦‚åœ¨biosæ›´æ–°å,ä¼šæ¸…é™¤nvramä¸­çš„å†…å®¹,æ‰€æœ‰è¿˜è¦é‡æ–°å®‰è£…grub,æˆ–æ˜¯ä½¿ç”¨efibootmgrå†™å…¥å¼•å¯¼æ–‡ä»¶è·¯å¾„.å¯å‚è€ƒ<a href="https://wiki.archlinux.org/index.php/Unified_Extensible_Firmware_Interface#efibootmgr">Unified_Extensible_Firmware_Interface#efibootmgr</a>,windowsä¸­ä¹Ÿæœ‰ç›¸åº”çš„å·¥å…·,å…·ä½“æ“ä½œæ–¹å¼å¯åœ¨ç½‘è·¯ä¸Šæœç´¢.<br>å¦‚æœæ˜¯uç›˜çš„è¯,uefi ä¼šæŸ¥çœ‹æ‰€æœ‰ fat åˆ†åŒºï¼Œçœ‹çœ‹é‡Œé¢æœ‰æ²¡æœ‰ EFI/boot/bootx64.efi(ç›®å‰è¿˜æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„æ–‡æ¡£è¡¨ç¤ºæ˜¯è¿™ä¸ª,è¿™åªæ˜¯æˆ‘ä¸ªäººçš„çŒœæƒ³,å› ä¸ºåœ¨æˆ‘è¯•è¿‡çš„æ— è®ºæ˜¯windowsè¿˜æ˜¯linuxçš„isoé•œåƒçš„efiæ–‡ä»¶éƒ½æ˜¯è¿™ä¸ªåœ°æ–¹) å¼•å¯¼æ–‡ä»¶,ç„¶ååªè¦æ˜¯ FAT32 æ–‡ä»¶ç³»ç»Ÿå°±è¡Œ,æ‰€ä»¥å¯ä»¥æŠŠ windows æˆ– ubuntu çš„ iso ç›´æ¥è§£å‹åˆ°ä¸€ä¸ª fat åˆ†åŒºï¼ˆæ¯”å¦‚ fat çš„ u ç›˜æˆ–ç§»åŠ¨ç¡¬ç›˜ï¼‰ç„¶åå¼•å¯¼<br><strong>æœ‰äº›UEFIç³»ç»Ÿåªä¼šè¯†åˆ« efiåˆ†åŒºä¸‹çš„EFI/bootæ–‡ä»¶å¤¹å†…çš„efiæ–‡ä»¶,æœ‰çš„ç”šè‡³åªä¼šè¯†åˆ«EFI/boot/bootx64.efi</strong></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;åˆ›å»ºefiåˆ†åŒº:&lt;/p&gt;
&lt;p&gt;åˆ›å»ºefiåˆ†åŒºè¦è®¾ç½®boot flag,è€Œä¸æ˜¯çº¯FAT32æ–‡ä»¶ç³»ç»Ÿ&lt;br&gt;
ä½¿ç”¨gdisk&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code</summary>
        
      
    
    
    
    <category term="Computer" scheme="https://asutorufa.github.io/categories/Computer/"/>
    
    
    <category term="efi" scheme="https://asutorufa.github.io/tags/efi/"/>
    
    <category term="uefi" scheme="https://asutorufa.github.io/tags/uefi/"/>
    
  </entry>
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ ä¹‹æ„ŸçŸ¥å™¨çš„å®ç°</title>
    <link href="https://asutorufa.github.io/posts/64e69c3e/"/>
    <id>https://asutorufa.github.io/posts/64e69c3e/</id>
    <published>2019-03-08T22:18:41.000Z</published>
    <updated>2019-03-08T22:18:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ„ŸçŸ¥å™¨çš„ä¸€ä¸ªå…¬å¼:<br><strong>å½“ wx+b&gt;0 , f(x)=1,å¦åˆ™f(x)=0</strong></p><ul><li>xè¾“å…¥çš„å‘é‡</li><li>w:æ˜¯æƒé‡</li><li>w*xæ˜¯ç‚¹ç§¯</li><li>bæ˜¯åç½®(ä¸æƒé‡ç±»ä¼¼,åç½®å¯ä»¥è®¤ä¸ºæ˜¯æ¿€åŠ±å‡½æ•°çš„åç§»é‡ï¼Œæˆ–è€…ç»™ç¥ç»å…ƒä¸€ä¸ªåŸºç¡€æ´»è·ƒç­‰çº§ã€‚)</li></ul><p>å¯¹æƒé‡çš„è°ƒæ•´å…¬å¼,æ­¤å¤„ä½¿ç”¨äº†æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•: <strong>w=w+i*(t-count)*x</strong></p><ul><li>iæ˜¯ä¸€ä¸ªå¸¸æ•°,iè¶Šå°æ„ŸçŸ¥å™¨å­¦ä¹ è¶Šç²¾ç¡®,å½“ç„¶è€—è´¹æ—¶é—´ä¹Ÿæœ€é•¿</li><li>t:æœ¬åº”è¯¥å¾—åˆ°çš„å€¼</li><li>count:å®é™…è®¡ç®—å¾—åˆ°çš„å€¼</li><li>x:åŒä¸Š</li></ul><p>å¯¹åç½®è°ƒæ•´çš„å…¬å¼: <em><em>b=b+i</em>(t-count)</em>*</p><p>è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨pythonæ¥å®ç°ä¸å’Œæˆ–<span id="more"></span></p><pre class="line-numbers language-none"><code class="language-none">#å› ä¸ºä¸å’Œæˆ–è®¡ç®—éœ€è¦è¾“å…¥ä¸¤ä¸ªæ•°,æ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸¤ä¸ªæƒé‡global w1,w2w1&#x3D;0.4w2&#x3D;0.6#åç½®éšä¾¿è®¾ä¸€ä¸ªglobal bb&#x3D;0.8#ä¸Šé¢æåˆ°çš„å¸¸æ•°global ii&#x3D;0.01<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹æ„ŸçŸ¥å™¨å…¬å¼å®ç°çš„å‡½æ•°:</p><pre class="line-numbers language-none"><code class="language-none">def count(x,y):    if w1*x+w2*y+b&gt;0:        return 1    else:        return 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹æƒé‡å’Œåç½®ä¸æ–­çŸ«æ­£çš„å‡½æ•°:</p><pre class="line-numbers language-none"><code class="language-none">def update_all(r,x,y):    global w1,w2,b    temp &#x3D; count(x,y)    w1&#x3D;w1+i*(r-temp)*x    w2&#x3D;w2+i*(r-temp)*y    b&#x3D;b+i*(r-temp)    print(w1,w2,b)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå°±æ˜¯è¾“å…¥å­¦ä¹ çš„èµ„æ–™å’Œç¡®è®¤è®¡ç®—ç»“æœ:</p><pre class="line-numbers language-none"><code class="language-none">def main():    for _ in range(1,50):        update_all(1.0,1.0,1.0)        update_all(0.0,1.0,0.0)        update_all(0.0,0.0,1.0)        update_all(0.0,0.0,0.0)        print(&#39;1 and 1 &#x3D;&#39;,count(1,1))    print(&#39;0 and 1 &#x3D;&#39;,count(0,1))    print(&#39;1 and 0 &#x3D;&#39;,count(1,0))    print(&#39;0 and 0 &#x3D;&#39;,count(0,0))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬å…ˆè¿›è¡Œä¸çš„è®¡ç®—:<br>è¿™é‡Œæˆ‘å‰é¢ä»£ç å†™é”™äº†,æ‰€ä»¥è¯´ä¸‹é¢æ‰€æœ‰çš„ç»“æœä¼šä¸ä¸€æ ·â€¦<br>è¿›è¡Œ25æ¬¡å­¦ä¹ çš„ç»“æœ:</p><pre class="line-numbers language-none"><code class="language-none">(0.4, 0.6, 0.8)(0.39, 0.6, 0.79)(0.39, 0.59, 0.78)(0.39, 0.59, 0.77)(0.39, 0.59, 0.77).......çœç•¥........(0.1599999999999998, 0.35999999999999976, 0.08999999999999947)(0.1599999999999998, 0.35999999999999976, 0.07999999999999947)(&#39;1 and 1 &#x3D;&#39;, 1)(&#39;0 and 1 &#x3D;&#39;, 1)(&#39;1 and 0 &#x3D;&#39;, 1)(&#39;0 and 0 &#x3D;&#39;, 1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬æ˜æ˜¾å‘ç°ç»“æœæ˜¯é”™è¯¯çš„,æå‡åˆ°50æ¬¡:</p><pre class="line-numbers language-none"><code class="language-none">(0.4, 0.6, 0.8)(0.39, 0.6, 0.79)(0.39, 0.59, 0.78)(0.39, 0.59, 0.77)(0.39, 0.59, 0.77)(0.38, 0.59, 0.76)(0.38, 0.58, 0.75).......çœç•¥........(0.07999999999999981, 0.1799999999999996, -0.18000000000000055)(0.07999999999999981, 0.1799999999999996, -0.18000000000000055)(0.07999999999999981, 0.1799999999999996, -0.18000000000000055)(&#39;1 and 1 &#x3D;&#39;, 1)(&#39;0 and 1 &#x3D;&#39;, 0)(&#39;1 and 0 &#x3D;&#39;, 0)(&#39;0 and 0 &#x3D;&#39;, 0)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»“æœæ­£ç¡®äº†,å¹¶ä¸”æƒé‡å’Œåç½®éƒ½ç¨³å®šåˆ°ä¸€ä¸ªå€¼,æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆç¥å¥‡<br>æˆ–è¿ç®—ä¹Ÿæ˜¯ç›¸åŒçš„,è¿™é‡Œæˆ‘ä»¬å°†åç½®æ”¹ä¸ºb=0.4:<br>25æ¬¡:</p><pre class="line-numbers language-none"><code class="language-none">(0.4, 0.6, 0.4)(0.4, 0.6, 0.4)(0.4, 0.6, 0.4)(0.4, 0.6, 0.39)(0.4, 0.6, 0.39)(0.4, 0.6, 0.39)(0.4, 0.6, 0.39)(0.4, 0.6, 0.38)(0.4, 0.6, 0.38)(0.4, 0.6, 0.38).......çœç•¥........(0.4, 0.6, 0.16999999999999982)(0.4, 0.6, 0.16999999999999982)(0.4, 0.6, 0.16999999999999982)(0.4, 0.6, 0.16999999999999982)(0.4, 0.6, 0.1599999999999998)(&#39;1 and 1 &#x3D;&#39;, 1)(&#39;0 and 1 &#x3D;&#39;, 1)(&#39;1 and 0 &#x3D;&#39;, 1)(&#39;0 and 0 &#x3D;&#39;, 1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>50æ¬¡:</p><pre class="line-numbers language-none"><code class="language-none">(0.4, 0.6, 0.4)(0.4, 0.6, 0.4)(0.4, 0.6, 0.4)(0.4, 0.6, 0.39)(0.4, 0.6, 0.39)(0.4, 0.6, 0.39)(0.4, 0.6, 0.39)(0.4, 0.6, 0.38).......çœç•¥........(0.4, 0.6, -1.97758476261356e-16)(0.4, 0.6, -1.97758476261356e-16)(0.4, 0.6, -1.97758476261356e-16)(0.4, 0.6, -1.97758476261356e-16)(0.4, 0.6, -1.97758476261356e-16)(&#39;1 and 1 &#x3D;&#39;, 1)(&#39;0 and 1 &#x3D;&#39;, 1)(&#39;1 and 0 &#x3D;&#39;, 1)(&#39;0 and 0 &#x3D;&#39;, 0)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‚è€ƒ:<br><a href="https://zh.wikipedia.org/wiki/%E6%84%9F%E7%9F%A5%E5%99%A8">æ„ŸçŸ¥å™¨(ç»´åŸºç™¾ç§‘)</a><br><a href="https://www.zybuluo.com/hanbingtao/note/433855">é›¶åŸºç¡€å…¥é—¨æ·±åº¦å­¦ä¹ (1) - æ„ŸçŸ¥å™¨</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ„ŸçŸ¥å™¨çš„ä¸€ä¸ªå…¬å¼:&lt;br&gt;
&lt;strong&gt;å½“ wx+b&amp;gt;0 , f(x)=1,å¦åˆ™f(x)=0&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;xè¾“å…¥çš„å‘é‡&lt;/li&gt;
&lt;li&gt;w:æ˜¯æƒé‡&lt;/li&gt;
&lt;li&gt;w*xæ˜¯ç‚¹ç§¯&lt;/li&gt;
&lt;li&gt;bæ˜¯åç½®(ä¸æƒé‡ç±»ä¼¼,åç½®å¯ä»¥è®¤ä¸ºæ˜¯æ¿€åŠ±å‡½æ•°çš„åç§»é‡ï¼Œæˆ–è€…ç»™ç¥ç»å…ƒä¸€ä¸ªåŸºç¡€æ´»è·ƒç­‰çº§ã€‚)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹æƒé‡çš„è°ƒæ•´å…¬å¼,æ­¤å¤„ä½¿ç”¨äº†æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•: &lt;strong&gt;w=w+i*(t-count)*x&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;iæ˜¯ä¸€ä¸ªå¸¸æ•°,iè¶Šå°æ„ŸçŸ¥å™¨å­¦ä¹ è¶Šç²¾ç¡®,å½“ç„¶è€—è´¹æ—¶é—´ä¹Ÿæœ€é•¿&lt;/li&gt;
&lt;li&gt;t:æœ¬åº”è¯¥å¾—åˆ°çš„å€¼&lt;/li&gt;
&lt;li&gt;count:å®é™…è®¡ç®—å¾—åˆ°çš„å€¼&lt;/li&gt;
&lt;li&gt;x:åŒä¸Š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹åç½®è°ƒæ•´çš„å…¬å¼: &lt;em&gt;&lt;em&gt;b=b+i&lt;/em&gt;(t-count)&lt;/em&gt;*&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨pythonæ¥å®ç°ä¸å’Œæˆ–</summary>
    
    
    
    <category term="Machine Learning" scheme="https://asutorufa.github.io/categories/Machine-Learning/"/>
    
    
    <category term="python" scheme="https://asutorufa.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>golang socks5/http proxy</title>
    <link href="https://asutorufa.github.io/posts/c7816edc/"/>
    <id>https://asutorufa.github.io/posts/c7816edc/</id>
    <published>2019-03-06T20:02:47.000Z</published>
    <updated>2020-05-30T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>å®Œæ•´å®ç°ä»£ç :<br><a href="https://github.com/Asutorufa/yuhaiin/blob/master/net/proxy/socks5/client/socks5client.go">socks5 client</a><br><a href="https://github.com/Asutorufa/yuhaiin/blob/master/net/proxy/socks5/server/server.go">socks5 server</a><br><a href="https://github.com/Asutorufa/yuhaiin/blob/master/net/proxy/http/server/server.go">http server</a></p><p>æ­¤å¤„å·²socks5clientä¸ºä¾‹,å¤§è‡´æµç¨‹éƒ½ç›¸åŒ,åªæ˜¯åè®®ä¸åŒ:</p><p>socks5è¿è¡Œæµç¨‹å¦‚ä¸‹:</p><p>tcp:<br>- æœ¬æœºå’Œä»£ç†æœåŠ¡ç«¯åå•†å’Œå»ºç«‹è¿æ¥ï¼›<br>- æœ¬æœºå‘Šè¯‰ä»£ç†æœåŠ¡ç«¯ç›®æ ‡æœåŠ¡çš„åœ°å€ï¼›<br>- ä»£ç†æœåŠ¡ç«¯å»è¿æ¥ç›®æ ‡æœåŠ¡ï¼ŒæˆåŠŸåå‘Šè¯‰æœ¬æœºï¼›<br>- æœ¬æœºå¼€å§‹å‘é€åŸæœ¬åº”å‘é€åˆ°ç›®æ ‡æœåŠ¡çš„æ•°æ®ç»™ä»£ç†æœåŠ¡ç«¯ï¼Œç”±ä»£ç†æœåŠ¡ç«¯å®Œæˆæ•°æ®è½¬å‘ã€‚<br>udp:<br>- udpå› ä¸ºæ˜¯æ— è¿æ¥çš„,æ‰€ä»¥æ‰€ä»¥æ•°æ®ä¸€æ¬¡åªç”¨ä¸€ä¸ªudpåŒ…<br>- socks5æ˜¯é€šè¿‡tcpå…ˆç¡®è®¤socks5 serveræ”¯æŒudp,ç„¶åå†é€šè¿‡udpå‘é€è¯·æ±‚</p><h2 id="å…ˆè¿›è¡ŒTCPè¿æ¥">å…ˆè¿›è¡ŒTCPè¿æ¥</h2><p>golangå®ç°(<em>è¿™é‡Œçš„åœ°å€æˆ‘æ˜¯æœ¬åœ°socks5æœåŠ¡ç«¯</em>)</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">conn<span class="token punctuation">,</span>err <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">Dial</span><span class="token punctuation">(</span><span class="token string">"tcp"</span><span class="token punctuation">,</span><span class="token string">"127.0.0.1:1080"</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‘socks5æœåŠ¡ç«¯å‘é€éªŒè¯">å‘socks5æœåŠ¡ç«¯å‘é€éªŒè¯</h2><p>éªŒè¯å­—æ®µ:</p><table><thead><tr><th style="text-align:center">VER</th><th style="text-align:center">NMETHODS</th><th style="text-align:center">METHODS</th></tr></thead><tbody><tr><td style="text-align:center">1å­—èŠ‚</td><td style="text-align:center">1å­—èŠ‚</td><td style="text-align:center">1-255å­—èŠ‚</td></tr></tbody></table><ul><li>VERæ˜¯SOCKSç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯0x05ï¼› <span id="more"></span></li><li>NMETHODSæ˜¯METHODSéƒ¨åˆ†çš„é•¿åº¦ï¼›</li><li>METHODSæ˜¯å®¢æˆ·ç«¯æ”¯æŒçš„è®¤è¯æ–¹å¼åˆ—è¡¨ï¼Œæ¯ä¸ªæ–¹æ³•å 1å­—èŠ‚ã€‚å½“å‰çš„å®šä¹‰æ˜¯ï¼š<ul><li>0x00 ä¸éœ€è¦è®¤è¯</li><li>0x01 GSSAPI</li><li>0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯</li><li>0x03 - 0x7Fç”±IANAåˆ†é…ï¼ˆä¿ç•™ï¼‰</li><li>0x80 - 0xFEä¸ºç§äººæ–¹æ³•ä¿ç•™</li><li>0xFF æ— å¯æ¥å—çš„æ–¹æ³•</li></ul></li></ul><p>golangå®ç°ä»£ç :</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">sendData <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0x05</span><span class="token punctuation">,</span> <span class="token number">0x01</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> conn<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>sendData<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> err<span class="token punctuation">&#125;</span>getData <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>getData<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> err<span class="token punctuation">&#125;</span><span class="token keyword">if</span> getData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0x05</span> <span class="token operator">||</span> getData<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0xFF</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"socks5 first handshake failed!"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> getData<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0x02</span> <span class="token punctuation">&#123;</span>    sendData <span class="token operator">:=</span> <span class="token function">append</span><span class="token punctuation">(</span>        <span class="token function">append</span><span class="token punctuation">(</span>            <span class="token function">append</span><span class="token punctuation">(</span>                <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0x01</span><span class="token punctuation">,</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>socks5client<span class="token punctuation">.</span>Username<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>socks5client<span class="token punctuation">.</span>Username<span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token function">byte</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>socks5client<span class="token punctuation">.</span>Password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>socks5client<span class="token punctuation">.</span>Password<span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span>    <span class="token boolean">_</span><span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>sendData<span class="token punctuation">)</span>    getData <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>getData<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> err    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> getData<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0x01</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"username or password not correct,socks5 handshake failed!"</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‘socks5æœåŠ¡ç«¯å‘é€è¯·æ±‚">å‘socks5æœåŠ¡ç«¯å‘é€è¯·æ±‚</h2><p>è¯·æ±‚å­—æ®µ:</p><table><thead><tr><th style="text-align:center">VER</th><th style="text-align:center">CMD</th><th style="text-align:center">RSV</th><th style="text-align:center">ATYP</th><th style="text-align:center">DST.ADDR</th><th style="text-align:center">DST.PORT</th></tr></thead><tbody><tr><td style="text-align:center">1å­—èŠ‚</td><td style="text-align:center">1å­—èŠ‚</td><td style="text-align:center">0x00</td><td style="text-align:center">1å­—èŠ‚</td><td style="text-align:center">åŠ¨æ€</td><td style="text-align:center">2å­—èŠ‚</td></tr></tbody></table><ul><li>VERæ˜¯SOCKSç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯0x05ï¼›</li><li>CMDæ˜¯SOCKçš„å‘½ä»¤ç <ul><li>0x01è¡¨ç¤ºCONNECTè¯·æ±‚</li><li>0x02è¡¨ç¤ºBINDè¯·æ±‚</li><li>0x03è¡¨ç¤ºUDPè½¬å‘</li></ul></li><li>RSV 0x00ï¼Œä¿ç•™</li><li>ATYP DST.ADDRç±»å‹<ul><li>0x01 IPv4åœ°å€ï¼ŒDST.ADDRéƒ¨åˆ†4å­—èŠ‚é•¿åº¦</li><li>0x03 åŸŸåï¼ŒDST.ADDRéƒ¨åˆ†ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸ºåŸŸåé•¿åº¦ï¼ŒDST.ADDRå‰©ä½™çš„å†…å®¹ä¸ºåŸŸåï¼Œæ²¡æœ‰\0ç»“å°¾ã€‚</li><li>0x04 IPv6åœ°å€ï¼Œ16ä¸ªå­—èŠ‚é•¿åº¦ã€‚</li></ul></li><li>DST.ADDR ç›®çš„åœ°å€</li><li>DST.PORT ç½‘ç»œå­—èŠ‚åºè¡¨ç¤ºçš„ç›®çš„ç«¯å£</li></ul><p>golangå®ç°ä»£ç </p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// æ­¤å¤„ä¸ºå‘ www.google.com:443 å‘é€è¯·æ±‚</span>domain <span class="token operator">:=</span> <span class="token string">"www.google.com"</span>serverPort <span class="token operator">:=</span> <span class="token number">443</span>sendData <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>    <span class="token function">append</span><span class="token punctuation">(</span>        <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">&#123;</span><span class="token number">0x5</span><span class="token punctuation">,</span> <span class="token number">0x01</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x03</span><span class="token punctuation">,</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>domain<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>domain<span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">byte</span><span class="token punctuation">(</span>serverPort<span class="token operator">>></span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">byte</span><span class="token punctuation">(</span>serverPort<span class="token operator">&amp;</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span>err <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>sendData<span class="token punctuation">)</span><span class="token punctuation">;</span> err<span class="token operator">!=</span><span class="token boolean">nil</span><span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token punctuation">&#125;</span>getData <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>getData<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> err<span class="token punctuation">&#125;</span><span class="token keyword">if</span> getData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0x05</span> <span class="token operator">||</span> getData<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0x00</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"socks5 second handshake failed!"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿›è¡Œæ•°æ®è½¬å‘">è¿›è¡Œæ•°æ®è½¬å‘</h2><p>golangå®ç°ä»£ç (<em>ä¸å¤ªç†Ÿæ‚‰å„ç§è¯·æ±‚è¿™é‡Œéšä¾¿å¼„äº†ä¸€ä¸ª</em>)</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span>err <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"GET /generate_204/ HTTP/2.0\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err<span class="token operator">!=</span><span class="token boolean">nil</span><span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…³é—­TCPè¿æ¥">å…³é—­TCPè¿æ¥</h2><pre class="language-go" data-language="go"><code class="language-go">conn<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="UDP">UDP</h2><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"> +----+------+------+----------+----------+----------+ |RSV | FRAG | ATYP | DST.ADDR | DST.PORT |   DATA   | +----+------+------+----------+----------+----------+ | 2  |  1   |  1   | Variable |    2     | Variable | +----+------+------+----------+----------+----------+The fields in the UDP request header are:<span class="token code keyword">     o  RSV  Reserved X'0000'     o  FRAG    Current fragment number     o  ATYP    address type of following addresses:        o  IP V4 address: X'01'        o  DOMAINNAME: X'03'        o  IP V6 address: X'04'     o  DST.ADDR       desired destination address     o  DST.PORT       desired destination port     o  DATA     user data</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‚è€ƒæ¥æº">å‚è€ƒæ¥æº</h2><p><a href="https://en.wikipedia.org/wiki/SOCKS">SOCKS(ç»´åŸºç™¾ç§‘)</a><br><a href="https://my.oschina.net/997155658/blog/1563154">SOCKS5 åè®®ä»‹ç»</a><br><a href="https://tools.ietf.org/html/rfc1928">rfc1928</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å®Œæ•´å®ç°ä»£ç :&lt;br&gt;
&lt;a href=&quot;https://github.com/Asutorufa/yuhaiin/blob/master/net/proxy/socks5/client/socks5client.go&quot;&gt;socks5 client&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://github.com/Asutorufa/yuhaiin/blob/master/net/proxy/socks5/server/server.go&quot;&gt;socks5 server&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://github.com/Asutorufa/yuhaiin/blob/master/net/proxy/http/server/server.go&quot;&gt;http server&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ­¤å¤„å·²socks5clientä¸ºä¾‹,å¤§è‡´æµç¨‹éƒ½ç›¸åŒ,åªæ˜¯åè®®ä¸åŒ:&lt;/p&gt;
&lt;p&gt;socks5è¿è¡Œæµç¨‹å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;tcp:&lt;br&gt;
- æœ¬æœºå’Œä»£ç†æœåŠ¡ç«¯åå•†å’Œå»ºç«‹è¿æ¥ï¼›&lt;br&gt;
- æœ¬æœºå‘Šè¯‰ä»£ç†æœåŠ¡ç«¯ç›®æ ‡æœåŠ¡çš„åœ°å€ï¼›&lt;br&gt;
- ä»£ç†æœåŠ¡ç«¯å»è¿æ¥ç›®æ ‡æœåŠ¡ï¼ŒæˆåŠŸåå‘Šè¯‰æœ¬æœºï¼›&lt;br&gt;
- æœ¬æœºå¼€å§‹å‘é€åŸæœ¬åº”å‘é€åˆ°ç›®æ ‡æœåŠ¡çš„æ•°æ®ç»™ä»£ç†æœåŠ¡ç«¯ï¼Œç”±ä»£ç†æœåŠ¡ç«¯å®Œæˆæ•°æ®è½¬å‘ã€‚&lt;br&gt;
udp:&lt;br&gt;
- udpå› ä¸ºæ˜¯æ— è¿æ¥çš„,æ‰€ä»¥æ‰€ä»¥æ•°æ®ä¸€æ¬¡åªç”¨ä¸€ä¸ªudpåŒ…&lt;br&gt;
- socks5æ˜¯é€šè¿‡tcpå…ˆç¡®è®¤socks5 serveræ”¯æŒudp,ç„¶åå†é€šè¿‡udpå‘é€è¯·æ±‚&lt;/p&gt;
&lt;h2 id=&quot;å…ˆè¿›è¡ŒTCPè¿æ¥&quot;&gt;å…ˆè¿›è¡ŒTCPè¿æ¥&lt;/h2&gt;
&lt;p&gt;golangå®ç°(&lt;em&gt;è¿™é‡Œçš„åœ°å€æˆ‘æ˜¯æœ¬åœ°socks5æœåŠ¡ç«¯&lt;/em&gt;)&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-go&quot; data-language=&quot;go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;conn&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Dial&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;tcp&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;127.0.0.1:1080&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
    fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;å‘socks5æœåŠ¡ç«¯å‘é€éªŒè¯&quot;&gt;å‘socks5æœåŠ¡ç«¯å‘é€éªŒè¯&lt;/h2&gt;
&lt;p&gt;éªŒè¯å­—æ®µ:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;VER&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;NMETHODS&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;METHODS&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1å­—èŠ‚&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1å­—èŠ‚&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1-255å­—èŠ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;VERæ˜¯SOCKSç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯0x05ï¼›</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="golang" scheme="https://asutorufa.github.io/tags/golang/"/>
    
    <category term="socks5" scheme="https://asutorufa.github.io/tags/socks5/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“é€šè¿‡adbæ·»åŠ ç”µæ± ç”¨æˆ·ç™½åå•</title>
    <link href="https://asutorufa.github.io/posts/1e63e0e/"/>
    <id>https://asutorufa.github.io/posts/1e63e0e/</id>
    <published>2019-02-02T23:15:29.000Z</published>
    <updated>2019-02-02T23:15:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>å®‰å“6.0å¼•å…¥äº†dozeæ¥èŠ‚çœç”µé‡,ä½†æŸäº›å›½äº§ui(å¦‚é”¤å­)é˜‰å‰²äº†è¿™ä¸ªèœå•,å¯é€šè¿‡adbæ·»åŠ </p><p>æ·»åŠ åº”ç”¨åˆ°ç™½åå•ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys deviceidle whitelist +<span class="token operator">&lt;</span>package<span class="token operator">></span></code></pre><p>å¦‚:</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys deviceidle whitelist +com.google.android.gms</code></pre><p>åˆ é™¤ç™½åå•(æŠŠåŠ å·æ”¹æˆå‡å·):  <span id="more"></span></p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys deviceidle whitelist -<span class="token operator">&lt;</span>package<span class="token operator">></span></code></pre><p>æŸ¥çœ‹dozeçŠ¶æ€ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys deviceidle</code></pre><p>è·å–å®Œæ•´çš„å¸®åŠ©èœå•:</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys deviceidle <span class="token parameter variable">-h</span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Device idle controller <span class="token punctuation">(</span>deviceidle<span class="token punctuation">)</span> commands:  <span class="token builtin class-name">help</span>    Print this <span class="token builtin class-name">help</span> text.  step <span class="token punctuation">[</span>light<span class="token operator">|</span>deep<span class="token punctuation">]</span>    Immediately step to next state, without waiting <span class="token keyword">for</span> alarm.  force-idle <span class="token punctuation">[</span>light<span class="token operator">|</span>deep<span class="token punctuation">]</span>    Force directly into idle mode, regardless of other device state.  force-inactive    Force to be inactive, ready to freely step idle states.  unforce    Resume normal functioning after force-idle or force-inactive.  get <span class="token punctuation">[</span>light<span class="token operator">|</span>deep<span class="token operator">|</span>force<span class="token operator">|</span><span class="token function">screen</span><span class="token operator">|</span>charging<span class="token operator">|</span>network<span class="token punctuation">]</span>    Retrieve the current given state.  disable <span class="token punctuation">[</span>light<span class="token operator">|</span>deep<span class="token operator">|</span>all<span class="token punctuation">]</span>    Completely disable device idle mode.  <span class="token builtin class-name">enable</span> <span class="token punctuation">[</span>light<span class="token operator">|</span>deep<span class="token operator">|</span>all<span class="token punctuation">]</span>    Re-enable device idle mode after it had previously been disabled.  enabled <span class="token punctuation">[</span>light<span class="token operator">|</span>deep<span class="token operator">|</span>all<span class="token punctuation">]</span>    Print <span class="token number">1</span> <span class="token keyword">if</span> device idle mode is currently enabled, <span class="token keyword">else</span> <span class="token number">0</span>.  whitelist    Print currently whitelisted apps.  whitelist <span class="token punctuation">[</span>package <span class="token punctuation">..</span>.<span class="token punctuation">]</span>    Add <span class="token punctuation">(</span>prefix with +<span class="token punctuation">)</span> or remove <span class="token punctuation">(</span>prefix with -<span class="token punctuation">)</span> packages.  except-idle-whitelist <span class="token punctuation">[</span>package <span class="token punctuation">..</span>.<span class="token operator">|</span>reset<span class="token punctuation">]</span>    Prefix the package with <span class="token string">'+'</span> to <span class="token function">add</span> it to whitelist or <span class="token string">'='</span> to check <span class="token keyword">if</span> it is already whitelisted    <span class="token punctuation">[</span>reset<span class="token punctuation">]</span> will reset the whitelist to it<span class="token string">'s original state    Note that unlike &lt;whitelist> cmd, changes made using this won'</span>t be persisted across boots  tempwhitelist    Print packages that are temporarily whitelisted.  tempwhitelist <span class="token punctuation">[</span>-u <span class="token environment constant">USER</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-d DURATION<span class="token punctuation">]</span> <span class="token punctuation">[</span>package <span class="token punctuation">..</span><span class="token punctuation">]</span>    Temporarily place packages <span class="token keyword">in</span> whitelist <span class="token keyword">for</span> DURATION milliseconds.    If no DURATION is specified, <span class="token number">10</span> seconds is used<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;å®‰å“6.0å¼•å…¥äº†dozeæ¥èŠ‚çœç”µé‡,ä½†æŸäº›å›½äº§ui(å¦‚é”¤å­)é˜‰å‰²äº†è¿™ä¸ªèœå•,å¯é€šè¿‡adbæ·»åŠ &lt;/p&gt;
&lt;p&gt;æ·»åŠ åº”ç”¨åˆ°ç™½åå•ï¼š&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;adb shell dumpsys deviceidle whitelist +&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;package&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;adb shell dumpsys deviceidle whitelist +com.google.android.gms&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åˆ é™¤ç™½åå•(æŠŠåŠ å·æ”¹æˆå‡å·):</summary>
    
    
    
    <category term="android" scheme="https://asutorufa.github.io/categories/android/"/>
    
    
    <category term="android" scheme="https://asutorufa.github.io/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“ä½¿ç”¨dalvikvmè¿è¡Œjava(termuxè¿è¡Œjava)</title>
    <link href="https://asutorufa.github.io/posts/8b98169e/"/>
    <id>https://asutorufa.github.io/posts/8b98169e/</id>
    <published>2019-02-02T23:02:35.000Z</published>
    <updated>2019-02-02T23:02:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ç›´æƒ³è¦ä½¿ç”¨termuxæ¥åœ¨å®‰å“ä¸Šå†™java,ä½†termuxä¸Šåªæœ‰ecjå¯ä»¥ä½¿javaç¼–è¯‘ä¸ºç›®æ ‡æ–‡ä»¶class,å´ä¸èƒ½ä½¿å…¶ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶<br>å‘ç°é€šè¿‡å®‰å“è‡ªå¸¦çš„dalvikvmå¯ä»¥è¿è¡Œ,åªæ˜¯æ­¥éª¤ç¹çä¸€äº›</p><h2 id="å®‰è£…æ‰€éœ€å·¥å…·">å®‰è£…æ‰€éœ€å·¥å…·</h2><p>termuxä¸Šå®‰è£… ecj å’Œ dxå°±å¯ä»¥äº†</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt</span> <span class="token function">install</span> ecj dx</code></pre><h2 id="ç¼–è¯‘ä¸ºclassæ–‡ä»¶">ç¼–è¯‘ä¸ºclassæ–‡ä»¶</h2><pre class="language-bash" data-language="bash"><code class="language-bash">ecj XXX.java</code></pre><span id="more"></span><h2 id="ç¼–è¯‘æˆdexæ–‡ä»¶">ç¼–è¯‘æˆdexæ–‡ä»¶</h2><pre class="language-bash" data-language="bash"><code class="language-bash">dx <span class="token parameter variable">--dex</span> <span class="token parameter variable">--output</span><span class="token operator">=</span>XXX.dex XXX.class</code></pre><h2 id="ä½¿ç”¨dalvikvmè¿è¡Œ">ä½¿ç”¨dalvikvmè¿è¡Œ</h2><pre class="language-bash" data-language="bash"><code class="language-bash">dalvikvm <span class="token parameter variable">-cp</span> XXX.dex XXX</code></pre><p>å‚è€ƒ: <a href="https://bbs.pediy.com/thread-184592.htm">ä½¿ç”¨ dalvikvm æ‰§è¡Œä¸€ä¸ªè¿è¡Œäºå‘½ä»¤è¡Œçš„ Hello World</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸€ç›´æƒ³è¦ä½¿ç”¨termuxæ¥åœ¨å®‰å“ä¸Šå†™java,ä½†termuxä¸Šåªæœ‰ecjå¯ä»¥ä½¿javaç¼–è¯‘ä¸ºç›®æ ‡æ–‡ä»¶class,å´ä¸èƒ½ä½¿å…¶ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶&lt;br&gt;
å‘ç°é€šè¿‡å®‰å“è‡ªå¸¦çš„dalvikvmå¯ä»¥è¿è¡Œ,åªæ˜¯æ­¥éª¤ç¹çä¸€äº›&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£…æ‰€éœ€å·¥å…·&quot;&gt;å®‰è£…æ‰€éœ€å·¥å…·&lt;/h2&gt;
&lt;p&gt;termuxä¸Šå®‰è£… ecj å’Œ dxå°±å¯ä»¥äº†&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;apt&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; ecj dx&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;ç¼–è¯‘ä¸ºclassæ–‡ä»¶&quot;&gt;ç¼–è¯‘ä¸ºclassæ–‡ä»¶&lt;/h2&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;ecj XXX.java&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="android" scheme="https://asutorufa.github.io/categories/android/"/>
    
    
    <category term="android" scheme="https://asutorufa.github.io/tags/android/"/>
    
    <category term="java" scheme="https://asutorufa.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨CIDRè¡¨ç¤ºç½‘æ®µ</title>
    <link href="https://asutorufa.github.io/posts/e2b25bb8/"/>
    <id>https://asutorufa.github.io/posts/e2b25bb8/</id>
    <published>2019-02-02T22:34:07.000Z</published>
    <updated>2019-02-02T22:34:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬çŸ¥é“ä¸€èˆ¬CIDR(æ— ç±»åˆ«åŸŸé—´è·¯ç”±)ç½‘æ®µçš„è¡¨ç¤ºä¸º:<strong>192.168.0.0/24</strong>è¿™ç§å½¢å¼</p><h2 id="IPåœ°å€">IPåœ°å€</h2><p>é¦–å…ˆæˆ‘ä»¬å¾—çŸ¥é“ipåœ°å€æ˜¯å¦‚ä½•æ¥çš„<br>ipv4çš„åœ°å€æ˜¯ç”¨32ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºçš„<br>å¦‚: 255.255.255.0 -&gt; 11111111.11111111.11111111.00000000</p><h2 id="ç½‘ç»œå‰ç¼€">ç½‘ç»œå‰ç¼€</h2><p><strong>192.168.0.0/24</strong>ä¸­çš„24å°±æ˜¯ç½‘ç»œå‰ç¼€,ç½‘ç»œå‰ç¼€å¯è½¬åŒ–ä¸ºç½‘ç»œæ©ç ,24è¡¨ç¤ºç½‘ç»œæ©ç çš„å‰24ä½ä¸º1</p><h2 id="ç½‘ç»œæ©ç ">ç½‘ç»œæ©ç </h2><p>ã€Œç½‘ç»œæ©ç ã€åˆå«ã€Œå­ç½‘æ©ç ã€ã€ã€Œåœ°å€æ©ç ã€ã€ã€Œå­ç¶²è·¯é®ç½©ã€ï¼ˆsubnet maskï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥æŒ‡æ˜ä¸€ä¸ªIPåœ°å€çš„å“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºæ‰€åœ¨çš„ç½‘ç»œåœ°å€ä»¥åŠå“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºåœ°å€çš„ä½æ©ç ã€‚      --ç»´åŸºç™¾ç§‘<span id="more"></span></p><p>å°†ç½‘ç»œå‰ç¼€è½¬åŒ–ä¸ºç½‘ç»œæ©ç : 24 -&gt; 11111111.11111111.11111111.00000000 -&gt; 255.255.255.0<br><em>255.255.255.0</em>å°±æ˜¯ç½‘ç»œæ©ç </p><h2 id="CIDR">CIDR</h2><p><em><strong>ç½‘ç»œåœ°å€çš„è®¡ç®—æ–¹æ³•ä¸ºipåœ°å€ä¸ç½‘ç»œæ©ç è¿›è¡Œâ€™ä¸â€™è¿ç®—</strong></em><br>é€šè¿‡ä¸Šé¢çš„è®¡ç®—å¥½çš„ç½‘ç»œæ©ç å¯çŸ¥è¿™ä¸ªipåœ°å€çš„å‰24ä½æ˜¯ä¸å˜çš„  ,æ‰€ä»¥<strong>192.168.0.0/24</strong>è¡¨ç¤ºçš„ç½‘æ®µä¸º: <strong>192.168.0.0 - 192.168.0.255</strong></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æˆ‘ä»¬çŸ¥é“ä¸€èˆ¬CIDR(æ— ç±»åˆ«åŸŸé—´è·¯ç”±)ç½‘æ®µçš„è¡¨ç¤ºä¸º:&lt;strong&gt;192.168.0.0/24&lt;/strong&gt;è¿™ç§å½¢å¼&lt;/p&gt;
&lt;h2 id=&quot;IPåœ°å€&quot;&gt;IPåœ°å€&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬å¾—çŸ¥é“ipåœ°å€æ˜¯å¦‚ä½•æ¥çš„&lt;br&gt;
ipv4çš„åœ°å€æ˜¯ç”¨32ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºçš„&lt;br&gt;
å¦‚: 255.255.255.0 -&amp;gt; 11111111.11111111.11111111.00000000&lt;/p&gt;
&lt;h2 id=&quot;ç½‘ç»œå‰ç¼€&quot;&gt;ç½‘ç»œå‰ç¼€&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;192.168.0.0/24&lt;/strong&gt;ä¸­çš„24å°±æ˜¯ç½‘ç»œå‰ç¼€,ç½‘ç»œå‰ç¼€å¯è½¬åŒ–ä¸ºç½‘ç»œæ©ç ,24è¡¨ç¤ºç½‘ç»œæ©ç çš„å‰24ä½ä¸º1&lt;/p&gt;
&lt;h2 id=&quot;ç½‘ç»œæ©ç &quot;&gt;ç½‘ç»œæ©ç &lt;/h2&gt;
&lt;p&gt;ã€Œç½‘ç»œæ©ç ã€åˆå«ã€Œå­ç½‘æ©ç ã€ã€ã€Œåœ°å€æ©ç ã€ã€ã€Œå­ç¶²è·¯é®ç½©ã€ï¼ˆsubnet maskï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥æŒ‡æ˜ä¸€ä¸ªIPåœ°å€çš„å“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºæ‰€åœ¨çš„ç½‘ç»œåœ°å€ä»¥åŠå“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºåœ°å€çš„ä½æ©ç ã€‚      --ç»´åŸºç™¾ç§‘</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="CIDR" scheme="https://asutorufa.github.io/tags/CIDR/"/>
    
    <category term="IP" scheme="https://asutorufa.github.io/tags/IP/"/>
    
  </entry>
  
  <entry>
    <title>android dumpsys tool</title>
    <link href="https://asutorufa.github.io/posts/25303996/"/>
    <id>https://asutorufa.github.io/posts/25303996/</id>
    <published>2019-02-01T00:00:02.000Z</published>
    <updated>2019-02-01T00:00:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>æŸ¥çœ‹dumpsysæ‰€æœ‰çš„å­å‘½ä»¤:</p><pre class="language-bash" data-language="bash"><code class="language-bash">dumpsys <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"DUMP OF SERVICE"</span></code></pre><p>output:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">DUMP OF SERVICE SurfaceFlinger:DUMP OF SERVICE accessibility:DUMP OF SERVICE account:DUMP OF SERVICE activity:DUMP OF SERVICE alarm:DUMP OF SERVICE appwidget:DUMP OF SERVICE audio:DUMP OF SERVICE backup:DUMP OF SERVICE battery:DUMP OF SERVICE batteryinfo:DUMP OF SERVICE clipboard:DUMP OF SERVICE connectivity:DUMP OF SERVICE content:DUMP OF SERVICE cpuinfo:DUMP OF SERVICE device_policy:DUMP OF SERVICE devicestoragemonitor:DUMP OF SERVICE diskstats:DUMP OF SERVICE dropbox:DUMP OF SERVICE entropy:DUMP OF SERVICE hardware:DUMP OF SERVICE input_method:DUMP OF SERVICE iphonesubinfo:DUMP OF SERVICE isms:DUMP OF SERVICE location:DUMP OF SERVICE media.audio_flinger:DUMP OF SERVICE media.audio_policy:DUMP OF SERVICE media.player:DUMP OF SERVICE meminfo:DUMP OF SERVICE mount:DUMP OF SERVICE netstat:DUMP OF SERVICE network_management:DUMP OF SERVICE notification:DUMP OF SERVICE package:DUMP OF SERVICE permission:DUMP OF SERVICE phone:DUMP OF SERVICE power:DUMP OF SERVICE reboot:DUMP OF SERVICE screenshot:DUMP OF SERVICE search:DUMP OF SERVICE sensor:DUMP OF SERVICE simphonebook:DUMP OF SERVICE statusbar:DUMP OF SERVICE telephony.registry:DUMP OF SERVICE throttle:DUMP OF SERVICE usagestats:DUMP OF SERVICE vibrator:DUMP OF SERVICE wallpaper:DUMP OF SERVICE wifi:DUMP OF SERVICE window:<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><p>eg:<br>1.å¾—åˆ°ç”µæ± çš„æ‰€æœ‰ä¿¡æ¯</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys battery</code></pre><p>2.å¾—åˆ°wifiçš„æ‰€æœ‰ä¿¡æ¯</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys wifi</code></pre><p>3.å¾—åˆ°cpuçš„æ‰€æœ‰ä¿¡æ¯</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys cpuinfo</code></pre><p>4.å¾—åˆ°æ€»çš„å­˜å‚¨æƒ…å†µ</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys meminfo</code></pre><p>5.å¾—åˆ°æŸåº”ç”¨çš„å­˜å‚¨æƒ…å†µ</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys meminfo <span class="token string">'your apps package name'</span></code></pre><p>6.å¾—åˆ°æ‰€æœ‰çš„æœåŠ¡åˆ—è¡¨</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell <span class="token function">service</span> list</code></pre><p>7.å¾—åˆ°æ‰€æœ‰çš„è´¦æˆ·åˆ—è¡¨</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys account</code></pre><p>8.è·å¾—æŸå­å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯</p><pre class="language-bash" data-language="bash"><code class="language-bash">adb shell dumpsys account <span class="token parameter variable">-h</span></code></pre><p>å‚è€ƒ:<br><a href="https://stackoverflow.com/questions/11201659/whats-the-android-adb-shell-dumpsys-tool-and-what-are-its-benefits">Whatâ€™s the Android ADB shell â€œdumpsysâ€ tool and what are its benefits?</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æŸ¥çœ‹dumpsysæ‰€æœ‰çš„å­å‘½ä»¤:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;dumpsys &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;DUMP OF SERVICE&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;output:&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;DUMP OF SERVICE SurfaceFlinger:
DUMP OF SERVICE accessibility:
DUMP OF SERVICE account:
DUMP OF SERVICE activity:
DUMP OF SERVICE alarm:
DUMP OF SERVICE appwidget:
DUMP OF SERVICE audio:
DUMP OF SERVICE backup:
DUMP OF SERVICE battery:
DUMP OF SERVICE batteryinfo:
DUMP OF SERVICE clipboard:
DUMP OF SERVICE connectivity:
DUMP OF SERVICE content:
DUMP OF SERVICE cpuinfo:
DUMP OF SERVICE device_policy:
DUMP OF SERVICE devicestoragemonitor:
DUMP OF SERVICE diskstats:
DUMP OF SERVICE dropbox:
DUMP OF SERVICE entropy:
DUMP OF SERVICE hardware:
DUMP OF SERVICE input_method:
DUMP OF SERVICE iphonesubinfo:
DUMP OF SERVICE isms:
DUMP OF SERVICE location:
DUMP OF SERVICE media.audio_flinger:
DUMP OF SERVICE media.audio_policy:
DUMP OF SERVICE media.player:
DUMP OF SERVICE meminfo:
DUMP OF SERVICE mount:
DUMP OF SERVICE netstat:
DUMP OF SERVICE network_management:
DUMP OF SERVICE notification:
DUMP OF SERVICE package:
DUMP OF SERVICE permission:
DUMP OF SERVICE phone:
DUMP OF SERVICE power:
DUMP OF SERVICE reboot:
DUMP OF SERVICE screenshot:
DUMP OF SERVICE search:
DUMP OF SERVICE sensor:
DUMP OF SERVICE simphonebook:
DUMP OF SERVICE statusbar:
DUMP OF SERVICE telephony.registry:
DUMP OF SERVICE throttle:
DUMP OF SERVICE usagestats:
DUMP OF SERVICE vibrator:
DUMP OF SERVICE wallpaper:
DUMP OF SERVICE wifi:
DUMP OF SERVICE window:&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="android" scheme="https://asutorufa.github.io/categories/android/"/>
    
    
    <category term="android" scheme="https://asutorufa.github.io/tags/android/"/>
    
    <category term="adb" scheme="https://asutorufa.github.io/tags/adb/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“é€šè¿‡shellæ›´æ”¹è¯­è¨€</title>
    <link href="https://asutorufa.github.io/posts/f7f814df/"/>
    <id>https://asutorufa.github.io/posts/f7f814df/</id>
    <published>2019-01-23T19:15:44.000Z</published>
    <updated>2019-01-23T19:15:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äºAndroid Mæˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œä½¿ç”¨ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">setprop ro.product.locale xx-XXsetprop persist.sys.locale xx-XX<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>xxæ˜¯è¯­è¨€<br>XXæ˜¯å›½å®¶<br>æ”¹ä¸ºæ—¥è¯­ä¸º:xx=ja XX=JP</p><p>å…¶ä»–å®‰å“ç‰ˆæœ¬:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">setprop persist.sys.language xxsetprop persist.sys.country XXsetprop ctl.restart zygote<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>xxæ˜¯è¯­è¨€<br>XXæ˜¯å›½å®¶  <span id="more"></span><br>Zygoteè¿›ç¨‹è¿è¡Œæ—¶, ä¼šåˆå§‹åŒ–Dalvikè™šæ‹Ÿæœº, å¹¶è¿è¡Œå®ƒ. Androidçš„åº”ç”¨ç¨‹åºæ˜¯ç”±Javaç¼–å†™çš„, å®ƒä»¬ä¸èƒ½ç›´æ¥è¿è¡Œåœ¨Linuxä¸Š, åªèƒ½è¿è¡Œåœ¨Dalvikè™šæ‹Ÿæœºä¸­. å¹¶ä¸”, æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½è¿è¡Œåœ¨å„è‡ªçš„è™šæ‹Ÿæœºä¸­, åº”ç”¨ç¨‹åºæ¯æ¬¡è¿è¡Œéƒ½è¦é‡æ–°åˆå§‹åŒ–å¹¶å¯åŠ¨è™šæ‹Ÿæœº, è¿™ä¸ªè¿‡ç¨‹ä¼šæ¶ˆè€—ç›¸å½“é•¿æ—¶é—´, æ˜¯æ‹–æ…¢åº”ç”¨ç¨‹åºçš„åŸå› ä¹‹ä¸€. å› æ­¤, åœ¨Androidä¸­, åº”ç”¨ç¨‹åºè¿è¡Œå‰, é€šè¿‡Zygoteè¿›ç¨‹å…±äº«å·²è¿è¡Œçš„è™šæ‹Ÿæœºçš„ä»£ç ä¸å†…å­˜ä¿¡æ¯, ç¼©çŸ­åº”ç”¨ç¨‹åºè¿è¡Œæ‰€è€—è´¹çš„æ—¶é—´. ä¹Ÿå°±æ˜¯è¯´, Zygoteè¿›ç¨‹ä¼šäº‹å…ˆå°†åº”ç”¨ç¨‹åºè¦ä½¿ç”¨çš„Android Frameworkä¸­çš„ç±»ä¸èµ„æºåŠ è½½åˆ°å†…å­˜ä¸­, å¹¶ç»„ç»‡å½¢æˆæ‰€ç”¨èµ„æºçš„é“¾æ¥ä¿¡æ¯. è¿™æ ·, æ–°è¿è¡Œçš„Androidåº”ç”¨ç¨‹åºåœ¨ä½¿ç”¨æ‰€éœ€èµ„æºæ—¶ä¸å¿…æ¯æ¬¡å½¢æˆèµ„æºçš„é“¾æ¥ä¿¡æ¯, è¿™æ ·å°±å¤§å¤§æå‡äº†ç¨‹åºçš„è¿è¡Œæ—¶é—´.</p><p>å‚è€ƒ:<br>1.<a href="http://bbs.bugcode.cn/t/16729">é€šè¿‡ADBæ›´æ”¹è®¾å¤‡è¯­è¨€</a><br>2.<a href="https://www.jianshu.com/p/3dbe46439359">åˆè¯†Zygoteè¿›ç¨‹</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¯¹äºAndroid Mæˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;setprop ro.product.locale xx-XX
setprop persist.sys.locale xx-XX&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;xxæ˜¯è¯­è¨€&lt;br&gt;
XXæ˜¯å›½å®¶&lt;br&gt;
æ”¹ä¸ºæ—¥è¯­ä¸º:xx=ja XX=JP&lt;/p&gt;
&lt;p&gt;å…¶ä»–å®‰å“ç‰ˆæœ¬:&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;setprop persist.sys.language xx
setprop persist.sys.country XX
setprop ctl.restart zygote&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;xxæ˜¯è¯­è¨€&lt;br&gt;
XXæ˜¯å›½å®¶</summary>
    
    
    
    <category term="android" scheme="https://asutorufa.github.io/categories/android/"/>
    
    
    <category term="android" scheme="https://asutorufa.github.io/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³xfce4ç”»é¢æ’•è£‚</title>
    <link href="https://asutorufa.github.io/posts/38868ade/"/>
    <id>https://asutorufa.github.io/posts/38868ade/</id>
    <published>2018-12-09T00:04:38.000Z</published>
    <updated>2018-12-09T00:04:38.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…compton">å®‰è£…compton</h2><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> compton</code></pre><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>comptonçš„é…ç½®æ–‡ä»¶åœ¨~/.config/compton.conf<br>å› ä¸ºæœ‰äº›çª—å£çš„é˜´å½±æœ‰æ—¶å€™ä¼šå˜çš„å¾ˆå¥‡æ€ª,å¤§æ¦‚ä½ æœ‰å¯èƒ½éœ€è¦ä¿®æ”¹ä¸€ä¸‹,é™„ä¸Šæˆ‘çš„:<span id="more"></span></p><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token comment">#################################</span><span class="token comment">#</span><span class="token comment"># Backend</span><span class="token comment">#</span><span class="token comment">#################################</span><span class="token comment"># Backend to use: "xrender" or "glx".</span><span class="token comment"># GLX backend is typically much faster but depends on a sane driver.</span><span class="token key attr-name">backend</span> <span class="token punctuation">=</span> <span class="token value attr-value">"glx";</span><span class="token comment">#################################</span><span class="token comment">#</span><span class="token comment"># GLX backend</span><span class="token comment">#</span><span class="token comment">#################################</span><span class="token key attr-name">glx-no-stencil</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># GLX backend: Copy unmodified regions from front buffer instead of redrawing them all.</span><span class="token comment"># My tests with nvidia-drivers show a 10% decrease in performance when the whole screen is modified,</span><span class="token comment"># but a 20% increase when only 1/4 is.</span><span class="token comment"># My tests on nouveau show terrible slowdown.</span><span class="token comment"># Useful with --glx-swap-method, as well.</span><span class="token key attr-name">glx-copy-from-front</span> <span class="token punctuation">=</span> <span class="token value attr-value">false;</span><span class="token comment"># GLX backend: Use MESA_copy_sub_buffer to do partial screen update.</span><span class="token comment"># My tests on nouveau shows a 200% performance boost when only 1/4 of the screen is updated.</span><span class="token comment"># May break VSync and is not available on some drivers.</span><span class="token comment"># Overrides --glx-copy-from-front.</span><span class="token comment"># glx-use-copysubbuffermesa = true;</span><span class="token comment"># GLX backend: Avoid rebinding pixmap on window damage.</span><span class="token comment"># Probably could improve performance on rapid window content changes, but is known to break things on some drivers (LLVMpipe).</span><span class="token comment"># Recommended if it works.</span><span class="token comment"># glx-no-rebind-pixmap = true;</span><span class="token comment"># GLX backend: GLX buffer swap method we assume.</span><span class="token comment"># Could be undefined (0), copy (1), exchange (2), 3-6, or buffer-age (-1).</span><span class="token comment"># undefined is the slowest and the safest, and the default value.</span><span class="token comment"># copy is fastest, but may fail on some drivers,</span><span class="token comment"># 2-6 are gradually slower but safer (6 is still faster than 0).</span><span class="token comment"># Usually, double buffer means 2, triple buffer means 3.</span><span class="token comment"># buffer-age means auto-detect using GLX_EXT_buffer_age, supported by some drivers.</span><span class="token comment"># Useless with --glx-use-copysubbuffermesa.</span><span class="token comment"># Partially breaks --resize-damage.</span><span class="token comment"># Defaults to undefined.</span><span class="token key attr-name">glx-swap-method</span> <span class="token punctuation">=</span> <span class="token value attr-value">"undefined";</span><span class="token comment">#################################</span><span class="token comment">#</span><span class="token comment"># Shadows</span><span class="token comment">#</span><span class="token comment">#################################</span><span class="token comment"># Enabled client-side shadows on windows.</span><span class="token key attr-name">shadow</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># Don't draw shadows on DND windows.</span><span class="token key attr-name">no-dnd-shadow</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># Avoid drawing shadows on dock/panel windows.</span><span class="token key attr-name">no-dock-shadow</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># Zero the part of the shadow's mask behind the window. Fix some weirdness with ARGB windows.</span><span class="token comment">#clear-shadow = true;</span><span class="token comment"># The blur radius for shadows. (default 12)</span><span class="token key attr-name">shadow-radius</span> <span class="token punctuation">=</span> <span class="token value attr-value">5;</span><span class="token comment"># The left offset for shadows. (default -15)</span><span class="token key attr-name">shadow-offset-x</span> <span class="token punctuation">=</span> <span class="token value attr-value">-5;</span><span class="token comment"># The top offset for shadows. (default -15)</span><span class="token key attr-name">shadow-offset-y</span> <span class="token punctuation">=</span> <span class="token value attr-value">-5;</span><span class="token comment"># The translucency for shadows. (default .75)</span><span class="token key attr-name">shadow-opacity</span> <span class="token punctuation">=</span> <span class="token value attr-value">0.5;</span><span class="token comment"># Set if you want different colour shadows</span><span class="token comment"># shadow-red = 0.0;</span><span class="token comment"># shadow-green = 0.0;</span><span class="token comment"># shadow-blue = 0.0;</span><span class="token comment"># The shadow exclude options are helpful if you have shadows enabled. </span><span class="token comment">#Due to the way compton draws its shadows, certain applications will have visual glitches</span><span class="token comment"># (most applications are fine, only apps that do weird things with xshapes or argb are affected).</span><span class="token comment"># This list includes all the affected apps I found in my testing. </span><span class="token comment">#The "! name~=''" part excludes shadows on any "Unknown" windows, this prevents a visual glitch with the XFWM alt tab switcher.</span><span class="token comment">#æ­¤å¤„åŠ å…¥æ’é™¤é˜´å½±çš„ç¨‹åºåå­—</span><span class="token key attr-name">shadow-exclude</span> <span class="token punctuation">=</span> <span class="token value attr-value">[</span>    <span class="token key attr-name">"! name~</span><span class="token punctuation">=</span><span class="token value attr-value">''",</span>    <span class="token key attr-name">"name</span> <span class="token punctuation">=</span> <span class="token value attr-value">'Notification'",</span>    <span class="token key attr-name">"name</span> <span class="token punctuation">=</span> <span class="token value attr-value">'Plank'",</span>    <span class="token key attr-name">"name</span> <span class="token punctuation">=</span> <span class="token value attr-value">'Docky'",</span>    <span class="token key attr-name">"name</span> <span class="token punctuation">=</span> <span class="token value attr-value">'Kupfer'",</span>    <span class="token key attr-name">"name</span> <span class="token punctuation">=</span> <span class="token value attr-value">'xfce4-notifyd'",</span>    <span class="token key attr-name">"name *</span><span class="token punctuation">=</span> <span class="token value attr-value">'VLC'",</span>    <span class="token key attr-name">"name *</span><span class="token punctuation">=</span> <span class="token value attr-value">'compton'",</span>    <span class="token key attr-name">"name *</span><span class="token punctuation">=</span> <span class="token value attr-value">'gedit'",</span>    <span class="token key attr-name">"name *</span><span class="token punctuation">=</span> <span class="token value attr-value">'Archive Manager'",</span><span class="token comment">#    "name *= 'Chromium'",</span><span class="token comment">#    "name *= 'Chrome'",</span><span class="token comment">#    "name *= 'Firefox'",</span>    <span class="token key attr-name">"class_g</span> <span class="token punctuation">=</span> <span class="token value attr-value">'Conky'",</span>    <span class="token key attr-name">"class_g</span> <span class="token punctuation">=</span> <span class="token value attr-value">'Kupfer'",</span>    <span class="token key attr-name">"class_g</span> <span class="token punctuation">=</span> <span class="token value attr-value">'Synapse'",</span>    <span class="token key attr-name">"class_g ?</span><span class="token punctuation">=</span> <span class="token value attr-value">'Notify-osd'",</span>    <span class="token key attr-name">"class_g ?</span><span class="token punctuation">=</span> <span class="token value attr-value">'Cairo-dock'",</span>    <span class="token key attr-name">"class_g ?</span><span class="token punctuation">=</span> <span class="token value attr-value">'Xfce4-notifyd'",</span>    <span class="token key attr-name">"class_g ?</span><span class="token punctuation">=</span> <span class="token value attr-value">'Xfce4-power-manager'"</span>];<span class="token comment"># Avoid drawing shadow on all shaped windows (see also: --detect-rounded-corners)</span><span class="token key attr-name">shadow-ignore-shaped</span> <span class="token punctuation">=</span> <span class="token value attr-value">false;</span><span class="token comment">#################################</span><span class="token comment">#</span><span class="token comment"># Opacity</span><span class="token comment">#</span><span class="token comment">#################################</span><span class="token comment">#################################</span><span class="token comment">#</span><span class="token comment"># Fading</span><span class="token comment">#</span><span class="token comment">#################################</span><span class="token comment"># Fade windows during opacity changes.</span><span class="token key attr-name">fading</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># The time between steps in a fade in milliseconds. (default 10).</span><span class="token key attr-name">fade-delta</span> <span class="token punctuation">=</span> <span class="token value attr-value">4;</span><span class="token comment"># Opacity change between steps while fading in. (default 0.028).</span><span class="token comment">#fade-in-step = 0.03;</span><span class="token comment"># Opacity change between steps while fading out. (default 0.03).</span><span class="token comment">#fade-out-step = 0.03;</span><span class="token comment"># Fade windows in/out when opening/closing</span><span class="token comment">#no-fading-openclose = true;</span><span class="token comment"># Specify a list of conditions of windows that should not be faded.</span><span class="token comment">#fade-exclude = [ ];</span><span class="token key attr-name">fade-exclude</span> <span class="token punctuation">=</span> <span class="token value attr-value">[ ];</span><span class="token comment">#################################</span><span class="token comment">#</span><span class="token comment"># Other</span><span class="token comment">#</span><span class="token comment">#################################</span><span class="token comment"># Try to detect WM windows and mark them as active.</span><span class="token key attr-name">mark-wmwin-focused</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># Mark all non-WM but override-redirect windows active (e.g. menus).</span><span class="token key attr-name">mark-ovredir-focused</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># Use EWMH _NET_WM_ACTIVE_WINDOW to determine which window is focused instead of using FocusIn/Out events.</span><span class="token comment"># Usually more reliable but depends on a EWMH-compliant WM.</span><span class="token key attr-name">use-ewmh-active-win</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># Detect rounded corners and treat them as rectangular when --shadow-ignore-shaped is on.</span><span class="token key attr-name">detect-rounded-corners</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># Detect _NET_WM_OPACITY on client windows, useful for window managers not passing _NET_WM_OPACITY of client windows to frame windows.</span><span class="token comment"># This prevents opacity being ignored for some apps.</span><span class="token comment"># For example without this enabled my xfce4-notifyd is 100% opacity no matter what.</span><span class="token comment">#detect-client-opacity = true;</span><span class="token comment"># Specify refresh rate of the screen.</span><span class="token comment"># If not specified or 0, compton will try detecting this with X RandR extension.</span><span class="token key attr-name">refresh-rate</span> <span class="token punctuation">=</span> <span class="token value attr-value">0;</span><span class="token comment"># Set VSync method. VSync methods currently available:</span><span class="token comment"># none: No VSync</span><span class="token comment"># drm: VSync with DRM_IOCTL_WAIT_VBLANK. May only work on some drivers.</span><span class="token comment"># opengl: Try to VSync with SGI_video_sync OpenGL extension. Only work on some drivers.</span><span class="token comment"># opengl-oml: Try to VSync with OML_sync_control OpenGL extension. Only work on some drivers.</span><span class="token comment"># opengl-swc: Try to VSync with SGI_swap_control OpenGL extension. Only work on some drivers. </span><span class="token comment">#Works only with GLX backend. Known to be most effective on many drivers. </span><span class="token comment">#Does not actually control paint timing, only buffer swap is affected, </span><span class="token comment">#so it doesnâ€™t have the effect of --sw-opti unlike other methods. Experimental.</span><span class="token comment"># opengl-mswc: Try to VSync with MESA_swap_control OpenGL extension. Basically the same as opengl-swc above, except the extension we use.</span><span class="token comment"># (Note some VSync methods may not be enabled at compile time.)</span><span class="token key attr-name">vsync</span> <span class="token punctuation">=</span> <span class="token value attr-value">"opengl-swc";</span><span class="token comment"># Enable DBE painting mode, intended to use with VSync to (hopefully) eliminate tearing.</span><span class="token comment"># Reported to have no effect, though.</span><span class="token key attr-name">dbe</span> <span class="token punctuation">=</span> <span class="token value attr-value">false;</span><span class="token comment"># Painting on X Composite overlay window. Recommended.</span><span class="token key attr-name">paint-on-overlay</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># Limit compton to repaint at most once every 1 / refresh_rate second to boost performance.</span><span class="token comment"># This should not be used with --vsync drm/opengl/opengl-oml as they essentially does --sw-opti's job already,</span><span class="token comment"># unless you wish to specify a lower refresh rate than the actual value.</span><span class="token key attr-name">sw-opti</span> <span class="token punctuation">=</span> <span class="token value attr-value">false;</span><span class="token comment"># Unredirect all windows if a full-screen opaque window is detected, to maximize performance for full-screen windows, like games.</span><span class="token comment"># Known to cause flickering when redirecting/unredirecting windows.</span><span class="token comment"># paint-on-overlay may make the flickering less obvious.</span><span class="token key attr-name">unredir-if-possible</span> <span class="token punctuation">=</span> <span class="token value attr-value">false;</span><span class="token comment"># Specify a list of conditions of windows that should always be considered focused.</span><span class="token key attr-name">focus-exclude</span> <span class="token punctuation">=</span> <span class="token value attr-value">[ ];</span><span class="token comment"># Use WM_TRANSIENT_FOR to group windows, and consider windows in the same group focused at the same time.</span><span class="token key attr-name">detect-transient</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment"># Use WM_CLIENT_LEADER to group windows, and consider windows in the same group focused at the same time.</span><span class="token comment"># WM_TRANSIENT_FOR has higher priority if --detect-transient is enabled, too.</span><span class="token key attr-name">detect-client-leader</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span><span class="token comment">#################################</span><span class="token comment">#</span><span class="token comment"># Window type settings</span><span class="token comment">#</span><span class="token comment">#################################</span>wintypes:&#123;    <span class="token key attr-name">tooltip</span> <span class="token punctuation">=</span>    &#123;        <span class="token comment"># fade: Fade the particular type of windows.</span>        <span class="token key attr-name">fade</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span>        <span class="token comment"># shadow: Give those windows shadow</span>        <span class="token key attr-name">shadow</span> <span class="token punctuation">=</span> <span class="token value attr-value">false;</span>        <span class="token comment"># opacity: Default opacity for the type of windows.</span>        <span class="token key attr-name">opacity</span> <span class="token punctuation">=</span> <span class="token value attr-value">0.85;</span>        <span class="token comment"># focus: Whether to always consider windows of this type focused.</span>        <span class="token key attr-name">focus</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span>    &#125;;&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…³é—­xfce4è‡ªå¸¦çš„åˆæˆå™¨">å…³é—­xfce4è‡ªå¸¦çš„åˆæˆå™¨</h2><p><strong>è®¾ç½®ç®¡ç†å™¨-&gt;çª—å£ç®¡ç†å™¨å¾®è°ƒ-&gt;åˆæˆå™¨</strong></p><p><img src="http://blog-1254450445.cossgp.myqcloud.com/compton.png" alt="" loading="lazy"></p><h2 id="å¯åŠ¨compton">å¯åŠ¨compton</h2><h3 id="å‰å°è¿è¡Œ">å‰å°è¿è¡Œ</h3><pre class="language-bash" data-language="bash"><code class="language-bash">compton</code></pre><h3 id="åå°è¿è¡Œ">åå°è¿è¡Œ</h3><pre class="language-bash" data-language="bash"><code class="language-bash">compton <span class="token parameter variable">-b</span></code></pre><h3 id="å¼€æœºè‡ªå¯åŠ¨">å¼€æœºè‡ªå¯åŠ¨</h3><p>ä¿®æ”¹~/.xprofileæ–‡ä»¶<br>å°†<code>compton -b</code>ç›´æ¥åŠ åˆ°æ–°çš„ä¸€è¡Œå°±è¡Œäº†</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å®‰è£…compton&quot;&gt;å®‰è£…compton&lt;/h2&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; compton&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;ä¿®æ”¹é…ç½®æ–‡ä»¶&quot;&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;comptonçš„é…ç½®æ–‡ä»¶åœ¨~/.config/compton.conf&lt;br&gt;
å› ä¸ºæœ‰äº›çª—å£çš„é˜´å½±æœ‰æ—¶å€™ä¼šå˜çš„å¾ˆå¥‡æ€ª,å¤§æ¦‚ä½ æœ‰å¯èƒ½éœ€è¦ä¿®æ”¹ä¸€ä¸‹,é™„ä¸Šæˆ‘çš„:</summary>
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://asutorufa.github.io/tags/linux/"/>
    
    <category term="xfce4" scheme="https://asutorufa.github.io/tags/xfce4/"/>
    
  </entry>
  
  <entry>
    <title>linuxä¸‹intel&amp;AMDåŒæ˜¾å¡åˆ‡æ¢</title>
    <link href="https://asutorufa.github.io/posts/3b8b96de/"/>
    <id>https://asutorufa.github.io/posts/3b8b96de/</id>
    <published>2018-09-08T19:02:47.000Z</published>
    <updated>2020-05-05T19:02:47.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨<strong>xrandr</strong>æ˜¾ç¤ºå¯æ”¯æŒçš„æ˜¾å¡</p><pre class="language-bash" data-language="bash"><code class="language-bash">xrandr <span class="token parameter variable">--listproviders</span></code></pre><p>è¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Providers: number <span class="token builtin class-name">:</span> <span class="token number">2</span>Provider <span class="token number">0</span>: id: 0x6b cap: 0x9, Source Output, Sink Offload crtcs: <span class="token number">3</span> outputs: <span class="token number">7</span> associated providers: <span class="token number">1</span> name:modesettingProvider <span class="token number">1</span>: id: 0x41 cap: 0x6, Sink Output, Source Offload crtcs: <span class="token number">2</span> outputs: <span class="token number">0</span> associated providers: <span class="token number">1</span> name:OLAND @ pci:0000:01:00.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>To be able to render GPU-intensive applications by the more powerful discrete card use</p><pre class="language-bash" data-language="bash"><code class="language-bash">xrandr <span class="token parameter variable">--setprovideroffloadsink</span> <span class="token number">1</span> <span class="token number">0</span></code></pre><p>æˆ–è€…<span id="more"></span></p><pre class="language-bash" data-language="bash"><code class="language-bash">xrandr <span class="token parameter variable">--setprovideroffloadsink</span> 0x41 0x6b</code></pre><p>ä½¿ç”¨DRI_PRIMEä¸ºæŸä¸ªåº”ç”¨é€‰æ‹©ä½¿ç”¨å“ªä¸€å¼ æ˜¾å¡,ä½¿ç”¨glxinfoå¯ä»¥æŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„æ˜¾å¡</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">DRI_PRIME</span><span class="token operator">=</span><span class="token number">0</span> glxinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"OpenGL renderer"</span><span class="token assign-left variable">DRI_PRIME</span><span class="token operator">=</span><span class="token number">1</span> glxinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"OpenGL renderer"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚ä¸ºsteamå¯ç”¨ç‹¬æ˜¾</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">DRI_PRIME</span><span class="token operator">=</span><span class="token number">1</span> steam</code></pre><p>å¦‚æœéœ€è¦ä½¿ç”¨ç‹¬æ˜¾è¿›è¡Œè§†é¢‘ç¡¬ä»¶æ’­æ”¾,è¿˜éœ€æŒ‡å®šè§†é¢‘è§£ç åº“,ä¸ç„¶ä¼šä¹±ç :<br>å¦‚AMD:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">DRI_PRIME</span><span class="token operator">=</span><span class="token number">1</span>            <span class="token comment"># for laptops with switchable graphics</span><span class="token assign-left variable">LIBVA_DRIVER_NAME</span><span class="token operator">=</span>r600 <span class="token comment"># value depends on the driver, check /usr/lib/dri for possible options</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä½¿ç”¨mpv:</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">DRI_PRIME</span><span class="token operator">=</span><span class="token number">1</span>  <span class="token assign-left variable">LIBVA_DRIVER_NAME</span><span class="token operator">=</span>r600 mpv <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre><p>å‚è€ƒèµ„æ–™:<br>1.<a href="https://askubuntu.com/questions/1038271/intel-amd-hybrid-graphics-ubuntu-18-04">Intel/AMD Hybrid graphics Ubuntu 18.04</a><br>2.<a href="https://wiki.archlinux.org/index.php/PRIME">PRIME (ç®€ä½“ä¸­æ–‡)</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä½¿ç”¨&lt;strong&gt;xrandr&lt;/strong&gt;æ˜¾ç¤ºå¯æ”¯æŒçš„æ˜¾å¡&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;xrandr &lt;span class=&quot;token parameter variable&quot;&gt;--listproviders&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;Providers: number &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;
Provider &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;: id: 0x6b cap: 0x9, Source Output, Sink Offload crtcs: &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; outputs: &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt; associated providers: &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; name:modesetting
Provider &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;: id: 0x41 cap: 0x6, Sink Output, Source Offload crtcs: &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; outputs: &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; associated providers: &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; name:OLAND @ pci:0000:01:00.0&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To be able to render GPU-intensive applications by the more powerful discrete card use&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;xrandr &lt;span class=&quot;token parameter variable&quot;&gt;--setprovideroffloadsink&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ–è€…</summary>
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://asutorufa.github.io/tags/linux/"/>
    
    <category term="åŒæ˜¾å¡" scheme="https://asutorufa.github.io/tags/%E5%8F%8C%E6%98%BE%E5%8D%A1/"/>
    
    <category term="amd" scheme="https://asutorufa.github.io/tags/amd/"/>
    
  </entry>
  
  <entry>
    <title>pythonä½¿ç”¨lxmlåˆ†æç½‘é¡µ</title>
    <link href="https://asutorufa.github.io/posts/77d15527/"/>
    <id>https://asutorufa.github.io/posts/77d15527/</id>
    <published>2018-08-07T14:47:51.000Z</published>
    <updated>2018-08-07T14:47:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆå¾—å¼•å…¥lxml</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#xpathä¸º</span>frome lxml <span class="token keyword">import</span> etree<span class="token comment">#cssselectorä¸º</span><span class="token keyword">import</span> lxml<span class="token punctuation">.</span>html<span class="token comment">#cssselectorä½¿ç”¨èµ·æ¥ç®€å•ä½†åŠŸèƒ½æ¯”xpathå°‘</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>cssselector</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">tree <span class="token operator">=</span> lxml<span class="token punctuation">.</span>html<span class="token punctuation">.</span>fromstring<span class="token punctuation">(</span><span class="token string">'ä½ è·å–çš„ç½‘é¡µæºä»£ç æ–‡ä»¶æˆ–å˜é‡'</span><span class="token punctuation">)</span>css <span class="token operator">=</span> tree<span class="token punctuation">.</span>cssselect<span class="token punctuation">(</span><span class="token string">'è¦é€‰æ‹©çš„å†…å®¹'</span><span class="token punctuation">)</span><span class="token comment">#ä¾‹å¦‚tree.cssselect('div.word-info > div.pronounces > span.word-audio')</span><span class="token comment">#é€‰æ‹©å™¨é€‰æ‹©çš„ç»“æœä¸ºlist</span>css<span class="token punctuation">.</span>text_content<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#è¡¨ç¤ºé€‰æ‹©çš„å†…å®¹</span>css<span class="token punctuation">.</span>attrib<span class="token punctuation">[</span><span class="token string">'è¦è¡¨ç¤ºçš„æ ‡ç­¾å±æ€§'</span><span class="token punctuation">]</span><span class="token comment">#å¦‚css.attrb['class']è¡¨ç¤ºçš„å°±æ˜¯æ‰€é€‰æ‹©å†…å®¹çš„classå±æ€§</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><p><strong>å¦‚æœé€‰æ‹©çš„å†…å®¹æ¢è¡Œç¬¦å¤ªå¤šå¯ä»¥ä½¿ç”¨splitè¡¨ç¤ºæˆlistå»é™¤</strong></p><table><thead><tr><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>é€‰æ‹©æ‰€æœ‰æ ‡ç­¾</td><td>*</td></tr><tr><td>é€‰æ‹©&lt;a&gt;æ ‡ç­¾</td><td>a</td></tr><tr><td>é€‰æ‹©æ‰€æœ‰class=&quot;link&quot;çš„æ ‡ç­¾</td><td>.link</td></tr><tr><td>é€‰æ‹©class=&quot;link&quot;çš„&lt;a&gt;æ ‡ç­¾</td><td>a.link</td></tr><tr><td>é€‰æ‹©id=&quot;home&quot;çš„&lt;a&gt;æ ‡ç­¾</td><td>a#home</td></tr><tr><td>é€‰æ‹©çˆ¶å…ƒç´ ä¸º&lt;a&gt;æ ‡ç­¾çš„æ‰€æœ‰&lt;span&gt;æ ‡ç­¾</td><td>a &gt; span</td></tr><tr><td>é€‰æ‹©&lt;a&gt;æ ‡ç­¾å†…éƒ¨çš„æ‰€æœ‰&lt;span&gt;æ ‡ç­¾</td><td>a span</td></tr><tr><td>é€‰æ‹©titleå±æ€§ä¸ºâ€Homeâ€çš„æ‰€æœ‰&lt;a&gt;æ ‡ç­¾</td><td>a[title=Home]</td></tr></tbody></table><p>xpath</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">selector<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span><span class="token string">'ä½ è·å–çš„ç½‘é¡µæºä»£ç æ–‡ä»¶æˆ–å˜é‡'</span><span class="token punctuation">)</span>css <span class="token operator">=</span> selector<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'è¦é€‰æ‹©çš„å†…å®¹'</span><span class="token punctuation">)</span><span class="token comment">#xpathå¯ç›´æ¥è¡¨ç¤º</span><span class="token comment">#xpathå¯é€‰æ‹©å¹¶è¡¨ç¤ºå±æ€§</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><em>xpathç”±äºå†…å®¹å¤ªå¤š,å¯ä»¥ç›´æ¥å‚è€ƒå®˜æ–¹æ–‡æ¡£</em></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;é¦–å…ˆå¾—å¼•å…¥lxml&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-python&quot; data-language=&quot;python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;#xpathä¸º&lt;/span&gt;
frome lxml &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; etree
&lt;span class=&quot;token comment&quot;&gt;#cssselectorä¸º&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; lxml&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;html
&lt;span class=&quot;token comment&quot;&gt;#cssselectorä½¿ç”¨èµ·æ¥ç®€å•ä½†åŠŸèƒ½æ¯”xpathå°‘&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;cssselector&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-python&quot; data-language=&quot;python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;tree &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lxml&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;html&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fromstring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;ä½ è·å–çš„ç½‘é¡µæºä»£ç æ–‡ä»¶æˆ–å˜é‡&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
css &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tree&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cssselect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;è¦é€‰æ‹©çš„å†…å®¹&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;#ä¾‹å¦‚tree.cssselect(&#39;div.word-info &gt; div.pronounces &gt; span.word-audio&#39;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#é€‰æ‹©å™¨é€‰æ‹©çš„ç»“æœä¸ºlist&lt;/span&gt;

css&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text_content&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;#è¡¨ç¤ºé€‰æ‹©çš„å†…å®¹&lt;/span&gt;

css&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;attrib&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;è¦è¡¨ç¤ºçš„æ ‡ç­¾å±æ€§&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;#å¦‚css.attrb[&#39;class&#39;]è¡¨ç¤ºçš„å°±æ˜¯æ‰€é€‰æ‹©å†…å®¹çš„classå±æ€§&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="python" scheme="https://asutorufa.github.io/categories/python/"/>
    
    
    <category term="python" scheme="https://asutorufa.github.io/tags/python/"/>
    
    <category term="ç¼–ç¨‹" scheme="https://asutorufa.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>pythonè·å–ç½‘é¡µæºç (çˆ¬è™«?)</title>
    <link href="https://asutorufa.github.io/posts/cee10602/"/>
    <id>https://asutorufa.github.io/posts/cee10602/</id>
    <published>2018-08-07T14:35:06.000Z</published>
    <updated>2018-08-07T14:35:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ©ç”¨requrst,ä½¿ç”¨é¦–å…ˆè¦</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests</code></pre><p>ä½¿ç”¨æ–¹æ³•</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">url <span class="token operator">=</span> <span class="token string">'è¦è·å–çš„ç½‘é¡µåœ°å€'</span>useragent <span class="token operator">=</span> <span class="token string">'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'</span><span class="token comment">#user-agent å¯æœ‰å¯æ— ,æœ‰äº›ç½‘é¡µé˜²çˆ¬è™«å°±è¦æ¨¡æ‹Ÿæµè§ˆå™¨</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span>useragent<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;åˆ©ç”¨requrst,ä½¿ç”¨é¦–å…ˆè¦&lt;/p&gt;
&lt;pre class=&quot;language-python&quot; data-language=&quot;python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token</summary>
        
      
    
    
    
    <category term="python" scheme="https://asutorufa.github.io/categories/python/"/>
    
    
    <category term="python" scheme="https://asutorufa.github.io/tags/python/"/>
    
    <category term="ç¼–ç¨‹" scheme="https://asutorufa.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>snapåˆ é™¤æ—§çš„core(snapåˆ é™¤å…¶ä»–ç‰ˆæœ¬çš„è½¯ä»¶)</title>
    <link href="https://asutorufa.github.io/posts/b6b8953/"/>
    <id>https://asutorufa.github.io/posts/b6b8953/</id>
    <published>2018-06-28T13:43:41.000Z</published>
    <updated>2018-06-28T13:43:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¶å°”å‘ç°snapä¼šè‡ªåŠ¨å‡çº§coreä¸”ä¸åˆ é™¤æ—§ç‰ˆï¼Œåœ¨â€™/snap/coreâ€™<br>ä¼šå‘ç°å¥½å‡ ä¸ªç‰ˆæœ¬çš„æ–‡ä»¶å¤¹ã€‚<br>ä½¿ç”¨</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> snap remove core <span class="token parameter variable">--revision</span> xxx</code></pre><p>åˆ é™¤æŸä¸ªç‰ˆæœ¬çš„coreï¼Œxxxæ˜¯è½¯ä»¶çš„revï¼Œä½¿ç”¨</p><pre class="language-bash" data-language="bash"><code class="language-bash">snap list</code></pre><p>å¯ä»¥æŸ¥çœ‹è½¯ä»¶çš„revï¼Œå…¶ä»–è½¯ä»¶ä¹Ÿèƒ½ç”¨è¿™ä¸ªæ–¹æ³•åˆ é™¤æ—§çš„ç‰ˆæœ¬å“¦ã€‚</p><p>å‚è€ƒï¼š<a href="https://askubuntu.com/questions/828859/how-to-unmount-and-possibly-delete-old-ubuntu-core-snap">How to unmount and possibly delete old Ubuntu Core snap</a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;å¶å°”å‘ç°snapä¼šè‡ªåŠ¨å‡çº§coreä¸”ä¸åˆ é™¤æ—§ç‰ˆï¼Œåœ¨â€™/snap/coreâ€™&lt;br&gt;
ä¼šå‘ç°å¥½å‡ ä¸ªç‰ˆæœ¬çš„æ–‡ä»¶å¤¹ã€‚&lt;br&gt;
ä½¿ç”¨&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code</summary>
        
      
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://asutorufa.github.io/tags/linux/"/>
    
    <category term="snap" scheme="https://asutorufa.github.io/tags/snap/"/>
    
  </entry>
  
  <entry>
    <title>ubuntuç»ˆç«¯ä¸‹è¿æ¥wifi</title>
    <link href="https://asutorufa.github.io/posts/fb6d8628/"/>
    <id>https://asutorufa.github.io/posts/fb6d8628/</id>
    <published>2018-06-23T12:24:10.000Z</published>
    <updated>2018-06-23T12:24:10.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é¦–å…ˆä½¿ç”¨rfkillæŸ¥çœ‹ä½ çš„wifiè®¾å¤‡æ˜¯å¦è¢«åœç”¨">é¦–å…ˆä½¿ç”¨rfkillæŸ¥çœ‹ä½ çš„wifiè®¾å¤‡æ˜¯å¦è¢«åœç”¨</h2><p>ä½¿ç”¨å‘½ä»¤</p><pre class="language-bash" data-language="bash"><code class="language-bash">rfkill list</code></pre><p>è·å¾—è®¾å¤‡åˆ—è¡¨ï¼Œæ¯ä¸ªéƒ½åŒ…å«ä¸ä¹‹å…³è”çš„ç´¢å¼•å·ï¼Œä» 0 å¼€å§‹<br>æŸ¥çœ‹è®¾å¤‡æ˜¯å¦è¢«åœç”¨ï¼Œè¦å¯ç”¨è¢«åœç”¨çš„è®¾å¤‡ï¼Œè¯·è¿è¡Œï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">rfkill unblock <span class="token operator">&lt;</span>ç´¢å¼•å·<span class="token operator">></span></code></pre><p>è¦å¯ç”¨æ‰€æœ‰è®¾å¤‡ï¼Œè¯·è¿è¡Œï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">rfkill unblock all</code></pre><span id="more"></span><p>æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªç´¢å¼•å·è®© rfkill åœä½¿æˆ–è€…ä½¿ç”¨æŸä¸ªè®¾å¤‡ï¼Œä¾‹å¦‚ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">rfkill block <span class="token number">0</span></code></pre><p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ rfkill é˜»æ–­æŸä¸€ç±»è®¾å¤‡ï¼Œæˆ–è€…æ‰€æœ‰å¯ç”¨äº†RFKillçš„è®¾å¤‡ã€‚ä¾‹å¦‚ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">rfkill block wifi </code></pre><p>åœç”¨ç³»ç»Ÿä¸­çš„æ‰€æœ‰Wi-Fiè®¾å¤‡</p><h2 id="å¯ç”¨æ— çº¿ç½‘å¡">å¯ç”¨æ— çº¿ç½‘å¡</h2><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">ifconfig</span> wlan0 up</code></pre><h2 id="ä½¿ç”¨iwconfigå‘½ä»¤æœç´¢æ— çº¿ç½‘">ä½¿ç”¨iwconfigå‘½ä»¤æœç´¢æ— çº¿ç½‘</h2><pre class="language-bash" data-language="bash"><code class="language-bash">iwlist wlan0 scan</code></pre><p>è®°ä¸‹essid<br>è¿æ¥æ— å¯†ç çš„æ— çº¿ç½‘</p><pre class="language-bash" data-language="bash"><code class="language-bash">iwconfig wlan0 essid essidname</code></pre><p>å…¶ä¸­essidnameæ˜¯æœç´¢åˆ°çš„æ— çº¿ç½‘essid<br>è¿æ¥æœ‰å¯†ç çš„æ— çº¿ç½‘</p><pre class="language-bash" data-language="bash"><code class="language-bash">iwconfig wlan0 essid essidname key <span class="token operator">&lt;</span>å¯†ç <span class="token operator">></span></code></pre><h2 id="è¡¥å……">è¡¥å……</h2><p>é€šè¿‡dhcpè·å–IP</p><pre class="language-bash" data-language="bash"><code class="language-bash">dhclient wlan0</code></pre><p>æˆ–</p><pre class="language-bash" data-language="bash"><code class="language-bash">dhcpcd wlan0</code></pre>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;é¦–å…ˆä½¿ç”¨rfkillæŸ¥çœ‹ä½ çš„wifiè®¾å¤‡æ˜¯å¦è¢«åœç”¨&quot;&gt;é¦–å…ˆä½¿ç”¨rfkillæŸ¥çœ‹ä½ çš„wifiè®¾å¤‡æ˜¯å¦è¢«åœç”¨&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨å‘½ä»¤&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;rfkill list&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è·å¾—è®¾å¤‡åˆ—è¡¨ï¼Œæ¯ä¸ªéƒ½åŒ…å«ä¸ä¹‹å…³è”çš„ç´¢å¼•å·ï¼Œä» 0 å¼€å§‹&lt;br&gt;
æŸ¥çœ‹è®¾å¤‡æ˜¯å¦è¢«åœç”¨ï¼Œè¦å¯ç”¨è¢«åœç”¨çš„è®¾å¤‡ï¼Œè¯·è¿è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;rfkill unblock &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ç´¢å¼•å·&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¦å¯ç”¨æ‰€æœ‰è®¾å¤‡ï¼Œè¯·è¿è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;rfkill unblock all&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="linux" scheme="https://asutorufa.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://asutorufa.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>æš—å½±ç²¾çµæ›´æ”¹efiå¯åŠ¨é¡ºåº</title>
    <link href="https://asutorufa.github.io/posts/6683eff9/"/>
    <id>https://asutorufa.github.io/posts/6683eff9/</id>
    <published>2018-06-23T11:43:40.000Z</published>
    <updated>2018-06-23T11:43:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>â€“2019-04-22 æ›´æ–°â€“<br><strong>æœ€æ–°ç‰ˆbioså·²ç»å¯ä»¥è°ƒæ•´å¯åŠ¨é¡ºåºäº†(<a href="#jump">å›¾åœ¨æœ€ä¸‹é¢</a>)</strong></p><p>-------- ä¹‹ å‰ -------<br>æš—å½±ç²¾çµå®‰è£…å®Œubuntuä¹‹ååªèƒ½å¼€æœºæŒ‰esc+f9è¿›å…¥ubuntuï¼Œå¦åˆ™ä¼šç›´æ¥å¯åŠ¨windows,è™½ç„¶å¯ä»¥ä½¿ç”¨ä½†åŠå…¶ä¸æ–¹ä¾¿çš„è¯´</p><p>é¦–å…ˆä»ubuntuè¿›å…¥/boot/efi/EFI<br><strong>å¤‡ä»½windwosçš„å¯åŠ¨æ–‡ä»¶</strong>ï¼ˆ<strong>åˆ‡è®°ä¸€å®šè¦å¤‡ä»½ï¼Œå¦åˆ™åªèƒ½ä»peé‡æ–°å»ºç«‹windwoså¯åŠ¨é¡¹</strong>ï¼‰</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> <span class="token parameter variable">-arf</span> Microsoft win10</code></pre><p>å°†ubuntuçš„grubx64.efiæ›¿æ¢æ‰EFI/Microsoft/Boot/bootmgfw.efiæ–‡ä»¶ <span id="more"></span></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> <span class="token parameter variable">-arf</span> ubuntu/grubx64.efi Microsoft/Boot/bootmgfw.efi </code></pre><p>è¿™æ ·æ›¿æ¢ä¹‹ågrubå°±æ¥ç®¡äº†ç³»ç»Ÿçš„å¯åŠ¨</p><p>ç„¶åå°†/boot/grub/grub.cfgä¸­å…³äºwindowsçš„å¯åŠ¨æ®µå¤åˆ¶åˆ°/etc/grub.d/40_customä¸­<br>å°†<strong>chainloader /EFI/Micorosoft/Boot/bootmgfw.efi</strong><br>æ”¹ä¸º<br><strong>chainloader /EFI/win10/Boot/bootmgfw.efi</strong><br>å°±æ˜¯æŠŠä¸­é—´é‚£ä¸ªæ”¹ä¸ºä½ å¤‡ä»½çš„æ–‡ä»¶å¤¹ï¼Œå¯ä»¥æ”¹ä¸€æ”¹å‰é¢çš„å¯åŠ¨åç§°<br>æœ€åæ‰§è¡Œupdate-grubæ¥æ›´æ–°å¯åŠ¨é¡¹</p><p>ä½†æ˜¯windwosæœ‰å¤§æ›´æ–°çš„æ—¶å€™ä¼šæŠŠæ›´æ”¹çš„è¦†ç›–æ‰ï¼Œå†æ¥ä¸€éå°±å¥½äº†</p><p><span id = "jump"><img src="http://blog-1254450445.cossgp.myqcloud.com/efi.jpg" alt="" loading="lazy"></span></p><p>å‚è€ƒæ–‡ç« <a href="https://blog.csdn.net/zyix_0712/article/details/69675748">æš—å½±ç²¾çµ2proå®‰è£…win10+ubuntu16.10åŒç³»ç»Ÿ</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;â€“2019-04-22 æ›´æ–°â€“&lt;br&gt;
&lt;strong&gt;æœ€æ–°ç‰ˆbioså·²ç»å¯ä»¥è°ƒæ•´å¯åŠ¨é¡ºåºäº†(&lt;a href=&quot;#jump&quot;&gt;å›¾åœ¨æœ€ä¸‹é¢&lt;/a&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;-------- ä¹‹ å‰ -------&lt;br&gt;
æš—å½±ç²¾çµå®‰è£…å®Œubuntuä¹‹ååªèƒ½å¼€æœºæŒ‰esc+f9è¿›å…¥ubuntuï¼Œå¦åˆ™ä¼šç›´æ¥å¯åŠ¨windows,è™½ç„¶å¯ä»¥ä½¿ç”¨ä½†åŠå…¶ä¸æ–¹ä¾¿çš„è¯´&lt;/p&gt;
&lt;p&gt;é¦–å…ˆä»ubuntuè¿›å…¥/boot/efi/EFI&lt;br&gt;
&lt;strong&gt;å¤‡ä»½windwosçš„å¯åŠ¨æ–‡ä»¶&lt;/strong&gt;ï¼ˆ&lt;strong&gt;åˆ‡è®°ä¸€å®šè¦å¤‡ä»½ï¼Œå¦åˆ™åªèƒ½ä»peé‡æ–°å»ºç«‹windwoså¯åŠ¨é¡¹&lt;/strong&gt;ï¼‰&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-arf&lt;/span&gt; Microsoft win10&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å°†ubuntuçš„grubx64.efiæ›¿æ¢æ‰EFI/Microsoft/Boot/bootmgfw.efiæ–‡ä»¶</summary>
    
    
    
    <category term="Computer" scheme="https://asutorufa.github.io/categories/Computer/"/>
    
    
    <category term="EFI" scheme="https://asutorufa.github.io/tags/EFI/"/>
    
    <category term="BIOS" scheme="https://asutorufa.github.io/tags/BIOS/"/>
    
  </entry>
  
  <entry>
    <title>é–¢è¥¿å¼ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</title>
    <link href="https://asutorufa.github.io/posts/a4241e7/"/>
    <id>https://asutorufa.github.io/posts/a4241e7/</id>
    <published>2018-06-21T09:42:02.000Z</published>
    <updated>2020-01-30T09:42:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ™®æ®µç™ºè¦‹ã®é–¢è¥¿å¼ã“ã“ã§è¨˜éŒ²ã—ã¾ã™ã€‚</p><p>â€“<strong>2020å¹´1æœˆ30æ—¥</strong>â€“<br>ãŠã‚‰ã‚“ ã¨ã¯ã©ã†ã„ã†æ„å‘³ã§ã™ã‹?</p><blockquote><p>æ–‡ã‹ã‚‰ã™ã‚‹ã¨ãã®æ–¹ã¯é–¢è¥¿ã®äººã§ã™ã‹ã­ã€‚ãŠã‚‰ã‚“ã¯æ–¹è¨€ã§ã€ã€Œã„ãªã„ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚<br>ä¾‹æ–‡ï¼š<em>ä¿ºã‚‚ä¸€ç·’ã‚„ãª 3å¹´ãã‚‰ã„ã¯ãŠã‚‰ã‚“ã€‚</em></p></blockquote><p>â€“<strong>2019å¹´2æœˆ1æ—¥</strong>â€“</p><hr><p>â‘ é–¢è¥¿å¼ã®ï½ã­ã‚“ã‘ã©ã€ï½ã‚„ã­ã‚“ã€ï½ã­ã‚“ã®æ„å‘³ã‚’æ•™ãˆã¦ä¸‹ã•ã„<br>â‘¡ï½ã­ã‚„ã¯ï½ã§ã™ã‹ã®æ„å‘³ã§ã™ã‹ï¼Ÿãã‚Œæ„å¤–ã«æ„å‘³ã€ä½¿ã„æ–¹ç­‰ã¯æœ‰ã‚Šã¾ã™ã‹ï¼Ÿ<br>â‘¢è¨€è‘‰ã®é–¢è¥¿å¼ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚’æ•™ãˆã¦ä¸‹ã•ã„</p><p>â‘ ãƒ»ãƒ»ãƒ»<br>ï½ã­ã‚“ã‘ã© ã§ã™ã‘ã‚Œã©ï¼ˆã€‡ã€‡ãªã‚“ã§ã™ã‘ã‚Œã©ï¼‰<br>ï½ã‚„ã­ã‚“ã€ï½ã­ã‚“ ã§ã™ï¼ˆã€‡ã€‡ãªã‚“ã§ã™ï¼‰</p><p>â‘¡ãƒ»ãƒ»ãƒ»<br>ï½ã­ã‚„ã¯ï½ï¼ˆï½ã‚„ã­ã‚“â€ã‚â€ï½ã§ã™ã­ã€‚ï¼‰<br>ã€‡â—‹ãªã‚“ã§ã™ã‚ˆã€‚</p><p>â‘¢ãƒ»ãƒ»ãƒ»<br>ï½ã­ã‚“ã‘ã©ï¼ˆä¸­ä¸­ï¼‰<br>ï½ã‚„ã­ã‚“ï¼ˆé«˜ä½ï¼‰<br>ï½ã‚„ã­ã‚“ã‚ï½ï¼ˆé«˜ä½ä¸­ï¼‰</p><span id="more"></span>  <hr><p>é–¢è¥¿å¼ã§ã€ã€Œã‚ã‚“ã­ã‚“ã‘ã©ã€ã¨ã€Œã‚ã‚‹ã­ã‚“ã‘ã©ã€ã®é•ã„ã¯ãªã‚“ã§ã™ã‹ï¼Ÿ</p><p>æ„å‘³ã®é•ã„ã¯ãªã„ã€‚<br>ã€Œã‚ã‚‹ã­ã‚“ã‘ã©ã€ï¼ã€Œã‚ã‚“ã­ã‚“ã‘ã©ã€</p><p>ã€Œã‚‹ã€ãŒæ’¥éŸ³åŒ–ã—ã¦ã€Œã‚“ã€ã«ãªã£ãŸã ã‘ã€‚æ—¥æœ¬èªã§ã¯èªä¸­ã®ã€Œãƒ©è¡ŒéŸ³ã€ãŒã€Œã‚“ã€ã«å¤‰åŒ–ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã€‚<br>ãƒ»ãã‚Œã§â†’ãã‚“ã§<br>ãƒ»åˆ†ã‹ã‚‰ãªã„â†’åˆ†ã‹ã‚“ãªã„</p><p>â€“<strong>2018å¹´12æœˆ8æ—¥</strong>â€“</p><hr><p>ã›ã‚„ã‹ã‚‰ã‚¢ã‚«ãƒ³ã¦ã‚†ã†ãŸã‚„ã‚<br>ã›ã‚„ã‹ã‚‰ åˆ¥è¡¨è¨˜ï¼šãã‚„ã‹ã‚‰<br>ã€Œã ã‹ã‚‰ã€ã®æ„å‘³ã€‚ä¸»ã«é–¢è¥¿åœ°æ–¹ã§ç”¨ã„ã‚‹ã€‚ã€Œãã‚„ã‹ã‚‰ã€ã¨ã‚‚ã„ã†ã€‚</p><p>ã‚¢ã‚«ãƒ³(ã‚ã‹ã‚“)<br>é–¢è¥¿å¼ã§ã€Œãƒ€ãƒ¡ã€ã®æ„å‘³ã€‚</p><p>ã€ã‚†ã†ã¦ã€ã¯ã€ï½è¨€ã£ã¦ã€<br>##æ–¹è¨€ã§ ã ã‹ã‚‰ ãƒ€ãƒ¡ã£ã¦ è¨€ã£ãŸã§ã—ã‚‡</p><p>â€“<strong>2018å¹´8æœˆ29æ—¥</strong>â€“</p><hr><p>ãƒ“ãƒ“ã‚Šã€åè¯ã€‘<br>1.é¢¤åŠ¨ï¼ŒæŒ¯çº¹ï¼ˆæœºæ¢°ï¼‰<br>2.èƒ†å°ï¼Œå¤§é˜ªæ–¹è¨€ã€‚é–¢è¥¿å¼</p><hr><p>å¥³å­|ãŠãªã”</p><ul><li>åè¯<ul><li>ï¼ˆå¥³ã®å­ã€å¥³å…ï¼‰ã€‚</li><li>ï¼ˆå¥³ã®äººã€å¥³æ€§ã€å©¦äººï¼‰ã€‚</li><li>ï¼ˆå¬ã—ä½¿ã„ã®å¥³ã€å¥³ä¸­ã€ã¯ã—ãŸã‚ï¼‰ã€‚ã€€&lt;-é–¢è¥¿å¼</li></ul></li></ul><p>â€“<strong>2018å¹´8æœˆ7æ—¥</strong>â€“</p><hr><p>ãã‚Œã‚¢ã‚«ãƒ³ã‚„ã¤ã‚„<br>ä¸€å­—ä¸€å¥ã€åˆ†ã‘ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã€Œãã‚Œã€ã‚¢ã‚«ãƒ³ã€ã‚„ã¤ã€ã‚„ã€ã«ãªã‚Šã¾ã™ã€‚<br>ã€Œãã‚Œã€ã¯thatã®ã“ã¨ã§ã™ã‚ˆã­ã€‚<br>ã€Œã‚¢ã‚«ãƒ³ã€ã¯NOã®ã“ã¨ã§ã™ã€‚ãã®é€šã‚Šã€é–¢è¥¿å¼ã§ã™ã€‚<br>ã€Œã‚„ã¤ã€ã¯å¥´ã®ã“ã¨ã§ã™ã€‚äººã‚’æ„šå¼„ã™ã‚‹è¨€ã„æ–¹ã§ã™ã­ã€‚ã§ã‚‚äººä»¥å¤–ã«ã€ã‚‚ã®ã«å¯¾ã—ã¦ã‚‚æŒ‡ã™å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br>ã€Œã‚„ã€ã‚‚é–¢è¥¿å¼ã§ã™ã€‚<br>ã“ã‚Œã‚’æ±äº¬ã®äººãŒè©±ã™ã¨ã€Œãã‚Œã¯ã„ã‘ãªã„äººã ã‚ˆã­ï½ã€ã‚„ã€Œãã‚Œã¯ã‚ã‚Šãˆãªã„ã‚ˆã­ï½ã€ã¨ã„ã†è¨€ã„æ–¹ã«ãªã‚Šã¾ã™ã€‚å…ƒãƒã‚¿ã‚’æƒ³åƒã™ã‚‹ã¨ã€ã“ã“ã§ã¯ã€Œã‚„ã¤ã€ã¯ã‚‚ã®ã‚’æŒ‡ã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><hr><p>ã› ã‚„ ãª<br>åŒæ„ã‚’è¡¨æ˜ã™ã‚‹èªã€‚é–¢è¥¿å¼ã€‚ã€Œãã†ã ã­ã€ã€ã€Œãã†ã ãªã€ãªã©ã«ç›¸å½“ã™ã‚‹ã€‚</p><hr><p>ã—ã‚“ã©ã„</p><ul><li>éª¨ãŒæŠ˜ã‚Œã‚‹ã€‚é›£å„€ã ã€‚<br>ä¾‹æ–‡ï¼š<ul><li>ã“ã®ä»•äº‹ã¯ã—ã‚“ã©ã„ã€‚</li></ul></li><li>ããŸã³ã‚Œã¦ã„ã‚‹ã€‚<br>ä¾‹æ–‡ï¼š<ul><li>ã—ã‚“ã©ãã¦ã‚‚ã“ã®ä»•äº‹ã‚’ã‚„ã£ã¦ã—ã¾ãŠã†ã€‚</li><li>ãŠãŠï¼Œã—ã‚“ã©ã„ã€‚</li></ul></li></ul><hr><p>ã»ã‚“ã¾ ã€æœ¬çœŸã€‘ï¼ˆ å ãƒ»å½¢å‹• ï¼‰<br>æœ¬å½“ã§ã‚ã‚‹ãƒ»ã“ã¨ï¼ˆã•ã¾ï¼‰ã€‚çœŸå®Ÿã€‚ä¸»ã«é–¢è¥¿åœ°æ–¹ã§ç”¨ã„ã‚‹ã€‚ ã€Œ ï¼ã®è©±ã‚„ã§ã€ ã€Œ ï¼ã«é©šã„ãŸã‚ã€</p><hr><p>ã—ã‚ƒã‚ãªã„<br>å¤§é˜ªå¼ã§ã€Œã—ã‹ãŸãªã„ã€ã®æ„å‘³ã§ã‚ã‚‹ã€‚</p><hr><p>ã‚¢ã‚«ãƒ³<br>ï¼ˆã€ŒåŸ’ã‚‰ã¡æ˜ã‹ã¬ã€ã®ç•¥ã€‚å¤šãé–¢è¥¿ã§ä½¿ã†ï¼‰ã†ã¾ãã„ã‹ãªã„ã€‚ã ã‚ã ã€‚ä¸å¯ã§ã‚ã‚‹ã€‚</p><hr><p>ã‚¢ãƒ›ã‚„ã‚“<br>ãƒ‰ã‚¸ã£å¨˜</p><p>ä¸­å›½èªï¼š<br>è·Ÿå†’å¤±å¨˜ï¼ˆãƒ‰ã‚¸ã£å¨˜ï¼‰ç±»ä¼¼ï¼Œå…³è¥¿æ–¹è¨€</p><blockquote><p>å†’å¤±å¨˜ï¼ˆãƒ‰ã‚¸ã£å¨˜ï¼‰ï¼ŒèŒå±æ€§ä¹‹ä¸€ã€‚æ­¤å±æ€§ä»¥å¥³æ€§ä¸ºä¸»ï¼Œè‹¥æ˜¯ç”·æ€§å¯ç”¨è¾ƒä¸­æ€§çš„â€œãƒ‰ã‚¸ã£å­â€ã€‚<br>æ—¥æ–‡â€œã©ã˜â€æˆ–â€œã©ã¢â€æ˜¯æŒ‡äººæˆ–äº‹çš„å‡ºé”™å’Œå¤±è¯¯ã€‚â€œãƒ‰ã‚¸ã£å¨˜â€å°±æ˜¯æŒ‡ç»å¸¸å¼„ç¿»ç‰©ä»¶ã€è¡Œäº‹ç¬¨æ‹™ã€â€œå¤§é”™ä¸å‡ºï¼Œå°é”™ä¸æ–­â€ï¼Œæ€»æ˜¯æå‡ºå‘†å‘†ç¬¨ç¬¨äº‹æƒ…çš„å°‘å¥³ã€‚<br>ä¸­æ–‡æ„è¯‘çš„â€œå†’å¤±â€ï¼Œæ˜¯æŒ‡åšäº‹æœ‰æ¼å¤±ï¼Œè€Œä¸æ˜¯ä¸ºäººé²è½æ— ç¤¼çš„æ„æ€ã€‚<br>ã©ã˜ã£åº”è¯¥ä¸å†™æˆæ±‰å­—<br>å‚è€ƒè‡ªç»´åŸºç™¾ç§‘</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ™®æ®µç™ºè¦‹ã®é–¢è¥¿å¼ã“ã“ã§è¨˜éŒ²ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;â€“&lt;strong&gt;2020å¹´1æœˆ30æ—¥&lt;/strong&gt;â€“&lt;br&gt;
ãŠã‚‰ã‚“ ã¨ã¯ã©ã†ã„ã†æ„å‘³ã§ã™ã‹?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ–‡ã‹ã‚‰ã™ã‚‹ã¨ãã®æ–¹ã¯é–¢è¥¿ã®äººã§ã™ã‹ã­ã€‚ãŠã‚‰ã‚“ã¯æ–¹è¨€ã§ã€ã€Œã„ãªã„ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚&lt;br&gt;
ä¾‹æ–‡ï¼š&lt;em&gt;ä¿ºã‚‚ä¸€ç·’ã‚„ãª 3å¹´ãã‚‰ã„ã¯ãŠã‚‰ã‚“ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€“&lt;strong&gt;2019å¹´2æœˆ1æ—¥&lt;/strong&gt;â€“&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;â‘ é–¢è¥¿å¼ã®ï½ã­ã‚“ã‘ã©ã€ï½ã‚„ã­ã‚“ã€ï½ã­ã‚“ã®æ„å‘³ã‚’æ•™ãˆã¦ä¸‹ã•ã„&lt;br&gt;
â‘¡ï½ã­ã‚„ã¯ï½ã§ã™ã‹ã®æ„å‘³ã§ã™ã‹ï¼Ÿãã‚Œæ„å¤–ã«æ„å‘³ã€ä½¿ã„æ–¹ç­‰ã¯æœ‰ã‚Šã¾ã™ã‹ï¼Ÿ&lt;br&gt;
â‘¢è¨€è‘‰ã®é–¢è¥¿å¼ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚’æ•™ãˆã¦ä¸‹ã•ã„&lt;/p&gt;
&lt;p&gt;â‘ ãƒ»ãƒ»ãƒ»&lt;br&gt;
ï½ã­ã‚“ã‘ã© ã§ã™ã‘ã‚Œã©ï¼ˆã€‡ã€‡ãªã‚“ã§ã™ã‘ã‚Œã©ï¼‰&lt;br&gt;
ï½ã‚„ã­ã‚“ã€ï½ã­ã‚“ ã§ã™ï¼ˆã€‡ã€‡ãªã‚“ã§ã™ï¼‰&lt;/p&gt;
&lt;p&gt;â‘¡ãƒ»ãƒ»ãƒ»&lt;br&gt;
ï½ã­ã‚„ã¯ï½ï¼ˆï½ã‚„ã­ã‚“â€ã‚â€ï½ã§ã™ã­ã€‚ï¼‰&lt;br&gt;
ã€‡â—‹ãªã‚“ã§ã™ã‚ˆã€‚&lt;/p&gt;
&lt;p&gt;â‘¢ãƒ»ãƒ»ãƒ»&lt;br&gt;
ï½ã­ã‚“ã‘ã©ï¼ˆä¸­ä¸­ï¼‰&lt;br&gt;
ï½ã‚„ã­ã‚“ï¼ˆé«˜ä½ï¼‰&lt;br&gt;
ï½ã‚„ã­ã‚“ã‚ï½ï¼ˆé«˜ä½ä¸­ï¼‰&lt;/p&gt;</summary>
    
    
    
    <category term="æ—¥æœ¬èª" scheme="https://asutorufa.github.io/categories/%E6%97%A5%E6%9C%AC%E8%AA%9E/"/>
    
    
    <category term="é–¢è¥¿å¼" scheme="https://asutorufa.github.io/tags/%E9%96%A2%E8%A5%BF%E5%BC%81/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptå¯¹å­—ç¬¦ä¸²æ“ä½œ</title>
    <link href="https://asutorufa.github.io/posts/86cfa6a/"/>
    <id>https://asutorufa.github.io/posts/86cfa6a/</id>
    <published>2018-03-24T23:17:58.000Z</published>
    <updated>2018-09-04T23:17:58.000Z</updated>
    
    <content type="html"><![CDATA[<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">'aaaa'</span><span class="token punctuation">;</span><span class="token keyword">var</span> age<span class="token operator">=</span><span class="token string">'bbbb'</span><span class="token punctuation">;</span><span class="token keyword">var</span> change<span class="token operator">=</span><span class="token string">'Hello javascript'</span><span class="token punctuation">;</span><span class="token keyword">var</span> message<span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>age<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,</span><span class="token template-punctuation string">`</span></span><span class="token operator">+</span>name<span class="token operator">+</span>age<span class="token punctuation">;</span><span class="token comment">//å°†å¤šä¸ªå­—ç¬¦ä¸²å†™æˆä¸€å¥è¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> length<span class="token operator">=</span>message<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token comment">//è·å–å­—ç¬¦ä¸²é•¿åº¦</span></code></pre><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> upper<span class="token operator">=</span>message<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æŠŠå­—ç¬¦ä¸²å…¨éƒ¨å˜æˆå¤§å†™</span></code></pre><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> lower<span class="token operator">=</span>message<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æŠŠå­—ç¬¦ä¸²å…¨éƒ¨å˜æˆå°å†™</span></code></pre><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> search<span class="token operator">=</span>message<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'aaaa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æœç´¢å­—ç¬¦ä¸²ä½ç½®</span></code></pre><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> substr<span class="token operator">=</span>message<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿”å›åŒºé—´å†…å­—ç¬¦ä¸²</span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">x<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//æŸ¥æ‰¾å…ƒç´ </span>x<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"Hello JavaScript"</span><span class="token punctuation">;</span>    <span class="token comment">//æ”¹å˜å†…å®¹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;pre class=&quot;line-numbers language-javascript&quot; data-language=&quot;javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token</summary>
        
      
    
    
    
    <category term="JavaScript" scheme="https://asutorufa.github.io/categories/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="https://asutorufa.github.io/tags/JavaScript/"/>
    
    <category term="å‰ç«¯" scheme="https://asutorufa.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>è®©win10çš„UWPåº”ç”¨èµ°ä»£ç†</title>
    <link href="https://asutorufa.github.io/posts/d22ffdb6/"/>
    <id>https://asutorufa.github.io/posts/d22ffdb6/</id>
    <published>2018-02-08T15:09:16.000Z</published>
    <updated>2020-03-01T15:09:16.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŸå› ">åŸå› </h2><p>å› ä¸ºuwpåº”ç”¨çš„ç‰¹æ®Šæ€§,å³ä½¿ä½¿ç”¨proxifierå’Œproxycapè¿™ç§åº”ç”¨ä¹Ÿæ— æ³•è®©å…¶èµ°ä»£ç†</p><h2 id="ç°åœ¨å¯ç›´æ¥ç”¨WindowsLoopbackManager">ç°åœ¨å¯ç›´æ¥ç”¨WindowsLoopbackManager</h2><p><a href="https://github.com/tiagonmas/Windows-Loopback-Exemption-Manager">WindowsLoopbackManager</a></p><span id="more"></span><h2 id="1-SSTAP">1.SSTAP</h2><p>è¿™ä¸ªåº”ç”¨æ˜¯åˆ›å»ºè™šæ‹Ÿç½‘å¡,è®©windowså…¨å±€èµ°ä»£ç†.ä½†å…¶æœ‰å¼Šç«¯å°±æ˜¯æœ‰ä¸€äº›å›½å†…çš„ç½‘ç«™ä¹Ÿä¼šèµ°ä»£ç†,æ¯”å¦‚BILIBILI.è™½ç„¶å¯ä»¥è‡ªå·±å†™è§„åˆ™ä½†å®åœ¨æ˜¯éº»çƒ¦æ— æ¯”.</p><h2 id="2-fiddler">2.fiddler</h2><p>åˆ©ç”¨fiddlerçš„winconfigå®ç°uwpåº”ç”¨èµ°ä»£ç†<br><img src="http://blog-1254450445.cossgp.myqcloud.com/WK%290~%29WR%29N79$KZ4HZZTDQ2.png" alt="." loading="lazy"><br>æŠŠè¦èµ°ä»£ç†çš„åº”ç”¨å‹¾ä¸Š<br><img src="http://blog-1254450445.cossgp.myqcloud.com/KT3%28H@%60C63P@2KH_X7C@QDI.png" alt="." loading="lazy"><br>ä½†è¿™ä¸æ˜¯å…¨å±€ä»£ç†,åªèƒ½è®©uwpåº”ç”¨èµ°ä»£ç†</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;åŸå› &quot;&gt;åŸå› &lt;/h2&gt;
&lt;p&gt;å› ä¸ºuwpåº”ç”¨çš„ç‰¹æ®Šæ€§,å³ä½¿ä½¿ç”¨proxifierå’Œproxycapè¿™ç§åº”ç”¨ä¹Ÿæ— æ³•è®©å…¶èµ°ä»£ç†&lt;/p&gt;
&lt;h2 id=&quot;ç°åœ¨å¯ç›´æ¥ç”¨WindowsLoopbackManager&quot;&gt;ç°åœ¨å¯ç›´æ¥ç”¨WindowsLoopbackManager&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/tiagonmas/Windows-Loopback-Exemption-Manager&quot;&gt;WindowsLoopbackManager&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="https://asutorufa.github.io/categories/Network/"/>
    
    
    <category term="proxy" scheme="https://asutorufa.github.io/tags/proxy/"/>
    
  </entry>
  
  <entry>
    <title>cè¯­è¨€æ•°ç»„è¾“å‡ºçš„å¦ä¸€ç§æ–¹æ³•</title>
    <link href="https://asutorufa.github.io/posts/854ed6ec/"/>
    <id>https://asutorufa.github.io/posts/854ed6ec/</id>
    <published>2017-12-10T10:39:54.000Z</published>
    <updated>2017-12-10T10:39:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©çœ‹åˆ°è¿™æ ·ä¸€ç§å†™æ³•,åŸæ–‡é“¾æ¥:<a href="http://blog.accut.cn/archives/173">ä¸€ä¸ªæœ‰è¶£çš„Cè¯­è¨€ç¨‹åº</a></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span> <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> x<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="language-bash" data-language="bash"><code class="language-bash">output: <span class="token number">2</span></code></pre><span id="more"></span><p>int x[5],xå®é™…ä¸Šä¿å­˜çš„æ˜¯è¿™ä¸ªæ•°ç»„é¦–å…ƒç´ çš„åœ°å€ä¹Ÿå°±æ˜¯&amp;x[0].<br>a[x]çš„ç­‰æ•ˆå†™æ³•æ˜¯*(a+&amp;x).å› ä¸ºä¸Šé¢è¯´äº†xå®é™…ä¸Šæ˜¯x[0].<br>æ‰€ä»¥å¯ä»¥è¿›ä¸€æ­¥å†™æˆ*(a+&amp;x[0]),åˆå› ä¸ºa=1æ‰€ä»¥å¯ä»¥æ›¿æ¢æˆ*(&amp;x[0]+1),ä¹Ÿå°±æ˜¯x[1].<br>æ‰€ä»¥å°±æ˜¯x[1]å¯¹åº”çš„å€¼ï¼š2</p><p>ç”±æ­¤æˆ‘åˆæƒ³åˆ°äº†äºŒä½æ•°ç»„</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span> <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> x<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>a<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="language-bash" data-language="bash"><code class="language-bash">output: <span class="token number">4</span></code></pre><p>æ„Ÿè§‰å¥½ç¥å¥‡,è€Œä¸”åœ¨ä¹‹å‰ä¸çŸ¥é“åœ¨å“ªçœ‹åˆ°__cè¯­è¨€çš„æ•°ç»„å…¶å®å°±æ˜¯æŒ‡é’ˆçš„åˆé›†__,è€Œä¸”æœ€è¿‘è¦ç”¨é“¾è¡¨,æ›´è§‰å¾—é“¾è¡¨å’Œæ•°ç»„å·®ä¸å¤š.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä»Šå¤©çœ‹åˆ°è¿™æ ·ä¸€ç§å†™æ³•,åŸæ–‡é“¾æ¥:&lt;a href=&quot;http://blog.accut.cn/archives/173&quot;&gt;ä¸€ä¸ªæœ‰è¶£çš„Cè¯­è¨€ç¨‹åº&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-c&quot; data-language=&quot;c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;stdio.h&gt;&lt;/span&gt;&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;%d&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;output: &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="Program" scheme="https://asutorufa.github.io/categories/Program/"/>
    
    
    <category term="C" scheme="https://asutorufa.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨ç»“æ„ä½“è®©å‡½æ•°è¿”å›å¤šä¸ªå€¼</title>
    <link href="https://asutorufa.github.io/posts/c69434f1/"/>
    <id>https://asutorufa.github.io/posts/c69434f1/</id>
    <published>2017-11-29T14:39:27.000Z</published>
    <updated>2017-11-29T14:39:27.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="cè¯­è¨€">cè¯­è¨€</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"stdio.h"</span></span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">test</span> <span class="token comment">//å»ºç«‹ç»“æ„ä½“</span><span class="token punctuation">&#123;</span> <span class="token keyword">int</span> a<span class="token punctuation">;</span> <span class="token keyword">int</span> b<span class="token punctuation">;</span> <span class="token keyword">int</span> c<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>T<span class="token punctuation">;</span>T <span class="token function">testt</span><span class="token punctuation">(</span><span class="token keyword">int</span> aa<span class="token punctuation">,</span><span class="token keyword">int</span> bb<span class="token punctuation">,</span><span class="token keyword">int</span> cc<span class="token punctuation">)</span> <span class="token comment">//å»ºç«‹å‡½æ•°</span><span class="token punctuation">&#123;</span> T aaa<span class="token punctuation">;</span> aaa<span class="token punctuation">.</span>a<span class="token operator">=</span>aa<span class="token operator">*</span>bb<span class="token punctuation">;</span> aaa<span class="token punctuation">.</span>b<span class="token operator">=</span>aa<span class="token operator">*</span>cc<span class="token punctuation">;</span> aaa<span class="token punctuation">.</span>c<span class="token operator">=</span>bb<span class="token operator">*</span>cc<span class="token punctuation">;</span> <span class="token keyword">return</span> aaa<span class="token punctuation">;</span> <span class="token comment">//è¿”å›ç»“æ„</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> T b<span class="token operator">=</span><span class="token function">testt</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d %d \n"</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>a<span class="token punctuation">,</span>b<span class="token punctuation">.</span>b<span class="token punctuation">,</span>b<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> T <span class="token operator">*</span>f<span class="token operator">=</span><span class="token operator">&amp;</span>b<span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d %d"</span><span class="token punctuation">,</span>f<span class="token operator">-></span>a<span class="token punctuation">,</span>f<span class="token operator">-></span>b<span class="token punctuation">,</span>f<span class="token operator">-></span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="C">C++</h2><span id="more"></span><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"iostream"</span></span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">sss</span> <span class="token comment">//å»ºç«‹ç»“æ„ä½“</span><span class="token punctuation">&#123;</span> <span class="token keyword">int</span> a<span class="token punctuation">;</span> <span class="token keyword">int</span> b<span class="token punctuation">;</span> <span class="token keyword">int</span> c<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>S<span class="token punctuation">;</span>S <span class="token function">s</span><span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">,</span><span class="token keyword">double</span> b<span class="token punctuation">,</span><span class="token keyword">double</span> c<span class="token punctuation">)</span> å»ºç«‹å‡½æ•°<span class="token punctuation">&#123;</span> S d<span class="token punctuation">;</span> d<span class="token punctuation">.</span>a<span class="token operator">=</span>a<span class="token operator">*</span>a<span class="token punctuation">;</span> d<span class="token punctuation">.</span>b<span class="token operator">=</span>b<span class="token operator">*</span>b<span class="token punctuation">;</span> d<span class="token punctuation">.</span>c<span class="token operator">=</span>c<span class="token operator">*</span>c<span class="token punctuation">;</span> <span class="token keyword">return</span> d<span class="token punctuation">;</span><span class="token comment">//è¿”å›ç»“æ„ä½“</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> S z<span class="token operator">=</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> std<span class="token operator">::</span>cout<span class="token operator">&lt;&lt;</span>z<span class="token punctuation">.</span>a          <span class="token operator">&lt;&lt;</span>std<span class="token operator">::</span>endl          <span class="token operator">&lt;&lt;</span>z<span class="token punctuation">.</span>b          <span class="token operator">&lt;&lt;</span>std<span class="token operator">::</span>endl          <span class="token operator">&lt;&lt;</span>z<span class="token punctuation">.</span>c          <span class="token operator">&lt;&lt;</span>std<span class="token operator">::</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;cè¯­è¨€&quot;&gt;cè¯­è¨€&lt;/h2&gt;
&lt;pre class=&quot;line-numbers language-c&quot; data-language=&quot;c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;stdio.h&quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//å»ºç«‹ç»“æ„ä½“&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
 &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

T &lt;span class=&quot;token function&quot;&gt;testt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; aa&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; bb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; cc&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//å»ºç«‹å‡½æ•°&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
 T aaa&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 aaa&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;aa&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;bb&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 aaa&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;aa&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;cc&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 aaa&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;c&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;bb&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;cc&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; aaa&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//è¿”å›ç»“æ„&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#123;&lt;/span&gt;
 T b&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;testt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;token function&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;%d %d %d &#92;n&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;c&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 T &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;f&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;token function&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;%d %d %d&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;f&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;f&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;f&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;c&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;C&quot;&gt;C++&lt;/h2&gt;</summary>
    
    
    
    <category term="Program" scheme="https://asutorufa.github.io/categories/Program/"/>
    
    
    <category term="C++" scheme="https://asutorufa.github.io/tags/C/"/>
    
    <category term="C" scheme="https://asutorufa.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>cè¯­è¨€åŸºæœ¬ç±»å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼</title>
    <link href="https://asutorufa.github.io/posts/e404489/"/>
    <id>https://asutorufa.github.io/posts/e404489/</id>
    <published>2017-10-30T15:27:46.000Z</published>
    <updated>2017-10-30T15:27:46.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æµ®ç‚¹æ•°">æµ®ç‚¹æ•°</h2><h3 id="float">float</h3><table><thead><tr><th style="text-align:center">ç¬¦å·ä½</th><th style="text-align:center">+</th><th style="text-align:center">æŒ‡æ•°ä½</th><th style="text-align:center">+</th><th style="text-align:center">å°¾æ•°ä½</th></tr></thead><tbody><tr><td style="text-align:center">â†‘</td><td style="text-align:center"></td><td style="text-align:center">â†‘</td><td style="text-align:center"></td><td style="text-align:center">â†‘</td></tr><tr><td style="text-align:center">ç¬¬ä¸€ä½</td><td style="text-align:center"></td><td style="text-align:center">8ä½</td><td style="text-align:center"></td><td style="text-align:center">23ä½</td></tr></tbody></table><span id="more"></span><h3 id="double">double</h3><table><thead><tr><th style="text-align:center">ç¬¦å·ä½</th><th style="text-align:center">+</th><th style="text-align:center">æŒ‡æ•°ä½</th><th style="text-align:center">+</th><th style="text-align:center">å°¾æ•°ä½</th></tr></thead><tbody><tr><td style="text-align:center">â†‘</td><td style="text-align:center"></td><td style="text-align:center">â†‘</td><td style="text-align:center"></td><td style="text-align:center">â†‘</td></tr><tr><td style="text-align:center">ç¬¬ä¸€ä½</td><td style="text-align:center"></td><td style="text-align:center">11ä½</td><td style="text-align:center"></td><td style="text-align:center">52ä½</td></tr></tbody></table><h2 id="æ•´æ•°">æ•´æ•°</h2><p>æ•´æ•°åœ¨å†…å­˜ä¸­æ˜¯ä»¥è¡¥ç çš„å½¢å¼å­˜å‚¨</p><h3 id="æ­£æ•´æ•°">æ­£æ•´æ•°</h3><p>åŸç =åç =è¡¥ç </p><h3 id="è´Ÿæ•´æ•°">è´Ÿæ•´æ•°</h3><p>åŸç å³ä¸ºåŸç <br>åç =åŸç ç¬¦å·ä¸ºä¸å˜,å…¶ä½™å–å(æ³¨:ç¬¬ä¸€ä½ä¸ºç¬¦å·ä½)<br>è¡¥ç =åç +1</p><p><strong>2019å¹´4æœˆ3æ—¥æ›´æ–°</strong><br>åŸç èŒƒå›´:</p><ul><li>æ•´æ•°:(1111â€¦1) <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ’</mo><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>â‰¤</mo><mi>x</mi><mo>â‰¤</mo><msup><mn>2</mn><mi>n</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-(2^n-1) \leq x \leq 2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ’</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></strong> (01111â€¦1)</li><li>å°æ•°:(1.111â€¦1) <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ’</mo><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo><mo>â‰¤</mo><mi>x</mi><mo>â‰¤</mo><mn>1</mn><mo>âˆ’</mo><msup><mn>2</mn><mrow><mo>âˆ’</mo><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">-(1-2^n) \leq x \leq 1-2^{-n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ’</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7713em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></strong> (0.111â€¦1)</li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æµ®ç‚¹æ•°&quot;&gt;æµ®ç‚¹æ•°&lt;/h2&gt;
&lt;h3 id=&quot;float&quot;&gt;float&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;ç¬¦å·ä½&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;+&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;æŒ‡æ•°ä½&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;+&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å°¾æ•°ä½&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;â†‘&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;â†‘&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;â†‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ç¬¬ä¸€ä½&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;8ä½&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;23ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</summary>
    
    
    
    <category term="Program" scheme="https://asutorufa.github.io/categories/Program/"/>
    
    
    <category term="C" scheme="https://asutorufa.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>cè¯­è¨€åˆ©ç”¨charæŒ‡é’ˆå˜é‡å°†intæŒ‰å­—èŠ‚æ‰“å°åœ°å€</title>
    <link href="https://asutorufa.github.io/posts/43cb2931/"/>
    <id>https://asutorufa.github.io/posts/43cb2931/</id>
    <published>2017-10-24T22:27:37.000Z</published>
    <updated>2017-10-24T22:27:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºintå˜é‡çš„å¤§å°ä¸ºå››ä¸ªå­—èŠ‚,æ‰€ä»¥å¦‚æœåˆ©ç”¨intæŒ‡é’ˆå˜é‡+1è¾“å‡ºåœ°å€çš„è¯,å®é™…ä¸Šæ˜¯åŠ äº†å››ä¸ªå­—èŠ‚åçš„åœ°å€.<br>è€Œcharçš„å¤§å°åˆšå¥½ä¸ºä¸€ä¸ªå­—èŠ‚,æ˜¯æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿.<br>è¿™æ ·æˆ‘ä»¬å¯ä»¥å¼ºåˆ¶è½¬æ¢ä¸ºcharæŒ‡é’ˆå˜é‡è¾“å‡ºæ¯ä¸ªå­—èŠ‚çš„åœ°å€ç„¶å+1,+2,+3æ¥åˆ†åˆ«è¾“å‡ºintçš„å››ä¸ªå­—èŠ‚çš„åœ°å€,å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„å†…å®¹.<br>ä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> a<span class="token operator">=</span><span class="token operator">-</span><span class="token number">65</span><span class="token punctuation">;</span><span class="token keyword">char</span> <span class="token operator">*</span>b<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>a<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n%p\n%p\n%p\n"</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>a<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>a<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span>a<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><span id="more"></span><p>å¦‚æœä½ æƒ³æŒ‰å­—èŠ‚è¾“å‡ºå†…å­˜ä¸­çš„å†…å®¹å¯ä»¥è¿™æ ·å†™,è¿™é‡Œæˆ‘è¾“å‡ºçš„æ˜¯16è¿›åˆ¶æ•´æ•°.</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> a<span class="token operator">=</span><span class="token operator">-</span><span class="token number">65</span><span class="token punctuation">;</span><span class="token keyword">char</span> <span class="token operator">*</span>b<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>a<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%02x\n%02x\n%02x\n%02x\n"</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>a<span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸¤è€…ç»“åˆä¸€ä¸‹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> a<span class="token operator">=</span><span class="token operator">-</span><span class="token number">65</span><span class="token punctuation">;</span><span class="token keyword">char</span> <span class="token operator">*</span>b<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>a<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p %02x\n%p %02x\n%p %02x\n%p %02x\n"</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>a<span class="token punctuation">,</span>a<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºå†…å®¹å¦‚å›¾<br><img src="http://blog-1254450445.cossgp.myqcloud.com/TIM%E6%88%AA%E5%9B%BE20171024224821.png" alt="" loading="lazy"><br><strong>æœ‰ä»»ä½•é”™è¯¯è¯·é‚®ç®±è”ç³»æˆ‘æŒ‡å‡ºæˆ‘çš„é”™è¯¯,ä¸‡åˆ†æ„Ÿè°¢</strong></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å› ä¸ºintå˜é‡çš„å¤§å°ä¸ºå››ä¸ªå­—èŠ‚,æ‰€ä»¥å¦‚æœåˆ©ç”¨intæŒ‡é’ˆå˜é‡+1è¾“å‡ºåœ°å€çš„è¯,å®é™…ä¸Šæ˜¯åŠ äº†å››ä¸ªå­—èŠ‚åçš„åœ°å€.&lt;br&gt;
è€Œcharçš„å¤§å°åˆšå¥½ä¸ºä¸€ä¸ªå­—èŠ‚,æ˜¯æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿.&lt;br&gt;
è¿™æ ·æˆ‘ä»¬å¯ä»¥å¼ºåˆ¶è½¬æ¢ä¸ºcharæŒ‡é’ˆå˜é‡è¾“å‡ºæ¯ä¸ªå­—èŠ‚çš„åœ°å€ç„¶å+1,+2,+3æ¥åˆ†åˆ«è¾“å‡ºintçš„å››ä¸ªå­—èŠ‚çš„åœ°å€,å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„å†…å®¹.&lt;br&gt;
ä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;pre class=&quot;line-numbers language-c&quot; data-language=&quot;c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;65&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;b&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;%p&#92;n%p&#92;n%p&#92;n%p&#92;n&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="Program" scheme="https://asutorufa.github.io/categories/Program/"/>
    
    
    <category term="C" scheme="https://asutorufa.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>cè¯­è¨€ä¸­æ ¼å¼åŒ–å­—ç¬¦çš„åº”ç”¨</title>
    <link href="https://asutorufa.github.io/posts/b6b4601/"/>
    <id>https://asutorufa.github.io/posts/b6b4601/</id>
    <published>2017-10-10T13:03:15.000Z</published>
    <updated>2017-10-10T13:03:15.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ ¼å¼åŒ–è§„å®šç¬¦">æ ¼å¼åŒ–è§„å®šç¬¦</h2><p>ç¬¦å· ä½œç”¨<br>%d åè¿›åˆ¶æœ‰ç¬¦å·æ•´æ•°<br>%u åè¿›åˆ¶æ— ç¬¦å·æ•´æ•°<br>%f æµ®ç‚¹æ•°<br>%s å­—ç¬¦ä¸²<br>%c å•ä¸ªå­—ç¬¦<br>%p æŒ‡é’ˆçš„å€¼<br>%e æŒ‡æ•°å½¢å¼çš„æµ®ç‚¹æ•°<br>%x, %X æ— ç¬¦å·ä»¥åå…­è¿›åˆ¶è¡¨ç¤ºçš„æ•´æ•°<span id="more"></span><br>%0 æ— ç¬¦å·ä»¥å…«è¿›åˆ¶è¡¨ç¤ºçš„æ•´æ•°<br>%g è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„è¡¨ç¤ºæ³•</p><p>è¯´æ˜:<br>(1). å¯ä»¥åœ¨&quot;%â€œå’Œå­—æ¯ä¹‹é—´æ’è¿›æ•°å­—è¡¨ç¤ºæœ€å¤§åœºå®½ã€‚<br>ä¾‹å¦‚: %3d è¡¨ç¤ºè¾“å‡º3ä½æ•´å‹æ•°, ä¸å¤Ÿ3ä½å³å¯¹é½ã€‚<br>%9.2f è¡¨ç¤ºè¾“å‡ºåœºå®½ä¸º9çš„æµ®ç‚¹æ•°, å…¶ä¸­å°æ•°ä½ä¸º2, æ•´æ•°ä½ä¸º6,å°æ•°ç‚¹å ä¸€ä½, ä¸å¤Ÿ9ä½å³å¯¹é½ã€‚<br>å¦å¤–, è‹¥æƒ³åœ¨è¾“å‡ºå€¼å‰åŠ ä¸€äº›0, å°±åº”åœ¨åœºå®½é¡¹å‰åŠ ä¸ª0ã€‚<br>ä¾‹å¦‚: %04d è¡¨ç¤ºåœ¨è¾“å‡ºä¸€ä¸ªå°äº4ä½çš„æ•°å€¼æ—¶, å°†åœ¨å‰é¢è¡¥0ä½¿å…¶æ€»å®½åº¦ä¸º4ä½ã€‚<br>å¦‚æœç”¨æµ®ç‚¹æ•°è¡¨ç¤ºå­—ç¬¦æˆ–æ•´å‹é‡çš„è¾“å‡ºæ ¼å¼, å°æ•°ç‚¹åçš„æ•°å­—ä»£è¡¨æœ€å¤§å®½åº¦,å°æ•°ç‚¹å‰çš„æ•°å­—ä»£è¡¨æœ€å°å®½åº¦ã€‚<br>ä¾‹å¦‚: %6.9s è¡¨ç¤ºæ˜¾ç¤ºä¸€ä¸ªé•¿åº¦ä¸å°äº6ä¸”ä¸å¤§äº9çš„å­—ç¬¦ä¸²ã€‚è‹¥å¤§äº9, åˆ™ç¬¬9ä¸ªå­—ç¬¦ä»¥åçš„å†…å®¹å°†è¢«åˆ é™¤ã€‚<br>(2). å¯ä»¥åœ¨â€%â€œå’Œå­—æ¯ä¹‹é—´åŠ å°å†™å­—æ¯l, è¡¨ç¤ºè¾“å‡ºçš„æ˜¯é•¿å‹æ•°ã€‚<br>ä¾‹å¦‚: %ld è¡¨ç¤ºè¾“å‡ºlongæ•´æ•°,%lf è¡¨ç¤ºè¾“å‡ºdoubleæµ®ç‚¹æ•°<br>(3). å¯ä»¥æ§åˆ¶è¾“å‡ºå·¦å¯¹é½æˆ–å³å¯¹é½, å³åœ¨â€%â€œå’Œå­—æ¯ä¹‹é—´åŠ å…¥ä¸€ä¸ªâ€-&quot; å·å¯è¯´æ˜è¾“å‡ºä¸ºå·¦å¯¹é½, å¦åˆ™ä¸ºå³å¯¹é½ã€‚<br>ä¾‹å¦‚: %-7d è¡¨ç¤ºè¾“å‡º7ä½æ•´æ•°å·¦å¯¹é½,%-10s è¡¨ç¤ºè¾“å‡º10ä¸ªå­—ç¬¦å·¦å¯¹é½.</p><h2 id="ä¸€äº›ç‰¹æ®Šè§„å®šå­—ç¬¦">ä¸€äº›ç‰¹æ®Šè§„å®šå­—ç¬¦</h2><p>å­—ç¬¦ ä½œç”¨<br>/n   æ¢è¡Œ<br>/f   æ¸…å±å¹¶æ¢é¡µ<br>/r   å›è½¦<br>/t   Tabç¬¦<br>/xhh è¡¨ç¤ºä¸€ä¸ªASCIIç ç”¨16è¿›è¡¨ç¤º,å…¶ä¸­hhæ˜¯1åˆ°2ä¸ª16è¿›åˆ¶æ•°</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æ ¼å¼åŒ–è§„å®šç¬¦&quot;&gt;æ ¼å¼åŒ–è§„å®šç¬¦&lt;/h2&gt;
&lt;p&gt;ç¬¦å· ä½œç”¨&lt;br&gt;
%d åè¿›åˆ¶æœ‰ç¬¦å·æ•´æ•°&lt;br&gt;
%u åè¿›åˆ¶æ— ç¬¦å·æ•´æ•°&lt;br&gt;
%f æµ®ç‚¹æ•°&lt;br&gt;
%s å­—ç¬¦ä¸²&lt;br&gt;
%c å•ä¸ªå­—ç¬¦&lt;br&gt;
%p æŒ‡é’ˆçš„å€¼&lt;br&gt;
%e æŒ‡æ•°å½¢å¼çš„æµ®ç‚¹æ•°&lt;br&gt;
%x, %X æ— ç¬¦å·ä»¥åå…­è¿›åˆ¶è¡¨ç¤ºçš„æ•´æ•°</summary>
    
    
    
    <category term="Program" scheme="https://asutorufa.github.io/categories/Program/"/>
    
    
    <category term="C" scheme="https://asutorufa.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸ç”¨ç­‰ä»·æ— ç©·å°çš„ä¸€èˆ¬å½¢å¼</title>
    <link href="https://asutorufa.github.io/posts/10bb899d/"/>
    <id>https://asutorufa.github.io/posts/10bb899d/</id>
    <published>2017-10-09T16:35:01.000Z</published>
    <updated>2017-10-09T16:35:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>å½“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>lim</mi><mo>â¡</mo></mrow><mrow><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>â†’</mo><mn>0</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\lim_{Ï†(x)\to0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0496em;vertical-align:-0.3552em;"></span><span class="mop"><span class="mop">lim</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">Ï†</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span><span class="mrel mtight">â†’</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span></span></span></span>æ—¶,<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>sin</mi><mo>â¡</mo><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sin Ï†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Ï†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>r</mi><mi>c</mi><mi>sin</mi><mo>â¡</mo><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">arc\sin Ï†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">rc</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Ï†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>tan</mi><mo>â¡</mo><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\tanÏ†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">tan</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Ï†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>r</mi><mi>c</mi><mi>tan</mi><mo>â¡</mo><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">arc\tanÏ†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">rc</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">tan</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Ï†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ln</mi><mo>â¡</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\ln(1+Ï†(x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Ï†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mrow><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">e^{Ï†(x)}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9713em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">Ï†</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Ï†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mrow><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a^{Ï†(x)}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9713em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">Ï†</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>ln</mi><mo>â¡</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">Ï†(x)\ln a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">ln</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mroot><mrow><mn>1</mn><mo>+</mo><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mi>n</mi></mroot><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\sqrt[n]{1+Ï†(x)}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.305em;"></span><span class="mord sqrt"><span class="root"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5933em;"><span style="top:-2.878em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size6 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.935em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-2.895em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.305em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mi>n</mi></mfrac><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{1}{n}Ï†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mrow><mi>Î¼</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">(1+Ï†(x))^{\mu-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">Î¼</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¼</mi><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\muÏ†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Î¼</span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mi>cos</mi><mo>â¡</mo><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">1-\cosÏ†(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">Ï†</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mo stretchy="false">(</mo><mi>Ï†</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{(Ï†(x))^2}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4539em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1089em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">Ï†</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;å½“&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math</summary>
        
      
    
    
    
    <category term="Math" scheme="https://asutorufa.github.io/categories/Math/"/>
    
    
    <category term="Math" scheme="https://asutorufa.github.io/tags/Math/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‰è›‹ç©ºé—´è‡ªå»ºè´´å§äº‘ç­¾åˆ°</title>
    <link href="https://asutorufa.github.io/posts/8a291f21/"/>
    <id>https://asutorufa.github.io/posts/8a291f21/</id>
    <published>2017-10-08T15:16:56.000Z</published>
    <updated>2017-10-08T15:16:56.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="â€“">â€“</h2><p>è¿™æ˜¯æˆ‘è‡ªå»ºçš„è´´å§äº‘ç­¾åˆ°:~~<a href="http://dmly.tk~~">http://dmly.tk~~</a>(å·²å¤±æ•ˆ)<br>ä¹‹åä¸ºæ•™ç¨‹</p><h3 id="æ³¨å†Œå…è´¹ç©ºé—´">æ³¨å†Œå…è´¹ç©ºé—´</h3><p>é¦–å…ˆä½ å¾—æ³¨å†Œä¸€ä¸ªä¸‰è›‹ç©ºé—´çš„è´¦å·,ä¸‰è›‹ç©ºé—´æ³¨å†Œç½‘å€:<a href="https://www.000webhost.com/members/website/list">ä¸‰è›‹ç©ºé—´</a><span id="more"></span></p><h3 id="åˆ›å»ºç½‘ç«™">åˆ›å»ºç½‘ç«™</h3><p>æ³¨å†Œå®Œæˆä¹‹åç‚¹å‡»è¿™é‡Œ æ·»åŠ ä¸€ä¸ªç©ºæ¨¡ç‰ˆ,å¦‚å›¾</p><p><img src="http://blog-1254450445.cossgp.myqcloud.com/%E6%B3%A8%E5%86%8C.png" alt="" loading="lazy"></p><p>å†™ä¸Šåå­—å’Œå¯†ç ,ç‚¹å‡»create</p><p><img src="http://blog-1254450445.cossgp.myqcloud.com/%E5%90%8D%E5%AD%97.png" alt="" loading="lazy"></p><h3 id="ftp">ftp</h3><p>ä¸‹è½½SmartFTP Clientæˆ–è€…å…¶ä»–ä½ ç†Ÿæ‚‰çš„ftpä¸Šä¼ å·¥å…·,è¿™é‡Œç™¾åº¦å°±è¡Œäº†<br>è¿›å…¥ä¸‰è›‹ç©ºé—´çš„ç®¡ç†ç½‘ç«™,ç‚¹å‡»è¿™é‡Œ,å¦‚å›¾</p><p><img src="http://blog-1254450445.cossgp.myqcloud.com/detile.png" alt="" loading="lazy"><br><img src="http://blog-1254450445.cossgp.myqcloud.com/%5D%60$%603%29%284TGPPR%5DZDA8@60W8.png" alt="" loading="lazy"></p><p>æŠŠè¿™é‡Œçš„ä¿¡æ¯å¡«å…¥SmartFTP Clientä¸­</p><p><img src="http://blog-1254450445.cossgp.myqcloud.com/NS0ID6B9@2EIS4%25%7D%7B%60KLQQ7.png" alt="" loading="lazy"><br>ç„¶åç‚¹ok</p><h3 id="ä¸Šä¼ ">ä¸Šä¼ </h3><p>è´´å§äº‘ç­¾åˆ°æºç githubåœ°å€:<a href="https://github.com/MoeNetwork/Tieba-Cloud-Sign">Tieba-Cloud-Sign</a><br>ç‚¹å‡»è¿™é‡Œä¸‹è½½zipå¹¶è§£å‹</p><p><img src="http://blog-1254450445.cossgp.myqcloud.com/GA%5D3BI8Q77U8J%7DTW2%25PD%5D4L.png" alt="" loading="lazy"></p><p>å°†è§£å‹å¾—åˆ°çš„æ‰€æœ‰æ–‡ä»¶æ‹–å…¥ftpä¸Šçš„public_htmlæ–‡ä»¶å¤¹ä¸­</p><p><img src="http://blog-1254450445.cossgp.myqcloud.com/LR%7D$$65~BX37S2%29I%7DL%60Y309.png" alt="" loading="lazy"></p><h3 id="åˆ›å»ºæ•°æ®åº“">åˆ›å»ºæ•°æ®åº“</h3><p>ç„¶åè¿›å…¥ä¸‰è›‹ç©ºé—´åˆ›å»ºæ•°æ®åº“<br>ä¸‰è›‹ç©ºé—´ä¼šè‡ªåŠ¨ç»™ä½ çš„æ•°æ®åº“åå­—å‰åŠ ä¸Šæ•°å­—,æ‰€ä»¥ä¹‹ååœ¨è´´å§å®‰è£…ä¸­è¦æ³¨æ„</p><p><img src="http://blog-1254450445.cossgp.myqcloud.com/4%25JP1V7TEKX4IE0~1UUQN%5DU.png" alt="" loading="lazy"></p><h3 id="å®‰è£…">å®‰è£…</h3><p>ä¹‹åè¿›å…¥ä½ çš„ç½‘ç«™,ç„¶åå®‰è£…å°±è¡Œäº†.</p><h3 id="åˆ›å»ºcron-job">åˆ›å»ºcron job</h3><p>å®‰è£…å®Œæˆåå°±è¦æŠŠdo.phpåŠ å…¥cron,å¦åˆ™æ˜¯ä¸ä¼šè‡ªåŠ¨ç­¾åˆ°çš„,æŒ‰å›¾ä¸­çš„æ­¥éª¤è¿›è¡Œ<br><img src="http://blog-1254450445.cossgp.myqcloud.com/P5LC1%7B%7D%7BQ%7B1_QCZ0%5DE@L0WO.png" alt="" loading="lazy"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;â€“&quot;&gt;â€“&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯æˆ‘è‡ªå»ºçš„è´´å§äº‘ç­¾åˆ°:~~&lt;a href=&quot;http://dmly.tk~~&quot;&gt;http://dmly.tk~~&lt;/a&gt;(å·²å¤±æ•ˆ)&lt;br&gt;
ä¹‹åä¸ºæ•™ç¨‹&lt;/p&gt;
&lt;h3 id=&quot;æ³¨å†Œå…è´¹ç©ºé—´&quot;&gt;æ³¨å†Œå…è´¹ç©ºé—´&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆä½ å¾—æ³¨å†Œä¸€ä¸ªä¸‰è›‹ç©ºé—´çš„è´¦å·,ä¸‰è›‹ç©ºé—´æ³¨å†Œç½‘å€:&lt;a href=&quot;https://www.000webhost.com/members/website/list&quot;&gt;ä¸‰è›‹ç©ºé—´&lt;/a&gt;</summary>
    
    
    
    <category term="å»ºç«™" scheme="https://asutorufa.github.io/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="å»ºç«™" scheme="https://asutorufa.github.io/tags/%E5%BB%BA%E7%AB%99/"/>
    
    <category term="å…è´¹" scheme="https://asutorufa.github.io/tags/%E5%85%8D%E8%B4%B9/"/>
    
  </entry>
  
  <entry>
    <title>æ›´æ”¹ç»‘å®šæ‰‹æœºå·</title>
    <link href="https://asutorufa.github.io/posts/3fee5f2/"/>
    <id>https://asutorufa.github.io/posts/3fee5f2/</id>
    <published>2017-10-08T10:08:59.000Z</published>
    <updated>2017-10-08T10:08:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»‘å®šæ‰‹æœºå·ï¼šå¾®ä¿¡ï¼Œç½‘æ˜“äº‘ï¼Œæ·˜å®åŸæ‰‹æœºå·åŠè¯ä»¶ï¼Œæ”¯ä»˜å®ï¼Œgoogle<br>é“¶è¡Œå¡ï¼Œè´´å§ï¼Œé…·å®‰ï¼Œå¾®åšéœ€è¦åŸæ‰‹æœºå·ï¼Œbilibiliï¼ˆéœ€è¦åŸæ‰‹æœºå·)<span id="more"></span><br>å¾®è½¯,æ¬¢å–œäº‘ï¼Œäº¬ä¸œï¼ˆåŸæ‰‹æœºå·åŠé“¶è¡Œå¡ï¼Œéæˆ‘çš„å®åè®¤è¯ï¼‰<br>å¤©çŒ«ï¼Œé“¶è¡Œå¡ï¼Œsteamï¼Œå°å†°ï¼Œyy(éœ€è¦åŸæ‰‹æœºå·)<br><img src="http://blog-1254450445.cossgp.myqcloud.com/%E6%8D%95%E8%8E%B72.PNG" alt="" loading="lazy"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç»‘å®šæ‰‹æœºå·ï¼šå¾®ä¿¡ï¼Œç½‘æ˜“äº‘ï¼Œæ·˜å®åŸæ‰‹æœºå·åŠè¯ä»¶ï¼Œæ”¯ä»˜å®ï¼Œgoogle&lt;br&gt;
é“¶è¡Œå¡ï¼Œè´´å§ï¼Œé…·å®‰ï¼Œå¾®åšéœ€è¦åŸæ‰‹æœºå·ï¼Œbilibiliï¼ˆéœ€è¦åŸæ‰‹æœºå·)</summary>
    
    
    
    <category term="Personally" scheme="https://asutorufa.github.io/categories/Personally/"/>
    
    
    <category term="Personally" scheme="https://asutorufa.github.io/tags/Personally/"/>
    
  </entry>
  
</feed>
